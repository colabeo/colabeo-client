function require(t,e,i){var n=require.resolve(t);if(null==n){i=i||t,e=e||"root";var s=new Error("Failed to require '"+i+"' from '"+e+"'");throw s.path=i,s.parent=e,s.require=!0,s}var o=require.modules[n];if(!o._resolving&&!o.exports){var r={};r.exports={},r.client=r.component=!0,o._resolving=!0,o.call(this,r.exports,require.relative(n),r),delete o._resolving,o.exports=r.exports}return o.exports}require.modules={},require.aliases={},require.resolve=function(t){return require.modules.hasOwnProperty(t)?t:require.aliases.hasOwnProperty(t)?require.aliases[t]:void 0},require.register=function(t,e){require.modules[t]=e},require.alias=function(t,e){if(!require.modules.hasOwnProperty(t))throw new Error("Failed to alias '"+t+"', it does not exist");require.aliases[e]=t},require.config=function(t){if(t=t||{},t.map){var e=t.map;for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];for(var s in n)if(n.hasOwnProperty(s)){var o=n[s],r=[i,s].join(":");require.alias(o,r)}}}},require.relative=function(t){return function(e){var i=[t,e].join(":");return require(i,t,e)}},require.register("famous_modules/famous/polyfills/_git_master/index.js",function(t,e){e("./classList.js"),e("./functionPrototypeBind.js"),e("./requestAnimationFrame.js")}.bind(this)),require.register("famous_modules/famous/polyfills/_git_master/classList.js",function(){"undefined"==typeof document||"classList"in document.createElement("a")||!function(t){var e="classList",i="prototype",n=(t.HTMLElement||t.Element)[i],s=Object,o=String[i].trim||function(){return this.replace(/^\s+|\s+$/g,"")},r=Array[i].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},u=function(t,e){if(""===e)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return r.call(t,e)},c=function(t){for(var e=o.call(t.className),i=e?e.split(/\s+/):[],n=0,s=i.length;s>n;n++)this.push(i[n]);this._updateClassName=function(){t.className=this.toString()}},h=c[i]=[],l=function(){return new c(this)};if(a[i]=Error[i],h.item=function(t){return this[t]||null},h.contains=function(t){return t+="",-1!==u(this,t)},h.add=function(t){t+="",-1===u(this,t)&&(this.push(t),this._updateClassName())},h.remove=function(t){t+="";var e=u(this,t);-1!==e&&(this.splice(e,1),this._updateClassName())},h.toggle=function(t){t+="",-1===u(this,t)?this.add(t):this.remove(t)},h.toString=function(){return this.join(" ")},s.defineProperty){var p={get:l,enumerable:!0,configurable:!0};try{s.defineProperty(n,e,p)}catch(d){-2146823252===d.number&&(p.enumerable=!1,s.defineProperty(n,e,p))}}else s[i].__defineGetter__&&n.__defineGetter__(e,l)}(self)}.bind(this)),require.register("famous_modules/famous/polyfills/_git_master/functionPrototypeBind.js",function(){Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},s=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,s.prototype=new n,s})}.bind(this)),require.register("famous_modules/famous/polyfills/_git_master/requestAnimationFrame.js",function(){window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(function(){t(+new Date)},1e3/60)})}.bind(this)),require.register("famous_modules/famous/transitions/easing/_git_master/index.js",function(t,e,i){var n={inQuad:function(t){return t*t},outQuad:function(t){return-(t-=1)*t+1},inOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t){return t*t*t*t},outQuart:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return--t*t*t*t*t+1},inOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t){return-1*Math.cos(t*(Math.PI/2))+1},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t){return 0==t?0:Math.pow(2,10*(t-1))},outExpo:function(t){return 1==t?1:-Math.pow(2,-10*t)+1},inOutExpo:function(t){return 0==t?0:1==t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},inCirc:function(t){return-(Math.sqrt(1-t*t)-1)},outCirc:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t){var e=1.70158,i=0,n=1;return 0==t?0:1==t?1:(i||(i=.3),e=i/(2*Math.PI)*Math.asin(1/n),-(n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)))},outElastic:function(t){var e=1.70158,i=0,n=1;return 0==t?0:1==t?1:(i||(i=.3),e=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/i)+1)},inOutElastic:function(t){var e=1.70158,i=0,n=1;return 0==t?0:2==(t/=.5)?1:(i||(i=.3*1.5),e=i/(2*Math.PI)*Math.asin(1/n),1>t?-.5*n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i):n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)*.5+1)},inBack:function(t,e){return void 0==e&&(e=1.70158),t*t*((e+1)*t-e)},outBack:function(t,e){return void 0==e&&(e=1.70158),--t*t*((e+1)*t+e)+1},inOutBack:function(t,e){return void 0==e&&(e=1.70158),(t/=.5)<1?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},inBounce:function(t){return 1-n.outBounce(1-t)},outBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t){return.5>t?.5*n.inBounce(2*t):.5*n.outBounce(2*t-1)+.5}};i.exports=n}.bind(this)),require.register("famous_modules/famous/event-handler/_git_master/index.js",function(t,e,i){function n(){this.listeners={},this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={},this.owner=this}function s(t,e){for(var i=!1,n=0;n<this.downstream.length;n++)i=this.downstream[n].emit(t,e)||i;for(var n=0;n<this.downstreamFn.length;n++)i=this.downstreamFn[n](t,e)||i;return i}n.prototype.emit=function(t,e){e||(e={});var i=this.listeners[t],n=!1;if(i)for(var o=0;o<i.length;o++)i[o].call(this.owner,e)&&(n=!0);return s.call(this,t,e)||n},n.prototype.on=function(t,e){if(!(t in this.listeners)){this.listeners[t]=[];var i=this.emit.bind(this,t);this.upstreamListeners[t]=i;for(var n=0;n<this.upstream.length;n++)this.upstream[n].on(t,i)}var s=this.listeners[t].indexOf(e);return 0>s&&this.listeners[t].push(e),this},n.prototype.unbind=function(t,e){var i=this.listeners[t].indexOf(e);i>=0&&this.listeners[t].splice(i,1)},n.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return 0>i&&e.push(t),t instanceof Function?t("pipe"):t.emit&&t.emit("pipe"),t},n.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return i>=0?(e.splice(i,1),t instanceof Function?t("unpipe"):t.emit&&t.emit("unpipe"),t):!1},n.prototype.subscribe=function(t){var e=this.upstream.indexOf(t);if(0>e){this.upstream.push(t);for(var i in this.upstreamListeners)t.on(i,this.upstreamListeners[i])}return this},n.prototype.unsubscribe=function(t){var e=this.upstream.indexOf(t);if(e>=0){this.upstream.splice(e,1);for(var i in this.upstreamListeners)t.unbind(i,this.upstreamListeners[i])}return this},n.prototype.bindThis=function(t){this.owner=t},n.setInputHandler=function(t,e){t.emit=e.emit.bind(e),e.subscribe&&e.unsubscribe&&(t.subscribe=e.subscribe.bind(e),t.unsubscribe=e.unsubscribe.bind(e))},n.setOutputHandler=function(t,e){e instanceof n&&e.bindThis(t),t.pipe=e.pipe.bind(e),t.unpipe=e.unpipe.bind(e),t.on=e.on.bind(e),t.unbind=e.unbind.bind(e)},i.exports=n}.bind(this)),require.register("famous_modules/famous/utilities/utility/_git_master/index.js",function(t,e,i){var n={};n.Curve={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},n.Direction={X:0,Y:1,Z:2},n.Origin={tl:[0,0],t:[.5,0],tr:[1,0],l:[0,.5],c:[.5,.5],r:[1,.5],bl:[0,1],b:[.5,1],br:[1,1]},n.after=function(t,e){var i=t;return function(){i--,0===i&&e.apply(this,arguments)}},n.loadURL=function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){4==this.readyState&&e&&e(this.responseText)},i.open("GET",t),i.send()},n.transformInFrontMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1],n.transformInFront={modify:function(t){return{transform:n.transformInFrontMatrix,target:t}}},n.transformBehindMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-1,1],n.transformBehind={modify:function(t){return{transform:n.transformBehindMatrix,target:t}}},n.customizeComponent=function(t,e,i){var n=function(n){t.call(this,e),n&&this.setOptions(n),i&&i.call(this)};return n.prototype=Object.create(t.prototype),n},n.createDocumentFragmentFromHTML=function(t){var e=document.createElement("div");e.innerHTML=t;for(var i=document.createDocumentFragment();e.hasChildNodes();)i.appendChild(e.firstChild);return i},n.rad2deg=function(t){return 57.2957795*t},n.deg2rad=function(t){return.0174532925*t},n.distance=function(t,e,i,n){var s=i-t,o=n-e;return Math.sqrt(s*s+o*o)},n.distance3D=function(t,e,i,n,s,o){var r=n-t,a=s-e,u=o-i;return Math.sqrt(r*r+a*a+u*u)},n.map=function(t,e,i,n,s,o){var r=(t-e)/(i-e)*(s-n)+n;return o&&(s>n?r>s?r=s:n>r&&(r=n):s>r?r=s:r>n&&(r=n)),r},n.perspective=function(t,e,i,n){var s=1/Math.tan(t/2),o=1/(i-n);return[s/e,0,0,0,0,s,0,0,0,0,(n+i)*o,-1,0,0,2*n*i*o,0]},n.ortho=function(t,e,i,n,s,o){var r=-(e+t)/(e-t),a=-(n+i)/(n-i),u=-(o+s)/(o-s);return[2/(e-t),0,0,0,0,2/(n-i),0,0,0,0,-2/(o-s),-1,r,a,u,1]},n.normalFromFM=function(t,e){var i=e[0],n=e[1],s=e[2],o=e[3],r=e[4],a=e[5],u=e[6],c=e[7],h=e[8],l=e[9],p=e[10],d=e[11],f=e[12],m=e[13],g=e[14],v=e[15],y=i*a-n*r,b=i*u-s*r,_=i*c-o*r,w=n*u-s*a,S=n*c-o*a,x=s*c-o*u,k=h*m-l*f,C=h*g-p*f,O=h*v-d*f,T=l*g-p*m,j=l*v-d*m,E=p*v-d*g,I=y*E-b*j+_*T+w*O-S*C+x*k;return I?(I=1/I,t[0]=(a*E-u*j+c*T)*I,t[1]=(u*O-r*E-c*C)*I,t[2]=(r*j-a*O+c*k)*I,t[3]=(s*j-n*E-o*T)*I,t[4]=(i*E-s*O+o*C)*I,t[5]=(n*O-i*j-o*k)*I,t[6]=(m*x-g*S+v*w)*I,t[7]=(g*_-f*x-v*b)*I,t[8]=(f*S-m*_+v*y)*I,t):null},n.clamp=function(t,e,i){return Math.max(Math.min(t,i),e)},n.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)},n.extend=function(t,e){for(var i in e)t[i]=e[i];return t},n.getDevicePixelRatio=function(){return window.devicePixelRatio?window.devicePixelRatio:1},n.supportsWebGL=function(){return/Android|Chrome|Mozilla/i.test(navigator.appCodeName)&&!!window.WebGLRenderingContext&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)},n.getSurfacePosition=function(t){function e(t){var n=s(t);if(""!==n&&void 0!==n){var o=i(n);r[0]+=o[0],r[1]+=o[1],r[2]+=o[2]}t.parentElement!==document.body&&e(t.parentNode)}function i(t){var e=[];t=n(t),e[0]=parseInt(t[12].replace(" ","")),e[1]=parseInt(t[13].replace(" ","")),e[2]=parseInt(t[14].replace(" ",""));for(var i=0;i<e.length;i++)"undefined"==typeof e[i]&&(e[i]=0);return e}function n(t){return t=t.replace("matrix3d(",""),t=t.replace(")",""),t.split(",")}function s(t){var e=t.style.webkitTransform||t.style.transform;return e}var o=t._currTarget,r=[0,0,0];return o?(e(o),r):void 0},n.hasUserMedia=function(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)},n.getUserMedia=function(){return navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia},n.isWebkit=function(){return!!window.webkitURL},n.isAndroid=function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("android")>-1},n.hasLocalStorage=function(){return!!window.localStorage},n.timeSince=function(t){var e=Date.now(),i=e-t,n=6e4,s=60*n,o=24*s;if(n>i)return"Just Now";if(s>i){var r=~~(i/n);return r+"m"}if(o>i){var a=~~(i/s);return a+"h"}var u=~~(i/o);return u+"d"},i.exports=n}.bind(this)),require.register("famous_modules/famous/options-manager/_git_master/index.js",function(t,e,i){function n(t){this._value=t,this.eventOutput=null}function s(){this.eventOutput=new o,this.eventOutput.bindThis(this),o.setOutputHandler(this,this.eventOutput)}var o=e("famous/event-handler");n.patch=function(t){for(var e=new n(t),i=1;i<arguments.length;i++)e.patch(arguments[i]);return t},n.prototype.patch=function(){for(var t=this._value,e=0;e<arguments.length;e++){var i=arguments[e];for(var n in i)n in t&&i[n]&&i[n].constructor===Object&&t[n]&&t[n].constructor===Object?(t.hasOwnProperty(n)||(t[n]=Object.create(t[n])),this.key(n).patch(i[n]),this.eventOutput&&this.eventOutput.emit("change",{id:n,value:this.key(n).value()})):this.set(n,i[n])}return this},n.prototype.setOptions=n.prototype.patch,n.prototype.key=function(t){var e=new n(this._value[t]);return(!(e._value instanceof Object)||e._value instanceof Array)&&(e._value={}),e},n.prototype.get=function(t){return this._value[t]},n.prototype.getOptions=n.prototype.get,n.prototype.set=function(t,e){var i=this.get(t);return this._value[t]=e,this.eventOutput&&e!==i&&this.eventOutput.emit("change",{id:t,value:e}),this},n.prototype.value=function(){return this._value},n.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},n.prototype.unbind=function(){return s.call(this),this.unbind.apply(this,arguments)},n.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},i.exports=n}.bind(this)),require.register("famous_modules/famous/transform/_git_master/index.js",function(t,e,i){function n(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function s(t){return Math.sqrt(n(t))}function o(t){return 0>t?-1:1}var r={};r.precision=1e-6,r.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.multiply4x4=function a(t,e){var i=[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]];return arguments.length<=2?i:a.apply(null,[i].concat(Array.prototype.slice.call(arguments,2)))},r.multiply=function u(t,e){if(!t||!e)return t||e;var i=[t[0]*e[0]+t[4]*e[1]+t[8]*e[2],t[1]*e[0]+t[5]*e[1]+t[9]*e[2],t[2]*e[0]+t[6]*e[1]+t[10]*e[2],0,t[0]*e[4]+t[4]*e[5]+t[8]*e[6],t[1]*e[4]+t[5]*e[5]+t[9]*e[6],t[2]*e[4]+t[6]*e[5]+t[10]*e[6],0,t[0]*e[8]+t[4]*e[9]+t[8]*e[10],t[1]*e[8]+t[5]*e[9]+t[9]*e[10],t[2]*e[8]+t[6]*e[9]+t[10]*e[10],0,t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14],1];return arguments.length<=2?i:u.apply(null,[i].concat(Array.prototype.slice.call(arguments,2)))},r.move=function(t,e){return e[2]||(e[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+e[0],t[13]+e[1],t[14]+e[2],1]},r.moveThen=function(t,e){t[2]||(t[2]=0);var i=t[0]*e[0]+t[1]*e[4]+t[2]*e[8],n=t[0]*e[1]+t[1]*e[5]+t[2]*e[9],s=t[0]*e[2]+t[1]*e[6]+t[2]*e[10];return r.move(e,[i,n,s])},r.translate=function(t,e,i){return void 0===i&&(i=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1]},r.scale=function(t,e,i){return void 0===i&&(i=1),[t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1]},r.rotateX=function(t){var e=Math.cos(t),i=Math.sin(t);return[1,0,0,0,0,e,i,0,0,-i,e,0,0,0,0,1]},r.rotateY=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,0,-i,0,0,1,0,0,i,0,e,0,0,0,0,1]},r.rotateZ=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,i,0,0,-i,e,0,0,0,0,1,0,0,0,0,1]},r.rotate=function(t,e,i){var n=Math.cos(t),s=Math.sin(t),o=Math.cos(e),r=Math.sin(e),a=Math.cos(i),u=Math.sin(i),c=[o*a,n*u+s*r*a,s*u-n*r*a,0,-o*u,n*a-s*r*u,s*a+n*r*u,0,r,-s*o,n*o,0,0,0,0,1];return c},r.rotateAxis=function(t,e){var i=Math.sin(e),n=Math.cos(e),s=1-n,o=t[0]*t[0]*s,r=t[0]*t[1]*s,a=t[0]*t[2]*s,u=t[1]*t[1]*s,c=t[1]*t[2]*s,h=t[2]*t[2]*s,l=t[0]*i,p=t[1]*i,d=t[2]*i,f=[o+n,r+d,a-p,0,r-d,u+n,c+l,0,a+p,c-l,h+n,0,0,0,0,1];return f},r.aboutOrigin=function(t,e){var i=t[0]-(t[0]*e[0]+t[1]*e[4]+t[2]*e[8]),n=t[1]-(t[0]*e[1]+t[1]*e[5]+t[2]*e[9]),s=t[2]-(t[0]*e[2]+t[1]*e[6]+t[2]*e[10]);return r.move(e,[i,n,s])},r.formatCSS=function(t){for(var e="matrix3d(",i=0;15>i;i++)e+=t[i]<1e-6&&t[i]>-1e-6?"0,":t[i]+",";return e+=t[15]+")"},r.skew=function(t,e,i){return[1,0,0,0,Math.tan(i),1,0,0,Math.tan(e),Math.tan(t),1,0,0,0,0,1]},r.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},r.getTranslate=function(t){return[t[12],t[13],t[14]]},r.inverse=function(t){var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],i=t[5]*t[10]-t[6]*t[9],n=t[4]*t[10]-t[6]*t[8],s=t[4]*t[9]-t[5]*t[8],o=t[1]*t[10]-t[2]*t[9],r=t[0]*t[10]-t[2]*t[8],a=t[0]*t[9]-t[1]*t[8],u=t[1]*t[6]-t[2]*t[5],c=t[0]*t[6]-t[2]*t[4],h=t[0]*t[5]-t[1]*t[4],l=t[0]*i-t[1]*n+t[2]*s,p=1/l,e=[p*i,-p*o,p*u,0,-p*n,p*r,-p*c,0,p*s,-p*a,p*h,0,0,0,0,1];return e[12]=-t[12]*e[0]-t[13]*e[4]-t[14]*e[8],e[13]=-t[12]*e[1]-t[13]*e[5]-t[14]*e[9],e[14]=-t[12]*e[2]-t[13]*e[6]-t[14]*e[10],e},r.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},r.interpret=function(t){var e=[t[0],t[1],t[2]],i=o(e[0]),a=s(e),u=[e[0]+i*a,e[1],e[2]],c=2/n(u);if(c>=1/0)return{translate:r.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];h[0]=1-c*u[0]*u[0],h[5]=1-c*u[1]*u[1],h[10]=1-c*u[2]*u[2],h[1]=-c*u[0]*u[1],h[2]=-c*u[0]*u[2],h[6]=-c*u[1]*u[2],h[4]=h[1],h[8]=h[2],h[9]=h[6];var l=r.multiply(h,t),p=[l[5],l[6]],d=o(p[0]),f=s(p),m=[p[0]+d*f,p[1]],g=2/n(m),v=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];v[5]=1-g*m[0]*m[0],v[10]=1-g*m[1]*m[1],v[6]=-g*m[0]*m[1],v[9]=v[6];var y=r.multiply(v,h),b=r.multiply(y,t),_=r.scale(b[0]<0?-1:1,b[5]<0?-1:1,b[10]<0?-1:1);b=r.multiply(b,_),y=r.multiply(_,y);var w={};return w.translate=r.getTranslate(t),w.rotate=[Math.atan2(-y[6],y[10]),Math.asin(y[2]),Math.atan2(-y[1],y[0])],w.rotate[0]||(w.rotate[0]=0,w.rotate[2]=Math.atan2(y[4],y[5])),w.scale=[b[0],b[5],b[10]],w.skew=[Math.atan2(b[9],w.scale[2]),Math.atan2(b[8],w.scale[2]),Math.atan2(b[4],w.scale[0])],Math.abs(w.rotate[0])+Math.abs(w.rotate[2])>1.5*Math.PI&&(w.rotate[1]=Math.PI-w.rotate[1],w.rotate[1]>Math.PI&&(w.rotate[1]-=2*Math.PI),w.rotate[1]<-Math.PI&&(w.rotate[1]+=2*Math.PI),w.rotate[0]<0?w.rotate[0]+=Math.PI:w.rotate[0]-=Math.PI,w.rotate[2]<0?w.rotate[2]+=Math.PI:w.rotate[2]-=Math.PI),w},r.average=function(t,e,i){i=void 0===i?.5:i;for(var n=r.interpret(t),s=r.interpret(e),o={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;3>a;a++)o.translate[a]=(1-i)*n.translate[a]+i*s.translate[a],o.rotate[a]=(1-i)*n.rotate[a]+i*s.rotate[a],o.scale[a]=(1-i)*n.scale[a]+i*s.scale[a],o.skew[a]=(1-i)*n.skew[a]+i*s.skew[a];return r.build(o)},r.build=function(t){var e=r.scale(t.scale[0],t.scale[1],t.scale[2]),i=r.skew(t.skew[0],t.skew[1],t.skew[2]),n=r.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return r.move(r.multiply(n,i,e),t.translate)},r.equals=function(t,e){return!r.notEquals(t,e)},r.notEquals=function(t,e){return t===e?!1:t&&e?!(t&&e)||t[12]!==e[12]||t[13]!==e[13]||t[14]!==e[14]||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[8]!==e[8]||t[9]!==e[9]||t[10]!==e[10]:!0},r.normalizeRotation=function(t){var e=t.slice(0);for((e[0]==Math.PI/2||e[0]==-Math.PI/2)&&(e[0]=-e[0],e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]>Math.PI/2&&(e[0]=e[0]-Math.PI,e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]<-Math.PI/2&&(e[0]=e[0]+Math.PI,e[1]=-Math.PI-e[1],e[2]-=Math.PI);e[1]<-Math.PI;)e[1]+=2*Math.PI;for(;e[1]>=Math.PI;)e[1]-=2*Math.PI;for(;e[2]<-Math.PI;)e[2]+=2*Math.PI;for(;e[2]>=Math.PI;)e[2]-=2*Math.PI;return e},i.exports=r}.bind(this)),require.register("app/models/call-collection.js",function(t,e,i){var n=e("call");i.exports=Backbone.Collection.extend({localStorage:new Backbone.LocalStorage("colabeo-call-collection"),model:n,missed:function(){return this.filter(function(t){return t.isMissed()})},all:function(){return this.filter(function(){return!0})},comparator:function(t){return-1*t.get("time")}})}.bind(this)),require.register("app/models/call.js",function(t,e,i){i.exports=Backbone.Model.extend({defaults:{firstname:"John",lastname:"Doe",email:"",phone:"",pictureUrl:"",cid:"testcid"},isMissed:function(){return!this.get("success")&&"incoming"==this.get("type")}})}.bind(this)),require.register("app/models/chat-collection.js",function(t,e,i){var n=e("conversation");i.exports=Backbone.Firebase.Collection.extend({model:n,comparator:function(t){return 1*t.get("time")}})}.bind(this)),require.register("app/models/contact-collection.js",function(t,e,i){var n=e("contact");i.exports=Backbone.Firebase.Collection.extend({model:n,favorites:function(){return this.filter(function(t){return t.get("favorite")})},searchContact:function(t){return this.filter(function(e){return-1!=e.get("firstname").toUpperCase().indexOf(t)||-1!=e.get("lastname").toUpperCase().indexOf(t)?e.get("firstname"):void 0})},searchContactByEmail:function(t){return this.filter(function(e){return-1!=e.get("email").toUpperCase().indexOf(t)?e.get("email"):void 0})},lastnameInitial:function(t){function e(t){return/^[a-zA-Z]+$/.test(t[0])}return this.filter(function(i){var n;return i.get("lastname")?(n=e(i.get("lastname"))?i.get("lastname")[0].toUpperCase():"#",n==t):i.get("firstname")?(n=e(i.get("firstname"))?i.get("firstname")[0].toUpperCase():"#",n==t):i.get("email")?(n=e(i.get("email"))?i.get("email")[0].toUpperCase():"#",n==t):void 0})},comparator:function(t){var e=t.get("lastname"),i=t.get("firstname");return/^[a-zA-Z]+$/.test(e[0])||(e="zzzz"+e),(e+" "+i).toUpperCase()}})}.bind(this)),require.register("app/models/contact.js",function(t,e,i){i.exports=Backbone.Model.extend({whiteList:["email","firstname","lastname","id","cid","dcr","favorite","phone","facebook","google","linkedin","github","twitter"],toJSON:function(){return _.pick(this.attributes,this.whiteList)},toggleFavorite:function(){this.set({favorite:!this.get("favorite")})}})}.bind(this)),require.register("app/models/conversation-collection.js",function(t,e,i){var n=e("conversation");i.exports=Backbone.Collection.extend({localStorage:new Backbone.LocalStorage("colabeo-chat-colection"),model:n,comparator:function(t){return 1*t.get("time")}})}.bind(this)),require.register("app/models/conversation.js",function(t,e,i){var n=e("settings");i.exports=Backbone.Model.extend({defaults:{content:"",type:"text",time:"",source:"",from:""},isLocal:function(){var t=n.getAppSettings(),e=t.get("cid");return"local"==this.get("source")||this.get("from")==e}})}.bind(this)),require.register("app/models/index.js",function(t,e,i){i.exports={Call:e("call"),RecentsCollection:e("recents-collection"),Contact:e("contact"),ContactCollection:e("contact-collection"),Conversation:e("conversation"),ConversationCollection:e("conversation-collection"),ChatCollection:e("chat-collection"),Settings:e("settings"),SocialContactCollection:e("social-contact-collection")}}.bind(this)),require.register("app/models/recents-collection.js",function(t,e,i){var n=e("call");i.exports=Backbone.Firebase.Collection.extend({model:n,missed:function(){return this.filter(function(t){return t.isMissed()})},all:function(){return this.filter(function(){return!0})},comparator:function(t){return-1*t.get("time")},getUnreadCount:function(){return this.filter(function(t){return!t.get("read")}).length}})}.bind(this)),require.register("app/models/settings.js",function(t,e,i){var n=Backbone.Model.extend({localStorage:new Backbone.LocalStorage("colabeo-settings-1"),defaults:{cid:"default",email:"default@colabeo.com",linkAccounts:{facebook:!1,google:!1,twitter:!1,linkedin:!1,github:!1,yammer:!1},firstname:"John",lastname:"Colabeo",notification:!1,camera:!0,video:!0,audio:!0,blur:void 0,firebaseUrl:"https://colabeo.firebaseio.com/",pHost:"dashboard.colabeo.com",pPort:9e3,pSecure:!0}});i.exports=n,i.exports.getAppSettings=_.memoize(function(t){return t&&(this.appSettings=new n({id:t.objectId}),this.appSettings.fetch(),this.appSettings.save({cid:t.objectId,email:t.email||"",firstname:t.firstname||t.username||"",lastname:t.lastname||"",username:t.username||""}),this.appSettings.me=t),this.appSettings})}.bind(this)),require.register("app/models/social-contact-collection.js",function(t,e,i){var n=e("contact");i.exports=Backbone.Collection.extend({model:n,parse:function(t){var e=[];return t.map(function(t){if(!t.firstname){if(!t.name)return;var i=t.name.split(" ");t.lastname=i.pop(),t.firstname=i.join(" ")}e.push(t)}.bind(this)),e},searchContact:function(t){return this.filter(function(e){return-1!=e.get("firstname").toUpperCase().indexOf(t)||-1!=e.get("lastname").toUpperCase().indexOf(t)?e.get("firstname"):void 0})},comparator:function(t){var e=t.get("lastname"),i=t.get("firstname");return/^[a-zA-Z]+$/.test(e[0])||(e="zzzz"+e),(e+" "+i).toUpperCase()}})}.bind(this)),require.register("app/vendor/index.js",function(t,e){e("zepto"),window.$=Zepto,window._=e("underscore"),window.Backbone=e("backbone"),window.Backbone.$=Zepto,e("handlebars"),e("backbone.localStorage"),e("firebase"),e("backbone-firebase"),e("peer"),e("notify"),e("phono"),e("oauthpopup")}.bind(this)),require.register("app/vendor/att.js",function(t,e,i){(function(){function e(){this.callbacks={}}function n(t){var i=this,n=t||{},s=this.config={apiKey:"",user:u.uuid(),jid:"",log:!0,ringTone:"",ringbackTone:"",dependencyBaseUrl:"//js.att.io"},o={onReady:"ready",onUnReady:"unready",onError:"error",onCallBegin:"callBegin",onCallEnd:"callEnd",onOutgoingCall:"outgoingCall",onCalling:"calling"},r={onError:"error",onCallBegin:"callBegin",onCallEnd:"callEnd"},a=function(){return u.isFunc(t.onIncomingCall)?t.onIncomingCall:t.phone&&u.isFunc(t.phone.onIncomingCall)?t.phone.onIncomingCall:function(){}}();return e.call(this),u.extend(this.config,n),this.config.incomingCallHandler=a,delete this.config.onIncomingCall,this.config.phone&&delete this.config.phone.onIncomingCall,this.phone=this,this.on("incomingCall",a),u.each(o,function(t,e){u.isFunc(i.config[t])&&(i.on(e,i.config[t]),i.config[t]=function(t){i.emit(e,t)})}),n.phone&&u.each(r,function(t,e){u.isFunc(i.config.phone[t])&&(i.on(e,i.config.phone[t]),i.config.phone[t]=function(t){i.emit(e,t)})}),this.config.log&&this.on("*",function(t,e){console.log("att.js event:",t,e)}),u.getMe(this.config.apiKey,function(t){t.version=s.version||u.getQueryParam("version")||t.version,s.version=t.version,s.myNumber=t.number,console.log("using API version:",s.version),i.emit("user",t),"a1"===s.version||"a2"===s.version?$.getScript(s.dependencyBaseUrl+"/js/att."+s.version+".js",function(){i.fetchDependencies(s.version)}):$.getScript(s.dependencyBaseUrl+"/js/phono.06.js",function(){s.token=s.apiKey,s.apiKey="7826110523f1241fcfd001859a67128d",s.connectionUrl="http://gw.att.io:8080/http-bind",i.fetchDependencies()})}),i}function s(t,i){var n=this;return this._att=t,this._call=i,this.id=i.id,e.call(this),this.on("*",function(t){n._att.emit(t,n)}),this._call.bind({onRing:function(){n.emit("ring")},onAnswer:function(){n.emit("callBegin")},onHangup:function(){n.emit("callEnd")},onHold:function(){n.emit("hold")},onRetrieve:function(){n.emit("retrieve")},onWaiting:function(){n.emit("waiting")},onError:function(){n.emit("error")}}),this}var o=this,r={},a={},u=r.util={_uuidCounter:0,uuid:function(){return Math.random().toString(16).substring(2)+(u._uuidCounter++).toString(16)},slice:Array.prototype.slice,isFunc:function(t){return"[object Function]"==Object.prototype.toString.call(t)},extend:function(t){return this.slice.call(arguments,1).forEach(function(e){if(e)for(var i in e)t[i]=e[i]}),t},each:function(t,e){if(t)if(t instanceof Array)t.forEach(e);else for(var i in t)e(i,t[i])},getQueryParam:function(t){var e=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),i="[\\?&]"+e+"=([^&#]*)",n=RegExp(i),s=n.exec(window.location.search);return s?decodeURIComponent(s[1].replace(/\+/g," ")):void 0},h2sSupport:function(){return"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.4 (KHTML, like Gecko) Chrome/19.0.1077.0 Safari/536.4"==window.navigator.userAgent||"Mozilla/5.0 (iPhone; CPU iPhone OS 6_0_1 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Mobile/10A523"==window.navigator.userAgent||window.webkitPeerConnection00&&-1!==window.navigator.userAgent.indexOf("Chrome/24")},getMe:function(t,e){var i="https://auth.tfoundry.com",n={access_token:t};return a.me?e(a.me):(console.log(n),void $.ajax({data:n,dataType:"json",url:i+"/me.json",success:function(t){a.me=t,$.ajax({data:n,dataType:"json",url:i+"/users/"+t.uid+"/api_services/webrtc.json",success:function(i){var n=i&&i.version,s=i&&i.options&&i.options.phone_number;t.version=n?"a"+n:"a1",t.number=s||t.phone_number,e(t)}})}}))}},c={};c.stringify=function(t){var e,i=c.parse(t),n=i.length,s="1"===i.charAt(0),o=i.split("");return n>(s?11:10)?i:!s&&4>n?i:(s&&o.splice(0,1),s?n>1&&(e=4-n,e=e>0?e:0,o.splice(0,0," ("),o.splice(4,0,Array(e+1).join(" ")+") "),n>7&&o.splice(8,0,"-")):n>7?(o.splice(0,0,"("),o.splice(4,0,") "),o.splice(8,0,"-")):n>3&&o.splice(3,0,"-"),(s?"1":"")+o.join(""))},c.parse=function(t){return(t+"").toUpperCase().replace(/[A-Z]/g,function(t){return 0|(t.charCodeAt(0)-65)/3+2-("SVYZ".indexOf(t)>-1)}).replace(/\D/g,"")},c.getCallable=function(t,e){var i=e||"us",n=c.parse(t);return 10!==n.length?"us"==i&&11===n.length&&"1"===n.charAt(0)?n:!1:"us"==i?"1"+n:void 0},r.phoneNumber=c,e.prototype.on=function(t){var e=3===arguments.length,i=e?arguments[1]:void 0,n=e?arguments[2]:arguments[1];return n._groupName=i,(this.callbacks[t]=this.callbacks[t]||[]).push(n),this},e.prototype.once=function(t,e){function i(){n.off(t,i),e.apply(this,arguments)}var n=this;return this.on(t,i),this},e.prototype.releaseGroup=function(t){var e,i,n,s;for(e in this.callbacks)for(s=this.callbacks[e],i=0,n=s.length;n>i;i++)s[i]._groupName===t&&(s.splice(i,1),i--,n--);return this},e.prototype.off=function(t,e){var i,n=this.callbacks[t];return n?1===arguments.length?(delete this.callbacks[t],this):(i=n.indexOf(e),n.splice(i,1),this):this},e.prototype.emit=function(t){var e,i,n=[].slice.call(arguments,1),s=this.callbacks[t],o=this.getWildcardCallbacks(t);if(s)for(e=0,i=s.length;i>e;++e)s[e].apply(this,n);if(o)for(e=0,i=o.length;i>e;++e)o[e].apply(this,[t].concat(n));return this},e.prototype.getWildcardCallbacks=function(t){var e,i,n=[];for(e in this.callbacks)i=e.split("*"),("*"===e||2===i.length&&t.slice(0,i[1].length)===i[1])&&(n=n.concat(this.callbacks[e]));return n},n.prototype=new e,n.prototype.fetchDependencies=function(t){var e=this,i=this.config;"a1"===t?u.h2sSupport()?(console.log("setting up wcgphono"),this.phono=$.wcgphono(u.extend(i,{phone:{onIncomingCall:e._normalizeNonPhonoCallHandlers.bind(e)},onReady:function(){e.emit("ready")}}))):alert("Please use the special Ericsson build of Chromium. It can be downloaded from: http://js.att.io/browsers"):"a2"===t?u.h2sSupport()?(console.log("setting up h2sphono"),this.phono=$.h2sphono(u.extend(i,{phone:{onIncomingCall:e._normalizeNonPhonoCallHandlers.bind(e)},onReady:function(){e.emit("ready")
}}))):alert("Please use the special Ericsson build of Chromium. It can be downloaded from: http://js.att.io/browsers"):(console.log("setting up phono"),this.phono=$.phono(u.extend(i,{phone:{onIncomingCall:e._normalizeNonPhonoCallHandlers.bind(e),ringTone:"",ringbackTone:""},onReady:function(){e.sessionId=this.sessionId,u.getMe(i.apiKey,function(t){e.bindNumberToPhonoSession(t.number,e.sessionId,function(){e.emit("ready")})})}})))},n.prototype.bindNumberToPhonoSession=function(t,e,i){$.ajax({url:"http://binder.api.tfoundry.com/session/"+t+"/"+e,type:"POST",success:function(){i()}})},n.prototype.disconnect=function(){this.phono.disconnect(),this.phono=null},n.prototype.connected=function(){return!!this.phono},n.prototype._normalizeNonPhonoCallHandlers=function(t){var e,i,n=t.call;n&&(e=new s(this,n),i=e.initiator||e._call.recipient||"",i=i.replace("tel:","").replace("sip:",""),i=i.split("@")[0],e.call=e,this.emit("incomingCall",e,r.phoneNumber.parse(i)))},n.prototype.dial=function(t,e){var i,n,o=this,a=r.phoneNumber.getCallable(t);return this.emit("calling",t),i="a3"===this.config.version?this.phono.phone.dial("sip:"+a+"@12.208.176.26",{callerId:o.config.myNumber+"@phono06.tfoundry.com"}):this.phono.phone.dial(a,{}),n=new s(this,i),n.bind(e),n.emit("ring"),this.emit("outgoingCall",n),n},s.prototype=new e,s.prototype.bind=function(t){var e=this,i={onRing:"ring",onAnswer:"callBegin",onHangup:"callEnd",onHold:"hold",onRetrieve:"retrieve",onWaiting:"waiting",onError:"error"},n=t||{};this._att,u.each(i,function(t,i){u.isFunc(n[t])&&e.on(i,n[t])})},s.prototype.answer=function(){return this._call.answer()},s.prototype.hangup=function(){return this._call.hangup()},s.prototype.digit=function(t){return this._call.digit(t)},s.prototype.pushToTalk=function(t){return this._call.pushToTalk(t)},s.prototype.talking=function(t){return this._call.talking(t)},s.prototype.mute=function(t){return this._call.mute(t)},s.prototype.hold=function(t){return this._call.hold(t)},s.prototype.volume=function(t){return this._call.volume(t)},s.prototype.gain=function(t){return this._call.gain(t)},s.prototype.__defineGetter__("initiator",function(){return this._call.initiator}),s.prototype.transferto=function(t){var e=r.phoneNumber.getCallable(t);this._call.transferto(e)},r.Phone=n,o.jQuery&&(o.jQuery.att=function(t){return new n(t)}),"undefined"!=typeof t?i.exports=r:(o.ATT||(o.ATT={}),u.extend(o.ATT,r))}).call(this)}.bind(this)),require.register("app/vendor/backbone-firebase.js",function(){!function(){var t=window._,e=window.Backbone;e.Firebase=function(t){this._fbref=t,this._children=[],"string"==typeof t&&(this._fbref=new Firebase(t)),this._fbref.on("child_added",this._childAdded,this),this._fbref.on("child_moved",this._childMoved,this),this._fbref.on("child_changed",this._childChanged,this),this._fbref.on("child_removed",this._childRemoved,this)},t.extend(e.Firebase.prototype,{_childAdded:function(e,i){var n=e.val();if(n.id=e.name(),i){var s=t.find(this._children,function(t){return t.id==i});this._children.splice(this._children.indexOf(s)+1,0,n)}else this._children.unshift(n)},_childMoved:function(e,i){var n=e.val();this._children=t.reject(this._children,function(t){return t.id==n.id}),this._childAdded(e,i)},_childChanged:function(e){var i=e.val();i.id=e.name();var n=t.find(this._children,function(t){return t.id==i.id});this._children[this._children.indexOf(n)]=i},_childRemoved:function(e){var i=e.val();this._children=t.reject(this._children,function(t){return t.id==i.id})},create:function(e,i){e.id||(e.id=this._fbref.ref().push().name());var n=e.toJSON();this._fbref.ref().child(e.id).set(n,t.bind(function(t){t?i("Could not create model "+e.id):i(null,n)},this))},read:function(e,i){if(!e.id)return void t.defer(i,"Invalid model ID provided to read");var n=t.find(this._children,function(t){return t.id==e.id});t.defer(i,null,this._children[n])},readAll:function(e,i){t.defer(i,null,this._children)},update:function(t,e){var i=t.toJSON();this._fbref.ref().child(t.id).update(i,function(n){n?e("Could not update model "+t.id,null):e(null,i)})},"delete":function(t,e){this._fbref.ref().child(t.id).remove(function(i){i?e("Could not delete model "+t.id):e(null,t)})},ref:function(){return this._fbref}}),e.Firebase.sync=function(t,i,n,s){var o=i.firebase||i.collection.firebase;"function"==typeof n&&(n={success:n,error:s}),"read"==t&&void 0===i.id&&(t="readAll"),o[t].apply(o,[i,function(t,s){t?(i.trigger("error",i,t,n),"0.9.10"===e.VERSION?n.error(i,t,n):n.error(t)):(i.trigger("sync",i,s,n),"0.9.10"===e.VERSION?n.success(i,s,n):n.success(s))}])},e.oldSync=e.sync,e.sync=function(t,i,n,s){var o=e.oldSync;return(i.firebase||i.collection&&i.collection.firebase)&&(o=e.Firebase.sync),o.apply(this,[t,i,n,s])},e.Firebase.Collection=e.Collection.extend({sync:function(){this._log("Sync called on a Firebase collection, ignoring.")},fetch:function(){this._log("Fetch called on a Firebase collection, ignoring.")},constructor:function(i,n){switch(e.Collection.apply(this,arguments),n&&n.firebase&&(this.firebase=n.firebase),typeof this.firebase){case"object":break;case"string":this.firebase=new Firebase(this.firebase);break;case"function":this.firebase=this.firebase();break;default:throw new Error("Invalid firebase reference created")}this.firebase.on("child_added",t.bind(this._childAdded,this)),this.firebase.on("child_moved",t.bind(this._childMoved,this)),this.firebase.on("child_changed",t.bind(this._childChanged,this)),this.firebase.on("child_removed",t.bind(this._childRemoved,this)),this.firebase.once("value",t.bind(function(){this.trigger("sync",this,null,null)},this)),this.listenTo(this,"change",this._updateModel,this),this.listenTo(this,"destroy",this._removeModel,this),this._suppressEvent=!1},comparator:function(t){return t.id},add:function(e,i){var n=this._parseModels(e);i=i?t.clone(i):{},i.success=t.isFunction(i.success)?i.success:function(){};for(var s=0;s<n.length;s++){var o=n[s],r=this.firebase.ref().child(o.id);i.silent===!0&&(this._suppressEvent=!0),r.set(o,t.bind(i.success,o))}return n},remove:function(e,i){var n=this._parseModels(e);i=i?t.clone(i):{},i.success=t.isFunction(i.success)?i.success:function(){};for(var s=0;s<n.length;s++){var o=n[s],r=this.firebase.ref().child(o.id);i.silent===!0&&(this._suppressEvent=!0),r.set(null,t.bind(i.success,o))}return n},create:function(i,n){if(n=n?t.clone(n):{},n.wait&&this._log("Wait option provided to create, ignoring."),i=e.Collection.prototype._prepareModel.apply(this,[i,n]),!i)return!1;var s=this.add([i],n);return s[0]},reset:function(e,i){i=i?t.clone(i):{},this.remove(this.models,{silent:!0});var n=this.add(e,{silent:!0});return i.silent||this.trigger("reset",this,i),n},_log:function(t){console&&console.log&&console.log(t)},_parseModels:function(e){var i=[];e=t.isArray(e)?e.slice():[e];for(var n=0;n<e.length;n++){var s=e[n];s.toJSON&&"function"==typeof s.toJSON&&(s=s.toJSON()),s.id||(s.id=this.firebase.ref().push().name()),i.push(s)}return i},_childAdded:function(i){var n=i.val();n.id||(t.isObject(n)||(n={}),n.id=i.name()),this._suppressEvent===!0?(this._suppressEvent=!1,e.Collection.prototype.add.apply(this,[n],{silent:!0})):e.Collection.prototype.add.apply(this,[n]),this.get(n.id)._remoteAttributes=n},_childMoved:function(t){this._log("_childMoved called with "+t.val())},_childChanged:function(e){var i=e.val();i.id||(i.id=e.name());var n=t.find(this.models,function(t){return t.id==i.id});if(!n)throw new Error("Could not find model with ID "+i.id);this._preventSync(n,!0),n._remoteAttributes=i;var s=t.difference(t.keys(n.attributes),t.keys(i));t.each(s,function(t){n.unset(t)}),n.set(i),this._preventSync(n,!1)},_childRemoved:function(t){var i=t.val();i.id||(i.id=t.name()),this._suppressEvent===!0?(this._suppressEvent=!1,e.Collection.prototype.remove.apply(this,[i],{silent:!0})):e.Collection.prototype.remove.apply(this,[i])},_updateModel:function(e){if(!e._remoteChanging){var i=e._remoteAttributes||{},n=e.toJSON(),s={},o=t.union(t.keys(i),t.keys(n));if(t.each(o,function(e){t.has(n,e)?n[e]!=i[e]&&(s[e]=n[e]):s[e]=null}),t.size(s))if(t.has(s,".priority")){var r=this.firebase.ref().child(e.id),a=n[".priority"];delete n[".priority"],r.setWithPriority(n,a)}else this.firebase.ref().child(e.id).update(s)}},_removeModel:function(e,i,n){n=n?t.clone(n):{},n.success=t.isFunction(n.success)?n.success:function(){};var s=this.firebase.ref().child(e.id);s.set(null,t.bind(n.success,e))},_preventSync:function(t,e){t._remoteChanging=e}}),e.Firebase.Model=e.Model.extend({save:function(){this._log("Save called on a Firebase model, ignoring.")},destroy:function(t){this.firebase.ref().set(null,this._log),this.trigger("destroy",this,this.collection,t),t.success&&t.success(this,null,t)},constructor:function(i,n){var s=t.result(this,"defaults");switch(this.once("sync",function(){this.set(t.defaults(this.toJSON(),s))}),e.Model.apply(this,arguments),n&&n.firebase&&(this.firebase=n.firebase),typeof this.firebase){case"object":break;case"string":this.firebase=new Firebase(this.firebase);break;case"function":this.firebase=this.firebase();break;default:throw new Error("Invalid firebase reference created")}this.firebase.on("value",t.bind(this._modelChanged,this)),this._listenLocalChange(!0)},_listenLocalChange:function(t){t?this.on("change",this._updateModel,this):this.off("change",this._updateModel,this)},_updateModel:function(e){var i=e.changedAttributes();t.each(e.changed,function(t,e){("undefined"==typeof t||null===t)&&("id"==e?delete i[e]:i[e]=null)}),t.size(i)&&this.firebase.ref().update(i,this._log)},_modelChanged:function(e){var i=e.val();if("object"==typeof i&&null!==i){var n=t.difference(t.keys(this.attributes),t.keys(i)),s=this;t.each(n,function(t){s.unset(t)})}this._listenLocalChange(!1),this.set(i),this._listenLocalChange(!0),this.trigger("sync",this,null,null)},_log:function(t){"undefined"!=typeof t&&null!==t&&console&&console.log&&console.log(t)}})}()}.bind(this)),require.register("app/vendor/backbone.js",function(t,e){!function(i,n){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(t,e,s){i.Backbone=n(i,s,t,e)});else if("undefined"!=typeof t){var s,o=e("underscore");n(i,t,o,s)}else i.Backbone=n(i,{},i._,i.jQuery||i.Zepto||i.ender||i.$)}(this,function(t,e,i,n){{var s=t.Backbone,o=[],r=(o.push,o.slice);o.splice}e.VERSION="1.1.1",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,i){if(!c(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var s=this,o=i.once(function(){s.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,n)},off:function(t,e,n){var s,o,r,a,u,h,l,p;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(a=t?[t]:i.keys(this._events),u=0,h=a.length;h>u;u++)if(t=a[u],r=this._events[t]){if(this._events[t]=s=[],e||n)for(l=0,p=r.length;p>l;l++)o=r[l],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&s.push(o);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&h(i,e),n&&h(n,arguments),this},stopListening:function(t,e,n){var s=this._listeningTo;if(!s)return this;var o=!e&&!n;n||"object"!=typeof e||(n=this),t&&((s={})[t._listenId]=t);for(var r in s)t=s[r],t.off(e,n,this),(o||i.isEmpty(t._events))&&delete this._listeningTo[r];return this}},u=/\s+/,c=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(n));return!1}if(u.test(i)){for(var o=i.split(u),r=0,a=o.length;a>r;r++)t[e].apply(t,[o[r]].concat(n));return!1}return!0},h=function(t,e){var i,n=-1,s=t.length,o=e[0],r=e[1],a=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o,r);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o,r,a);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}},l={listenTo:"on",listenToOnce:"once"};i.each(l,function(t,e){a[e]=function(e,n,s){var o=this._listeningTo||(this._listeningTo={}),r=e._listenId||(e._listenId=i.uniqueId("l"));return o[r]=e,s||"object"!=typeof n||(s=this),e[t](n,s,this),this}}),a.bind=a.on,a.unbind=a.off,i.extend(e,a);var p=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var s,o,r,a,u,c,h,l;if(null==t)return this;if("object"==typeof t?(o=t,n=e):(o={})[t]=e,n||(n={}),!this._validate(o,n))return!1;r=n.unset,u=n.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),l=this.attributes,h=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(s in o)e=o[s],i.isEqual(l[s],e)||a.push(s),i.isEqual(h[s],e)?delete this.changed[s]:this.changed[s]=e,r?delete l[s]:l[s]=e;if(!u){a.length&&(this._pending=n);for(var p=0,d=a.length;d>p;p++)this.trigger("change:"+a[p],this,l[a[p]],n)}if(c)return this;if(!u)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e,n=!1,s=this._changing?this._previousAttributes:this.attributes;for(var o in t)i.isEqual(s[o],e=t[o])||((n||(n={}))[o]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),void e.trigger("sync",e,i,t)):!1},F(this,t),this.sync("read",this,t)},save:function(t,e,n){var s,o,r,a=this.attributes;if(null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0},n),s&&!n.wait){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;s&&n.wait&&(this.attributes=i.extend({},a,s)),void 0===n.parse&&(n.parse=!0);var u=this,c=n.success;return n.success=function(t){u.attributes=a;var e=u.parse(t,n);return n.wait&&(e=i.extend(s||{},e)),i.isObject(e)&&!u.set(e,n)?!1:(c&&c(u,t,n),void u.trigger("sync",u,t,n))},F(this,n),o=this.isNew()?"create":n.patch?"patch":"update","patch"===o&&(n.attrs=s),r=this.sync(o,this,n),s&&n.wait&&(this.attributes=a),r},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&s(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;F(this,t);var o=this.sync("delete",this,t);return t.wait||s(),o},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||B();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var d=["keys","values","pairs","invert","pick","omit"];i.each(d,function(t){p.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};i.extend(f.prototype,a,{model:p,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,g))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var s,o,r,a;for(s=0,o=t.length;o>s;s++)a=t[s]=this.get(t[s]),a&&(delete this._byId[a.id],delete this._byId[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,e.silent||(e.index=r,a.trigger("remove",a,this,e)),this._removeReference(a,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,m),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var s,o,r,a,u,c,h,l=e.at,d=this.model,f=this.comparator&&null==l&&e.sort!==!1,g=i.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},_=e.add,w=e.merge,S=e.remove,x=!f&&_&&S?[]:!1;for(s=0,o=t.length;o>s;s++){if(u=t[s]||{},r=u instanceof p?a=u:u[d.prototype.idAttribute||"id"],c=this.get(r))S&&(b[c.cid]=!0),w&&(u=u===a?a.attributes:u,e.parse&&(u=c.parse(u,e)),c.set(u,e),f&&!h&&c.hasChanged(g)&&(h=!0)),t[s]=c;else if(_){if(a=t[s]=this._prepareModel(u,e),!a)continue;v.push(a),this._addReference(a,e)}a=c||a,!x||!a.isNew()&&b[a.id]||x.push(a),b[a.id]=!0}if(S){for(s=0,o=this.length;o>s;++s)b[(a=this.models[s]).cid]||y.push(a);y.length&&this.remove(y,e)}if(v.length||x&&x.length)if(f&&(h=!0),this.length+=v.length,null!=l)for(s=0,o=v.length;o>s;s++)this.models.splice(l+s,0,v[s]);else{x&&(this.models.length=0);var k=x||v;for(s=0,o=k.length;o>s;s++)this.models.push(k[s])}if(h&&this.sort({silent:!0}),!e.silent){for(s=0,o=v.length;o>s;s++)(a=v[s]).trigger("add",a,this,e);(h||x&&x.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,s=this.models.length;s>n;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return r.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},F(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,s=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),s&&s(t,i,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof p)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(v,function(t){f.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var y=["groupBy","countBy","sortBy","indexBy"];i.each(y,function(t){f.prototype[t]=function(e,n){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,n)}});var b=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];i.extend(b.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var s=e.match(_),o=s[1],r=s[2];n=i.bind(n,this),o+=".delegateEvents"+this.cid,""===r?this.$el.on(o,n):this.$el.on(o,r,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,s){var o=x[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var r={type:o,dataType:"json"};if(s.url||(r.url=i.result(n,"url")||B()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),s.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){r.type="POST",s.emulateJSON&&(r.data._method=o);var a=s.beforeSend;s.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===r.type||s.emulateJSON||(r.processData=!1),"PATCH"===r.type&&S&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var u=s.xhr=e.ajax(i.extend(r,s));return n.trigger("request",n,u,s),u};var S=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var k=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,O=/(\(\?)?:\w+/g,T=/\*\w+/g,j=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(k.prototype,a,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var o=this;return e.history.route(t,function(i){var r=o._extractParameters(t,i);o.execute(s,r),o.trigger.apply(o,["route:"+n].concat(r)),o.trigger("route",n,r),e.history.trigger("route",o,n,r)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(j,"\\$&").replace(C,"(?:$1)?").replace(O,function(t,e){return e?t:"([^/?]+)"}).replace(T,"([^?]*?)"),new RegExp("^"+t+"(?:\\?(.*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var E=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},I=/^[#\/]|\s+$/g,A=/^\/+|\/+$/g,P=/msie [\w.]+/,N=/\/$/,M=/#.*$/;E.started=!1,i.extend(E.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(N,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(I,"")},start:function(t){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),s=document.documentMode,o=P.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s);if(this.root=("/"+this.root+"/").replace(A,"/"),o&&this._wantsHashChange){var r=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=r.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(I,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!E.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(M,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new E;var R=function(t,e){var n,s=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e);var o=function(){this.constructor=n};return o.prototype=s.prototype,n.prototype=new o,t&&i.extend(n.prototype,t),n.__super__=s.prototype,n};p.extend=f.extend=k.extend=b.extend=E.extend=R;var B=function(){throw new Error('A "url" property or function must be specified')},F=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e})}.bind(this)),require.register("app/vendor/backbone.localStorage.js",function(t,e,i){!function(n,s){"object"==typeof t&&"function"==typeof e?i.exports=s(e("underscore"),e("backbone")):"function"==typeof define&&define.amd?define(["underscore","backbone"],function(t,e){return s(t||n._,e||n.Backbone)}):s(_,Backbone)}(this,function(t,e){function i(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function n(){return i()+i()+"-"+i()+"-"+i()+"-"+i()+"-"+i()+i()+i()}return e.LocalStorage=window.Store=function(t){if(!this.localStorage)throw"Backbone.localStorage: Environment does not support localStorage.";this.name=t;var e=this.localStorage().getItem(this.name);this.records=e&&e.split(",")||[]},t.extend(e.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(t){return t.id||(t.id=n(),t.set(t.idAttribute,t.id)),this.localStorage().setItem(this.name+"-"+t.id,JSON.stringify(t)),this.records.push(t.id.toString()),this.save(),this.find(t)},update:function(e){return this.localStorage().setItem(this.name+"-"+e.id,JSON.stringify(e)),t.include(this.records,e.id.toString())||this.records.push(e.id.toString()),this.save(),this.find(e)},find:function(t){return this.jsonData(this.localStorage().getItem(this.name+"-"+t.id))},findAll:function(){return(t.chain||t)(this.records).map(function(t){return this.jsonData(this.localStorage().getItem(this.name+"-"+t))},this).compact().value()},destroy:function(e){return e.isNew()?!1:(this.localStorage().removeItem(this.name+"-"+e.id),this.records=t.reject(this.records,function(t){return t===e.id.toString()}),this.save(),e)},localStorage:function(){return localStorage},jsonData:function(t){return t&&JSON.parse(t)},_clear:function(){var e=this.localStorage(),i=new RegExp("^"+this.name+"-");e.removeItem(this.name),(t.chain||t)(e).keys().filter(function(t){return i.test(t)}).each(function(t){e.removeItem(t)}),this.records.length=0},_storageSize:function(){return this.localStorage().length}}),e.LocalStorage.sync=window.Store.sync=e.localSync=function(t,i,n){var s,o,r=i.localStorage||i.collection.localStorage,a=e.$.Deferred&&e.$.Deferred();try{switch(t){case"read":s=void 0!=i.id?r.find(i):r.findAll();break;case"create":s=r.create(i);break;case"update":s=r.update(i);break;case"delete":s=r.destroy(i)}}catch(u){o=22===u.code&&0===r._storageSize()?"Private browsing is unsupported":u.message}return s?(n&&n.success&&("0.9.10"===e.VERSION?n.success(i,s,n):n.success(s)),a&&a.resolve(s)):(o=o?o:"Record Not Found",n&&n.error&&("0.9.10"===e.VERSION?n.error(i,o,n):n.error(o)),a&&a.reject(o)),n&&n.complete&&n.complete(s),a&&a.promise()},e.ajaxSync=e.sync,e.getSyncMethod=function(t){return t.localStorage||t.collection&&t.collection.localStorage?e.localSync:e.ajaxSync},e.sync=function(t,i,n){return e.getSyncMethod(i).apply(this,[t,i,n])
},e.LocalStorage})}.bind(this)),require.register("app/vendor/firebase.js",function(exports,require,module){(function(){function g(t){throw t}function ba(t){return function(){return this[t]}}function o(t){return function(){return t}}function da(){}function ea(t){t.mb=function(){return t.ed?t.ed:t.ed=new t}}function fa(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var i=Object.prototype.toString.call(t);if("[object Window]"==i)return"object";if("[object Array]"==i||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==i||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function s(t){return t!==aa}function ga(t){var e=fa(t);return"array"==e||"object"==e&&"number"==typeof t.length}function u(t){return"string"==typeof t}function ha(t){return"number"==typeof t}function ia(t){var e=typeof t;return"object"==e&&t!=k||"function"==e}function ja(t){return t.call.apply(t.bind,arguments)}function ka(t,e){if(t||g(Error()),2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function v(){return v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka,v.apply(k,arguments)}function la(t,e){function i(){}i.prototype=e.prototype,t.Yd=e.prototype,t.prototype=new i}function ma(a){if(a=String(a),/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}g(Error("Invalid JSON string: "+a))}function na(){this.gc=aa}function oa(t,e,i){switch(typeof e){case"string":pa(e,i);break;case"number":i.push(isFinite(e)&&!isNaN(e)?e:"null");break;case"boolean":i.push(e);break;case"undefined":i.push("null");break;case"object":if(e==k){i.push("null");break}if("array"==fa(e)){var n=e.length;i.push("[");for(var s="",o=0;n>o;o++)i.push(s),s=e[o],oa(t,t.gc?t.gc.call(e,String(o),s):s,i),s=",";i.push("]");break}i.push("{"),n="";for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(s=e[o],"function"!=typeof s&&(i.push(n),pa(o,i),i.push(":"),oa(t,t.gc?t.gc.call(e,o,s):s,i),n=","));i.push("}");break;case"function":break;default:g(Error("Unknown type: "+typeof e))}}function pa(t,e){e.push('"',t.replace(ra,function(t){if(t in qa)return qa[t];var e=t.charCodeAt(0),i="\\u";return 16>e?i+="000":256>e?i+="00":4096>e&&(i+="0"),qa[t]=i+e.toString(16)}),'"')}function sa(t){return"undefined"!=typeof JSON&&s(JSON.parse)?JSON.parse(t):ma(t)}function w(t){if("undefined"!=typeof JSON&&s(JSON.stringify))t=JSON.stringify(t);else{var e=[];oa(new na,t,e),t=e.join("")}return t}function ta(t){for(var e=[],i=0,n=0;n<t.length;n++){var s=t.charCodeAt(n);s>=55296&&56319>=s&&(s-=55296,n++,y(n<t.length,"Surrogate pair missing trail surrogate."),s=65536+(s<<10)+(t.charCodeAt(n)-56320)),128>s?e[i++]=s:(2048>s?e[i++]=s>>6|192:(65536>s?e[i++]=s>>12|224:(e[i++]=s>>18|240,e[i++]=s>>12&63|128),e[i++]=s>>6&63|128),e[i++]=63&s|128)}return e}function z(t,e,i,n){var s;e>n?s="at least "+e:n>i&&(s=0===i?"none":"no more than "+i),s&&g(Error(t+" failed: Was called with "+n+(1===n?" argument.":" arguments.")+" Expects "+s+"."))}function A(t,e,i){var n="";switch(e){case 1:n=i?"first":"First";break;case 2:n=i?"second":"Second";break;case 3:n=i?"third":"Third";break;case 4:n=i?"fourth":"Fourth";break;default:ua.assert(l,"errorPrefix_ called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+(n+" argument ")}function B(t,e,i,n){(!n||s(i))&&"function"!=fa(i)&&g(Error(A(t,e,n)+"must be a valid function."))}function va(t,e,i){s(i)&&(!ia(i)||i===k)&&g(Error(A(t,e,j)+"must be a valid context object."))}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function wa(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function za(t){return u(t)&&0!==t.length&&!xa.test(t)}function Aa(t,e,i){(!i||s(e))&&Ba(A(t,1,i),e)}function Ba(t,e,i,n){if(i||(i=0),n||(n=[]),s(e)||g(Error(t+"contains undefined"+Ca(n))),"function"==fa(e)&&g(Error(t+"contains a function"+Ca(n)+" with contents: "+e.toString())),Da(e)&&g(Error(t+"contains "+e.toString()+Ca(n))),i>1e3&&g(new TypeError(t+"contains a cyclic object value ("+n.slice(0,100).join(".")+"...)")),u(e)&&e.length>10485760/3&&10485760<ta(e).length&&g(Error(t+"contains a string greater than 10485760 utf8 bytes"+Ca(n)+" ('"+e.substring(0,50)+"...')")),ia(e))for(var o in e)C(e,o)&&(".priority"!==o&&".value"!==o&&".sv"!==o&&!za(o)&&g(Error(t+"contains an invalid key ("+o+")"+Ca(n)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')),n.push(o),Ba(t,e[o],i+1,n),n.pop())}function Ca(t){return 0==t.length?"":" in property '"+t.join(".")+"'"}function Ea(t,e){ia(e)||g(Error(A(t,1,l)+" must be an object containing the children to replace.")),Aa(t,e,l)}function Fa(t,e,i,n){(!n||s(i))&&!(i===k||ha(i)||u(i)||ia(i)&&C(i,".sv")||!g(Error(A(t,e,n)+"must be a valid firebase priority (a string, number, or null).")))}function Ga(t,e,i){if(!i||s(e))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:g(Error(A(t,1,i)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".'))}}function Ha(t,e){s(e)&&!za(e)&&g(Error(A(t,2,j)+'was an invalid key: "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").'))}function Ia(t,e){(!u(e)||0===e.length||ya.test(e))&&g(Error(A(t,1,l)+'was an invalid path: "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"'))}function D(t,e){".info"===E(e)&&g(Error(t+" failed: Can't modify data under /.info/"))}function F(t,e,i,n,o,r,a){this.n=t,this.path=e,this.Da=i,this.da=n,this.va=o,this.Ba=r,this.Ra=a,s(this.da)&&s(this.Ba)&&s(this.Da)&&g("Query: Can't combine startAt(), endAt(), and limit().")}function Ka(t){var e={};return s(t.da)&&(e.sp=t.da),s(t.va)&&(e.sn=t.va),s(t.Ba)&&(e.ep=t.Ba),s(t.Ra)&&(e.en=t.Ra),s(t.Da)&&(e.l=t.Da),s(t.da)&&s(t.va)&&t.da===k&&t.va===k&&(e.vf="l"),e}function Ja(t,e,i){var n={};return e&&i?(n.cancel=e,B(t,3,n.cancel,j),n.T=i,va(t,4,n.T)):e&&("object"==typeof e&&e!==k?n.T=e:"function"==typeof e?n.cancel=e:g(Error(A(t,3,j)+"must either be a cancel callback or a context object."))),n}function J(t){if(t instanceof J)return t;if(1==arguments.length){this.m=t.split("/");for(var e=0,i=0;i<this.m.length;i++)0<this.m[i].length&&(this.m[e]=this.m[i],e++);this.m.length=e,this.Z=0}else this.m=arguments[0],this.Z=arguments[1]}function E(t){return t.Z>=t.m.length?k:t.m[t.Z]}function Ma(t){var e=t.Z;return e<t.m.length&&e++,new J(t.m,e)}function Na(t,e){var i=E(t);return i===k?e:i===E(e)?Na(Ma(t),Ma(e)):void g("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Oa(){this.children={},this.sc=0,this.value=k}function Pa(t,e,i){this.Ea=t?t:"",this.Ab=e?e:k,this.z=i?i:new Oa}function K(t,e){for(var i,n=e instanceof J?e:new J(e),s=t;(i=E(n))!==k;)s=new Pa(i,s,wa(s.z.children,i)||new Oa),n=Ma(n);return s}function Qa(t,e){y("undefined"!=typeof e),t.z.value=e,Ra(t)}function Sa(t,e,i,n){i&&!n&&e(t),t.w(function(t){Sa(t,e,j,n)}),i&&n&&e(t)}function Ta(t,e,i){for(t=i?t:t.parent();t!==k;){if(e(t))return j;t=t.parent()}return l}function Ra(t){if(t.Ab!==k){var e=t.Ab,i=t.Ea,n=t.f(),s=C(e.z.children,i);n&&s?(delete e.z.children[i],e.z.sc--,Ra(e)):!n&&!s&&(e.z.children[i]=t.z,e.z.sc++,Ra(e))}}function Ua(t,e){this.Oa=t?t:Va,this.ca=e?e:Wa}function Va(t,e){return e>t?-1:t>e?1:0}function Xa(t,e){for(var i,n=t.ca,s=k;!n.f();){if(i=t.Oa(e,n.key),0===i){if(n.left.f())return s?s.key:k;for(n=n.left;!n.right.f();)n=n.right;return n.key}0>i?n=n.left:i>0&&(s=n,n=n.right)}g(Error("Attempted to find predecessor key for a nonexistent key.  What gives?"))}function Ya(t,e){for(this.md=e,this.Tb=[];!t.f();)this.Tb.push(t),t=t.left}function Za(t){if(0===t.Tb.length)return k;var e,i=t.Tb.pop();for(e=t.md?t.md(i.key,i.value):{key:i.key,value:i.value},i=i.right;!i.f();)t.Tb.push(i),i=i.left;return e}function $a(t,e,i,n,s){this.key=t,this.value=e,this.color=i!=k?i:j,this.left=n!=k?n:Wa,this.right=s!=k?s:Wa}function ab(t){return t.left.f()?t:ab(t.left)}function eb(t){return t.left.f()?Wa:(!t.left.O()&&!t.left.left.O()&&(t=fb(t)),t=t.copy(k,k,k,eb(t.left),k),db(t))}function db(t){return t.right.O()&&!t.left.O()&&(t=ib(t)),t.left.O()&&t.left.left.O()&&(t=gb(t)),t.left.O()&&t.right.O()&&(t=hb(t)),t}function fb(t){return t=hb(t),t.right.left.O()&&(t=t.copy(k,k,k,k,gb(t.right)),t=ib(t),t=hb(t)),t}function ib(t){var e;return e=t.copy(k,k,j,k,t.right.left),t.right.copy(k,k,t.color,e,k)}function gb(t){var e;return e=t.copy(k,k,j,t.left.right,k),t.left.copy(k,k,t.color,k,e)}function hb(t){var e,i;return e=t.left.copy(k,k,!t.left.color,k,k),i=t.right.copy(k,k,!t.right.color,k,k),t.copy(k,k,!t.color,e,i)}function jb(){}function kb(t){this.Pb=t,this.bc="firebase:"}function lb(){this.ib={}}function mb(t){try{if("undefined"!=typeof window&&"undefined"!=typeof window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new kb(e)}}catch(i){}return new lb}function pb(t,e,i,n){this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.hc=e,this.Sb=i,this.fa=n||nb.get("host:"+t)||this.host}function qb(t,e){e!==t.fa&&(t.fa=e,"s-"===t.fa.substr(0,2)&&nb.set("host:"+t.host,t.fa))}function rb(){}function sb(){this.B=[],this.rc=[],this.ud=[],this.Zb=[],this.Zb[0]=128;for(var t=1;64>t;++t)this.Zb[t]=0;this.reset()}function tb(t,e){var i;i||(i=0);for(var n=t.ud,s=i;i+64>s;s+=4)n[s/4]=e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3];for(s=16;80>s;s++){var o=n[s-3]^n[s-8]^n[s-14]^n[s-16];n[s]=4294967295&(o<<1|o>>>31)}i=t.B[0];for(var r,a=t.B[1],u=t.B[2],c=t.B[3],h=t.B[4],s=0;80>s;s++)40>s?20>s?(o=c^a&(u^c),r=1518500249):(o=a^u^c,r=1859775393):60>s?(o=a&u|c&(a|u),r=2400959708):(o=a^u^c,r=3395469782),o=(i<<5|i>>>27)+o+h+r+n[s]&4294967295,h=c,c=u,u=4294967295&(a<<30|a>>>2),a=i,i=o;t.B[0]=t.B[0]+i&4294967295,t.B[1]=t.B[1]+a&4294967295,t.B[2]=t.B[2]+u&4294967295,t.B[3]=t.B[3]+c&4294967295,t.B[4]=t.B[4]+h&4294967295}function Cb(){return ca.navigator?ca.navigator.userAgent:k}function Mb(t,e){if(ga(t)||g(Error("encodeByteArray takes an array as a parameter")),!Kb){Kb={},Lb={};for(var i=0;65>i;i++)Kb[i]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i),Lb[i]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(i)}for(var i=e?Lb:Kb,n=[],s=0;s<t.length;s+=3){var o=t[s],r=s+1<t.length,a=r?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,h=o>>2,o=(3&o)<<4|a>>4,a=(15&a)<<2|c>>6,c=63&c;u||(c=64,r||(a=64)),n.push(i[h],i[o],i[a],i[c])}return n.join("")}function y(t,e){t||g(Error("Firebase INTERNAL ASSERT FAILED:"+e))}function Pb(t){var e=ta(t),t=new sb;t.update(e);var e=[],i=8*t.Vc;56>t.ob?t.update(t.Zb,56-t.ob):t.update(t.Zb,64-(t.ob-56));for(var n=63;n>=56;n--)t.rc[n]=255&i,i/=256;for(tb(t,t.rc),n=i=0;5>n;n++)for(var s=24;s>=0;s-=8)e[i++]=t.B[n]>>s&255;return Mb(e)}function Qb(){for(var t="",e=0;e<arguments.length;e++)t=ga(arguments[e])?t+Qb.apply(k,arguments[e]):"object"==typeof arguments[e]?t+w(arguments[e]):t+arguments[e],t+=" ";return t}function L(){if(Sb===j&&(Sb=l,Rb===k&&ob.get("logging_enabled")===j&&Tb(j)),Rb){var t=Qb.apply(k,arguments);Rb(t)}}function Ub(t){return function(){L(t,arguments)}}function Vb(){if("undefined"!=typeof console){var t="FIREBASE INTERNAL ERROR: "+Qb.apply(k,arguments);"undefined"!=typeof console.error?console.error(t):console.log(t)}}function Wb(){var t=Qb.apply(k,arguments);g(Error("FIREBASE FATAL ERROR: "+t))}function M(){if("undefined"!=typeof console){var t="FIREBASE WARNING: "+Qb.apply(k,arguments);"undefined"!=typeof console.warn?console.warn(t):console.log(t)}}function Da(t){return ha(t)&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)}function Xb(t,e){return t!==e?t===k?-1:e===k?1:typeof t!=typeof e?"number"==typeof t?-1:1:t>e?1:-1:0}function Yb(t,e){if(t===e)return 0;var i=Zb(t),n=Zb(e);return i!==k?n!==k?i-n:-1:n!==k?1:e>t?-1:1}function $b(t,e){return e&&t in e?e[t]:void g(Error("Missing required key ("+t+") in object: "+w(e)))}function La(t){if("object"!=typeof t||t===k)return w(t);var e,i=[];for(e in t)i.push(e);i.sort(),e="{";for(var n=0;n<i.length;n++)0!==n&&(e+=","),e+=w(i[n]),e+=":",e+=La(t[i[n]]);return e+"}"}function ac(t,e){if(t.length<=e)return[t];for(var i=[],n=0;n<t.length;n+=e)i.push(n+e>t?t.substring(n,t.length):t.substring(n,n+e));return i}function bc(t,e){if("array"==fa(t))for(var i=0;i<t.length;++i)e(i,t[i]);else cc(t,e)}function dc(t){y(!Da(t));var e,i,n,s;for(0===t?(n=i=0,e=-1/0===1/t?1:0):(e=0>t,t=Math.abs(t),t>=Math.pow(2,-1022)?(n=Math.min(Math.floor(Math.log(t)/Math.LN2),1023),i=n+1023,n=Math.round(t*Math.pow(2,52-n)-Math.pow(2,52))):(i=0,n=Math.round(t/Math.pow(2,-1074)))),s=[],t=52;t;t-=1)s.push(n%2?1:0),n=Math.floor(n/2);for(t=11;t;t-=1)s.push(i%2?1:0),i=Math.floor(i/2);for(s.push(e?1:0),s.reverse(),e=s.join(""),i="",t=0;64>t;t+=8)n=parseInt(e.substr(t,8),2).toString(16),1===n.length&&(n="0"+n),i+=n;return i.toLowerCase()}function Zb(t){return ec.test(t)&&(t=Number(t),t>=-2147483648&&2147483647>=t)?t:k}function fc(t){try{t()}catch(e){setTimeout(function(){g(e)})}}function gc(t,e){this.D=t,y(this.D!==k,"LeafNode shouldn't be created with null value."),this.Ya="undefined"!=typeof e?e:k}function ic(t,e){return Xb(t.ia,e.ia)||Yb(t.name,e.name)}function jc(t,e){return Yb(t.name,e.name)}function kc(t,e){return Yb(t,e)}function O(t,e){this.o=t||new Ua(kc),this.Ya="undefined"!=typeof e?e:k}function lc(t,e,i){O.call(this,t,i),e===k&&(e=new Ua(ic),t.Ca(function(t,i){e=e.oa({name:t,ia:i.j()},i)})),this.ua=e}function Q(t,e){if(t===k)return N;var i=k;if("object"==typeof t&&".priority"in t?i=t[".priority"]:"undefined"!=typeof e&&(i=e),y(i===k||"string"==typeof i||"number"==typeof i||"object"==typeof i&&".sv"in i),"object"==typeof t&&".value"in t&&t[".value"]!==k&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new gc(t,i);if(t instanceof Array){var n=N;return cc(t,function(e,i){if(C(t,i)&&"."!==i.substring(0,1)){var s=Q(e);(s.N()||!s.f())&&(n=n.H(i,s))}}),n.za(i)}var s=[],o={},r=l;bc(t,function(e,i){if("string"!=typeof i||"."!==i.substring(0,1)){var n=Q(t[i]);n.f()||(r=r||n.j()!==k,s.push({name:i,ia:n.j()}),o[i]=n)}});var a=nc(s,o,l);if(r){var u=nc(s,o,j);return new lc(a,u,i)}return new O(a,i)}function qc(t){this.count=parseInt(Math.log(t+1)/oc),this.$c=this.count-1,this.wd=t+1&parseInt(Array(this.count+1).join("1"),2)}function nc(t,e,i){function n(n,o){var r=c-n,h=c;c-=n;var l=t[r].name,r=new $a(i?t[r]:l,e[l],o,k,s(r+1,h));a?a.left=r:u=r,a=r}function s(n,o){var r=o-n;if(0==r)return k;if(1==r){var r=t[n].name,a=i?t[n]:r;return new $a(a,e[r],l,k,k)}var a=parseInt(r/2)+n,u=s(n,a),c=s(a+1,o),r=t[a].name,a=i?t[a]:r;return new $a(a,e[r],l,u,c)}var o=i?ic:jc;t.sort(o);var r,o=new qc(t.length),a=k,u=k,c=t.length;for(r=0;r<o.count;++r){var h=!(o.wd&1<<o.$c);o.$c--;var p=Math.pow(2,o.count-(r+1));h?n(p,l):(n(p,l),n(p,j))}return r=u,o=i?ic:kc,r!==k?new Ua(o,r):new Ua(o)}function hc(t){return"number"==typeof t?"number:"+dc(t):"string:"+t}function R(t,e){this.z=t,this.ec=e}function rc(t){y("array"==fa(t)&&0<t.length),this.vd=t,this.sb={}}function sc(t,e){var i,n=t.vd;t:{i=function(t){return t===e};for(var s=n.length,o=u(n)?n.split(""):n,r=0;s>r;r++)if(r in o&&i.call(aa,o[r])){i=r;break t}i=-1}y(0>i?k:u(n)?n.charAt(i):n[i],"Unknown event: "+e)}function tc(){rc.call(this,["visible"]);var t,e;if("undefined"!=typeof document&&"undefined"!=typeof document.addEventListener&&("undefined"!=typeof document.hidden?(e="visibilitychange",t="hidden"):"undefined"!=typeof document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):"undefined"!=typeof document.msHidden?(e="msvisibilitychange",t="msHidden"):"undefined"!=typeof document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.gb=j,e){var i=this;document.addEventListener(e,function(){var e=!document[t];e!==i.gb&&(i.gb=e,i.Xc("visible",e))},l)}}function uc(t){this.Jc=t,this.ac=[],this.Qa=0,this.tc=-1,this.Ka=k}function cc(t,e){for(var i in t)e.call(aa,t[i],i,t)}function vc(t){var e,i={};for(e in t)i[e]=t[e];return i}function wc(){this.jb={}}function xc(t,e,i){s(i)||(i=1),C(t.jb,e)||(t.jb[e]=0),t.jb[e]+=i}function yc(t){this.xd=t,this.Qb=k}function zc(t,e){this.Sc={},this.kc=new yc(t),this.u=e,setTimeout(v(this.kd,this),10+6e4*Math.random())}function Cc(t){return t=t.toString(),Ac[t]||(Ac[t]=new wc),Ac[t]}function Dc(){this.set={}}function Ec(t,e){for(var i in t.set)C(t.set,i)&&e(i,t.set[i])}function Hc(t,e,i){this.uc=t,this.e=Ub(t),this.Xd=e,this.$=Cc(e),this.jc=i,this.kb=l,this.Lb=function(t){e.host!==e.fa&&(t.ns=e.Sb);var i,n=[];for(i in t)t.hasOwnProperty(i)&&n.push(i+"="+t[i]);return(e.hc?"https://":"http://")+e.fa+"/.lp?"+n.join("&")}}function Kc(t,e,i,n){if(this.Lb=n,this.ha=i,this.Lc=new Dc,this.Cb=[],this.vc=Math.floor(1e8*Math.random()),this.ic=j,this.mc=Nb(),window[Fc+this.mc]=t,window[Gc+this.mc]=e,t=document.createElement("iframe"),t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||L("No IE domain setting required")}catch(s){t.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())"}}else g("Document body has not initialized. Wait to initialize Firebase until after the document is ready.");t.contentDocument?t.Aa=t.contentDocument:t.contentWindow?t.Aa=t.contentWindow.document:t.document&&(t.Aa=t.document),this.Y=t,t="",this.Y.src&&"javascript:"===this.Y.src.substr(0,11)&&(t='<script>document.domain="'+document.domain+'";</script>'),t="<html><body>"+t+"</body></html>";try{this.Y.Aa.open(),this.Y.Aa.write(t),this.Y.Aa.close()}catch(o){L("frame writing exception"),o.stack&&L(o.stack),L(o)}}function Mc(t){if(t.pc&&t.ic&&t.Lc.count()<(0<t.Cb.length?2:1)){t.vc++;var e={};e.id=t.Gd,e.pw=t.Hd,e.ser=t.vc;for(var e=t.Lb(e),i="",n=0;0<t.Cb.length&&1870>=t.Cb[0].ad.length+30+i.length;){var s=t.Cb.shift(),i=i+"&seg"+n+"="+s.Qd+"&ts"+n+"="+s.Vd+"&d"+n+"="+s.ad;n++}var e=e+i,o=t.vc;t.Lc.add(o);var r=function(){t.Lc.remove(o),Mc(t)},a=setTimeout(r,25e3);return Lc(t,e,function(){clearTimeout(a),r()}),j}return l}function Lc(t,e,i){setTimeout(function(){try{if(t.ic){var n=t.Y.Aa.createElement("script");n.type="text/javascript",n.async=j,n.src=e,n.onload=n.onreadystatechange=function(){var t=n.readyState;t&&"loaded"!==t&&"complete"!==t||(n.onload=n.onreadystatechange=k,n.parentNode&&n.parentNode.removeChild(n),i())},n.onerror=function(){L("Long-poll script failed to load: "+e),t.ic=l,t.close()},t.Y.Aa.body.appendChild(n)}}catch(s){}},1)}function S(t,e,i){this.uc=t,this.e=Ub(this.uc),this.frames=this.qb=k,this.Uc=0,this.$=Cc(e),this.Pa=(e.hc?"wss://":"ws://")+e.fa+"/.ws?v=5",e.host!==e.fa&&(this.Pa=this.Pa+"&ns="+e.Sb),i&&(this.Pa=this.Pa+"&s="+i)}function Rc(t,e){if(t.frames.push(e),t.frames.length==t.Uc){var i=t.frames.join("");t.frames=k,i=sa(i),t.Id(i)}}function Qc(t){clearInterval(t.qb),t.qb=setInterval(function(){t.W&&t.W.send("0"),Qc(t)},45e3)}function Pc(t){t.ba&&(clearTimeout(t.ba),t.ba=k)}function Sc(){var t=[];S&&S.isAvailable()&&!nb.get("previous_websocket_failure")?t.push(S):bc(Tc,function(e,i){i&&i.isAvailable()&&t.push(i)}),this.lc=t}function Uc(t,e,i,n,s,o){this.id=t,this.e=Ub("c:"+this.id+":"),this.Jc=i,this.xb=n,this.R=s,this.Ic=o,this.K=e,this.$b=[],this.Yc=0,this.Wc=new Sc,this.wa=0,this.e("Connection created"),Vc(this)}function Vc(t){var e,i=t.Wc;0<i.lc.length?e=i.lc[0]:g(Error("No transports available")),t.L=new e("c:"+t.id+":"+t.Yc++,t.K);var n=Wc(t,t.L),s=Xc(t,t.L);t.Jb=t.L,t.Hb=t.L,t.A=k,setTimeout(function(){t.L&&t.L.open(n,s)},0)}function Xc(t,e){return function(i){e===t.L?(t.L=k,i||0!==t.wa?1===t.wa&&t.e("Realtime connection lost."):(t.e("Realtime connection failed."),"s-"===t.K.fa.substr(0,2)&&(nb.remove("host:"+t.K.host),t.K.fa=t.K.host)),t.close()):e===t.A?(i=t.A,t.A=k,(t.Jb===i||t.Hb===i)&&t.close()):t.e("closing an old connection")}}function Wc(t,e){return function(i){if(2!=t.wa)if(e===t.Hb){var n=$b("t",i),i=$b("d",i);if("c"==n){if(n=$b("t",i),"d"in i)if(i=i.d,"h"===n){var n=i.ts,s=i.v,o=i.h;t.jc=i.s,qb(t.K,o),0==t.wa&&(t.L.start(),i=t.L,t.e("Realtime connection established."),t.L=i,t.wa=1,t.xb&&(t.xb(n),t.xb=k),"5"!==s&&M("Protocol version mismatch detected"),i=1<t.Wc.lc.length?t.Wc.lc[1]:k)&&(t.A=new i("c:"+t.id+":"+t.Yc++,t.K,t.jc),t.A.open(Wc(t,t.A),Xc(t,t.A)))}else if("n"===n){for(t.e("recvd end transmission on primary"),t.Hb=t.A,i=0;i<t.$b.length;++i)t.Xb(t.$b[i]);t.$b=[],Yc(t)}else"s"===n?(t.e("Connection shutdown command received. Shutting down..."),t.Ic&&(t.Ic(i),t.Ic=k),t.R=k,t.close()):"r"===n?(t.e("Reset packet received.  New host: "+i),qb(t.K,i),1===t.wa?t.close():($c(t),Vc(t))):Vb("e"===n?"Server Error: "+i:"Unknown control packet command: "+n)}else"d"==n&&t.Xb(i)}else e===t.A?(n=$b("t",i),i=$b("d",i),"c"==n?"t"in i&&(i=i.t,"a"===i?(t.A.start(),t.e("sending client ack on secondary"),t.A.send({t:"c",d:{t:"a",d:{}}}),t.e("Ending transmission on primary"),t.L.send({t:"c",d:{t:"n",d:{}}}),t.Jb=t.A,Yc(t)):"r"===i&&(t.e("Got a reset on secondary, closing it"),t.A.close(),(t.Jb===t.A||t.Hb===t.A)&&t.close())):"d"==n?t.$b.push(i):g(Error("Unknown protocol layer: "+n))):t.e("message on old connection")}}function Yc(t){t.Jb===t.A&&t.Hb===t.A&&(t.e("cleaning up and promoting a connection: "+t.A.uc),t.L=t.A,t.A=k)}function $c(t){t.e("Shutting down all connections"),t.L&&(t.L.close(),t.L=k),t.A&&(t.A.close(),t.A=k)}function ad(){if(rc.call(this,["online"]),this.yb=j,"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener){var t=this;window.addEventListener("online",function(){t.yb||t.Xc("online",j),t.yb=j},l),window.addEventListener("offline",function(){t.yb&&t.Xc("online",l),t.yb=l},l)}}function bd(t,e,i,n,s,o){this.id=cd++,this.e=Ub("p:"+this.id+":"),this.Na=j,this.ga={},this.U=[],this.zb=0,this.wb=[],this.P=l,this.qa=1e3,this.Rb=3e5,this.Yb=e||da,this.Wb=i||da,this.vb=n||da,this.Kc=s||da,this.Bc=o||da,this.K=t,this.Oc=k,this.Gb={},this.Pd=0,this.rb=this.Fc=k,dd(this,0),tc.mb().Xa("visible",this.Kd,this),-1===t.host.indexOf("fblocal")&&ad.mb().Xa("online",this.Jd,this)}function fd(t,e,i,n,s){t.e("Listen on "+e+" for "+i);var o={p:e},n=wb(n,function(t){return Ka(t)});"{}"!==i&&(o.q=n),o.h=t.Bc(e),t.Ga("l",o,function(n){t.e("listen response",n),n=n.s,"ok"!==n&&gd(t,e,i),s&&s(n)})}function hd(t){var e=t.Ha;t.P&&e&&t.Ga("auth",{cred:e.yd},function(i){var n=i.s,i=i.d||"error";"ok"!==n&&t.Ha===e&&delete t.Ha,t.vb("ok"===n),e.bd?"ok"!==n&&e.Nb&&e.Nb(n,i):(e.bd=j,e.X&&e.X(n,i))})}function id(t,e,i,n){e=e.toString(),gd(t,e,i)&&t.P&&(t.e("Unlisten on "+e+" for "+i),e={p:e},n=wb(n,function(t){return Ka(t)}),"{}"!==i&&(e.q=n),t.Ga("u",e))}function jd(t,e,i,n){t.P?kd(t,"o",e,i,n):t.wb.push({Mc:e,action:"o",data:i,C:n})}function kd(t,e,i,n,s){i={p:i,d:n},t.e("onDisconnect "+e,i),t.Ga(e,i,function(t){s&&setTimeout(function(){s(t.s)},0)})}function ld(t,e,i,n,o,r){i={p:i,d:n},s(r)&&(i.h=r),t.U.push({action:e,ld:i,C:o}),t.zb++,e=t.U.length-1,t.P&&md(t,e)}function md(t,e){var i=t.U[e].action,n=t.U[e].ld,s=t.U[e].C;t.U[e].Md=t.P,t.Ga(i,n,function(n){t.e(i+" response",n),delete t.U[e],t.zb--,0===t.zb&&(t.U=[]),s&&s(n.s)})}function dd(t,e){y(!t.ja,"Scheduling a connect when we're already connected/ing?"),t.Sa&&clearTimeout(t.Sa),t.Sa=setTimeout(function(){if(t.Sa=k,t.Na){t.e("Making a connection attempt"),t.Fc=(new Date).getTime(),t.rb=k;var e=v(t.Xb,t),i=v(t.xb,t),n=v(t.gd,t),s=t.id+":"+ed++;t.ja=new Uc(s,t.K,e,i,n,function(e){M(e+" ("+t.K.toString()+")"),t.Na=l})}},e)}function gd(t,e,i){e=new J(e).toString(),i||(i="{}");var n=t.ga[e][i];return delete t.ga[e][i],n}function nd(){this.o=this.D=k}function od(t,e,i){if(e.f())t.D=i,t.o=k;else if(t.D!==k)t.D=t.D.ya(e,i);else{t.o==k&&(t.o=new Dc);var n=E(e);t.o.contains(n)||t.o.add(n,new nd),t=t.o.get(n),e=Ma(e),od(t,e,i)}}function pd(t,e){if(e.f())return t.D=k,t.o=k,j;if(t.D!==k){if(t.D.N())return l;var i=t.D;return t.D=k,i.w(function(e,i){od(t,new J(e),i)}),pd(t,e)}return t.o!==k?(i=E(e),e=Ma(e),t.o.contains(i)&&pd(t.o.get(i),e)&&t.o.remove(i),t.o.f()?(t.o=k,j):l):j}function qd(t,e,i){t.D!==k?i(e,t.D):t.w(function(t,n){var s=new J(e.toString()+"/"+t);qd(n,s,i)})}function rd(){this.ra=N}function T(t,e){return t.ra.Q(e)}function U(t,e,i){t.ra=t.ra.ya(e,i)}function sd(){this.sa=new rd,this.I=new rd,this.ma=new rd,this.Bb=new Pa}function td(t,e){for(var i=T(t.sa,e),n=T(t.I,e),s=K(t.Bb,e),o=l,r=s;r!==k;){if(r.k()!==k){o=j;break}r=r.parent()}return o?l:(i=ud(i,n,s),i!==n?(U(t.I,e,i),j):l)}function ud(t,e,i){return i.f()?t:i.k()!==k?e:(t=t||N,i.w(function(n){var n=n.name(),s=t.M(n),o=e.M(n),r=K(i,n),s=ud(s,o,r);t=t.H(n,s)}),t)}function vd(t,e){vb(e,function(e){var i=e.Rd,e=K(t.Bb,e.path),n=e.k();y(n!==k,"pendingPut should not be null."),n===i&&Qa(e,k)})}function wd(){this.Ta=[]}function xd(t,e){if(0!==e.length)for(var i=0;i<e.length;i++)t.Ta.push(e[i])}function yd(t){var e=t.X,i=t.pd,n=t.Db;fc(function(){e(i,n)})}function V(t,e,i,n){this.type=t,this.ta=e,this.aa=i,this.Db=n}function zd(t){this.J=t,this.na=[],this.xc=new wd}function Ad(t,e,i,n,s){t.na.push({type:e,X:i,cancel:n,T:s});var n=[],o=Bd(t.i);t.pb&&o.push(new V("value",t.i));for(var r=0;r<o.length;r++)if(o[r].type===e){var a=new H(t.J.n,t.J.path);o[r].aa&&(a=a.F(o[r].aa)),n.push({X:s?v(i,s):i,pd:new R(o[r].ta,a),Db:o[r].Db})}xd(t.xc,n)}function Cd(t,e){for(var i=[],n=0;n<e.length;n++){var s=e[n],o=s.type,r=new H(t.J.n,t.J.path);for(e[n].aa&&(r=r.F(e[n].aa)),r=new R(e[n].ta,r),"value"!==s.type||r.nb()?"value"!==s.type&&(o+=" "+r.name()):o+="("+r.V()+")",L(t.J.n.u.id+": event:"+t.J.path+":"+t.J.La()+":"+o),o=0;o<t.na.length;o++){var a=t.na[o];e[n].type===a.type&&i.push({X:a.T?v(a.X,a.T):a.X,pd:r,Db:s.Db})}}xd(t.xc,i)}function Bd(t){var e=[];if(!t.N()){var i=k;t.w(function(t,n){e.push(new V("child_added",n,t,i)),i=t})}return e}function Ed(t){t.pb||(t.pb=j,Cd(t,[new V("value",t.i)]))}function Fd(t,e){zd.call(this,t),this.i=e}function Gd(t,e){this.Ob=t,this.Gc=e}function Hd(t,e,i,n,s){var o=t.Q(i),r=e.Q(i),n=new Gd(n,s),s=Id(n,i,o,r),r=!o.f()&&!r.f()&&o.j()!==r.j();if(s||r)for(o=i,i=s;o.parent()!==k;){var a=t.Q(o),s=e.Q(o),u=o.parent();if(!n.Ob||K(n.Ob,u).k()){var c=e.Q(u),h=[],o=o.Z<o.m.length?o.m[o.m.length-1]:k;a.f()?(a=c.ea(o,s),h.push(new V("child_added",s,o,a))):s.f()?h.push(new V("child_removed",a,o)):(a=c.ea(o,s),r&&h.push(new V("child_moved",s,o,a)),i&&h.push(new V("child_changed",s,o,a))),n.Gc(u,c,h)}r&&(r=l,i=j),o=u}}function Id(t,e,i,n){var s,o=[];return i===n?s=l:i.N()&&n.N()?s=i.k()!==n.k():i.N()?(Jd(t,e,N,n,o),s=j):n.N()?(Jd(t,e,i,N,o),s=j):s=Jd(t,e,i,n,o),s?t.Gc(e,n,o):i.j()!==n.j()&&t.Gc(e,n,k),s}function Jd(t,e,i,n,o){var r,a,u,c,h=l,p=!t.Ob||!K(t.Ob,e).f(),d=[],f=[],m=[],g=[],v={},y={};for(r=i.Ua(),u=Za(r),a=n.Ua(),c=Za(a);u!==k||c!==k;)if(i=u===k?1:c===k?-1:u.key===c.key?0:ic({name:u.key,ia:u.value.j()},{name:c.key,ia:c.value.j()}),0>i?(h=wa(v,u.key),s(h)?(m.push({zc:u,Tc:d[h]}),d[h]=k):(y[u.key]=f.length,f.push(u)),h=j,u=Za(r)):(i>0?(h=wa(y,c.key),s(h)?(m.push({zc:f[h],Tc:c}),f[h]=k):(v[c.key]=d.length,d.push(c)),h=j):(i=e.F(c.key),(i=Id(t,i,u.value,c.value))&&(g.push(c),h=j),u.value.j()!==c.value.j()&&(m.push({zc:u,Tc:c}),h=j),u=Za(r)),c=Za(a)),!p&&h)return j;for(p=0;p<f.length;p++)(v=f[p])&&(i=e.F(v.key),Id(t,i,v.value,N),o.push(new V("child_removed",v.value,v.key)));for(p=0;p<d.length;p++)(v=d[p])&&(i=e.F(v.key),f=n.ea(v.key,v.value),Id(t,i,N,v.value),o.push(new V("child_added",v.value,v.key,f)));for(p=0;p<m.length;p++)v=m[p].zc,d=m[p].Tc,i=e.F(d.key),f=n.ea(d.key,d.value),o.push(new V("child_moved",d.value,d.key,f)),(i=Id(t,i,v.value,d.value))&&g.push(d);for(p=0;p<g.length;p++)t=g[p],f=n.ea(t.key,t.value),o.push(new V("child_changed",t.value,t.key,f));return h}function Kd(){this.S=this.xa=k,this.set={}}function Ld(t){return t.contains("default")}function Md(t){return t.xa!=k&&Ld(t)}function Nd(t,e){zd.call(this,t),this.i=N,this.dc(e,Bd(e))}function Od(t,e,i,n){if(t.N())return k;var s=k;return(n?t.yc:t.w).call(t,function(t,n){return Pd(e,t,n)&&(s=t,i--,0===i)?j:void 0}),s}function Pd(t,e,i){for(var n=0;n<t.length;n++)if(!t[n](e,i.j()))return l;return j}function Qd(t,e){this.u=t,this.g=e,this.Vb=e.ra,this.la=new Pa}function Td(t,e,i,n,s){var o,r=t.get(e);if(o=r){o=l;for(var a=r.na.length-1;a>=0;a--){var u=r.na[a];if(!(i&&u.type!==i||n&&u.X!==n||s&&u.T!==s)&&(r.na.splice(a,1),o=j,i&&n))break}o=o&&!(0<r.na.length)}return(i=o)&&t.remove(e),i}function Ud(t,e,i,n,s,o){var r=e.path(),r=K(t.la,r),i=i?i.La():k,a=[];if(i&&"default"!==i?Td(e,i,n,s,o)&&a.push(i):vb(e.keys(),function(t){Td(e,t,n,s,o)&&a.push(t)}),e.f()&&Qa(r,k),i=Rd(r),0<a.length&&!i){for(var u=r,c=r.parent(),i=l;!i&&c;){var h=c.k();if(h){y(!Md(h));var p=u.name(),d=l;Ec(h,function(t,e){d=e.Cc(p)||d}),d&&(i=j)}u=c,c=c.parent()}if(u=k,!Md(e)){c=e.xa,e.xa=k;var f=[],m=function(e){var i=e.k();if(i&&Ld(i))f.push(i.path()),i.xa==k&&i.setActive(Sd(t,i));else{if(i){i.xa!=k||i.setActive(Sd(t,i));var n={};Ec(i,function(t,e){e.i.w(function(t){C(n,t)||(n[t]=j,t=i.path().F(t),f.push(t))})})}e.w(m)}};m(r),u=f,c&&c()}return i?k:u}return k}function Vd(t,e,i){Sa(K(t.la,e),function(t){(t=t.k())&&Ec(t,function(t,e){Ed(e)})},i,j)}function W(t,e,i){function n(t){do{if(r[t.toString()])return j;t=t.parent()}while(t!==k);return l}var s=t.Vb,o=t.g.ra;t.Vb=o;for(var r={},a=0;a<i.length;a++)r[i[a].toString()]=j;Hd(s,o,e,t.la,function(i,s,o){if(e.contains(i)){var r=n(i);r&&Vd(t,i,l),t.cc(i,s,o),r&&Vd(t,i,j)}else t.cc(i,s,o)}),n(e)&&Vd(t,e,j),Wd(t,e)}function Wd(t,e){var i=K(t.la,e);Sa(i,function(t){(t=t.k())&&Ec(t,function(t,e){e.Eb()})},j,j),Ta(i,function(t){(t=t.k())&&Ec(t,function(t,e){e.Eb()})},l)}function Rd(t){return Ta(t,function(t){return t.k()&&Md(t.k())})}function Sd(t,e){if(t.u){var i,n=t.u,s=e.path(),o=e.toString(),r=e.Za(),a=e.keys(),u=Ld(e),c=t.u,h=function(n){if("ok"!==n){var s="Unknown Error";"too_big"===n?s="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==n?s="Client doesn't have permission to access the desired data.":"unavailable"==n&&(s="The service is unavailable");var o=Error(n+": "+s);o.code=n.toUpperCase(),M("on() or once() for "+e.path().toString()+" failed: "+o.toString()),e&&(Ec(e,function(t,e){for(var i=0;i<e.na.length;i++){var n=e.na[i];n.cancel&&(n.T?v(n.cancel,n.T):n.cancel)(o)}}),Ud(t,e))}else i||(u?Vd(t,e.path(),j):vb(a,function(t){(t=e.get(t))&&Ed(t)}),Wd(t,e.path()))},l=e.toString(),p=e.path().toString();return c.ga[p]=c.ga[p]||{},y(!c.ga[p][l],"listen() called twice for same path/queryId."),c.ga[p][l]={Za:e.Za(),C:h},c.P&&fd(c,p,l,e.Za(),h),function(){i=j,id(n,s,o,r)}}return da}function Xd(t,e,i,n,s){var o=e.path(),e=t.lb(o,e,n,s),r=N,a=[];return cc(e,function(e,u){var c=new J(u);3===e||1===e?r=r.H(u,n.Q(c)):(2===e&&a.push({path:o.F(u),pa:N}),a=a.concat(Yd(t,n.Q(c),K(i,c),s)))}),[{path:o,pa:r}].concat(a)}function Zd(t,e,i,n){var s;t:{var o=K(t.la,e);s=o.parent();for(var r=[];s!==k;){var a=s.k();if(a!==k){if(Ld(a)){s=[{path:e,pa:i}];break t}if(a=t.lb(e,a,i,n),o=wa(a,o.name()),3===o||1===o){s=[{path:e,pa:i}];break t}2===o&&r.push({path:e,pa:N})}o=s,s=s.parent()}s=r}return 1!=s.length||s[0].pa.f()&&!i.f()?(r=K(t.la,e),o=r.k(),o!==k?Ld(o)?s.push({path:e,pa:i}):s=s.concat(Xd(t,o,r,i,n)):s=s.concat(Yd(t,i,r,n)),s):s}function Yd(t,e,i,n){var s=i.k();if(s!==k)return Ld(s)?[{path:i.path(),pa:e}]:Xd(t,s,i,e,n);var o=[];return i.w(function(i){var s=e.N()?N:e.M(i.name()),i=Yd(t,s,i,n);
o=o.concat(i)}),o}function $d(t,e){return t&&"object"==typeof t?(y(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t}function ae(t,e){var i,n=$d(t.j(),e);if(t.N()){var s=$d(t.k(),e);return s!==t.k()||n!==t.j()?new gc(s,n):t}return i=t,n!==t.j()&&(i=i.za(n)),t.w(function(t,n){var s=ae(n,e);s!==n&&(i=i.H(t,s))}),i}function be(t){this.K=t,this.$=Cc(t),this.u=new bd(this.K,v(this.Yb,this),v(this.Wb,this),v(this.vb,this),v(this.Kc,this),v(this.Bc,this));var e=v(function(){return new zc(this.$,this.u)},this),t=t.toString();Bc[t]||(Bc[t]=e()),this.qd=Bc[t],this.eb=new Pa,this.fb=new rd,this.g=new sd,this.G=new Qd(this.u,this.g.ma),this.Dc=new rd,this.Ec=new Qd(k,this.Dc),ce(this,"connected",l),ce(this,"authenticated",l),this.R=new nd,this.wc=0}function de(t){return t=T(t.Dc,new J(".info/serverTimeOffset")).V()||0,(new Date).getTime()+t}function ee(t){return t=t={timestamp:de(t)},t.timestamp=t.timestamp||(new Date).getTime(),t}function ce(t,e,i){e=new J("/.info/"+e),U(t.Dc,e,Q(i)),W(t.Ec,e,[e])}function he(t,e,i,n){var s=Q(i);jd(t.u,e.toString(),s.V(j),function(i){"ok"===i&&od(t.R,e,s),X(n,i)})}function ie(t){xc(t.$,"deprecated_on_disconnect"),t.qd.Sc.deprecated_on_disconnect=j}function X(t,e,i){t&&fc(function(){if("ok"==e)t(k,i);else{var n=(e||"error").toUpperCase(),s=n;i&&(s+=": "+i),s=Error(s),s.code=n,t(s)}})}function je(t,e){var i=e||t.eb;if(e||ke(t,i),i.k()!==k){var n=le(t,i);if(y(0<n.length),xb(n,function(t){return 1===t.status})){for(var s=i.path(),o=0;o<n.length;o++)y(1===n[o].status,"tryToSendTransactionQueue_: items in queue should all be run."),n[o].status=2,n[o].nd++;i=T(t.g.I,s).hash(),U(t.g.I,s,T(t.g.ma,s));for(var r=T(t.fb,s).V(j),a=Nb(),u={},c=0;c<n.length;c++)n[c].qc&&(u[n[c].path.toString()]=n[c].path);var h,l=[];for(h in u)l.push(u[h]);for(o=0;o<l.length;o++)Qa(K(t.g.Bb,l[o]),a);t.u.put(s.toString(),r,function(e){for(t.e("transaction put response",{path:s.toString(),status:e}),o=0;o<l.length;o++){var i=K(t.g.Bb,l[o]),r=i.k();y(r!==k,"sendTransactionQueue_: pendingPut should not be null."),r===a&&(Qa(i,k),U(t.g.I,l[o],T(t.g.sa,l[o])))}if("ok"===e){for(e=[],o=0;o<n.length;o++)n[o].status=3,n[o].C&&(i=me(t,n[o].path),e.push(v(n[o].C,k,k,j,i))),n[o].nc();for(ke(t,K(t.eb,s)),je(t),o=0;o<e.length;o++)fc(e[o])}else{if("datastale"===e)for(o=0;o<n.length;o++)n[o].status=4===n[o].status?5:1;else for(M("transaction at "+s+" failed: "+e),o=0;o<n.length;o++)n[o].status=5,n[o].oc=e;e=fe(t,s),W(t.G,e,[s])}},i)}}else i.nb()&&i.w(function(e){je(t,e)})}function fe(t,e){var i=ne(t,e),n=i.path(),o=le(t,i);if(U(t.g.ma,n,T(t.g.I,n)),U(t.fb,n,T(t.g.I,n)),0!==o.length){for(var r=i=T(t.g.ma,n),a=[],u=0;u<o.length;u++){var c,h=Na(n,o[u].path),p=l;if(y(h!==k,"rerunTransactionsUnderNode_: relativePath should not be null."),5===o[u].status)p=j,c=o[u].oc;else if(1===o[u].status)if(25<=o[u].nd)p=j,c="maxretry";else{var d=o[u].update(i.Q(h).V());s(d)?(Ba("transaction failed: Data returned ",d),d=Q(d),i=i.ya(h,d),o[u].qc&&(r=r.ya(h,d))):(p=j,c="nodata")}p&&(o[u].status=3,setTimeout(o[u].nc,0),o[u].C&&(p=new H(t,o[u].path),h=new R(i.Q(h),p),a.push("nodata"===c?v(o[u].C,k,k,l,h):v(o[u].C,k,Error(c),l,h))))}for(c=T(t.g.I,n).j(),i=i.za(c),r=r.za(c),U(t.fb,n,i),U(t.g.ma,n,r),ke(t,t.eb),u=0;u<a.length;u++)fc(a[u]);je(t)}return n}function ne(t,e){for(var i,n=t.eb;(i=E(e))!==k&&n.k()===k;)n=K(n,i),e=Ma(e);return n}function le(t,e){var i=[];return oe(t,e,i),i.sort(function(t,e){return t.hd-e.hd}),i}function oe(t,e,i){var n=e.k();if(n!==k)for(var s=0;s<n.length;s++)i.push(n[s]);e.w(function(e){oe(t,e,i)})}function ke(t,e){var i=e.k();if(i){for(var n=0,s=0;s<i.length;s++)3!==i[s].status&&(i[n]=i[s],n++);i.length=n,Qa(e,0<i.length?i:k)}e.w(function(e){ke(t,e)})}function ge(t,e){var i=ne(t,e).path(),n=K(t.eb,e);return Ta(n,function(t){pe(t)}),pe(n),Sa(n,function(t){pe(t)}),i}function pe(t){var e=t.k();if(e!==k){for(var i=[],n=-1,s=0;s<e.length;s++)4!==e[s].status&&(2===e[s].status?(y(n===s-1,"All SENT items should be at beginning of queue."),n=s,e[s].status=4,e[s].oc="set"):(y(1===e[s].status),e[s].nc(),e[s].C&&i.push(v(e[s].C,k,Error("set"),l,k))));for(-1===n?Qa(t,k):e.length=n+1,s=0;s<i.length;s++)fc(i[s])}}function me(t,e){var i=new H(t,e);return new R(T(t.fb,e),i)}function Y(){this.$a={}}function $(t,e,i){this.Fb=t,this.S=e,this.Ea=i}function H(){var t,e,i;if(arguments[0]instanceof be)i=arguments[0],t=arguments[1];else{z("new Firebase",1,2,arguments.length);var n=arguments[0];e=t="";var s=j,o="";if(u(n)){var r=n.indexOf("//");if(r>=0)var a=n.substring(0,r-1),n=n.substring(r+2);r=n.indexOf("/"),-1===r&&(r=n.length),t=n.substring(0,r);var n=n.substring(r+1),c=t.split(".");if(3==c.length){if(r=c[2].indexOf(":"),s=r>=0?"https"===a:j,"firebase"===c[1])Wb(t+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead");else for(e=c[0],o="",n=("/"+n).split("/"),a=0;a<n.length;a++)if(0<n[a].length){r=n[a];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(h){}o+="/"+r}e=e.toLowerCase()}else e=k}s||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&M("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),t=new pb(t,s,e),e=new J(o),s=e.toString(),(n=!u(t.host))||(n=0===t.host.length)||(n=!za(t.Sb))||(n=0!==s.length)&&(s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),n=!(u(s)&&0!==s.length&&!ya.test(s))),n&&g(Error(A("new Firebase",1,l)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')),arguments[1]?arguments[1]instanceof Y?i=arguments[1]:g(Error("Expected a valid Firebase.Context for second argument to new Firebase()")):i=Y.mb(),s=t.toString(),n=wa(i.$a,s),n||(n=new be(t),i.$a[s]=n),i=n,t=e}F.call(this,i,t)}function Tb(t,e){y(!e||t===j||t===l,"Can't turn on custom loggers persistently."),t===j?("undefined"!=typeof console&&("function"==typeof console.log?Rb=v(console.log,console):"object"==typeof console.log&&(Rb=function(t){console.log(t)})),e&&ob.set("logging_enabled",j)):t?Rb=t:(Rb=k,ob.remove("logging_enabled"))}var aa=void 0,j=!0,k=null,l=!1,r,ca=this;Math.floor(2147483648*Math.random()).toString(36);var qa={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},ra=/\uffff/.test("")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,ua={},xa=/[\[\].#$\/]/,ya=/[\[\].#$]/;F.prototype.Nc=function(){return z("Query.ref",0,0,arguments.length),new H(this.n,this.path)},F.prototype.ref=F.prototype.Nc,F.prototype.Xa=function(t,e){z("Query.on",2,4,arguments.length),Ga("Query.on",t,l),B("Query.on",2,e,l);var i=Ja("Query.on",arguments[2],arguments[3]);return this.n.Mb(this,t,e,i.cancel,i.T),e},F.prototype.on=F.prototype.Xa,F.prototype.ub=function(t,e,i){z("Query.off",0,3,arguments.length),Ga("Query.off",t,j),B("Query.off",2,e,j),va("Query.off",3,i),this.n.fc(this,t,e,i)},F.prototype.off=F.prototype.ub,F.prototype.Ld=function(t,e){function i(r){o&&(o=l,s.ub(t,i),e.call(n.T,r))}z("Query.once",2,4,arguments.length),Ga("Query.once",t,l),B("Query.once",2,e,l);var n=Ja("Query.once",arguments[2],arguments[3]),s=this,o=j;this.Xa(t,i,function(e){s.ub(t,i),n.cancel&&n.cancel.call(n.T,e)})},F.prototype.once=F.prototype.Ld,F.prototype.Ed=function(t){return z("Query.limit",1,1,arguments.length),(!ha(t)||Math.floor(t)!==t||0>=t)&&g("Query.limit: First argument must be a positive integer."),new F(this.n,this.path,t,this.da,this.va,this.Ba,this.Ra)},F.prototype.limit=F.prototype.Ed,F.prototype.Ud=function(t,e){return z("Query.startAt",0,2,arguments.length),Fa("Query.startAt",1,t,j),Ha("Query.startAt",e),s(t)||(e=t=k),new F(this.n,this.path,this.Da,t,e,this.Ba,this.Ra)},F.prototype.startAt=F.prototype.Ud,F.prototype.zd=function(t,e){return z("Query.endAt",0,2,arguments.length),Fa("Query.endAt",1,t,j),Ha("Query.endAt",e),new F(this.n,this.path,this.Da,this.da,this.va,t,e)},F.prototype.endAt=F.prototype.zd,F.prototype.La=function(){var t=La(Ka(this));return"{}"===t?"default":t},r=J.prototype,r.toString=function(){for(var t="",e=this.Z;e<this.m.length;e++)""!==this.m[e]&&(t+="/"+this.m[e]);return t||"/"},r.parent=function(){if(this.Z>=this.m.length)return k;for(var t=[],e=this.Z;e<this.m.length-1;e++)t.push(this.m[e]);return new J(t,0)},r.F=function(t){for(var e=[],i=this.Z;i<this.m.length;i++)e.push(this.m[i]);if(t instanceof J)for(i=t.Z;i<t.m.length;i++)e.push(t.m[i]);else for(t=t.split("/"),i=0;i<t.length;i++)0<t[i].length&&e.push(t[i]);return new J(e,0)},r.f=function(){return this.Z>=this.m.length},r.contains=function(t){var e=0;if(this.m.length>t.m.length)return l;for(;e<this.m.length;){if(this.m[e]!==t.m[e])return l;++e}return j},r=Pa.prototype,r.k=function(){return this.z.value},r.nb=function(){return 0<this.z.sc},r.f=function(){return this.k()===k&&!this.nb()},r.w=function(t){for(var e in this.z.children)t(new Pa(e,this,this.z.children[e]))},r.path=function(){return new J(this.Ab===k?this.Ea:this.Ab.path()+"/"+this.Ea)},r.name=ba("Ea"),r.parent=ba("Ab"),r=Ua.prototype,r.oa=function(t,e){return new Ua(this.Oa,this.ca.oa(t,e,this.Oa).copy(k,k,l,k,k))},r.remove=function(t){return new Ua(this.Oa,this.ca.remove(t,this.Oa).copy(k,k,l,k,k))},r.get=function(t){for(var e,i=this.ca;!i.f();){if(e=this.Oa(t,i.key),0===e)return i.value;0>e?i=i.left:e>0&&(i=i.right)}return k},r.f=function(){return this.ca.f()},r.count=function(){return this.ca.count()},r.tb=function(){return this.ca.tb()},r.Va=function(){return this.ca.Va()},r.Ca=function(t){return this.ca.Ca(t)},r.Ma=function(t){return this.ca.Ma(t)},r.Ua=function(t){return new Ya(this.ca,t)},r=$a.prototype,r.copy=function(t,e,i,n,s){return new $a(t!=k?t:this.key,e!=k?e:this.value,i!=k?i:this.color,n!=k?n:this.left,s!=k?s:this.right)},r.count=function(){return this.left.count()+1+this.right.count()},r.f=o(l),r.Ca=function(t){return this.left.Ca(t)||t(this.key,this.value)||this.right.Ca(t)},r.Ma=function(t){return this.right.Ma(t)||t(this.key,this.value)||this.left.Ma(t)},r.tb=function(){return ab(this).key},r.Va=function(){return this.right.f()?this.key:this.right.Va()},r.oa=function(t,e,i){var n,s;return s=this,n=i(t,s.key),s=0>n?s.copy(k,k,k,s.left.oa(t,e,i),k):0===n?s.copy(k,e,k,k,k):s.copy(k,k,k,k,s.right.oa(t,e,i)),db(s)},r.remove=function(t,e){var i,n;if(i=this,0>e(t,i.key))!i.left.f()&&!i.left.O()&&!i.left.left.O()&&(i=fb(i)),i=i.copy(k,k,k,i.left.remove(t,e),k);else{if(i.left.O()&&(i=gb(i)),!i.right.f()&&!i.right.O()&&!i.right.left.O()&&(i=hb(i),i.left.left.O()&&(i=gb(i),i=hb(i))),0===e(t,i.key)){if(i.right.f())return Wa;n=ab(i.right),i=i.copy(n.key,n.value,k,k,eb(i.right))}i=i.copy(k,k,k,k,i.right.remove(t,e))}return db(i)},r.O=ba("color"),r=jb.prototype,r.copy=function(){return this},r.oa=function(t,e){return new $a(t,e,aa,aa,aa)},r.remove=function(){return this},r.count=o(0),r.f=o(j),r.Ca=o(l),r.Ma=o(l),r.tb=o(k),r.Va=o(k),r.O=o(l);var Wa=new jb;kb.prototype.set=function(t,e){e==k?this.Pb.removeItem(this.bc+t):this.Pb.setItem(this.bc+t,w(e))},kb.prototype.get=function(t){return t=this.Pb.getItem(this.bc+t),t==k?k:sa(t)},kb.prototype.remove=function(t){this.Pb.removeItem(this.bc+t)},lb.prototype.set=function(t,e){e==k?delete this.ib[t]:this.ib[t]=e},lb.prototype.get=function(t){return C(this.ib,t)?this.ib[t]:k},lb.prototype.remove=function(t){delete this.ib[t]};var nb=mb("localStorage"),ob=mb("sessionStorage");pb.prototype.toString=function(){return(this.hc?"https://":"http://")+this.host},la(sb,rb),sb.prototype.reset=function(){this.B[0]=1732584193,this.B[1]=4023233417,this.B[2]=2562383102,this.B[3]=271733878,this.B[4]=3285377520,this.Vc=this.ob=0},sb.prototype.update=function(t,e){s(e)||(e=t.length);var i=this.rc,n=this.ob,o=0;if(u(t))for(;e>o;)i[n++]=t.charCodeAt(o++),64==n&&(tb(this,i),n=0);else for(;e>o;)i[n++]=t[o++],64==n&&(tb(this,i),n=0);this.ob=n,this.Vc+=e};var ub=Array.prototype,vb=ub.forEach?function(t,e,i){ub.forEach.call(t,e,i)}:function(t,e,i){for(var n=t.length,s=u(t)?t.split(""):t,o=0;n>o;o++)o in s&&e.call(i,s[o],o,t)},wb=ub.map?function(t,e,i){return ub.map.call(t,e,i)}:function(t,e,i){for(var n=t.length,s=Array(n),o=u(t)?t.split(""):t,r=0;n>r;r++)r in o&&(s[r]=e.call(i,o[r],r,t));return s},xb=ub.every?function(t,e,i){return ub.every.call(t,e,i)}:function(t,e,i){for(var n=t.length,s=u(t)?t.split(""):t,o=0;n>o;o++)if(o in s&&!e.call(i,s[o],o,t))return l;return j},yb,zb,Ab,Bb;Bb=Ab=zb=yb=l;var Db;if(Db=Cb()){var Eb=ca.navigator;yb=0==Db.indexOf("Opera"),zb=!yb&&-1!=Db.indexOf("MSIE"),Ab=!yb&&-1!=Db.indexOf("WebKit"),Bb=!yb&&!Ab&&"Gecko"==Eb.product}var Fb=zb,Gb=Bb,Hb=Ab,Ib;if(yb&&ca.opera){var Jb=ca.opera.version;"function"==typeof Jb&&Jb()}else Gb?Ib=/rv\:([^\);]+)(\)|;)/:Fb?Ib=/MSIE\s+([^\);]+)(\)|;)/:Hb&&(Ib=/WebKit\/(\S+)/),Ib&&Ib.exec(Cb());var Kb=k,Lb=k,Nb,Ob=1;Nb=function(){return Ob++};var Rb=k,Sb=j,ec=/^-?\d{1,10}$/;r=gc.prototype,r.N=o(j),r.j=ba("Ya"),r.za=function(t){return new gc(this.D,t)},r.M=function(){return N},r.Q=function(t){return E(t)===k?this:N},r.ea=o(k),r.H=function(t,e){return(new O).H(t,e).za(this.Ya)},r.ya=function(t,e){var i=E(t);return i===k?e:this.H(i,N.ya(Ma(t),e))},r.f=o(l),r.Ub=o(0),r.V=function(t){return t&&this.j()!==k?{".value":this.k(),".priority":this.j()}:this.k()},r.hash=function(){var t="";this.j()!==k&&(t+="priority:"+hc(this.j())+":");var e=typeof this.D,t=t+(e+":"),t="number"===e?t+dc(this.D):t+this.D;return Pb(t)},r.k=ba("D"),r.toString=function(){return"string"==typeof this.D?'"'+this.D+'"':this.D},r=O.prototype,r.N=o(l),r.j=ba("Ya"),r.za=function(t){return new O(this.o,t)},r.H=function(t,e){var i=this.o.remove(t);return e&&e.f()&&(e=k),e!==k&&(i=i.oa(t,e)),e&&e.j()!==k?new lc(i,k,this.Ya):new O(i,this.Ya)},r.ya=function(t,e){var i=E(t);if(i===k)return e;var n=this.M(i).ya(Ma(t),e);return this.H(i,n)},r.f=function(){return this.o.f()},r.Ub=function(){return this.o.count()};var mc=/^\d+$/;r=O.prototype,r.V=function(t){if(this.f())return k;var e={},i=0,n=0,s=j;if(this.w(function(o,r){e[o]=r.V(t),i++,s&&mc.test(o)?n=Math.max(n,Number(o)):s=l}),!t&&s&&2*i>n){var o,r=[];for(o in e)r[o]=e[o];return r}return t&&this.j()!==k&&(e[".priority"]=this.j()),e},r.hash=function(){var t="";return this.j()!==k&&(t+="priority:"+hc(this.j())+":"),this.w(function(e,i){var n=i.hash();""!==n&&(t+=":"+e+":"+n)}),""===t?"":Pb(t)},r.M=function(t){return t=this.o.get(t),t===k?N:t},r.Q=function(t){var e=E(t);return e===k?this:this.M(e).Q(Ma(t))},r.ea=function(t){return Xa(this.o,t)},r.cd=function(){return this.o.tb()},r.dd=function(){return this.o.Va()},r.w=function(t){return this.o.Ca(t)},r.yc=function(t){return this.o.Ma(t)},r.Ua=function(){return this.o.Ua()},r.toString=function(){var t="{",e=j;return this.w(function(i,n){e?e=l:t+=", ",t+='"'+i+'" : '+n.toString()}),t+="}"};var N=new O;la(lc,O),r=lc.prototype,r.H=function(t,e){var i=this.M(t),n=this.o,s=this.ua;return i!==k&&(n=n.remove(t),s=s.remove({name:t,ia:i.j()})),e&&e.f()&&(e=k),e!==k&&(n=n.oa(t,e),s=s.oa({name:t,ia:e.j()},e)),new lc(n,s,this.j())},r.ea=function(t,e){var i=Xa(this.ua,{name:t,ia:e.j()});return i?i.name:k},r.w=function(t){return this.ua.Ca(function(e,i){return t(e.name,i)})},r.yc=function(t){return this.ua.Ma(function(e,i){return t(e.name,i)})},r.Ua=function(){return this.ua.Ua(function(t,e){return{key:t.name,value:e}})},r.cd=function(){return this.ua.f()?k:this.ua.tb().name},r.dd=function(){return this.ua.f()?k:this.ua.Va().name};var oc=Math.log(2);R.prototype.V=function(){return z("Firebase.DataSnapshot.val",0,0,arguments.length),this.z.V()},R.prototype.val=R.prototype.V,R.prototype.Ad=function(){return z("Firebase.DataSnapshot.exportVal",0,0,arguments.length),this.z.V(j)},R.prototype.exportVal=R.prototype.Ad,R.prototype.F=function(t){z("Firebase.DataSnapshot.child",0,1,arguments.length),ha(t)&&(t=String(t)),Ia("Firebase.DataSnapshot.child",t);var e=new J(t),i=this.ec.F(e);return new R(this.z.Q(e),i)},R.prototype.child=R.prototype.F,R.prototype.Cc=function(t){z("Firebase.DataSnapshot.hasChild",1,1,arguments.length),Ia("Firebase.DataSnapshot.hasChild",t);var e=new J(t);return!this.z.Q(e).f()},R.prototype.hasChild=R.prototype.Cc,R.prototype.j=function(){return z("Firebase.DataSnapshot.getPriority",0,0,arguments.length),this.z.j()},R.prototype.getPriority=R.prototype.j,R.prototype.forEach=function(t){if(z("Firebase.DataSnapshot.forEach",1,1,arguments.length),B("Firebase.DataSnapshot.forEach",1,t,l),this.z.N())return l;var e=this;return this.z.w(function(i,n){return t(new R(n,e.ec.F(i)))})},R.prototype.forEach=R.prototype.forEach,R.prototype.nb=function(){return z("Firebase.DataSnapshot.hasChildren",0,0,arguments.length),this.z.N()?l:!this.z.f()},R.prototype.hasChildren=R.prototype.nb,R.prototype.name=function(){return z("Firebase.DataSnapshot.name",0,0,arguments.length),this.ec.name()},R.prototype.name=R.prototype.name,R.prototype.Ub=function(){return z("Firebase.DataSnapshot.numChildren",0,0,arguments.length),this.z.Ub()},R.prototype.numChildren=R.prototype.Ub,R.prototype.Nc=function(){return z("Firebase.DataSnapshot.ref",0,0,arguments.length),this.ec},R.prototype.ref=R.prototype.Nc,rc.prototype.Ac=function(){},rc.prototype.Xc=function(t){for(var e=this.sb[t]||[],i=0;i<e.length;i++)e[i].X.apply(e[i].T,Array.prototype.slice.call(arguments,1))},rc.prototype.Xa=function(t,e,i){sc(this,t),this.sb[t]=this.sb[t]||[],this.sb[t].push({X:e,T:i}),(t=this.Ac(t))&&e.apply(i,t)},rc.prototype.ub=function(t,e,i){sc(this,t);for(var t=this.sb[t]||[],n=0;n<t.length;n++)if(t[n].X===e&&(!i||i===t[n].T)){t.splice(n,1);break}},la(tc,rc),ea(tc),tc.prototype.Ac=function(t){return y("visible"===t),[this.gb]},wc.prototype.get=function(){return vc(this.jb)},yc.prototype.get=function(){var t=this.xd.get(),e=vc(t);if(this.Qb)for(var i in this.Qb)e[i]-=this.Qb[i];return this.Qb=t,e},zc.prototype.kd=function(){var t,e=this.kc.get(),i={},n=l;for(t in e)0<e[t]&&C(this.Sc,t)&&(i[t]=e[t],n=j);n&&(e=this.u,e.P&&(i={c:i},e.e("reportStats",i),e.Ga("s",i))),setTimeout(v(this.kd,this),6e5*Math.random())};var Ac={},Bc={};r=Dc.prototype,r.add=function(t,e){this.set[t]=e!==k?e:j},r.contains=function(t){return C(this.set,t)},r.get=function(t){return this.contains(t)?this.set[t]:aa},r.remove=function(t){delete this.set[t]},r.f=function(){var t;t:{for(t in this.set){t=l;break t}t=j}return t},r.count=function(){var t,e=0;for(t in this.set)e++;return e},r.keys=function(){var t,e=[];for(t in this.set)C(this.set,t)&&e.push(t);return e};var Fc="pLPCommand",Gc="pRTLPCB",Ic,Jc;Hc.prototype.open=function(t,e){function i(){if(!n.Ja){n.ka=new Kc(function(t,e,i){if(xc(n.$,"bytes_received",w(arguments).length),n.ka)if(n.ba&&(clearTimeout(n.ba),n.ba=k),n.kb=j,"start"==t)n.id=e,n.jd=i;else if("close"===t)if(e){n.ka.ic=l;var s=n.fd;s.tc=e,s.Ka=function(){n.Fa()},s.tc<s.Qa&&(s.Ka(),s.Ka=k)}else n.Fa();else g(Error("Unrecognized command received: "+t))},function(t,e){xc(n.$,"bytes_received",w(arguments).length);var i=n.fd;for(i.ac[t]=e;i.ac[i.Qa];){var s=i.ac[i.Qa];delete i.ac[i.Qa];for(var o=0;o<s.length;++o)if(s[o]){var r=i;fc(function(){r.Jc(s[o])})}if(i.Qa===i.tc){i.Ka&&(clearTimeout(i.Ka),i.Ka(),i.Ka=k);break}i.Qa++}},function(){n.Fa()},n.Lb);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.ka.mc&&(t.cb=n.ka.mc),t.v="5",n.jc&&(t.s=n.jc),t=n.Lb(t),n.e("Connecting via long-poll to "+t),Lc(n.ka,t,function(){})}}this.Zc=0,this.R=e,this.fd=new uc(t),this.Ja=l;var n=this;if(this.ba=setTimeout(function(){n.e("Timed out trying to connect."),n.Fa(),n.ba=k},3e4),"complete"===document.readyState)i();else{var s=l,o=function(){document.body?s||(s=j,i()):setTimeout(o,10)};document.addEventListener?(document.addEventListener("DOMContentLoaded",o,l),window.addEventListener("load",o,l)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&o()},l),window.attachEvent("onload",o,l))}},Hc.prototype.start=function(){var t=this.ka,e=this.jd;for(t.Gd=this.id,t.Hd=e,t.pc=j;Mc(t););t=this.id,e=this.jd,this.Wa=document.createElement("iframe");var i={dframe:"t"};i.id=t,i.pw=e,t=this.Lb(i),this.Wa.src=t,this.Wa.style.display="none",document.body.appendChild(this.Wa)},Hc.isAvailable=function(){return!(Jc||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.Wd||!Ic&&!j)},Hc.prototype.Ib=function(){this.Ja=j,this.ka&&(this.ka.close(),this.ka=k),this.Wa&&(document.body.removeChild(this.Wa),this.Wa=k),this.ba&&(clearTimeout(this.ba),this.ba=k)},Hc.prototype.Fa=function(){this.Ja||(this.e("Longpoll is closing itself"),this.Ib(),this.R&&(this.R(this.kb),this.R=k))},Hc.prototype.close=function(){this.Ja||(this.e("Longpoll is being closed."),this.Ib())},Hc.prototype.send=function(t){t=w(t),xc(this.$,"bytes_sent",t.length);for(var t=ta(t),t=Mb(t,j),t=ac(t,1840),e=0;e<t.length;e++){var i=this.ka;i.Cb.push({Qd:this.Zc,Vd:t.length,ad:t[e]}),i.pc&&Mc(i),this.Zc++}},Kc.prototype.close=function(){if(this.pc=l,this.Y){this.Y.Aa.body.innerHTML="";var t=this;setTimeout(function(){t.Y!==k&&(document.body.removeChild(t.Y),t.Y=k)},0)}var e=this.ha;e&&(this.ha=k,e())};var Nc=k;"undefined"!=typeof MozWebSocket?Nc=MozWebSocket:"undefined"!=typeof WebSocket&&(Nc=WebSocket);var Oc;S.prototype.open=function(t,e){this.ha=e,this.Id=t,this.e("Websocket connecting to "+this.Pa),this.W=new Nc(this.Pa),this.kb=l,nb.set("previous_websocket_failure",j);var i=this;this.ba=setTimeout(function(){i.e("Websocket timed out trying to connect."),Pc(i),i.Fa()},3e4),this.W.onopen=function(){i.e("Websocket connected."),i.kb=j,Pc(i),nb.remove("previous_websocket_failure")},this.W.onclose=function(){i.e("Websocket connection was disconnected."),i.W=k,i.Fa()},this.W.onmessage=function(t){if(i.W!==k)if(t=t.data,xc(i.$,"bytes_received",t.length),Qc(i),i.frames!==k)Rc(i,t);else{t:{if(y(i.frames===k,"We already have a frame buffer"),6>=t.length){var e=Number(t);if(!isNaN(e)){i.Uc=e,i.frames=[],t=k;break t}}i.Uc=1,i.frames=[]}t!==k&&Rc(i,t)}},this.W.onerror=function(t){i.e("WebSocket error.  Closing connection."),t.data&&i.e(t.data),i.Fa()}},S.prototype.start=function(){},S.isAvailable=function(){var t=l;if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&1<e.length&&4.4>parseFloat(e[1])&&(t=j)}return!t&&Nc!==k&&!Oc},S.prototype.send=function(t){Qc(this),t=w(t),xc(this.$,"bytes_sent",t.length),t=ac(t,16384),1<t.length&&this.W.send(String(t.length));for(var e=0;e<t.length;e++)this.W.send(t[e])},S.prototype.Ib=function(){this.Ja=j,Pc(this),this.qb&&(clearInterval(this.qb),this.qb=k),this.W&&(this.W.close(),this.W=k)},S.prototype.Fa=function(){this.Ja||(this.e("WebSocket is closing itself"),this.Ib(),this.ha&&(this.ha(this.kb),this.ha=k))},S.prototype.close=function(){this.Ja||(this.e("WebSocket is being closed"),this.Ib())};var Tc=[Hc,{isAvailable:o(l)},S];Uc.prototype.od=function(t){t={t:"d",d:t},1!==this.wa&&g("Connection is not connected"),this.Jb.send(t)},Uc.prototype.Xb=function(t){this.Jc(t)},Uc.prototype.close=function(){2!==this.wa&&(this.e("Closing realtime connection."),this.wa=2,$c(this),this.R&&(this.R(),this.R=k))},la(ad,rc),ea(ad),ad.prototype.Ac=function(t){return y("online"===t),[this.yb]};var cd=0,ed=0;r=bd.prototype,r.Ga=function(t,e,i){var n=++this.Pd,t={r:n,a:t,b:e};this.e(w(t)),y(this.P,"sendRequest_ call when we're not connected not allowed."),this.ja.od(t),i&&(this.Gb[n]=i)},r.hb=function(t,e,i){if(this.Ha={yd:t,bd:l,X:e,Nb:i},this.e("Authenticating using credential: "+this.Ha),hd(this),!(e=40==t.length))t:{var n;try{var s=t.split(".");if(3!==s.length){e=l;break t}var o;e:{try{if("undefined"!=typeof atob){o=atob(s[1]);break e}}catch(r){L("base64DecodeIfNativeSupport failed: ",r)}o=k}o!==k&&(n=sa(o))}catch(a){L("isAdminAuthToken_ failed",a)}e="object"==typeof n&&wa(n,"admin")===j}e&&(this.e("Admin auth credential detected.  Reducing max reconnect time."),this.Rb=3e4)},r.Kb=function(t){delete this.Ha,this.vb(l),this.P&&this.Ga("unauth",{},function(e){t(e.s)})},r.Hc=function(t,e){this.P?kd(this,"oc",t,k,e):this.wb.push({Mc:t,action:"oc",data:k,C:e})},r.put=function(t,e,i,n){ld(this,"p",t,e,i,n)},r.Xb=function(t){if("r"in t){this.e("from server: "+w(t));var e=t.r,i=this.Gb[e];i&&(delete this.Gb[e],i(t.b))}else"error"in t&&g("A server-side error has occurred: "+t.error),"a"in t&&(e=t.a,t=t.b,this.e("handleServerMessage",e,t),"d"===e?this.Yb(t.p,t.d):"m"===e?this.Yb(t.p,t.d,j):"c"===e?(e=t.p,t=(t=t.q)?wb(t,function(t){return La(t)}).join("$"):"{}",(t=gd(this,e,t))&&t.C&&t.C("permission_denied")):"ac"===e?(e=t.s,t=t.d,i=this.Ha,delete this.Ha,i&&i.Nb&&i.Nb(e,t),this.vb(l)):"sd"===e?this.Oc?this.Oc(t):"msg"in t&&"undefined"!=typeof console&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: ")):Vb("Unrecognized action received from server: "+w(e)+"\nAre you using the latest client?"))},r.xb=function(t){this.e("connection ready"),this.P=j,this.rb=(new Date).getTime(),this.Kc({serverTimeOffset:t-(new Date).getTime()}),hd(this);for(var e in this.ga)for(var i in this.ga[e])t=this.ga[e][i],fd(this,e,i,t.Za,t.C);for(e=0;e<this.U.length;e++)this.U[e]&&md(this,e);for(;this.wb.length;)e=this.wb.shift(),kd(this,e.action,e.Mc,e.data,e.C);this.Wb(j)},r.Kd=function(t){t&&!this.gb&&this.qa===this.Rb&&(this.e("Window became visible.  Reducing delay."),this.qa=1e3,this.ja||dd(this,0)),this.gb=t},r.Jd=function(t){t?(this.e("Browser went online.  Reconnecting."),this.qa=1e3,this.Na=j,this.ja||dd(this,0)):(this.e("Browser went offline.  Killing connection; don't reconnect."),this.Na=l,this.ja&&this.ja.close())},r.gd=function(){this.e("data client disconnected"),this.P=l,this.ja=k;for(var t=0;t<this.U.length;t++){var e=this.U[t];e&&"h"in e.ld&&e.Md&&(e.C&&e.C("disconnect"),delete this.U[t],this.zb--)}if(0===this.zb&&(this.U=[]),this.Na)this.gb?this.rb&&(3e4<(new Date).getTime()-this.rb&&(this.qa=1e3),this.rb=k):(this.e("Window isn't visible.  Delaying reconnect."),this.qa=this.Rb,this.Fc=(new Date).getTime()),t=Math.max(0,this.qa-((new Date).getTime()-this.Fc)),t*=Math.random(),this.e("Trying to reconnect in "+t+"ms"),dd(this,t),this.qa=Math.min(this.Rb,1.3*this.qa);else for(var i in this.Gb)delete this.Gb[i];this.Wb(l)},r.Ia=function(){this.Na=l,this.ja?this.ja.close():(this.Sa&&(clearTimeout(this.Sa),this.Sa=k),this.P&&this.gd())},r.ab=function(){this.Na=j,this.qa=1e3,this.P||dd(this,0)},nd.prototype.w=function(t){this.o!==k&&Ec(this.o,function(e,i){t(e,i)})},rd.prototype.toString=function(){return this.ra.toString()},sd.prototype.set=function(t,e){var i=this,n=[];return vb(e,function(t){var e=t.path,t=t.pa,s=Nb();Qa(K(i.Bb,e),s),U(i.I,e,t),n.push({path:e,Rd:s})}),n},wd.prototype.Eb=function(){for(var t=0;t<this.Ta.length;t++)if(this.Ta[t]){var e=this.Ta[t];this.Ta[t]=k,yd(e)}this.Ta=[]},zd.prototype.cc=function(t,e){e=this.dc(t,e),e!=k&&Cd(this,e)},zd.prototype.Eb=function(){this.xc.Eb()},la(Fd,zd),Fd.prototype.dc=function(t,e){return this.i=t,this.pb&&e!=k&&e.push(new V("value",this.i)),e},Fd.prototype.lb=function(){return{}},la(Kd,Dc),r=Kd.prototype,r.setActive=function(t){this.xa=t},r.defaultView=function(){return Ld(this)?this.get("default"):k},r.path=ba("S"),r.toString=function(){return wb(this.keys(),function(t){return"default"===t?"{}":t}).join("$")},r.Za=function(){var t=[];return Ec(this,function(e,i){t.push(i.J)}),t},la(Nd,zd),Nd.prototype.dc=function(t,e){if(e===k)return e;var i=[],n=this.J;s(n.da)&&i.push(s(n.va)&&n.va!=k?function(t,e){var i=Xb(e,n.da);return i>0||0===i&&0<=Yb(t,n.va)}:function(t,e){return 0<=Xb(e,n.da)}),s(n.Ba)&&i.push(s(n.Ra)?function(t,e){var i=Xb(e,n.Ba);return 0>i||0===i&&0>=Yb(t,n.Ra)}:function(t,e){return 0>=Xb(e,n.Ba)});var o=k,r=k;if(s(this.J.Da))if(s(this.J.da)){if(o=Od(t,i,this.J.Da,l)){var a=t.M(o).j();i.push(function(t,e){var i=Xb(e,a);return 0>i||0===i&&0>=Yb(t,o)})}}else if(r=Od(t,i,this.J.Da,j)){var u=t.M(r).j();i.push(function(t,e){var i=Xb(e,u);return i>0||0===i&&0<=Yb(t,r)})}for(var c=[],h=[],p=[],d=[],f=0;f<e.length;f++){var m=e[f].aa,g=e[f].ta;switch(e[f].type){case"child_added":Pd(i,m,g)&&(this.i=this.i.H(m,g),h.push(e[f]));break;case"child_removed":this.i.M(m).f()||(this.i=this.i.H(m,k),c.push(e[f]));break;case"child_changed":!this.i.M(m).f()&&Pd(i,m,g)&&(this.i=this.i.H(m,g),d.push(e[f]));break;case"child_moved":var v=!this.i.M(m).f(),y=Pd(i,m,g);v?y?(this.i=this.i.H(m,g),p.push(e[f])):(c.push(new V("child_removed",this.i.M(m),m)),this.i=this.i.H(m,k)):y&&(this.i=this.i.H(m,g),h.push(e[f]))}}var b=o||r;if(b){var _=(f=r!==k)?this.i.cd():this.i.dd(),w=l,S=l,x=this;(f?t.yc:t.w).call(t,function(t,e){return!S&&_===k&&(S=j),S&&w?j:(w?(c.push(new V("child_removed",x.i.M(t),t)),x.i=x.i.H(t,k)):S&&(h.push(new V("child_added",e,t)),x.i=x.i.H(t,e)),_===t&&(S=j),void(t===b&&(w=j)))})}for(f=0;f<h.length;f++)i=h[f],m=this.i.ea(i.aa,i.ta),c.push(new V("child_added",i.ta,i.aa,m));for(f=0;f<p.length;f++)i=p[f],m=this.i.ea(i.aa,i.ta),c.push(new V("child_moved",i.ta,i.aa,m));for(f=0;f<d.length;f++)i=d[f],m=this.i.ea(i.aa,i.ta),c.push(new V("child_changed",i.ta,i.aa,m));return this.pb&&0<c.length&&c.push(new V("value",this.i)),c},Nd.prototype.Cc=function(t){return this.i.M(t)!==N},Nd.prototype.lb=function(t,e,i){var n={};this.i.N()||this.i.w(function(t){n[t]=3});var s=this.i,i=T(i,new J("")),o=new Pa;Qa(K(o,this.J.path),j);var e=N.ya(t,e),r=this;return Hd(i,e,t,o,function(t,e,i){i!==k&&t.toString()===r.J.path.toString()&&r.dc(e,i)}),this.i.N()?cc(n,function(t,e){n[e]=2}):(this.i.w(function(t){C(n,t)||(n[t]=1)}),cc(n,function(t,e){r.i.M(e).f()&&(n[e]=2)})),this.i=s,n},Qd.prototype.Mb=function(t,e,i,n,s){var o=t.path,r=K(this.la,o),a=r.k();a===k?(a=new Kd,Qa(r,a)):y(!a.f(),"We shouldn't be storing empty QueryMaps");var u=t.La();if(a.contains(u))t=a.get(u),Ad(t,e,i,n,s);else{var c=this.g.ra.Q(o),c=t="default"===t.La()?new Fd(t,c):new Nd(t,c);if(Md(a)||Rd(r))a.add(u,c),a.S||(a.S=c.J.path);else{var h,l;a.f()||(h=a.toString(),l=a.Za()),a.add(u,c),a.S||(a.S=c.J.path),a.setActive(Sd(this,a)),h&&l&&id(this.u,a.path(),h,l)}Md(a)&&Sa(r,function(t){(t=t.k())&&(t.xa&&t.xa(),t.xa=k)}),Ad(t,e,i,n,s),(e=(e=Ta(K(this.la,o),function(t){var e;return(e=t.k())&&(e=t.k().defaultView())&&(e=t.k().defaultView().pb),e?j:void 0},j))||this.u===k&&!T(this.g,o).f())&&Ed(t)}t.Eb()},Qd.prototype.fc=function(t,e,i,n){var s=K(this.la,t.path).k();return s===k?k:Ud(this,s,t,e,i,n)},Qd.prototype.cc=function(t,e,i){t=K(this.la,t).k(),t!==k&&Ec(t,function(t,n){n.cc(e,i)})},Qd.prototype.lb=function(t,e,i,n){var s={};return Ec(e,function(e,o){var r=o.lb(t,i,n);cc(r,function(t,e){s[e]=3===t?3:(wa(s,e)||t)===t?t:3})}),i.N()||i.w(function(t){C(s,t)||(s[t]=4)}),s},r=be.prototype,r.toString=function(){return(this.K.hc?"https://":"http://")+this.K.host},r.name=function(){return this.K.Sb},r.Yb=function(t,e,i){this.wc++;var n,s,o=[];for(9<=t.length&&t.lastIndexOf(".priority")===t.length-9?(n=new J(t.substring(0,t.length-9)),s=T(this.g.sa,n).za(e),o.push(n)):i?(n=new J(t),s=T(this.g.sa,n),cc(e,function(t,e){var i=new J(e);".priority"===e?s=s.za(t):(s=s.ya(i,Q(t)),o.push(n.F(e)))})):(n=new J(t),s=Q(e),o.push(n)),t=Zd(this.G,n,s,this.g.I),e=l,i=0;i<t.length;++i){var r=t[i],a=this.g,u=r.path;U(a.sa,u,r.pa),e=td(a,u)||e}e&&(n=fe(this,n)),W(this.G,n,o)},r.Wb=function(t){if(ce(this,"connected",t),t===l){this.e("onDisconnectEvents");var e=this,i=[],n=ee(this),t=qd,s=new nd;qd(this.R,new J(""),function(t,e){od(s,t,ae(e,n))}),t(s,new J(""),function(t,n){var s=Zd(e.G,t,n,e.g.I);i.push.apply(i,e.g.set(t,s)),s=ge(e,t),fe(e,s),W(e.G,s,[t])}),vd(this.g,i),this.R=new nd}},r.Kc=function(t){var e=this;bc(t,function(t,i){ce(e,i,t)})},r.Bc=function(t){return t=new J(t),T(this.g.sa,t).hash()},r.vb=function(t){ce(this,"authenticated",t)},r.hb=function(t,e,i){"firebaseio-demo.com"===this.K.domain&&M("FirebaseRef.auth() not supported on demo (*.firebaseio-demo.com) Firebases. Please use on production (*.firebaseio.com) Firebases only."),this.u.hb(t,function(t,i){X(e,t,i)},function(t,e){if(M("auth() was canceled: "+e),i){var n=Error(e);n.code=t.toUpperCase(),i(n)}})},r.Kb=function(t){this.u.Kb(function(e){X(t,e)
})},r.bb=function(t,e,i,n){this.e("set",{path:t.toString(),value:e,ia:i});var s=ee(this),e=Q(e,i),s=ae(e,s),s=Zd(this.G,t,s,this.g.I),o=this.g.set(t,s),r=this;this.u.put(t.toString(),e.V(j),function(e){"ok"!==e&&M("set at "+t+" failed: "+e),vd(r.g,o),td(r.g,t);var i=fe(r,t);W(r.G,i,[]),X(n,e)}),s=ge(this,t),fe(this,s),W(this.G,s,[t])},r.update=function(t,e,i){this.e("update",{path:t.toString(),value:e});var n,s=T(this.g.ma,t),o=j,r=[],a=ee(this),u=[];for(n in e){var o=l,c=Q(e[n]),c=ae(c,a),s=s.H(n,c),h=t.F(n);r.push(h),c=Zd(this.G,h,c,this.g.I),u=u.concat(this.g.set(t,c))}if(o)L("update() called with empty data.  Don't do anything."),X(i,"ok");else{var p=this;ld(this.u,"m",t.toString(),e,function(e){y("ok"===e||"permission_denied"===e,"merge at "+t+" failed."),"ok"!==e&&M("update at "+t+" failed: "+e),vd(p.g,u),td(p.g,t);var n=fe(p,t);W(p.G,n,[]),X(i,e)},aa),e=ge(this,t),fe(this,e),W(p.G,e,r)}},r.Pc=function(t,e,i){this.e("setPriority",{path:t.toString(),ia:e});var n=ee(this),n=$d(e,n),n=T(this.g.I,t).za(n),n=Zd(this.G,t,n,this.g.I),s=this.g.set(t,n),o=this;this.u.put(t.toString()+"/.priority",e,function(e){"permission_denied"===e&&M("setPriority at "+t+" failed: "+e),vd(o.g,s),td(o.g,t);var n=fe(o,t);W(o.G,n,[]),X(i,e)}),e=fe(this,t),W(o.G,e,[])},r.Hc=function(t,e){var i=this;this.u.Hc(t.toString(),function(n){"ok"===n&&pd(i.R,t),X(e,n)})},r.Mb=function(t,e,i,n,s){".info"===E(t.path)?this.Ec.Mb(t,e,i,n,s):this.G.Mb(t,e,i,n,s)},r.fc=function(t,e,i,n){if(".info"===E(t.path))this.Ec.fc(t,e,i,n);else{if(e=this.G.fc(t,e,i,n),i=e!==k){for(var i=this.g,n=t.path,s=[],o=0;o<e.length;++o)s[o]=T(i.sa,e[o]);for(U(i.sa,n,N),o=0;o<e.length;++o)U(i.sa,e[o],s[o]);i=td(i,n)}i&&(y(this.g.ma.ra===this.G.Vb,"We should have raised any outstanding events by now.  Else, we'll blow them away."),U(this.g.ma,t.path,T(this.g.I,t.path)),this.G.Vb=this.g.ma.ra)}},r.Ia=function(){this.u.Ia()},r.ab=function(){this.u.ab()},r.Qc=function(t){if("undefined"!=typeof console){t?(this.kc||(this.kc=new yc(this.$)),t=this.kc.get()):t=this.$.get();var e,i=t,n=[],s=0;for(e in i)n[s++]=e;var o=function(t,e){return Math.max(e.length,t)};if(n.reduce)e=n.reduce(o,0);else{var r=0;vb(n,function(t){r=o.call(aa,r,t)}),e=r}for(var a in t){for(i=t[a],n=a.length;e+2>n;n++)a+=" ";console.log(a+i)}}},r.Rc=function(t){xc(this.$,t),this.qd.Sc[t]=j},r.e=function(){L("r:"+this.u.id+":",arguments)},ea(Y),Y.prototype.Ia=function(){for(var t in this.$a)this.$a[t].Ia()},Y.prototype.interrupt=Y.prototype.Ia,Y.prototype.ab=function(){for(var t in this.$a)this.$a[t].ab()},Y.prototype.resume=Y.prototype.ab;var Z={Dd:function(t){var e=O.prototype.hash;O.prototype.hash=t;var i=gc.prototype.hash;return gc.prototype.hash=t,function(){O.prototype.hash=e,gc.prototype.hash=i}}};Z.hijackHash=Z.Dd,Z.La=function(t){return t.La()},Z.queryIdentifier=Z.La,Z.Fd=function(t){return t.n.u.ga},Z.listens=Z.Fd,Z.Nd=function(t){return t.n.u.ja},Z.refConnection=Z.Nd,Z.sd=bd,Z.DataConnection=Z.sd,bd.prototype.sendRequest=bd.prototype.Ga,bd.prototype.interrupt=bd.prototype.Ia,Z.td=Uc,Z.RealTimeConnection=Z.td,Uc.prototype.sendRequest=Uc.prototype.od,Uc.prototype.close=Uc.prototype.close,Z.rd=pb,Z.ConnectionTarget=Z.rd,Z.Bd=function(){Ic=Oc=j},Z.forceLongPolling=Z.Bd,Z.Cd=function(){Jc=j},Z.forceWebSockets=Z.Cd,Z.Td=function(t,e){t.n.u.Oc=e},Z.setSecurityDebugCallback=Z.Td,Z.Qc=function(t,e){t.n.Qc(e)},Z.stats=Z.Qc,Z.Rc=function(t,e){t.n.Rc(e)},Z.statsIncrementCounter=Z.Rc,Z.wc=function(t){return t.n.wc},$.prototype.cancel=function(t){z("Firebase.onDisconnect().cancel",0,1,arguments.length),B("Firebase.onDisconnect().cancel",1,t,j),this.Fb.Hc(this.S,t)},$.prototype.cancel=$.prototype.cancel,$.prototype.remove=function(t){z("Firebase.onDisconnect().remove",0,1,arguments.length),D("Firebase.onDisconnect().remove",this.S),B("Firebase.onDisconnect().remove",1,t,j),he(this.Fb,this.S,k,t)},$.prototype.remove=$.prototype.remove,$.prototype.set=function(t,e){z("Firebase.onDisconnect().set",1,2,arguments.length),D("Firebase.onDisconnect().set",this.S),Aa("Firebase.onDisconnect().set",t,l),B("Firebase.onDisconnect().set",2,e,j),he(this.Fb,this.S,t,e)},$.prototype.set=$.prototype.set,$.prototype.bb=function(t,e,i){z("Firebase.onDisconnect().setWithPriority",2,3,arguments.length),D("Firebase.onDisconnect().setWithPriority",this.S),Aa("Firebase.onDisconnect().setWithPriority",t,l),Fa("Firebase.onDisconnect().setWithPriority",2,e,l),B("Firebase.onDisconnect().setWithPriority",3,i,j),(".length"===this.Ea||".keys"===this.Ea)&&g("Firebase.onDisconnect().setWithPriority failed: "+this.Ea+" is a read-only object.");var n=this.Fb,s=this.S,o=Q(t,e);jd(n.u,s.toString(),o.V(j),function(t){"ok"===t&&od(n.R,s,o),X(i,t)})},$.prototype.setWithPriority=$.prototype.bb,$.prototype.update=function(t,e){z("Firebase.onDisconnect().update",1,2,arguments.length),D("Firebase.onDisconnect().update",this.S),Ea("Firebase.onDisconnect().update",t),B("Firebase.onDisconnect().update",2,e,j);var i,n=this.Fb,s=this.S,o=j;for(i in t)o=l;if(o)L("onDisconnect().update() called with empty data.  Don't do anything."),X(e,j);else{o=n.u,i=s.toString();var r=function(i){if("ok"===i)for(var o in t){var r=Q(t[o]);od(n.R,s.F(o),r)}X(e,i)};o.P?kd(o,"om",i,t,r):o.wb.push({Mc:i,action:"om",data:t,C:r})}},$.prototype.update=$.prototype.update;var qe,re=0,se=[];qe=function(t){var e=t===re;re=t;for(var i=Array(8),n=7;n>=0;n--)i[n]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(t%64),t=Math.floor(t/64);if(y(0===t),t=i.join(""),e){for(n=11;n>=0&&63===se[n];n--)se[n]=0;se[n]++}else for(n=0;12>n;n++)se[n]=Math.floor(64*Math.random());for(n=0;12>n;n++)t+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(se[n]);return y(20===t.length,"NextPushId: Length should be 20."),t},la(H,F);var te=H,ue=["Firebase"],ve=ca;!(ue[0]in ve)&&ve.execScript&&ve.execScript("var "+ue[0]);for(var we;ue.length&&(we=ue.shift());)!ue.length&&s(te)?ve[we]=te:ve=ve[we]?ve[we]:ve[we]={};H.prototype.name=function(){return z("Firebase.name",0,0,arguments.length),this.path.f()?k:this.path.Z<this.path.m.length?this.path.m[this.path.m.length-1]:k},H.prototype.name=H.prototype.name,H.prototype.F=function(t){if(z("Firebase.child",1,1,arguments.length),ha(t))t=String(t);else if(!(t instanceof J))if(E(this.path)===k){var e=t;e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Ia("Firebase.child",e)}else Ia("Firebase.child",t);return new H(this.n,this.path.F(t))},H.prototype.child=H.prototype.F,H.prototype.parent=function(){z("Firebase.parent",0,0,arguments.length);var t=this.path.parent();return t===k?k:new H(this.n,t)},H.prototype.parent=H.prototype.parent,H.prototype.root=function(){z("Firebase.ref",0,0,arguments.length);for(var t=this;t.parent()!==k;)t=t.parent();return t},H.prototype.root=H.prototype.root,H.prototype.toString=function(){z("Firebase.toString",0,0,arguments.length);var t;if(this.parent()===k)t=this.n.toString();else{t=this.parent().toString()+"/";var e=this.name();t+=encodeURIComponent(String(e))}return t},H.prototype.toString=H.prototype.toString,H.prototype.set=function(t,e){return z("Firebase.set",1,2,arguments.length),D("Firebase.set",this.path),Aa("Firebase.set",t,l),B("Firebase.set",2,e,j),this.n.bb(this.path,t,k,e)},H.prototype.set=H.prototype.set,H.prototype.update=function(t,e){return z("Firebase.update",1,2,arguments.length),D("Firebase.update",this.path),Ea("Firebase.update",t),B("Firebase.update",2,e,j),C(t,".priority")&&g(Error("update() does not currently support updating .priority.")),this.n.update(this.path,t,e)},H.prototype.update=H.prototype.update,H.prototype.bb=function(t,e,i){return z("Firebase.setWithPriority",2,3,arguments.length),D("Firebase.setWithPriority",this.path),Aa("Firebase.setWithPriority",t,l),Fa("Firebase.setWithPriority",2,e,l),B("Firebase.setWithPriority",3,i,j),(".length"===this.name()||".keys"===this.name())&&g("Firebase.setWithPriority failed: "+this.name()+" is a read-only object."),this.n.bb(this.path,t,e,i)},H.prototype.setWithPriority=H.prototype.bb,H.prototype.remove=function(t){z("Firebase.remove",0,1,arguments.length),D("Firebase.remove",this.path),B("Firebase.remove",1,t,j),this.set(k,t)},H.prototype.remove=H.prototype.remove,H.prototype.transaction=function(t,e,i){function n(){}z("Firebase.transaction",1,3,arguments.length),D("Firebase.transaction",this.path),B("Firebase.transaction",1,t,l),B("Firebase.transaction",2,e,j),s(i)&&"boolean"!=typeof i&&g(Error(A("Firebase.transaction",3,j)+"must be a boolean.")),(".length"===this.name()||".keys"===this.name())&&g("Firebase.transaction failed: "+this.name()+" is a read-only object."),"undefined"==typeof i&&(i=j);var o=this.n,r=this.path,a=i;o.e("transaction on "+r);var u=new H(o,r);u.Xa("value",n);var a={path:r,update:t,C:e,status:k,hd:Nb(),qc:a,nd:0,nc:function(){u.ub("value",n)},oc:k},c=a.update(T(o.fb,r).V());if(s(c)){Ba("transaction failed: Data returned ",c),a.status=1;var h=K(o.eb,r),p=h.k()||[];p.push(a),Qa(h,p),p="object"==typeof c&&c!==k&&C(c,".priority")?c[".priority"]:T(o.g.I,r).j(),h=ee(o),c=Q(c,p),c=ae(c,h),U(o.fb,r,c),a.qc&&(U(o.g.ma,r,c),W(o.G,r,[r])),je(o)}else a.nc(),a.C&&(o=me(o,r),a.C(k,l,o))},H.prototype.transaction=H.prototype.transaction,H.prototype.Pc=function(t,e){z("Firebase.setPriority",1,2,arguments.length),D("Firebase.setPriority",this.path),Fa("Firebase.setPriority",1,t,l),B("Firebase.setPriority",2,e,j),this.n.Pc(this.path,t,e)},H.prototype.setPriority=H.prototype.Pc,H.prototype.push=function(t,e){z("Firebase.push",0,2,arguments.length),D("Firebase.push",this.path),Aa("Firebase.push",t,j),B("Firebase.push",2,e,j);var i=de(this.n),i=qe(i),i=this.F(i);return"undefined"!=typeof t&&t!==k&&i.set(t,e),i},H.prototype.push=H.prototype.push,H.prototype.ha=function(){return new $(this.n,this.path,this.name())},H.prototype.onDisconnect=H.prototype.ha,H.prototype.Od=function(){M("FirebaseRef.removeOnDisconnect() being deprecated. Please use FirebaseRef.onDisconnect().remove() instead."),this.ha().remove(),ie(this.n)},H.prototype.removeOnDisconnect=H.prototype.Od,H.prototype.Sd=function(t){M("FirebaseRef.setOnDisconnect(value) being deprecated. Please use FirebaseRef.onDisconnect().set(value) instead."),this.ha().set(t),ie(this.n)},H.prototype.setOnDisconnect=H.prototype.Sd,H.prototype.hb=function(t,e,i){z("Firebase.auth",1,3,arguments.length),u(t)||g(Error(A("Firebase.auth",1,l)+"must be a valid credential (a string).")),B("Firebase.auth",2,e,j),B("Firebase.auth",3,e,j),this.n.hb(t,e,i)},H.prototype.auth=H.prototype.hb,H.prototype.Kb=function(t){z("Firebase.unauth",0,1,arguments.length),B("Firebase.unauth",1,t,j),this.n.Kb(t)},H.prototype.unauth=H.prototype.Kb,H.goOffline=function(){z("Firebase.goOffline",0,0,arguments.length),Y.mb().Ia()},H.goOnline=function(){z("Firebase.goOnline",0,0,arguments.length),Y.mb().ab()},H.enableLogging=Tb,H.ServerValue={TIMESTAMP:{".sv":"timestamp"}},H.INTERNAL=Z,H.Context=Y}).bind(this)()}.bind(this)),require.register("app/vendor/handlebars.js",function(){!function(){var t=function(){function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){function e(t){return a[t]||"&amp;"}function i(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}function n(t){return t instanceof r?t.toString():t||0===t?(t=""+t,c.test(t)?t.replace(u,e):t):""}function s(t){return t||0===t?p(t)&&0===t.length?!0:!1:!0}var o={},r=t,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,c=/[&<>"'`]/;o.extend=i;var h=Object.prototype.toString;o.toString=h;var l=function(t){return"function"==typeof t};l(/x/)&&(l=function(t){return"function"==typeof t&&"[object Function]"===h.call(t)});var l;o.isFunction=l;var p=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===h.call(t):!1};return o.isArray=p,o.escapeExpression=n,o.isEmpty=s,o}(t),i=function(){function t(t,e){var n;e&&e.firstLine&&(n=e.firstLine,t+=" - "+n+":"+e.firstColumn);for(var s=Error.prototype.constructor.call(this,t),o=0;o<i.length;o++)this[i[o]]=s[i[o]];n&&(this.lineNumber=n,this.column=e.firstColumn)}var e,i=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,e=t}(),n=function(t,e){function i(t,e){this.helpers=t||{},this.partials=e||{},n(this)}function n(t){t.registerHelper("helperMissing",function(t){if(2===arguments.length)return void 0;throw new a("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,i){var n=i.inverse||function(){},s=i.fn;return p(e)&&(e=e.call(this)),e===!0?s(this):e===!1||null==e?n(this):l(e)?e.length>0?t.helpers.each(e,i):n(this):s(e)}),t.registerHelper("each",function(t,e){var i,n=e.fn,s=e.inverse,o=0,r="";if(p(t)&&(t=t.call(this)),e.data&&(i=g(e.data)),t&&"object"==typeof t)if(l(t))for(var a=t.length;a>o;o++)i&&(i.index=o,i.first=0===o,i.last=o===t.length-1),r+=n(t[o],{data:i});else for(var u in t)t.hasOwnProperty(u)&&(i&&(i.key=u,i.index=o,i.first=0===o),r+=n(t[u],{data:i}),o++);return 0===o&&(r=s(this)),r}),t.registerHelper("if",function(t,e){return p(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||r.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,i){return t.helpers["if"].call(this,e,{fn:i.inverse,inverse:i.fn,hash:i.hash})}),t.registerHelper("with",function(t,e){return p(t)&&(t=t.call(this)),r.isEmpty(t)?void 0:e.fn(t)}),t.registerHelper("log",function(e,i){var n=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;t.log(n,e)})}function s(t,e){m.log(t,e)}var o={},r=t,a=e,u="1.3.0";o.VERSION=u;var c=4;o.COMPILER_REVISION=c;var h={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};o.REVISION_CHANGES=h;var l=r.isArray,p=r.isFunction,d=r.toString,f="[object Object]";o.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:m,log:s,registerHelper:function(t,e,i){if(d.call(t)===f){if(i||e)throw new a("Arg not supported with multiple helpers");r.extend(this.helpers,t)}else i&&(e.not=i),this.helpers[t]=e},registerPartial:function(t,e){d.call(t)===f?r.extend(this.partials,t):this.partials[t]=e}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(m.level<=t){var i=m.methodMap[t];"undefined"!=typeof console&&console[i]&&console[i].call(console,e)}}};o.logger=m,o.log=s;var g=function(t){var e={};return r.extend(e,t),e};return o.createFrame=g,o}(e,i),s=function(t,e,i){function n(t){var e=t&&t[0]||1,i=p;if(e!==i){if(i>e){var n=d[i],s=d[e];throw new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+s+").")}throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function s(t,e){if(!e)throw new l("No environment passed to template");var i=function(t,i,n,s,o,r){var a=e.VM.invokePartial.apply(this,arguments);if(null!=a)return a;if(e.compile){var u={helpers:s,partials:o,data:r};return o[i]=e.compile(t,{data:void 0!==r},e),o[i](n,u)}throw new l("The partial "+i+" could not be compiled when running in runtime-only mode")},n={escapeExpression:h.escapeExpression,invokePartial:i,programs:[],program:function(t,e,i){var n=this.programs[t];return i?n=r(t,e,i):n||(n=this.programs[t]=r(t,e)),n},merge:function(t,e){var i=t||e;return t&&e&&t!==e&&(i={},h.extend(i,e),h.extend(i,t)),i},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(i,s){s=s||{};var o,r,a=s.partial?s:e;s.partial||(o=s.helpers,r=s.partials);var u=t.call(n,a,i,o,r,s.data);return s.partial||e.VM.checkRevision(n.compilerInfo),u}}function o(t,e,i){var n=Array.prototype.slice.call(arguments,3),s=function(t,s){return s=s||{},e.apply(this,[t,s.data||i].concat(n))};return s.program=t,s.depth=n.length,s}function r(t,e,i){var n=function(t,n){return n=n||{},e(t,n.data||i)};return n.program=t,n.depth=0,n}function a(t,e,i,n,s,o){var r={partial:!0,helpers:n,partials:s,data:o};if(void 0===t)throw new l("The partial "+e+" could not be found");return t instanceof Function?t(i,r):void 0}function u(){return""}var c={},h=t,l=e,p=i.COMPILER_REVISION,d=i.REVISION_CHANGES;return c.checkRevision=n,c.template=s,c.programWithDepth=o,c.program=r,c.invokePartial=a,c.noop=u,c}(e,i,n),o=function(t,e,i,n,s){var o,r=t,a=e,u=i,c=n,h=s,l=function(){var t=new r.HandlebarsEnvironment;return c.extend(t,r),t.SafeString=a,t.Exception=u,t.Utils=c,t.VM=h,t.template=function(e){return h.template(e,t)},t},p=l();return p.create=l,o=p}(n,t,i,e,s),r=function(t){function e(t){t=t||{},this.firstLine=t.first_line,this.firstColumn=t.first_column,this.lastColumn=t.last_column,this.lastLine=t.last_line}var i,n=t,s={ProgramNode:function(t,i,n,o){var r,a;3===arguments.length?(o=n,n=null):2===arguments.length&&(o=i,i=null),e.call(this,o),this.type="program",this.statements=t,this.strip={},n?(a=n[0],a?(r={first_line:a.firstLine,last_line:a.lastLine,last_column:a.lastColumn,first_column:a.firstColumn},this.inverse=new s.ProgramNode(n,i,r)):this.inverse=new s.ProgramNode(n,i),this.strip.right=i.left):i&&(this.strip.left=i.right)},MustacheNode:function(t,i,n,o,r){if(e.call(this,r),this.type="mustache",this.strip=o,null!=n&&n.charAt){var a=n.charAt(3)||n.charAt(2);this.escaped="{"!==a&&"&"!==a}else this.escaped=!!n;this.sexpr=t instanceof s.SexprNode?t:new s.SexprNode(t,i),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(t,i,n){e.call(this,n),this.type="sexpr",this.hash=i;var s=this.id=t[0],o=this.params=t.slice(1),r=this.eligibleHelper=s.isSimple;this.isHelper=r&&(o.length||i)},PartialNode:function(t,i,n,s){e.call(this,s),this.type="partial",this.partialName=t,this.context=i,this.strip=n},BlockNode:function(t,i,s,o,r){if(e.call(this,r),t.sexpr.id.original!==o.path.original)throw new n(t.sexpr.id.original+" doesn't match "+o.path.original,this);this.type="block",this.mustache=t,this.program=i,this.inverse=s,this.strip={left:t.strip.left,right:o.strip.right},(i||s).strip.left=t.strip.right,(s||i).strip.right=o.strip.left,s&&!i&&(this.isInverse=!0)},ContentNode:function(t,i){e.call(this,i),this.type="content",this.string=t},HashNode:function(t,i){e.call(this,i),this.type="hash",this.pairs=t},IdNode:function(t,i){e.call(this,i),this.type="ID";for(var s="",o=[],r=0,a=0,u=t.length;u>a;a++){var c=t[a].part;if(s+=(t[a].separator||"")+c,".."===c||"."===c||"this"===c){if(o.length>0)throw new n("Invalid path: "+s,this);".."===c?r++:this.isScoped=!0}else o.push(c)}this.original=s,this.parts=o,this.string=o.join("."),this.depth=r,this.isSimple=1===t.length&&!this.isScoped&&0===r,this.stringModeValue=this.string},PartialNameNode:function(t,i){e.call(this,i),this.type="PARTIAL_NAME",this.name=t.original},DataNode:function(t,i){e.call(this,i),this.type="DATA",this.id=t},StringNode:function(t,i){e.call(this,i),this.type="STRING",this.original=this.string=this.stringModeValue=t},IntegerNode:function(t,i){e.call(this,i),this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)},BooleanNode:function(t,i){e.call(this,i),this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},CommentNode:function(t,i){e.call(this,i),this.type="comment",this.comment=t}};return i=s}(i),a=function(){var t,e=function(){function t(t,e){return{left:"~"===t.charAt(2),right:"~"===e.charAt(0)||"~"===e.charAt(1)}}function e(){this.yy={}}var i={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(e,i,n,s,o,r){var a=r.length-1;switch(o){case 1:return new s.ProgramNode(r[a-1],this._$);case 2:return new s.ProgramNode([],this._$);case 3:this.$=new s.ProgramNode([],r[a-1],r[a],this._$);break;case 4:this.$=new s.ProgramNode(r[a-2],r[a-1],r[a],this._$);break;case 5:this.$=new s.ProgramNode(r[a-1],r[a],[],this._$);break;case 6:this.$=new s.ProgramNode(r[a],this._$);break;case 7:this.$=new s.ProgramNode([],this._$);break;case 8:this.$=new s.ProgramNode([],this._$);break;case 9:this.$=[r[a]];break;case 10:r[a-1].push(r[a]),this.$=r[a-1];break;case 11:this.$=new s.BlockNode(r[a-2],r[a-1].inverse,r[a-1],r[a],this._$);break;case 12:this.$=new s.BlockNode(r[a-2],r[a-1],r[a-1].inverse,r[a],this._$);break;case 13:this.$=r[a];break;case 14:this.$=r[a];break;case 15:this.$=new s.ContentNode(r[a],this._$);break;case 16:this.$=new s.CommentNode(r[a],this._$);break;case 17:this.$=new s.MustacheNode(r[a-1],null,r[a-2],t(r[a-2],r[a]),this._$);break;case 18:this.$=new s.MustacheNode(r[a-1],null,r[a-2],t(r[a-2],r[a]),this._$);break;case 19:this.$={path:r[a-1],strip:t(r[a-2],r[a])};break;case 20:this.$=new s.MustacheNode(r[a-1],null,r[a-2],t(r[a-2],r[a]),this._$);break;case 21:this.$=new s.MustacheNode(r[a-1],null,r[a-2],t(r[a-2],r[a]),this._$);break;case 22:this.$=new s.PartialNode(r[a-2],r[a-1],t(r[a-3],r[a]),this._$);break;case 23:this.$=t(r[a-1],r[a]);break;case 24:this.$=new s.SexprNode([r[a-2]].concat(r[a-1]),r[a],this._$);break;case 25:this.$=new s.SexprNode([r[a]],null,this._$);break;case 26:this.$=r[a];break;case 27:this.$=new s.StringNode(r[a],this._$);break;case 28:this.$=new s.IntegerNode(r[a],this._$);break;case 29:this.$=new s.BooleanNode(r[a],this._$);break;case 30:this.$=r[a];break;case 31:r[a-1].isHelper=!0,this.$=r[a-1];break;case 32:this.$=new s.HashNode(r[a],this._$);break;case 33:this.$=[r[a-2],r[a]];break;case 34:this.$=new s.PartialNameNode(r[a],this._$);break;case 35:this.$=new s.PartialNameNode(new s.StringNode(r[a],this._$),this._$);break;case 36:this.$=new s.PartialNameNode(new s.IntegerNode(r[a],this._$));break;case 37:this.$=new s.DataNode(r[a],this._$);break;case 38:this.$=new s.IdNode(r[a],this._$);break;case 39:r[a-2].push({part:r[a],separator:r[a-1]}),this.$=r[a-2];break;case 40:this.$=[{part:r[a]}];break;case 43:this.$=[];break;case 44:r[a-1].push(r[a]);break;case 47:this.$=[r[a]];break;case 48:r[a-1].push(r[a])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(t){throw new Error(t)},parse:function(t){function e(){var t;return t=i.lexer.lex()||1,"number"!=typeof t&&(t=i.symbols_[t]||t),t}var i=this,n=[0],s=[null],o=[],r=this.table,a="",u=0,c=0,h=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;o.push(l);var p=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,f,m,g,v,y,b,_,w,S={};;){if(m=n[n.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===d||"undefined"==typeof d)&&(d=e()),g=r[m]&&r[m][d]),"undefined"==typeof g||!g.length||!g[0]){var x="";if(!h){w=[];for(y in r[m])this.terminals_[y]&&y>2&&w.push("'"+this.terminals_[y]+"'");x=this.lexer.showPosition?"Parse error on line "+(u+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(u+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:l,expected:w})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+d);switch(g[0]){case 1:n.push(d),s.push(this.lexer.yytext),o.push(this.lexer.yylloc),n.push(g[1]),d=null,f?(d=f,f=null):(c=this.lexer.yyleng,a=this.lexer.yytext,u=this.lexer.yylineno,l=this.lexer.yylloc,h>0&&h--);break;case 2:if(b=this.productions_[g[1]][1],S.$=s[s.length-b],S._$={first_line:o[o.length-(b||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(b||1)].first_column,last_column:o[o.length-1].last_column},p&&(S._$.range=[o[o.length-(b||1)].range[0],o[o.length-1].range[1]]),v=this.performAction.call(S,a,c,u,this.yy,g[1],s,o),"undefined"!=typeof v)return v;b&&(n=n.slice(0,-1*b*2),s=s.slice(0,-1*b),o=o.slice(0,-1*b)),n.push(this.productions_[g[1]][0]),s.push(S.$),o.push(S._$),_=r[n[n.length-2]][n[n.length-1]],n.push(_);break;case 3:return!0}}return!0}},n=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");
return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,i,n,s;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),r=0;r<o.length&&(i=this._input.match(this.rules[o[r]]),!i||e&&!(i[0].length>e[0].length)||(e=i,n=r,this.options.flex));r++);return e?(s=e[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,i,n){function s(t,i){return e.yytext=e.yytext.substr(t,e.yyleng-i)}switch(i){case 0:if("\\\\"===e.yytext.slice(-2)?(s(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(s(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return s(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return s(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return e.yytext=s(1,2).replace(/\\"/g,'"'),32;case 24:return e.yytext=s(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return e.yytext=s(1,2),40;case 31:return"INVALID";case 32:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},t}();return i.lexer=n,e.prototype=i,i.Parser=e,new e}();return t=e}(),u=function(t,e){function i(t){return t.constructor===o.ProgramNode?t:(s.yy=o,s.parse(t))}var n={},s=t,o=e;return n.parser=s,n.parse=i,n}(a,r),c=function(t){function e(){}function i(t,e,i){if(null==t||"string"!=typeof t&&t.constructor!==i.AST.ProgramNode)throw new o("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var n=i.parse(t),s=(new i.Compiler).compile(n,e);return(new i.JavaScriptCompiler).compile(s,e)}function n(t,e,i){function n(){var n=i.parse(t),s=(new i.Compiler).compile(n,e),o=(new i.JavaScriptCompiler).compile(s,e,void 0,!0);return i.template(o)}if(null==t||"string"!=typeof t&&t.constructor!==i.AST.ProgramNode)throw new o("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var s;return function(t,e){return s||(s=n()),s.call(this,t,e)}}var s={},o=t;return s.Compiler=e,e.prototype={compiler:e,disassemble:function(){for(var t,e,i,n=this.opcodes,s=[],o=0,r=n.length;r>o;o++)if(t=n[o],"DECLARE"===t.opcode)s.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var a=0;a<t.args.length;a++)i=t.args[a],"string"==typeof i&&(i='"'+i.replace("\n","\\n")+'"'),e.push(i);s.push(t.opcode+" "+e.join(" "))}return s.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var i=0;e>i;i++){var n=this.opcodes[i],s=t.opcodes[i];if(n.opcode!==s.opcode||n.args.length!==s.args.length)return!1;for(var o=0;o<n.args.length;o++)if(n.args[o]!==s.args[o])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(i=0;e>i;i++)if(!this.children[i].equals(t.children[i]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e;var i=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},i)for(var n in i)this.options.knownHelpers[n]=i[n];return this.accept(t)},accept:function(t){var e,i=t.strip||{};return i.left&&this.opcode("strip"),e=this[t.type](t),i.right&&this.opcode("strip"),e},program:function(t){for(var e=t.statements,i=0,n=e.length;n>i;i++)this.accept(e[i]);return this.isSimple=1===n,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,i=(new this.compiler).compile(t,this.options),n=this.guid++;this.usePartial=this.usePartial||i.usePartial,this.children[n]=i;for(var s=0,o=i.depths.list.length;o>s;s++)e=i.depths.list[s],2>e||this.addDepth(e-1);return n},block:function(t){var e=t.mustache,i=t.program,n=t.inverse;i&&(i=this.compileProgram(i)),n&&(n=this.compileProgram(n));var s=e.sexpr,o=this.classifySexpr(s);"helper"===o?this.helperSexpr(s,i,n):"simple"===o?(this.simpleSexpr(s),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(s,i,n),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,i,n=t.pairs;this.opcode("pushHash");for(var s=0,o=n.length;o>s;s++)e=n[s],i=e[1],this.options.stringParams?(i.depth&&this.addDepth(i.depth),this.opcode("getContext",i.depth||0),this.opcode("pushStringParam",i.stringModeValue,i.type),"sexpr"===i.type&&this.sexpr(i)):this.accept(i),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){this.sexpr(t.sexpr),this.opcode(t.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(t,e,i){var n=t.id,s=n.parts[0],o=null!=e||null!=i;this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.opcode("invokeAmbiguous",s,o)},simpleSexpr:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,i){var n=this.setupFullMustacheParams(t,e,i),s=t.id.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",n.length,s);else{if(this.options.knownHelpersOnly)throw new o("You specified knownHelpersOnly, but used the unknown helper "+s,t);this.opcode("invokeHelper",n.length,s,t.isRoot)}},sexpr:function(t){var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var i=1,n=t.parts.length;n>i;i++)this.opcode("lookup",t.parts[i])},DATA:function(t){if(this.options.data=!0,t.id.isScoped||t.id.depth)throw new o("Scoped data references are not supported: "+t.original,t);this.opcode("lookupData");for(var e=t.id.parts,i=0,n=e.length;n>i;i++)this.opcode("lookup",e[i])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifySexpr:function(t){var e=t.isHelper,i=t.eligibleHelper,n=this.options;if(i&&!e){var s=t.id.parts[0];n.knownHelpers[s]?e=!0:n.knownHelpersOnly&&(i=!1)}return e?"helper":i?"ambiguous":"simple"},pushParams:function(t){for(var e,i=t.length;i--;)e=t[i],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type),"sexpr"===e.type&&this.sexpr(e)):this[e.type](e)},setupFullMustacheParams:function(t,e,i){var n=t.params;return this.pushParams(n),this.opcode("pushProgram",e),this.opcode("pushProgram",i),t.hash?this.hash(t.hash):this.opcode("emptyHash"),n}},s.precompile=i,s.compile=n,s}(i),h=function(t,e){function i(t){this.value=t}function n(){}var s,o=t.COMPILER_REVISION,r=t.REVISION_CHANGES,a=t.log,u=e;n.prototype={nameLookup:function(t,e){var i,s;return 0===t.indexOf("depth")&&(i=!0),s=/^[0-9]+$/.test(e)?t+"["+e+"]":n.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']",i?"("+t+" && "+s+")":s},compilerInfo:function(){var t=o,e=r[t];return"this.compilerInfo = ["+t+",'"+e+"'];\n"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,i,n){this.environment=t,this.options=e||{},a("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e);var s,o=t.opcodes;this.i=0;for(var r=o.length;this.i<r;this.i++)s=o[this.i],"DECLARE"===s.opcode?this[s.name]=s.value:this[s.opcode].apply(this,s.args),s.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new u("Compile completed with content left on stack");return this.createFunctionContext(n)},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,i="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(i=i+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(i+=" data = data || {};"),t.push(i)}t.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(t){var e=this.stackVars.concat(this.registers.list);if(e.length>0&&(this.source[1]=this.source[1]+", "+e.join(", ")),!this.isChild)for(var i in this.context.aliases)this.context.aliases.hasOwnProperty(i)&&(this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var n=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],s=0,o=this.environment.depths.list.length;o>s;s++)n.push("depth"+this.environment.depths.list[s]);var r=this.mergeSource();if(this.isChild||(r=this.compilerInfo()+r),t)return n.push(r),Function.apply(this,n);var u="function "+(this.name||"")+"("+n.join(",")+") {\n  "+r+"}";return a("debug",u+"\n\n"),u},mergeSource:function(){for(var t,e="",i=0,n=this.source.length;n>i;i++){var s=this.source[i];s.appendToBuffer?t=t?t+"\n    + "+s.content:s.content:(t&&(e+="buffer += "+t+";\n  ",t=void 0),e+=s+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.stripNext&&(t=t.replace(/^\s+/,"")),this.pendingContent=t},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"sexpr"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+t.contexts.join(",")+"}"),this.push("{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){this.pushStackLiteral(null!=t?this.programExpression(t):null)},invokeHelper:function(t,e,i){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var n=this.lastHelper=this.setupHelper(t,e,!0),s=this.nameLookup("depth"+this.lastContext,e,"context"),o="helper = "+n.name+" || "+s;n.paramsInit&&(o+=","+n.paramsInit),this.push("("+o+",helper ? helper.call("+n.callParams+") : helperMissing.call("+n.helperMissingParams+"))"),i||this.flushInline()},invokeKnownHelper:function(t,e){var i=this.setupHelper(t,e);this.push(i.name+".call("+i.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var i=this.setupHelper(0,t,e),n=this.lastHelper=this.nameLookup("helpers",t,"helper"),s=this.nameLookup("depth"+this.lastContext,t,"context"),o=this.nextStack();i.paramsInit&&this.pushSource(i.paramsInit),this.pushSource("if (helper = "+n+") { "+o+" = helper.call("+i.callParams+"); }"),this.pushSource("else { helper = "+s+"; "+o+" = typeof helper === functionType ? helper.call("+i.callParams+") : helper; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,i,n=this.popStack();this.options.stringParams&&(i=this.popStack(),e=this.popStack());var s=this.hash;e&&s.contexts.push("'"+t+"': "+e),i&&s.types.push("'"+t+"': "+i),s.values.push("'"+t+"': ("+n+")")},compiler:n,compileChildren:function(t,e){for(var i,n,s=t.children,o=0,r=s.length;r>o;o++){i=s[o],n=new this.compiler;var a=this.matchExistingProgram(i);null==a?(this.context.programs.push(""),a=this.context.programs.length,i.index=a,i.name="program"+a,this.context.programs[a]=n.compile(i,e,this.context),this.context.environments[a]=i):(i.index=a,i.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,i=this.context.environments.length;i>e;e++){var n=this.context.environments[e];if(n&&n.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,i=this.environment.children[t],n=i.depths.list,s=[i.index,i.name,"data"],o=0,r=n.length;r>o;o++)e=n[o],s.push(1===e?"depth0":"depth"+(e-1));return(0===n.length?"self.program(":"self.programWithDepth(")+s.join(", ")+")"},register:function(t,e){this.useRegister(t),this.pushSource(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new i(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,n,s,o="",r=this.isInline();if(r){var a=this.popStack(!0);if(a instanceof i)e=a.value,s=!0;else{n=!this.stackSlot;var u=n?this.incrStack():this.topStackName();o="("+this.push(u)+" = "+a+"),",e=this.topStack()}}else e=this.topStack();var c=t.call(this,e);return r?(s||this.popStack(),n&&this.stackSlot--,this.push("("+o+c+")")):(/^stack/.test(e)||(e=this.nextStack()),this.pushSource(e+" = ("+o+c+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,n=t.length;n>e;e++){var s=t[e];s instanceof i?this.compileStack.push(s):this.pushStack(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),n=(e?this.inlineStack:this.compileStack).pop();if(!t&&n instanceof i)return n.value;if(!e){if(!this.stackSlot)throw new u("Invalid stack pop");this.stackSlot--}return n},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,n=e[e.length-1];return!t&&n instanceof i?n.value:n},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,i){var n=[],s=this.setupParams(t,n,i),o=this.nameLookup("helpers",e,"helper");return{params:n,paramsInit:s,name:o,callParams:["depth0"].concat(n).join(", "),helperMissingParams:i&&["depth0",this.quotedString(e)].concat(n).join(", ")}},setupOptions:function(t,e){var i,n,s,o=[],r=[],a=[];o.push("hash:"+this.popStack()),this.options.stringParams&&(o.push("hashTypes:"+this.popStack()),o.push("hashContexts:"+this.popStack())),n=this.popStack(),s=this.popStack(),(s||n)&&(s||(this.context.aliases.self="this",s="self.noop"),n||(this.context.aliases.self="this",n="self.noop"),o.push("inverse:"+n),o.push("fn:"+s));for(var u=0;t>u;u++)i=this.popStack(),e.push(i),this.options.stringParams&&(a.push(this.popStack()),r.push(this.popStack()));return this.options.stringParams&&(o.push("contexts:["+r.join(",")+"]"),o.push("types:["+a.join(",")+"]")),this.options.data&&o.push("data:data"),o},setupParams:function(t,e,i){var n="{"+this.setupOptions(t,e).join(",")+"}";return i?(this.useRegister("options"),e.push("options"),"options="+n):(e.push(n),"")}};for(var c="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),h=n.RESERVED_WORDS={},l=0,p=c.length;p>l;l++)h[c[l]]=!0;return n.isValidJavaScriptVariableName=function(t){return!n.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)?!0:!1},s=n}(n,i),l=function(t,e,i,n,s){var o,r=t,a=e,u=i.parser,c=i.parse,h=n.Compiler,l=n.compile,p=n.precompile,d=s,f=r.create,m=function(){var t=f();return t.compile=function(e,i){return l(e,i,t)},t.precompile=function(e,i){return p(e,i,t)},t.AST=a,t.Compiler=h,t.JavaScriptCompiler=d,t.Parser=u,t.parse=c,t};return r=m(),r.create=m,o=r}(o,r,u,c,h);return l}()}.bind(this)),require.register("app/vendor/notify.js",function(){!function(t,e){"function"==typeof define&&define.amd?define("notify",[],function(){return e(t,document)}):t.Notify=e(t,document)}(this,function(t){function e(t,e){if(this.title="string"==typeof t?t:null,this.options={icon:"",body:"",tag:"",notifyShow:null,notifyClose:null,notifyClick:null,notifyError:null,permissionGranted:null,permissionDenied:null},this.permission=null,this.isSupported()){if(!this.title)throw new Error("Notify(): first arg (title) must be a string.");if("object"==typeof e){for(var i in e)e.hasOwnProperty(i)&&(this.options[i]=e[i]);"function"==typeof this.options.notifyShow&&(this.onShowCallback=this.options.notifyShow),"function"==typeof this.options.notifyClose&&(this.onCloseCallback=this.options.notifyClose),"function"==typeof this.options.notifyClick&&(this.onClickCallback=this.options.notifyClick),"function"==typeof this.options.notifyError&&(this.onErrorCallback=this.options.notifyError),"function"==typeof this.options.permissionGranted&&(this.onPermissionGrantedCallback=this.options.permissionGranted),"function"==typeof this.options.permissionDenied&&(this.onPermissionDeniedCallback=this.options.permissionDenied)}}}return e.prototype.needsPermission=function(){return"Notification"in t&&"granted"===Notification.permission?!1:"mozNotification"in navigator?!1:!0},e.prototype.requestPermission=function(){var e=this;t.Notification.requestPermission(function(t){switch(e.permission=t,e.permission){case"granted":e.onPermissionGranted();break;case"denied":e.onPermissionDenied()}})},e.prototype.show=function(){this.isSupported()&&("Notification"in t?(this.myNotify=new Notification(this.title,{body:this.options.body,tag:this.options.tag,icon:this.options.icon}),this.myNotify.addEventListener("show",this,!1),this.myNotify.addEventListener("error",this,!1)):(this.myNotify=navigator.mozNotification.createNotification(this.title,this.options.body),this.myNotify.show()),this.myNotify.addEventListener("close",this,!1),this.myNotify.addEventListener("click",this,!1))},e.prototype.onShowNotification=function(){this.onShowCallback&&this.onShowCallback()},e.prototype.onCloseNotification=function(){this.onCloseCallback&&this.onCloseCallback(),this.destroy()},e.prototype.onClickNotification=function(){this.onClickCallback&&this.onClickCallback()},e.prototype.onErrorNotification=function(){this.onErrorCallback&&this.onErrorCallback(),this.destroy()},e.prototype.onPermissionGranted=function(){this.onPermissionGrantedCallback&&this.onPermissionGrantedCallback()},e.prototype.onPermissionDenied=function(){this.onPermissionDeniedCallback&&this.onPermissionDeniedCallback()},e.prototype.destroy=function(){"Notification"in t&&(this.myNotify.removeEventListener("show",this,!1),this.myNotify.removeEventListener("error",this,!1)),this.myNotify.removeEventListener("close",this,!1),this.myNotify.removeEventListener("click",this,!1)},e.prototype.isSupported=function(){return"Notification"in t||"mozNotification"in navigator?!0:!1},e.prototype.handleEvent=function(t){switch(t.type){case"show":this.onShowNotification(t);break;case"close":this.onCloseNotification(t);break;case"click":this.onClickNotification(t);break;case"error":this.onErrorNotification(t)}},e})}.bind(this)),require.register("app/vendor/oauthpopup.js",function(){!function(t){t.oauthpopup=function(e){if(!e||!e.path)throw new Error("options.path must not be empty");e=t.extend({windowName:"ConnectWithOAuth",windowOptions:"location=0,status=0,width=800,height=400",callback:function(){window.location.reload()}},e);var i=window.open(e.path,e.windowName,e.windowOptions),n=window.setInterval(function(){i.closed&&(window.clearInterval(n),e.callback())},1e3)},t.fn.oauthpopup=function(e){$this=t(this),$this.click(t.oauthpopup.bind(this,e))}}(Zepto)}.bind(this)),require.register("app/vendor/peer.js",function(){(function(t){function e(){this._pieces=[],this._parts=[]}function i(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function n(){this.bufferBuilder=new e}function s(t){var e=t.charCodeAt(0);return 2047>=e?"00":65535>=e?"000":2097151>=e?"0000":67108863>=e?"00000":"000000"}function o(t){return t.length>600?new Blob([t]).size:t.replace(/[^\u0000-\u007F]/g,s).length}function r(){this._events={}}function a(t,e){return this instanceof a?(this._dc=t,g.debug=e,this._outgoing={},this._incoming={},this._received={},this._window=1e3,this._mtu=500,this._interval=0,this._count=0,this._queue=[],void this._setupDC()):new a(t)}function u(t,e){if(!(this instanceof u))return new u(t,e);if(r.call(this),t&&t.constructor==Object?(e=t,t=void 0):t&&(t=t.toString()),e=g.extend({debug:0,host:g.CLOUD_HOST,port:g.CLOUD_PORT,key:"peerjs",config:g.defaultConfig},e),this.options=e,"/"===e.host&&(e.host=window.location.hostname),void 0===e.secure&&e.host!==g.CLOUD_HOST&&(e.secure=g.isSecure()),e.logFunction&&g.setLogFunction(e.logFunction),g.setLogLevel(e.debug),!g.supports.audioVideo&&!g.supports.data)return void this._delayedAbort("browser-incompatible","The current browser does not support WebRTC");if(!g.validateId(t))return void this._delayedAbort("invalid-id",'ID "'+t+'" is invalid');if(!g.validateKey(e.key))return void this._delayedAbort("invalid-key",'API KEY "'+e.key+'" is invalid');if(e.secure&&"0.peerjs.com"===e.host)return void this._delayedAbort("ssl-unavailable","The cloud server currently does not support HTTPS. Please run your own PeerServer to use HTTPS.");this.destroyed=!1,this.disconnected=!1,this.open=!1,this.connections={},this._lostMessages={};var i=this;this.socket=new l(this.options.secure,this.options.host,this.options.port,this.options.key),this.socket.on("message",function(t){i._handleMessage(t)}),this.socket.on("error",function(t){i._abort("socket-error",t)}),this.socket.on("close",function(){i.disconnected||i._abort("socket-closed","Underlying socket is already closed.")}),t?this._initialize(t):this._retrieveId()}function c(t,e,i){return this instanceof c?(r.call(this),this.options=g.extend({serialization:"binary",reliable:!1},i),this.open=!1,this.type="data",this.peer=t,this.provider=e,this.id=this.options.connectionId||c._idPrefix+g.randomToken(),this.label=this.options.label||this.id,this.metadata=this.options.metadata,this.serialization=this.options.serialization,this.reliable=this.options.reliable,this._buffer=[],this._buffering=!1,this.bufferSize=0,this._chunkedData={},this.options._payload&&(this._peerBrowser=this.options._payload.browser),void v.startConnection(this,this.options._payload||{originator:!0})):new c(t,e,i)}function h(t,e,i){return this instanceof h?(r.call(this),this.options=g.extend({},i),this.open=!1,this.type="media",this.peer=t,this.provider=e,this.metadata=this.options.metadata,this.localStream=this.options._stream,this.id=this.options.connectionId||h._idPrefix+g.randomToken(),void(this.localStream&&v.startConnection(this,{_stream:this.localStream,originator:!0}))):new h(t,e,i)}function l(t,e,i,n){if(!(this instanceof l))return new l(t,e,i,n);r.call(this),this.disconnected=!1,this._queue=[];var s=t?"https://":"http://",o=t?"wss://":"ws://";this._httpUrl=s+e+":"+i+"/"+n,this._wsUrl=o+e+":"+i+"/peerjs?key="+n}var p={};p.useBlobBuilder=function(){try{return new Blob([]),!1}catch(t){return!0}}(),p.useArrayBufferView=!p.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(t){return!0}}(),t.binaryFeatures=p,t.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder,e.prototype.append=function(t){"number"==typeof t?this._pieces.push(t):(this.flush(),this._parts.push(t))},e.prototype.flush=function(){if(this._pieces.length>0){var t=new Uint8Array(this._pieces);p.useArrayBufferView||(t=t.buffer),this._parts.push(t),this._pieces=[]}},e.prototype.getBuffer=function(){if(this.flush(),p.useBlobBuilder){for(var t=new BlobBuilder,e=0,i=this._parts.length;i>e;e++)t.append(this._parts[e]);return t.getBlob()}return new Blob(this._parts)},t.BinaryPack={unpack:function(t){var e=new i(t);return e.unpack()},pack:function(t){var e=new n;e.pack(t);var i=e.getBuffer();return i}},i.prototype.unpack=function(){var t=this.unpack_uint8();if(128>t){var e=t;return e}if(32>(224^t)){var i=(224^t)-32;return i}var n;if((n=160^t)<=15)return this.unpack_raw(n);if((n=176^t)<=15)return this.unpack_string(n);if((n=144^t)<=15)return this.unpack_array(n);if((n=128^t)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return void 0;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return void 0;case 213:return void 0;case 214:return void 0;case 215:return void 0;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}},i.prototype.unpack_uint8=function(){var t=255&this.dataView[this.index];return this.index++,t},i.prototype.unpack_uint16=function(){var t=this.read(2),e=256*(255&t[0])+(255&t[1]);return this.index+=2,e},i.prototype.unpack_uint32=function(){var t=this.read(4),e=256*(256*(256*t[0]+t[1])+t[2])+t[3];return this.index+=4,e},i.prototype.unpack_uint64=function(){var t=this.read(8),e=256*(256*(256*(256*(256*(256*(256*t[0]+t[1])+t[2])+t[3])+t[4])+t[5])+t[6])+t[7];return this.index+=8,e},i.prototype.unpack_int8=function(){var t=this.unpack_uint8();return 128>t?t:t-256},i.prototype.unpack_int16=function(){var t=this.unpack_uint16();return 32768>t?t:t-65536},i.prototype.unpack_int32=function(){var t=this.unpack_uint32();return t<Math.pow(2,31)?t:t-Math.pow(2,32)},i.prototype.unpack_int64=function(){var t=this.unpack_uint64();
return t<Math.pow(2,63)?t:t-Math.pow(2,64)},i.prototype.unpack_raw=function(t){if(this.length<this.index+t)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+t+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,e},i.prototype.unpack_string=function(t){for(var e,i,n=this.read(t),s=0,o="";t>s;)e=n[s],128>e?(o+=String.fromCharCode(e),s++):32>(192^e)?(i=(192^e)<<6|63&n[s+1],o+=String.fromCharCode(i),s+=2):(i=(15&e)<<12|(63&n[s+1])<<6|63&n[s+2],o+=String.fromCharCode(i),s+=3);return this.index+=t,o},i.prototype.unpack_array=function(t){for(var e=new Array(t),i=0;t>i;i++)e[i]=this.unpack();return e},i.prototype.unpack_map=function(t){for(var e={},i=0;t>i;i++){var n=this.unpack(),s=this.unpack();e[n]=s}return e},i.prototype.unpack_float=function(){var t=this.unpack_uint32(),e=t>>31,i=(t>>23&255)-127,n=8388607&t|8388608;return(0==e?1:-1)*n*Math.pow(2,i-23)},i.prototype.unpack_double=function(){var t=this.unpack_uint32(),e=this.unpack_uint32(),i=t>>31,n=(t>>20&2047)-1023,s=1048575&t|1048576,o=s*Math.pow(2,n-20)+e*Math.pow(2,n-52);return(0==i?1:-1)*o},i.prototype.read=function(t){var e=this.index;if(e+t<=this.length)return this.dataView.subarray(e,e+t);throw new Error("BinaryPackFailure: read index out of range")},n.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},n.prototype.pack=function(t){var e=typeof t;if("string"==e)this.pack_string(t);else if("number"==e)Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if("boolean"==e)t===!0?this.bufferBuilder.append(195):t===!1&&this.bufferBuilder.append(194);else if("undefined"==e)this.bufferBuilder.append(192);else{if("object"!=e)throw new Error('Type "'+e+'" not yet supported');if(null===t)this.bufferBuilder.append(192);else{var i=t.constructor;if(i==Array)this.pack_array(t);else if(i==Blob||i==File)this.pack_bin(t);else if(i==ArrayBuffer)this.pack_bin(p.useArrayBufferView?new Uint8Array(t):t);else if("BYTES_PER_ELEMENT"in t)this.pack_bin(p.useArrayBufferView?new Uint8Array(t.buffer):t.buffer);else if(i==Object)this.pack_object(t);else if(i==Date)this.pack_string(t.toString());else{if("function"!=typeof t.toBinaryPack)throw new Error('Type "'+i.toString()+'" not yet supported');this.bufferBuilder.append(t.toBinaryPack())}}}this.bufferBuilder.flush()},n.prototype.pack_bin=function(t){var e=t.length||t.byteLength||t.size;if(15>=e)this.pack_uint8(160+e);else if(65535>=e)this.bufferBuilder.append(218),this.pack_uint16(e);else{if(!(4294967295>=e))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(e)}this.bufferBuilder.append(t)},n.prototype.pack_string=function(t){var e=o(t);if(15>=e)this.pack_uint8(176+e);else if(65535>=e)this.bufferBuilder.append(216),this.pack_uint16(e);else{if(!(4294967295>=e))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(e)}this.bufferBuilder.append(t)},n.prototype.pack_array=function(t){var e=t.length;if(15>=e)this.pack_uint8(144+e);else if(65535>=e)this.bufferBuilder.append(220),this.pack_uint16(e);else{if(!(4294967295>=e))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(e)}for(var i=0;e>i;i++)this.pack(t[i])},n.prototype.pack_integer=function(t){if(t>=-32&&127>=t)this.bufferBuilder.append(255&t);else if(t>=0&&255>=t)this.bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&127>=t)this.bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&65535>=t)this.bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&32767>=t)this.bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&4294967295>=t)this.bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&2147483647>=t)this.bufferBuilder.append(210),this.pack_int32(t);else if(t>=-0x8000000000000000&&0x8000000000000000>=t)this.bufferBuilder.append(211),this.pack_int64(t);else{if(!(t>=0&&0x10000000000000000>=t))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(t)}},n.prototype.pack_double=function(t){var e=0;0>t&&(e=1,t=-t);var i=Math.floor(Math.log(t)/Math.LN2),n=t/Math.pow(2,i)-1,s=Math.floor(n*Math.pow(2,52)),o=Math.pow(2,32),r=e<<31|i+1023<<20|s/o&1048575,a=s%o;this.bufferBuilder.append(203),this.pack_int32(r),this.pack_int32(a)},n.prototype.pack_object=function(t){var e=Object.keys(t),i=e.length;if(15>=i)this.pack_uint8(128+i);else if(65535>=i)this.bufferBuilder.append(222),this.pack_uint16(i);else{if(!(4294967295>=i))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(i)}for(var n in t)t.hasOwnProperty(n)&&(this.pack(n),this.pack(t[n]))},n.prototype.pack_uint8=function(t){this.bufferBuilder.append(t)},n.prototype.pack_uint16=function(t){this.bufferBuilder.append(t>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_uint32=function(t){var e=4294967295&t;this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},n.prototype.pack_uint64=function(t){var e=t/Math.pow(2,32),i=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&i)>>>24),this.bufferBuilder.append((16711680&i)>>>16),this.bufferBuilder.append((65280&i)>>>8),this.bufferBuilder.append(255&i)},n.prototype.pack_int8=function(t){this.bufferBuilder.append(255&t)},n.prototype.pack_int16=function(t){this.bufferBuilder.append((65280&t)>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_int32=function(t){this.bufferBuilder.append(t>>>24&255),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_int64=function(t){var e=Math.floor(t/Math.pow(2,32)),i=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&i)>>>24),this.bufferBuilder.append((16711680&i)>>>16),this.bufferBuilder.append((65280&i)>>>8),this.bufferBuilder.append(255&i)};var d=Array.isArray;r.prototype.addListener=function(t,e){if("function"!=typeof e)throw new Error("addListener only takes instances of Function");return this.emit("newListener",t,"function"==typeof e.listener?e.listener:e),this._events[t]?d(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function i(){n.removeListener(t,i),e.apply(this,arguments)}if("function"!=typeof e)throw new Error(".once only takes instances of Function");var n=this;return i.listener=e,n.on(t,i),this},r.prototype.removeListener=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");if(!this._events[t])return this;var i=this._events[t];if(d(i)){for(var n=-1,s=0,o=i.length;o>s;s++)if(i[s]===e||i[s].listener&&i[s].listener===e){n=s;break}if(0>n)return this;i.splice(n,1),0==i.length&&delete this._events[t]}else(i===e||i.listener&&i.listener===e)&&delete this._events[t];return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},r.prototype.listeners=function(t){return this._events[t]||(this._events[t]=[]),d(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},r.prototype.emit=function(t){var t=arguments[0],e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:for(var i=arguments.length,n=new Array(i-1),s=1;i>s;s++)n[s-1]=arguments[s];e.apply(this,n)}return!0}if(d(e)){for(var i=arguments.length,n=new Array(i-1),s=1;i>s;s++)n[s-1]=arguments[s];for(var o=e.slice(),s=0,i=o.length;i>s;s++)o[s].apply(this,n);return!0}return!1},a.prototype.send=function(t){var e=g.pack(t);return e.size<this._mtu?void this._handleSend(["no",e]):(this._outgoing[this._count]={ack:0,chunks:this._chunk(e)},g.debug&&(this._outgoing[this._count].timer=new Date),this._sendWindowedChunks(this._count),void(this._count+=1))},a.prototype._setupInterval=function(){var t=this;this._timeout=setInterval(function(){var e=t._queue.shift();if(e._multiple)for(var i=0,n=e.length;n>i;i+=1)t._intervalSend(e[i]);else t._intervalSend(e)},this._interval)},a.prototype._intervalSend=function(t){var e=this;t=g.pack(t),g.blobToBinaryString(t,function(t){e._dc.send(t)}),0===e._queue.length&&(clearTimeout(e._timeout),e._timeout=null)},a.prototype._processAcks=function(){for(var t in this._outgoing)this._outgoing.hasOwnProperty(t)&&this._sendWindowedChunks(t)},a.prototype._handleSend=function(t){for(var e=!0,i=0,n=this._queue.length;n>i;i+=1){var s=this._queue[i];s===t?e=!1:s._multiple&&-1!==s.indexOf(t)&&(e=!1)}e&&(this._queue.push(t),this._timeout||this._setupInterval())},a.prototype._setupDC=function(){var t=this;this._dc.onmessage=function(e){var i=e.data,n=i.constructor;if(n===String){var s=g.binaryStringToArrayBuffer(i);i=g.unpack(s),t._handleMessage(i)}}},a.prototype._handleMessage=function(t){var e,i=t[1],n=this._incoming[i],s=this._outgoing[i];switch(t[0]){case"no":var o=i;o&&this.onmessage(g.unpack(o));break;case"end":if(e=n,this._received[i]=t[2],!e)break;this._ack(i);break;case"ack":if(e=s){var r=t[2];e.ack=Math.max(r,e.ack),e.ack>=e.chunks.length?(g.log("Time: ",new Date-e.timer),delete this._outgoing[i]):this._processAcks()}break;case"chunk":if(e=n,!e){var a=this._received[i];if(a===!0)break;e={ack:["ack",i,0],chunks:[]},this._incoming[i]=e}var u=t[2],c=t[3];e.chunks[u]=new Uint8Array(c),u===e.ack[2]&&this._calculateNextAck(i),this._ack(i);break;default:this._handleSend(t)}},a.prototype._chunk=function(t){for(var e=[],i=t.size,n=0;i>n;){var s=Math.min(i,n+this._mtu),o=t.slice(n,s),r={payload:o};e.push(r),n=s}return g.log("Created",e.length,"chunks."),e},a.prototype._ack=function(t){var e=this._incoming[t].ack;this._received[t]===e[2]&&(this._complete(t),this._received[t]=!0),this._handleSend(e)},a.prototype._calculateNextAck=function(t){for(var e=this._incoming[t],i=e.chunks,n=0,s=i.length;s>n;n+=1)if(void 0===i[n])return void(e.ack[2]=n);e.ack[2]=i.length},a.prototype._sendWindowedChunks=function(t){g.log("sendWindowedChunks for: ",t);for(var e=this._outgoing[t],i=e.chunks,n=[],s=Math.min(e.ack+this._window,i.length),o=e.ack;s>o;o+=1)i[o].sent&&o!==e.ack||(i[o].sent=!0,n.push(["chunk",t,o,i[o].payload]));e.ack+this._window>=i.length&&n.push(["end",t,i.length]),n._multiple=!0,this._handleSend(n)},a.prototype._complete=function(t){g.log("Completed called for",t);var e=this,i=this._incoming[t].chunks,n=new Blob(i);g.blobToArrayBuffer(n,function(t){e.onmessage(g.unpack(t))}),delete this._incoming[t]},a.higherBandwidthSDP=function(t){var e=navigator.appVersion.match(/Chrome\/(.*?) /);if(e&&(e=parseInt(e[1].split(".").shift()),31>e)){var i=t.split("b=AS:30"),n="b=AS:102400";if(i.length>1)return i[0]+n+i[1]}return t},a.prototype.onmessage=function(){},t.Reliable=a,t.RTCSessionDescription=window.mozRTCSessionDescription||window.RTCSessionDescription,t.RTCPeerConnection=window.mozRTCPeerConnection||window.webkitRTCPeerConnection||window.RTCPeerConnection,t.RTCIceCandidate=window.mozRTCIceCandidate||window.RTCIceCandidate;var f={iceServers:[{url:"stun:stun.l.google.com:19302"}]},m=1,g={noop:function(){},CLOUD_HOST:"0.peerjs.com",CLOUD_PORT:9e3,chunkedBrowsers:{Chrome:1},chunkedMTU:16300,logLevel:0,setLogLevel:function(t){var e=parseInt(t,10);g.logLevel=isNaN(parseInt(t,10))?t?3:0:e,g.log=g.warn=g.error=g.noop,g.logLevel>0&&(g.error=g._printWith("ERROR")),g.logLevel>1&&(g.warn=g._printWith("WARNING")),g.logLevel>2&&(g.log=g._print)},setLogFunction:function(t){t.constructor!==Function?g.warn("The log function you passed in is not a function. Defaulting to regular logs."):g._print=t},_printWith:function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t),g._print.apply(g,e)}},_print:function(){var t=!1,e=Array.prototype.slice.call(arguments);e.unshift("PeerJS: ");for(var i=0,n=e.length;n>i;i++)e[i]instanceof Error&&(e[i]="("+e[i].name+") "+e[i].message,t=!0);t?console.error.apply(console,e):console.log.apply(console,e)},defaultConfig:f,browser:function(){return window.mozRTCPeerConnection?"Firefox":window.webkitRTCPeerConnection?"Chrome":window.RTCPeerConnection?"Supported":"Unsupported"}(),supports:function(){if("undefined"==typeof RTCPeerConnection)return{};var t,e,i=!0,n=!0,s=!1,o=!1,r=!!window.webkitRTCPeerConnection;try{t=new RTCPeerConnection(f,{optional:[{RtpDataChannels:!0}]})}catch(a){i=!1,n=!1}if(i)try{e=t.createDataChannel("_PEERJSTEST")}catch(a){i=!1}if(i){try{e.binaryType="blob",s=!0}catch(a){}var u=new RTCPeerConnection(f,{});try{var c=u.createDataChannel("_PEERJSRELIABLETEST",{});o=c.reliable}catch(a){}u.close()}if(n&&(n=!!t.addStream),!r&&i){var h=new RTCPeerConnection(f,{optional:[{RtpDataChannels:!0}]});h.onnegotiationneeded=function(){r=!0,g&&g.supports&&(g.supports.onnegotiationneeded=!0)};{h.createDataChannel("_PEERJSNEGOTIATIONTEST")}setTimeout(function(){h.close()},1e3)}return t&&t.close(),{audioVideo:n,data:i,binaryBlob:s,binary:o,reliable:o,sctp:o,onnegotiationneeded:r}}(),validateId:function(t){return!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.exec(t)},validateKey:function(t){return!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.exec(t)},debug:!1,inherits:function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})},extend:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},pack:BinaryPack.pack,unpack:BinaryPack.unpack,log:function(){if(g.debug){var t=!1,e=Array.prototype.slice.call(arguments);e.unshift("PeerJS: ");for(var i=0,n=e.length;n>i;i++)e[i]instanceof Error&&(e[i]="("+e[i].name+") "+e[i].message,t=!0);t?console.error.apply(console,e):console.log.apply(console,e)}},setZeroTimeout:function(t){function e(e){n.push(e),t.postMessage(s,"*")}function i(e){e.source==t&&e.data==s&&(e.stopPropagation&&e.stopPropagation(),n.length&&n.shift()())}var n=[],s="zero-timeout-message";return t.addEventListener?t.addEventListener("message",i,!0):t.attachEvent&&t.attachEvent("onmessage",i),e}(this),chunk:function(t){for(var e=[],i=t.size,n=index=0,s=Math.ceil(i/g.chunkedMTU);i>n;){var o=Math.min(i,n+g.chunkedMTU),r=t.slice(n,o),a={__peerData:m,n:index,data:r,total:s};e.push(a),n=o,index+=1}return m+=1,e},blobToArrayBuffer:function(t,e){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.readAsArrayBuffer(t)},blobToBinaryString:function(t,e){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.readAsBinaryString(t)},binaryStringToArrayBuffer:function(t){for(var e=new Uint8Array(t.length),i=0;i<t.length;i++)e[i]=255&t.charCodeAt(i);return e.buffer},randomToken:function(){return Math.random().toString(36).substr(2)},isSecure:function(){return"https:"===location.protocol}};t.util=g,g.inherits(u,r),u.prototype._retrieveId=function(){var t=this,e=new XMLHttpRequest,i=this.options.secure?"https://":"http://",n=i+this.options.host+":"+this.options.port+"/"+this.options.key+"/id",s="?ts="+(new Date).getTime()+Math.random();n+=s,e.open("get",n,!0),e.onerror=function(e){g.error("Error retrieving ID",e),t._abort("server-error","Could not get an ID from the server")},e.onreadystatechange=function(){return 4===e.readyState?200!==e.status?void e.onerror():void t._initialize(e.responseText):void 0},e.send(null)},u.prototype._initialize=function(t){this.id=t,this.socket.start(this.id)},u.prototype._handleMessage=function(t){var e=t.type,i=t.payload,n=t.src;switch(e){case"OPEN":this.emit("open",this.id),this.open=!0;break;case"ERROR":this._abort("server-error",i.msg);break;case"ID-TAKEN":this._abort("unavailable-id","ID `"+this.id+"` is taken");break;case"INVALID-KEY":this._abort("invalid-key",'API KEY "'+this.options.key+'" is invalid');break;case"LEAVE":g.log("Received leave message from",n),this._cleanupPeer(n);break;case"EXPIRE":this.emit("error",new Error("Could not connect to peer "+n));break;case"OFFER":var s=i.connectionId,o=this.getConnection(n,s);if(o)g.warn("Offer received for existing Connection ID:",s);else{if("media"===i.type){var o=new h(n,this,{connectionId:s,_payload:i,metadata:i.metadata});this._addConnection(n,o),this.emit("call",o)}else{if("data"!==i.type)return void g.warn("Received malformed connection type:",i.type);o=new c(n,this,{connectionId:s,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable}),this._addConnection(n,o),this.emit("connection",o)}for(var r=this._getMessages(s),a=0,u=r.length;u>a;a+=1)o.handleMessage(r[a])}break;default:if(!i)return void g.warn("You received a malformed message from "+n+" of type "+e);var l=i.connectionId,o=this.getConnection(n,l);o&&o.pc?o.handleMessage(t):l?this._storeMessage(l,t):g.warn("You received an unrecognized message:",t)}},u.prototype._storeMessage=function(t,e){this._lostMessages[t]||(this._lostMessages[t]=[]),this._lostMessages[t].push(e)},u.prototype._getMessages=function(t){var e=this._lostMessages[t];return e?(delete this._lostMessages[t],e):[]},u.prototype.connect=function(t,e){if(this.disconnected)return g.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emit("error",new Error("Cannot connect to new Peer after disconnecting from server."));var i=new c(t,this,e);return this._addConnection(t,i),i},u.prototype.call=function(t,e,i){if(this.disconnected)return g.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emit("error",new Error("Cannot connect to new Peer after disconnecting from server."));if(!e)return void g.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");i=i||{},i._stream=e;var n=new h(t,this,i);return this._addConnection(t,n),n},u.prototype._addConnection=function(t,e){this.connections[t]||(this.connections[t]=[]),this.connections[t].push(e)},u.prototype.getConnection=function(t,e){var i=this.connections[t];if(!i)return null;for(var n=0,s=i.length;s>n;n++)if(i[n].id===e)return i[n];return null},u.prototype._delayedAbort=function(t,e){var i=this;g.setZeroTimeout(function(){i._abort(t,e)})},u.prototype._abort=function(t,e){g.error("Aborting. Error:",e);var i=new Error(e);i.type=t,this.destroy(),this.emit("error",i)},u.prototype.destroy=function(){this.destroyed||(this._cleanup(),this.disconnect(),this.destroyed=!0)},u.prototype._cleanup=function(){if(this.connections)for(var t=Object.keys(this.connections),e=0,i=t.length;i>e;e++)this._cleanupPeer(t[e]);this.emit("close")},u.prototype._cleanupPeer=function(t){for(var e=this.connections[t],i=0,n=e.length;n>i;i+=1)e[i].close()},u.prototype.disconnect=function(){var t=this;g.setZeroTimeout(function(){t.disconnected||(t.disconnected=!0,t.open=!1,t.socket&&t.socket.close(),t.id=null)})},t.Peer=u,g.inherits(c,r),c._idPrefix="dc_",c.prototype.initialize=function(t){this._dc=this.dataChannel=t,this._configureDataChannel()},c.prototype._configureDataChannel=function(){var t=this;g.supports.sctp&&(this._dc.binaryType="arraybuffer"),this._dc.onopen=function(){g.log("Data channel connection success"),t.open=!0,t.emit("open")},!g.supports.sctp&&this.reliable&&(this._reliable=new a(this._dc,g.debug)),this._reliable?this._reliable.onmessage=function(e){t.emit("data",e)}:this._dc.onmessage=function(e){t._handleDataMessage(e)},this._dc.onclose=function(){g.log("DataChannel closed for:",t.peer),t.close()}},c.prototype._handleDataMessage=function(t){var e=this,i=t.data,n=i.constructor;if("binary"===this.serialization||"binary-utf8"===this.serialization){if(n===Blob)return void g.blobToArrayBuffer(i,function(t){i=g.unpack(t),e.emit("data",i)});if(n===ArrayBuffer)i=g.unpack(i);else if(n===String){var s=g.binaryStringToArrayBuffer(i);i=g.unpack(s)}}else"json"===this.serialization&&(i=JSON.parse(i));if(i.__peerData){var o=i.__peerData,r=this._chunkedData[o]||{data:[],count:0,total:i.total};return r.data[i.n]=i.data,r.count+=1,r.total===r.count&&(i=new Blob(r.data),this._handleDataMessage({data:i}),delete this._chunkedData[o]),void(this._chunkedData[o]=r)}this.emit("data",i)},c.prototype.close=function(){this.open&&(this.open=!1,v.cleanup(this),this.emit("close"))},c.prototype.send=function(t,e){if(!this.open)return void this.emit("error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));if(this._reliable)return void this._reliable.send(t);var i=this;if("json"===this.serialization)this._bufferedSend(JSON.stringify(t));else if("binary"===this.serialization||"binary-utf8"===this.serialization){var n=g.pack(t),s=g.chunkedBrowsers[this._peerBrowser]||g.chunkedBrowsers[g.browser];if(s&&!e&&n.size>g.chunkedMTU)return void this._sendChunks(n);g.supports.sctp?g.supports.binaryBlob?this._bufferedSend(n):g.blobToArrayBuffer(n,function(t){i._bufferedSend(t)}):g.blobToBinaryString(n,function(t){i._bufferedSend(t)})}else this._bufferedSend(t)},c.prototype._bufferedSend=function(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this.bufferSize=this._buffer.length)},c.prototype._trySend=function(t){try{this._dc.send(t)}catch(e){this._buffering=!0;var i=this;return setTimeout(function(){i._buffering=!1,i._tryBuffer()},100),!1}return!0},c.prototype._tryBuffer=function(){if(0!==this._buffer.length){var t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this.bufferSize=this._buffer.length,this._tryBuffer())}},c.prototype._sendChunks=function(t){for(var e=g.chunk(t),i=0,n=e.length;n>i;i+=1){var t=e[i];this.send(t,!0)}},c.prototype.handleMessage=function(t){var e=t.payload;switch(t.type){case"ANSWER":this._peerBrowser=e.browser,v.handleSDP(t.type,this,e.sdp);break;case"CANDIDATE":v.handleCandidate(this,e.candidate);break;default:g.warn("Unrecognized message type:",t.type,"from peer:",this.peer)}},g.inherits(h,r),h._idPrefix="mc_",h.prototype.addStream=function(t){g.log("Receiving stream",t),this.remoteStream=t,this.emit("stream",t)},h.prototype.handleMessage=function(t){var e=t.payload;switch(t.type){case"ANSWER":v.handleSDP(t.type,this,e.sdp),this.open=!0;break;case"CANDIDATE":v.handleCandidate(this,e.candidate);break;default:g.warn("Unrecognized message type:",t.type,"from peer:",this.peer)}},h.prototype.answer=function(t){if(this.localStream)return void g.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");this.options._payload._stream=t,this.localStream=t,v.startConnection(this,this.options._payload);for(var e=this.provider._getMessages(this.id),i=0,n=e.length;n>i;i+=1)this.handleMessage(e[i]);this.open=!0},h.prototype.close=function(){this.open&&(this.open=!1,v.cleanup(this),this.emit("close"))};var v={pcs:{data:{},media:{}},queue:[]};v._idPrefix="pc_",v.startConnection=function(t,e){var i=v._getPeerConnection(t,e);if("media"===t.type&&e._stream&&i.addStream(e._stream),t.pc=i,e.originator){if("data"===t.type){var n={};g.supports.sctp||(n={reliable:e.reliable});var s=i.createDataChannel(t.label,n);t.initialize(s)}g.supports.onnegotiationneeded||v._makeOffer(t)}else v.handleSDP("OFFER",t,e.sdp)},v._getPeerConnection=function(t,e){v.pcs[t.type]||g.error(t.type+" is not a valid connection type. Maybe you overrode the `type` property somewhere."),v.pcs[t.type][t.peer]||(v.pcs[t.type][t.peer]={});{var i;v.pcs[t.type][t.peer]}return e.pc&&(i=v.pcs[t.type][t.peer][e.pc]),i&&"stable"===i.signalingState||(i=v._startPeerConnection(t)),i},v._startPeerConnection=function(t){g.log("Creating RTCPeerConnection.");var e=v._idPrefix+g.randomToken(),i={};"data"!==t.type||g.supports.sctp?"media"===t.type&&(i={optional:[{DtlsSrtpKeyAgreement:!0}]}):i={optional:[{RtpDataChannels:!0}]};var n=new RTCPeerConnection(t.provider.options.config,i);return v.pcs[t.type][t.peer][e]=n,v._setupListeners(t,n,e),n},v._setupListeners=function(t,e){var i=t.peer,n=t.id,s=t.provider;g.log("Listening for ICE candidates."),e.onicecandidate=function(e){e.candidate&&(g.log("Received ICE candidates for:",t.peer),s.socket.send({type:"CANDIDATE",payload:{candidate:e.candidate,type:t.type,connectionId:t.id},dst:i}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"disconnected":case"failed":g.log("iceConnectionState is disconnected, closing connections to "+i),t.close();break;case"completed":e.onicecandidate=g.noop}},e.onicechange=e.oniceconnectionstatechange,g.log("Listening for `negotiationneeded`"),e.onnegotiationneeded=function(){g.log("`negotiationneeded` triggered"),"stable"==e.signalingState?v._makeOffer(t):g.log("onnegotiationneeded triggered when not stable. Is another connection being established?")},g.log("Listening for data channel"),e.ondatachannel=function(t){g.log("Received data channel");var e=t.channel,o=s.getConnection(i,n);o.initialize(e)},g.log("Listening for remote stream"),e.onaddstream=function(t){g.log("Received remote stream");var e=t.stream;s.getConnection(i,n).addStream(e)}},v.cleanup=function(t){g.log("Cleaning up PeerConnection to "+t.peer);var e=t.pc;!e||"closed"===e.readyState&&"closed"===e.signalingState||(e.close(),t.pc=null)},v._makeOffer=function(t){var e=t.pc;e.createOffer(function(i){g.log("Created offer."),!g.supports.sctp&&"data"===t.type&&t.reliable&&(i.sdp=a.higherBandwidthSDP(i.sdp)),e.setLocalDescription(i,function(){g.log("Set localDescription: offer","for:",t.peer),t.provider.socket.send({type:"OFFER",payload:{sdp:i,type:t.type,label:t.label,connectionId:t.id,reliable:t.reliable,serialization:t.serialization,metadata:t.metadata,browser:g.browser},dst:t.peer})},function(e){t.provider.emit("error",e),g.log("Failed to setLocalDescription, ",e)})},function(e){t.provider.emit("error",e),g.log("Failed to createOffer, ",e)},t.options.constraints)},v._makeAnswer=function(t){var e=t.pc;e.createAnswer(function(i){g.log("Created answer."),!g.supports.sctp&&"data"===t.type&&t.reliable&&(i.sdp=a.higherBandwidthSDP(i.sdp)),e.setLocalDescription(i,function(){g.log("Set localDescription: answer","for:",t.peer),t.provider.socket.send({type:"ANSWER",payload:{sdp:i,type:t.type,connectionId:t.id,browser:g.browser},dst:t.peer})},function(e){t.provider.emit("error",e),g.log("Failed to setLocalDescription, ",e)})},function(e){t.provider.emit("error",e),g.log("Failed to create answer, ",e)})},v.handleSDP=function(t,e,i){i=new RTCSessionDescription(i);var n=e.pc;g.log("Setting remote description",i),n.setRemoteDescription(i,function(){g.log("Set remoteDescription:",t,"for:",e.peer),"OFFER"===t&&v._makeAnswer(e)},function(t){e.provider.emit("error",t),g.log("Failed to setRemoteDescription, ",t)})},v.handleCandidate=function(t,e){var i=e.candidate,n=e.sdpMLineIndex;t.pc.addIceCandidate(new RTCIceCandidate({sdpMLineIndex:n,candidate:i})),g.log("Added ICE candidate for:",t.peer)},g.inherits(l,r),l.prototype.start=function(t){this.id=t;var e=g.randomToken();this._httpUrl+="/"+t+"/"+e,this._wsUrl+="&id="+t+"&token="+e,this._startXhrStream(),this._startWebSocket()},l.prototype._startWebSocket=function(){var t=this;this._socket||(this._socket=new WebSocket(this._wsUrl),this._socket.onmessage=function(e){var i;try{i=JSON.parse(e.data)}catch(n){return void g.log("Invalid server message",e.data)}t.emit("message",i)},this._socket.onopen=function(){t._timeout&&(clearTimeout(t._timeout),setTimeout(function(){t._http.abort(),t._http=null},5e3)),t._sendQueuedMessages(),g.log("Socket open")})},l.prototype._startXhrStream=function(t){try{var e=this;this._http=new XMLHttpRequest,this._http._index=1,this._http._streamIndex=t||0,this._http.open("post",this._httpUrl+"/id?i="+this._http._streamIndex,!0),this._http.onreadystatechange=function(){2==this.readyState&&this.old&&(this.old.abort(),delete this.old),this.readyState>2&&200==this.status&&this.responseText&&e._handleStream(this)},this._http.send(null),this._setHTTPTimeout()}catch(i){g.log("XMLHttpRequest not available; defaulting to WebSockets")}},l.prototype._handleStream=function(t){var e=t.responseText.split("\n");if(t._buffer)for(;t._buffer.length>0;){var i=t._buffer.shift(),n=e[i];try{n=JSON.parse(n)}catch(s){t._buffer.shift(i);break}this.emit("message",n)}var o=e[t._index];if(o)if(t._index+=1,t._index===e.length)t._buffer||(t._buffer=[]),t._buffer.push(t._index-1);else{try{o=JSON.parse(o)}catch(s){return void g.log("Invalid server message",o)}this.emit("message",o)}},l.prototype._setHTTPTimeout=function(){var t=this;this._timeout=setTimeout(function(){var e=t._http;t._wsOpen()?e.abort():(t._startXhrStream(e._streamIndex+1),t._http.old=e)},25e3)},l.prototype._wsOpen=function(){return this._socket&&1==this._socket.readyState},l.prototype._sendQueuedMessages=function(){for(var t=0,e=this._queue.length;e>t;t+=1)this.send(this._queue[t])},l.prototype.send=function(t){if(!this.disconnected){if(!this.id)return void this._queue.push(t);if(!t.type)return void this.emit("error","Invalid message");var e=JSON.stringify(t);if(this._wsOpen())this._socket.send(e);else{var i=new XMLHttpRequest,n=this._httpUrl+"/"+t.type.toLowerCase();i.open("post",n,!0),i.setRequestHeader("Content-Type","application/json"),i.send(e)}}},l.prototype.close=function(){!this.disconnected&&this._wsOpen()&&(this._socket.close(),this.disconnected=!0)}}).bind(this)(this)}.bind(this)),require.register("app/vendor/phono.js",function(exports,require,module){function FABridge(t,e){return this.target=t,this.remoteTypeCache={},this.remoteInstanceCache={},this.remoteFunctionCache={},this.localFunctionCache={},this.bridgeID=FABridge.nextBridgeID++,this.name=e,this.nextLocalFuncID=0,FABridge.instances[this.name]=this,FABridge.idMap[this.bridgeID]=this,this}function instanceFactory(t){return this.fb_instance_id=t,this}function FABridge__invokeJSFunction(t){var e=t[0],i=t.concat();i.shift();var n=FABridge.extractBridgeFromID(e);return n.invokeLocalFunction(e,i)}function FABridge__bridgeInitialized(t){var e="bridgeName="+t;if(/Explorer/.test(navigator.appName)||/Opera/.test(navigator.appName)||/Netscape/.test(navigator.appName)||/Konqueror|Safari|KHTML/.test(navigator.appVersion)){var i=document.getElementsByTagName("object");if(1==i.length)FABridge.attachBridge(i[0],t);else for(var n=0;n<i.length;n++){for(var s=i[n],o=s.childNodes,r=!1,a=0;a<o.length;a++){var u=o[a];if(1==u.nodeType&&"param"==u.tagName.toLowerCase()&&"flashvars"==u.name.toLowerCase()&&u.value.indexOf(e)>=0){FABridge.attachBridge(s,t),r=!0;break}}if(r)break}}else{var i=document.getElementsByTagName("embed");if(1==i.length)FABridge.attachBridge(i[0],t);else for(var n=0;n<i.length;n++){var s=i[n],c=s.attributes.getNamedItem("flashVars").nodeValue;c.indexOf(e)>=0&&FABridge.attachBridge(s,t)}}return!0}FABridge.TYPE_ASINSTANCE=1,FABridge.TYPE_ASFUNCTION=2,FABridge.TYPE_JSFUNCTION=3,FABridge.TYPE_ANONYMOUS=4,FABridge.initCallbacks={},FABridge.userTypes={},FABridge.addToUserTypes=function(){for(var t=0;t<arguments.length;t++)FABridge.userTypes[arguments[t]]={typeName:arguments[t],enriched:!1}},FABridge.argsToArray=function(t){for(var e=[],i=0;i<t.length;i++)e[i]=t[i];return e},FABridge.addInitializationCallback=function(t,e){var i=FABridge.instances[t];if(void 0!=i)return void e.call(i);var n=FABridge.initCallbacks[t];null==n&&(FABridge.initCallbacks[t]=n=[]),n.push(e)},FABridge.nextBridgeID=0,FABridge.instances={},FABridge.idMap={},FABridge.refCount=0,FABridge.extractBridgeFromID=function(t){var e=t>>16;return FABridge.idMap[e]},FABridge.attachBridge=function(t,e){var i=new FABridge(t,e);FABridge[e]=i;var n=FABridge.initCallbacks[e];if(null!=n){for(var s=0;s<n.length;s++)n[s].call(i);
delete FABridge.initCallbacks[e]}},FABridge.blockedMethods={toString:!0,get:!0,set:!0,call:!0},FABridge.prototype={root:function(){return this.deserialize(this.target.getRoot())},releaseASObjects:function(){return this.target.releaseASObjects()},releaseNamedASObject:function(t){if("object"!=typeof t)return!1;var e=this.target.releaseNamedASObject(t.fb_instance_id);return e},create:function(t){return this.deserialize(this.target.create(t))},makeID:function(t){return(this.bridgeID<<16)+t},getPropertyFromAS:function(t,e){if(FABridge.refCount>0)throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");return FABridge.refCount++,retVal=this.target.getPropFromAS(t,e),retVal=this.handleError(retVal),FABridge.refCount--,retVal},setPropertyInAS:function(t,e,i){if(FABridge.refCount>0)throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");return FABridge.refCount++,retVal=this.target.setPropInAS(t,e,this.serialize(i)),retVal=this.handleError(retVal),FABridge.refCount--,retVal},callASFunction:function(t,e){if(FABridge.refCount>0)throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");return FABridge.refCount++,retVal=this.target.invokeASFunction(t,this.serialize(e)),retVal=this.handleError(retVal),FABridge.refCount--,retVal},callASMethod:function(t,e,i){if(FABridge.refCount>0)throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");return FABridge.refCount++,i=this.serialize(i),retVal=this.target.invokeASMethod(t,e,i),retVal=this.handleError(retVal),FABridge.refCount--,retVal},invokeLocalFunction:function(t,e){var i,n=this.localFunctionCache[t];return void 0!=n&&(i=this.serialize(n.apply(null,this.deserialize(e)))),i},getUserTypeDescriptor:function(t){var e=t.replace(/^([^:]*)\:\:([^:]*)$/,"$2"),i="function"==typeof window[e]&&"undefined"!=typeof FABridge.userTypes[e],n=!1;i&&(n=FABridge.userTypes[e].enriched);var s={simpleType:e,isUserProto:i,protoEnriched:n};return s},getTypeFromName:function(t){var e=this.getUserTypeDescriptor(t),n=this.remoteTypeCache[t];if(e.isUserProto&&!e.protoEnriched){for(i in window[e.simpleType].prototype)n[i]=window[e.simpleType].prototype[i];window[e.simpleType].prototype=n,this.remoteTypeCache[t]=n,FABridge.userTypes[e.simpleType].enriched=!0}return n},createProxy:function(t,e){var i=this.getUserTypeDescriptor(e),n=this.getTypeFromName(e);if(i.isUserProto){var s=window[i.simpleType],o=new s(this.name,t);o.fb_instance_id=t}else{instanceFactory.prototype=n;var o=new instanceFactory(t)}return this.remoteInstanceCache[t]=o,o},getProxy:function(t){return this.remoteInstanceCache[t]},addTypeDataToCache:function(t){newType=new ASProxy(this,t.name);for(var e=t.accessors,i=0;i<e.length;i++)this.addPropertyToType(newType,e[i]);for(var n=t.methods,i=0;i<n.length;i++)void 0==FABridge.blockedMethods[n[i]]&&this.addMethodToType(newType,n[i]);return this.remoteTypeCache[newType.typeName]=newType,newType},addPropertyToType:function(t,e){var i,n,s=e.charAt(0);s>="a"&&"z">=s?(n="get"+s.toUpperCase()+e.substr(1),i="set"+s.toUpperCase()+e.substr(1)):(n="get"+e,i="set"+e),t[i]=function(t){this.bridge.setPropertyInAS(this.fb_instance_id,e,t)},t[n]=function(){return this.bridge.deserialize(this.bridge.getPropertyFromAS(this.fb_instance_id,e))}},addMethodToType:function(t,e){t[e]=function(){return this.bridge.deserialize(this.bridge.callASMethod(this.fb_instance_id,e,FABridge.argsToArray(arguments)))}},getFunctionProxy:function(t){var e=this;return null==this.remoteFunctionCache[t]&&(this.remoteFunctionCache[t]=function(){e.callASFunction(t,FABridge.argsToArray(arguments))}),this.remoteFunctionCache[t]},getFunctionID:function(t){return void 0==t.__bridge_id__&&(t.__bridge_id__=this.makeID(this.nextLocalFuncID++),this.localFunctionCache[t.__bridge_id__]=t),t.__bridge_id__},serialize:function(t){var e={},i=typeof t;if("number"==i||"string"==i||"boolean"==i||null==i||void 0==i)e=t;else if(t instanceof Array){e=[];for(var n=0;n<t.length;n++)e[n]=this.serialize(t[n])}else"function"==i?(e.type=FABridge.TYPE_JSFUNCTION,e.value=this.getFunctionID(t)):t instanceof ASProxy?(e.type=FABridge.TYPE_ASINSTANCE,e.value=t.fb_instance_id):(e.type=FABridge.TYPE_ANONYMOUS,e.value=t);return e},deserialize:function(t){var e,i=typeof t;if("number"==i||"string"==i||"boolean"==i||null==t||void 0==t)e=this.handleError(t);else if(t instanceof Array){e=[];for(var n=0;n<t.length;n++)e[n]=this.deserialize(t[n])}else if("object"==i){for(var n=0;n<t.newTypes.length;n++)this.addTypeDataToCache(t.newTypes[n]);for(var s in t.newRefs)this.createProxy(s,t.newRefs[s]);t.type==FABridge.TYPE_PRIMITIVE?e=t.value:t.type==FABridge.TYPE_ASFUNCTION?e=this.getFunctionProxy(t.value):t.type==FABridge.TYPE_ASINSTANCE?e=this.getProxy(t.value):t.type==FABridge.TYPE_ANONYMOUS&&(e=t.value)}return e},addRef:function(t){this.target.incRef(t.fb_instance_id)},release:function(t){this.target.releaseRef(t.fb_instance_id)},handleError:function(t){if("string"==typeof t&&0==t.indexOf("__FLASHERROR")){var e=t.split("||");throw FABridge.refCount>0&&FABridge.refCount--,new Error(e[1])}return t}},ASProxy=function(t,e){return this.bridge=t,this.typeName=e,this},ASProxy.prototype={get:function(t){return this.bridge.deserialize(this.bridge.getPropertyFromAS(this.fb_instance_id,t))},set:function(t,e){this.bridge.setPropertyInAS(this.fb_instance_id,t,e)},call:function(t,e){this.bridge.callASMethod(this.fb_instance_id,t,e)},addRef:function(){this.bridge.addRef(this)},release:function(){this.bridge.release(this)}};var flensed;flensed="undefined"!=typeof phonoFlensedOverride?phonoFlensedOverride:{base_path:"//s.phono.com/deps/flensed/1.0/"},function($){function Phono(config){if(Strophe=PhonoStrophe,this.config=Phono.util.extend({gateway:"gw-v6.d.phono.com",connectionUrl:window.location.protocol+"//app.v1-1.phono.com/http-bind"},config),0==this.config.connectionUrl.indexOf("file:")&&(this.config.connectionUrl="https://app.v1-1.phono.com/http-bind"),Phono.events.bind(this,config),Phono.util.loggify("Phono",this),!config.apiKey&&(this.config.apiKey=prompt("Please enter your Phono API Key.\n\nTo get a new one sign up for a free account at: http://www.phono.com"),!this.config.apiKey)){var message="A Phono API Key is required. Please get one at http://www.phono.com";throw Phono.events.trigger(this,"error",{reason:message}),message}if(this.sessionId=null,this.connTimers=[],Phono.log.debug("[CONFIG] ConnectionUrl: "+this.config.connectionUrl),navigator.appName.indexOf("Internet Explorer")>0?(xmlSerializer={},xmlSerializer.serializeToString=function(t){return t.xml}):xmlSerializer=new XMLSerializer,null!=this.config.connection)Strophe=window.Strophe,Strophe.build=$build,Strophe.msg=$msg,Strophe.iq=$iq,Strophe.pres=$pres,this.connection=this.config.connection;else{var phono=this,cfunc=function(t){phono.connected()?Phono.log.debug("[LB] already connected... not trying URL "+t):(Phono.log.debug("trying connection URL "+t),null!=phono.connection&&phono.connection.disconnect(),phono.connection=new Strophe.Connection(t),phono.connection.xmlInput=function(t){Phono.log.debug("[WIRE] (i) "+xmlSerializer.serializeToString(t))},phono.connection.xmlOutput=function(t){Phono.log.debug("[WIRE] (o) "+xmlSerializer.serializeToString(t))},phono.connect())};Phono.log.debug("[LB] Invoke loadbalancer");var dummy=connection=new PhonoStrophe.Connection(this.config.connectionUrl),a="",b=function(){},c="",sr=new PhonoStrophe.Request(a,b,c,0),srvreq=sr.xhr,curls=[],uri=document.createElement("a"),srv="_phono";uri.href=this.config.connectionUrl,Phono.log.debug("[LB] OrigT ="+uri.hostname+" path ="+uri.pathname),"https:"==uri.protocol&&(srv+="s");var dnsUrl=uri.protocol+"//"+uri.host+"/Phono/srvlookup/"+srv+"._tcp."+uri.hostname;srvreq.open("GET",dnsUrl,!1),srvreq.overrideMimeType&&srvreq.overrideMimeType("application/json");try{srvreq.onreadystatechange=function(){if(4==srvreq.readyState)if(Phono.log.debug("[LB] Got reply :"+srvreq.status),200==srvreq.status){Phono.log.debug("[LB] Reply was "+srvreq.responseText);var srv=eval("("+srvreq.responseText+")");for(var s in srv.servers){var nexts=srv.servers[s],curl="",path=uri.pathname;uri.hostname==nexts.target?0!=path.indexOf("/")&&(path="/"+path):path="/http-bind",curl=uri.protocol+"//"+nexts.target+":"+nexts.port+path,"undefined"!=typeof nexts.target&&(Phono.log.debug("[LB] Adding connection URL "+curl),curls.push(curl))}Phono.log.debug("[LB] Adding default connection URL "+phono.config.connectionUrl),curls.push(phono.config.connectionUrl),Phono.log.debug("[LB] Initial connection URL "+curls[0]);var t=0;for(var c in curls)curls[c].substring&&setTimeout(function(){curls[t].substring&&cfunc(curls[t]),t+=1},20+1e4*c)}else Phono.log.debug("[LB] loadbalancer status was "+srvreq.status),Phono.log.debug("[LB] Using default connection URL "+phono.config.connectionUrl),cfunc(phono.config.connectionUrl)},srvreq.send(null)}catch(e){Phono.log.debug("[LB] error - ignoring a loadbalance error "+e),Phono.log.debug("[LB] Using default connection URL "+phono.config.connectionUrl),cfunc(phono.config.connectionUrl)}}}var Strophe=null;!function(){function PluginManager(t,e,i){this.index=0,this.readyHandler=i,this.config=e,this.phono=t,this.pluginNames=new Array;for(pluginName in Phono.plugins)this.pluginNames.push(pluginName)}Phono.util={guid:function(){return MD5.hexdigest(new String((new Date).getTime()))},escapeXmppNode:function(t){var e=t;return e=e.replace(/\\/g,"\\5c"),e=e.replace(/ /g,"\\20"),e=e.replace(/\"/,"\\22"),e=e.replace(/&/g,"\\26"),e=e.replace(/\'/,"\\27"),e=e.replace(/\//g,"\\2f"),e=e.replace(/:/g,"\\3a"),e=e.replace(/</g,"\\3c"),e=e.replace(/>/g,"\\3e"),e=e.replace(/@/g,"\\40")},each:function(t,e,i){var n,s=0,o=t.length,r=void 0===o||$.isFunction(t);if(i)if(r){for(n in t)if(e.apply(t[n],i)===!1)break}else for(;o>s&&e.apply(t[s++],i)!==!1;);else if(r){for(n in t)if(e.call(t[n],n,t[n])===!1)break}else for(var a=t[0];o>s&&e.call(a,s,a)!==!1;a=t[++s]);return t},isFunction:function(t){return"[object Function]"===toString.call(t)},isArray:function(t){return"[object Array]"===toString.call(t)},isPlainObject:function(t){if(!t||"[object Object]"!==toString.call(t)||t.nodeType||t.setInterval)return!1;if(t.constructor&&!hasOwnProperty.call(t,"constructor")&&!hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1;var e;for(e in t);return void 0===e||hasOwnProperty.call(t,e)},extend:function(){var t,e,i,n,s=arguments[0]||{},o=1,r=arguments.length,a=!1;for("boolean"==typeof s&&(a=s,s=arguments[1]||{},o=2),"object"==typeof s||$.isFunction(s)||(s={}),r===o&&(s=this,--o);r>o;o++)if(null!=(t=arguments[o]))for(e in t)if(i=s[e],n=t[e],s!==n)if(a&&n&&($.isPlainObject(n)||$.isArray(n))){var u=i&&($.isPlainObject(i)||$.isArray(i))?i:$.isArray(n)?[]:{};s[e]=$.extend(a,u,n)}else void 0!==n&&(s[e]=n);return s},eventCounter:1,addEvent:function(t,e,i){i.$$guid||(i.$$guid=this.eventCounter++),t.events||(t.events={});var n=t.events[e];n||(n=t.events[e]={},t["on"+e]&&(n[0]=t["on"+e])),n[i.$$guid]=i,t["on"+e]=handleEvent},removeEvent:function(t,e,i){t.events&&t.events[e]&&delete t.events[e][i.$$guid]},handleEvent:function(t){var e=!0,i=this.events[t.type];for(var n in i)this.$$handleEvent=i[n],this.$$handleEvent(t)===!1&&(e=!1);return e},parseUri:function(t){for(var e=["source","protocol","authority","domain","port","path","directoryPath","fileName","query","anchor"],i=new RegExp("^(?:([^:/?#.]+):)?(?://)?(([^:/?#]*)(?::(\\d*))?)?((/(?:[^?#](?![^?#/]*\\.[^?#/.]+(?:[\\?#]|$)))*/?)?([^?#/]*))?(?:\\?([^#]*))?(?:#(.*))?").exec(t),n={},s=0;10>s;s++)n[e[s]]=i[s]?i[s]:"";return n.directoryPath.length>0&&(n.directoryPath=n.directoryPath.replace(/\/?$/,"/")),n},filterWideband:function(t,e){var i=new Array;return Phono.util.each(t,function(){e?i.push(this):"G722"!=this.name.toUpperCase()&&"16000"!=this.rate&&i.push(this)}),i},isIOS:function(){var t=window.navigator.userAgent;return t.match(/iPad/i)||t.match(/iPhone/i)?!0:!1},isAndroid:function(){var t=window.navigator.userAgent;return t.match(/Android/i)?!0:!1},getIEVersion:function(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=i.exec(e)&&(t=parseFloat(RegExp.$1))}return console.log("IE Version = "+t),t},localUri:function(t){var e=t.split(":");return e[0]+":"+e[1]+":"+e[2]},loggify:function(t,e){for(prop in e)"function"==typeof e[prop]&&Phono.util.loggyFunction(t,e,prop);return e},loggyFunction:function(t,e,i){var n=e[i];e[i]=function(){try{for(var s="",o="",r=0;r<arguments.length;r++)o+=s+arguments[r],s=",";Phono.log.debug("[INVOKE] "+t+"."+i+"("+o+")")}catch(a){Phono.log.debug("[INVOKE] "+t+"."+i+"(...)")}return n.apply(e,arguments)}},padWithZeroes:function(t,e){for(var i=""+t;i.length<e;)i="0"+i;return i},padWithSpaces:function(t,e){for(;t.length<e;)t+=" ";return t},srtpProps:function(t,e,i,n,s){var o="";return void 0!=e&&(o=o+"crypto-suite='"+e+"' \n"),void 0!=t&&(o=o+"tag='"+t+"' \n"),void 0!=i&&(o=o+"key-params='"+i+"' \n"),void 0!=n&&(o=o+"session-params='"+sessionprams+"' \n"),void 0!=s&&(o=o+"required='"+s+"' \n"),o},genKey:function(t){var e,i="";for(e=0;t>e;e++)i+=String.fromCharCode(256*Math.random());return Base64.encode(i)},getAttributes:function(t){for(var e,i={},n=0,s=t.attributes.length;s>n;n++)t.attributes.hasOwnProperty(n)&&(e=t.attributes[n],i[e.name]=e.value);return i}};var PhonoLogger=function(){var t=this;t.eventQueue=[],t.initialized=!1,$(document).ready(function(){("undefined"==typeof console||"undefined"==typeof console.log)&&(console={},console.log=function(){}),console.log("Phono Logger Initialized"),t.initialized=!0,t.flushEventQueue()})};!function(){function t(t){return t.message?t.message:t.description?t.description:toStr(t)}function e(t){var e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return t.substr(e+1)}function i(i){if(i){var n="Exception: "+t(i);try{i.lineNumber&&(n+=" on line number "+i.lineNumber),i.fileName&&(n+=" in file "+e(i.fileName))}catch(o){}return showStackTraces&&i.stack&&(n+=s+"Stack trace:"+s+i.stack),n}return null}function n(t){return t instanceof Error}var s="\r\n",o=function(t,e,i,n){this.timeStamp=t,this.level=e,this.messages=i,this.exception=n};o.prototype={getThrowableStrRep:function(){return this.exception?i(this.exception):""},getCombinedMessages:function(){return 1===this.messages.length?this.messages[0]:this.messages.join(s)}};var r=function(t,e){this.level=t,this.name=e};r.prototype={toString:function(){return this.name},equals:function(t){return this.level==t.level},isGreaterOrEqual:function(t){return this.level>=t.level}},r.ALL=new r(Number.MIN_VALUE,"ALL"),r.TRACE=new r(1e4,"TRACE"),r.DEBUG=new r(2e4,"DEBUG"),r.INFO=new r(3e4,"INFO"),r.WARN=new r(4e4,"WARN"),r.ERROR=new r(5e4,"ERROR"),r.FATAL=new r(6e4,"FATAL"),r.OFF=new r(Number.MAX_VALUE,"OFF"),PhonoLogger.prototype.log=function(t,e){var i,s=e.length-1,r=e[e.length-1];e.length>1&&n(r)&&(i=r,s--);for(var a=[],u=0;s>=u;u++)a[u]=e[u];var c=new o(new Date,t,a,i);this.eventQueue.push(c),this.flushEventQueue()},PhonoLogger.prototype.flushEventQueue=function(){if(this.initialized){var t=this;Phono.util.each(this.eventQueue,function(e,i){Phono.events.trigger(t,"log",i)}),this.eventQueue=[]}},PhonoLogger.prototype.debug=function(){this.log(r.DEBUG,arguments)},PhonoLogger.prototype.info=function(){this.log(r.INFO,arguments)},PhonoLogger.prototype.warn=function(){this.log(r.WARN,arguments)},PhonoLogger.prototype.error=function(){this.log(r.ERROR,arguments)}}(),Phono.version="1.0",Phono.log=new PhonoLogger,Phono.registerPlugin=function(t,e){Phono.plugins||(Phono.plugins={}),Phono.plugins[t]=e},Phono.prototype.connect=function(){var t=this;this.config.connection?new PluginManager(this,this.config,function(){this.handleConnect()}).init():this.connection.connected||(Phono.log.debug("Connecting...."),t.connection.connect(t.config.gateway,null,t.handleStropheStatusChange,50))},Phono.prototype.disconnect=function(){this.connection.disconnect()},Phono.prototype.connected=function(){return"undefined"!=typeof this.connection&&this.connection.connected},Phono.prototype.handleStropheStatusChange=function(t){t===Strophe.Status.CONNECTED?(null!=this.connTimer&&(Phono.log.debug("Clear timeout"),clearTimeout(this.connTimer)),new PluginManager(this,this.config,function(){this.handleConnect()}).init()):t===Strophe.Status.DISCONNECTED?this.handleDisconnect():(t===Strophe.Status.ERROR||t===Strophe.Status.CONNFAIL||t===Strophe.Status.CONNFAIL||t===Strophe.Status.AUTHFAIL)&&this.handleError()},Phono.prototype.handleConnect=function(){var t=this;if(t.sessionId=Strophe.getBareJidFromJid(this.connection.jid),this.config.connection)Phono.events.trigger(this,"ready");else{var e=Strophe.iq({type:"set"}).c("apikey",{xmlns:"http://phono.com/apikey"}).t(t.config.apiKey).up().c("caps",{xmlns:"http://phono.com/caps",ver:Phono.version});for(pluginName in Phono.plugins)t[pluginName]&&t[pluginName].getCaps&&(e=t[pluginName].getCaps(e.c(pluginName)),e.up());e=e.c("browser",{version:navigator.appVersion,agent:navigator.userAgent}).up(),t.connection.sendIQ(e,t.handleKeySuccess,function(){Phono.events.trigger(t,"error",{reason:"API key rejected"})}),t.config.provisioningUrl&&t.connection.send(Strophe.iq({type:"set"}).c("provisioning",{xmlns:"http://phono.com/provisioning"}).t(t.config.provisioningUrl))}},Phono.prototype.handleKeySuccess=function(){Phono.events.trigger(this,"ready")},Phono.prototype.handleError=function(){Phono.log.debug("connection failed - logging in handleError"),Phono.events.trigger(this,"error",{reason:"Error connecting to XMPP server"})},Phono.prototype.handleDisconnect=function(){Phono.events.trigger(this,"unready")},function(t){var e=t,i=t.document,n="undefined",s=!0,o=!1,r="",a="object",u="function",c="string",h="div",l="onunload",p=null,d=null,f=null,m=null,g=0,v=[],y=null,b=null,_="flXHR.js",w="flensed.js",S="flXHR.vbs",x="checkplayer.js",k="flXHR.swf",C=t.parseInt,O=t.setTimeout,T=t.clearTimeout,j=(t.setInterval,t.clearInterval,"instanceId"),E="readyState",I="onreadystatechange",A="ontimeout",P="onerror",N="binaryResponseBody",M="xmlResponseText",R="loadPolicyURL",B="noCacheHeader",F="sendTimeout",L="appendToId",z="swfIdPrefix";typeof t.flensed===n&&(t.flensed={}),typeof t.flensed.flXHR===n&&(d=t.flensed,O(function(){function a(t,e,s){for(var o=0;g>o&&!(typeof p[o].src!==n&&p[o].src.indexOf(t)>=0);o++);var r=i.createElement("script");r.setAttribute("src",d.base_path+t),typeof e!==n&&r.setAttribute("type",e),typeof s!==n&&r.setAttribute("language",s),i.getElementsByTagName("head")[0].appendChild(r)}function u(){T(j);try{e.detachEvent(l,u)}catch(t){}}function c(){T(I);try{e.detachEvent(l,c)}catch(t){}}var h=o,p=i.getElementsByTagName("script"),g=p.length;try{d.base_path.toLowerCase(),h=s}catch(v){d.base_path=r}if(typeof p!==n&&null!==p&&!h)for(var y=0,k=0;g>k;k++)if(typeof p[k].src!==n&&((y=p[k].src.indexOf(w))>=0||(y=p[k].src.indexOf(_))>=0)){d.base_path=p[k].src.substr(0,y);break}try{d.checkplayer.module_ready()}catch(C){a(x,"text/javascript")}var j=null;if(function(){try{d.ua.pv.join(".")}catch(i){return void(j=O(arguments.callee,25))}d.ua.win&&d.ua.ie&&a(S,"text/vbscript","vbscript"),d.binaryToString=function(t,e){if(e=d.ua.win&&d.ua.ie&&typeof e!==n?!!e:!(d.ua.win&&d.ua.ie),!e)try{return flXHR_vb_BinaryToString(t)}catch(i){}var s=r,o=[];try{for(var a=0;a<t.length;a++)o[o.length]=String.fromCharCode(t[a]);s=o.join(r)}catch(u){}return s},d.bindEvent(e,l,function(){try{t.flensed.unbindEvent(e,l,arguments.callee);for(var i in b)if(b[i]!==Object.prototype[i])try{b[i]=null}catch(n){}d.flXHR=null,b=null,d=null,m=null,f=null}catch(s){}})}(),null!==j)try{e.attachEvent(l,u)}catch(E){}var I=null;try{e.attachEvent(l,c)}catch(A){}I=O(function(){c();try{d.checkplayer.module_ready()}catch(e){throw new t.Error("flXHR dependencies failed to load.")}},2e4)},0),d.flXHR=function(_){function w(){Ce=null===Be?i.getElementsByTagName("body")[0]:d.getObjectById(Be);try{Ce.nodeName.toLowerCase(),d.checkplayer.module_ready(),f=d.checkplayer}catch(t){return void(pe=O(w,25))}if(null===m&&typeof f._ins===n)try{m=new f(b.MIN_PLAYER_VERSION,K,o,te)}catch(e){return void $(b.DEPENDENCY_ERROR,"flXHR: checkplayer Init Failed","The initialization of the 'checkplayer' library failed to complete.")}else m=f._ins,S()}function S(){if(null===m||!m.checkPassed)return void(pe=O(S,25));null===y&&null===Be&&(d.createCSS("."+Re,"left:-1px;top:0px;width:1px;height:1px;position:absolute;"),y=s);var t=i.createElement(h);t.id=me,t.className=Re,Ce.appendChild(t),Ce=null;var e={},n={allowScriptAccess:"always"},o={id:me,name:me,styleclass:Re},r={swfCB:x,swfEICheck:"reset"};try{m.DoSWF(d.base_path+k,me,"1","1",e,n,o,r)}catch(a){return void $(b.DEPENDENCY_ERROR,"flXHR: checkplayer Call Failed","A call to the 'checkplayer' library failed to complete.")}}function x(t){if(t.status===f.SWF_EI_READY){if(J(),xe=d.getObjectById(me),xe.setId(me),Le!==r&&xe.loadPolicy(Le),xe.autoNoCacheHeader(Ie),xe.returnBinaryResponseBody(Ae),xe.doOnReadyStateChange=q,xe.doOnError=$,xe.sendProcessed=ee,xe.chunkResponse=H,ge=0,Z(),W(),typeof ze===u)try{ze(ke)}catch(e){return void $(b.HANDLER_ERROR,"flXHR::onreadystatechange(): Error","An error occurred in the handler function. ("+e.message+")")}Y()}}function D(){try{t.flensed.unbindEvent(e,l,D)}catch(i){}try{for(var s=0;s<v.length;s++)v[s]===ke&&(v[s]=o)}catch(r){}try{for(var a in ke)if(ke[a]!==Object.prototype[a])try{ke[a]=null}catch(u){}}catch(c){}if(ke=null,J(),typeof xe!==n&&null!==xe){try{xe.abort()}catch(h){}try{xe.doOnReadyStateChange=null,q=null}catch(p){}try{xe.doOnError=null,doOnError=null}catch(d){}try{xe.sendProcessed=null,ee=null}catch(f){}try{xe.chunkResponse=null,H=null}catch(m){}xe=null;try{t.swfobject.removeSWF(me)}catch(g){}}G(),ze=null,De=null,He=null,_e=null,ye=null,Oe=null,Ce=null}function H(){Ae&&typeof arguments[0]!==n?(Oe=null!==Oe?Oe:[],Oe=Oe.concat(arguments[0])):typeof arguments[0]===c&&(Oe=null!==Oe?Oe:r,Oe+=arguments[0])}function q(){if(typeof arguments[0]!==n&&(ge=arguments[0]),4===ge){if(J(),Ae&&null!==Oe)try{be=d.binaryToString(Oe,s);try{ye=flXHR_vb_StringToBinary(be)}catch(t){ye=Oe}}catch(e){}else be=Oe;if(Oe=null,be!==r&&Pe)try{_e=d.parseXMLString(be)}catch(i){_e={}}}typeof arguments[1]!==n&&(we=arguments[1]),typeof arguments[2]!==n&&(Se=arguments[2]),U(ge)}function U(t){if(ve=t,Z(),W(),ke[E]=Math.max(0,t),typeof ze===u)try{ze(ke)}catch(e){return void $(b.HANDLER_ERROR,"flXHR::onreadystatechange(): Error","An error occurred in the handler function. ("+e.message+")")}}function $(){function t(){function t(){return e+", "+i+", "+n}this.number=0,this.name="flXHR Error: Unknown",this.description="Unknown error from 'flXHR' library.",this.message=this.description,this.srcElement=ke;var e=this.number,i=this.name,n=this.description;this.toString=t}function e(){function t(){return e+", "+i+", "+n}this.number=b.HANDLER_ERROR,this.name="flXHR::onerror(): Error",this.description="An error occured in the handler function. ("+a.message+")\nPrevious:["+c+"]",this.message=this.description,this.srcElement=ke;var e=this.number,i=this.name,n=this.description;this.toString=t}J(),G(),je=s;var i;try{i=new d.error(arguments[0],arguments[1],arguments[2],ke)}catch(n){i=new t}var r=o;try{typeof De===u&&(De(i),r=s)}catch(a){var c=i.toString();i=new e}r||O(function(){d.throwUnhandledError(i.toString())},1)}function V(){if(ie(),je=s,typeof He===u)try{He(ke)}catch(t){return void $(b.HANDLER_ERROR,"flXHR::ontimeout(): Error","An error occurred in the handler function. ("+t.message+")")}else $(b.TIMEOUT_ERROR,"flXHR: Operation Timed out","The requested operation timed out.")}function J(){T(pe),pe=null,T(fe),fe=null,T(de),de=null}function X(t,e,i){le[le.length]={func:t,funcName:e,args:i},Te=o}function G(){if(!Te){Te=s;for(var t=le.length,e=0;t>e;e++)try{le[e]=o}catch(i){}le=[]}}function Y(){if(0>ge)return void(de=O(Y,25));if(!Te){for(var t=0;t<le.length;t++)try{le[t]!==o&&(le[t].func.apply(ke,le[t].args),le[t]=o)}catch(e){return void $(b.HANDLER_ERROR,"flXHR::"+le[t].funcName+"(): Error","An error occurred in the "+le[t].funcName+"() function.")}Te=s}}function W(){try{ke[j]=Ee,ke[E]=ve,ke.status=we,ke.statusText=Se,ke.responseText=be,ke.responseXML=_e,ke.responseBody=ye,ke[I]=ze,ke[P]=De,ke[A]=He,ke[R]=Le,ke[B]=Ie,ke[N]=Ae,ke[M]=Pe}catch(t){}}function Z(){try{Ee=ke[j],null!==ke.timeout&&(p=C(ke.timeout,10))>0&&(Fe=p),ze=ke[I],De=ke[P],He=ke[A],null!==ke[R]&&(ke[R]!==Le&&ge>=0&&xe.loadPolicy(ke[R]),Le=ke[R]),null!==ke[B]&&(ke[B]!==Ie&&ge>=0&&xe.autoNoCacheHeader(ke[B]),Ie=ke[B]),null!==ke[N]&&(ke[N]!==Ae&&ge>=0&&xe.returnBinaryResponseBody(ke[N]),Ae=ke[N]),null!==Pe&&(Pe=!!ke[M])}catch(t){}}function Q(){ie();try{xe.reset()}catch(t){}we=null,Se=null,be=null,_e=null,ye=null,Oe=null,je=o,W(),Le=r,Z()}function K(t){t.checkPassed?S():Ne?m.UpdatePlayer():$(b.PLAYER_VERSION_ERROR,"flXHR: Insufficient Flash Player Version","The Flash Player was either not detected, or the detected version ("+t.playerVersionDetected+") was not at least the minimum version ("+b.MIN_PLAYER_VERSION+") needed by the 'flXHR' library.")}function te(t){t.updateStatus===f.UPDATE_CANCELED?$(b.PLAYER_VERSION_ERROR,"flXHR: Flash Player Update Canceled","The Flash Player was not updated."):t.updateStatus===f.UPDATE_FAILED&&$(b.PLAYER_VERSION_ERROR,"flXHR: Flash Player Update Failed","The Flash Player was either not detected or could not be updated.")}function ee(){null!==Fe&&Fe>0&&(fe=O(V,Fe))}function ie(){J(),G(),Z(),ge=0,ve=0;try{xe.abort()}catch(t){$(b.CALL_ERROR,"flXHR::abort(): Failed","The abort() call failed to complete.")}W()}function ne(){if(Z(),typeof arguments[0]===n||typeof arguments[1]===n)$(b.CALL_ERROR,"flXHR::open(): Failed","The open() call requires 'method' and 'url' parameters.");else{(ge>0||je)&&Q(),0===ve?q(1):ge=1;var t=arguments[0],e=arguments[1],i=typeof arguments[2]!==n?arguments[2]:s,o=typeof arguments[3]!==n?arguments[3]:r,a=typeof arguments[4]!==n?arguments[4]:r;try{xe.autoNoCacheHeader(Ie),xe.open(t,e,i,o,a)}catch(u){$(b.CALL_ERROR,"flXHR::open(): Failed","The open() call failed to complete.")}}}function se(){if(Z(),1>=ge&&!je){var t=typeof arguments[0]!==n?arguments[0]:r;1===ve?q(2):ge=2;try{xe.autoNoCacheHeader(Ie),xe.send(t)}catch(e){$(b.CALL_ERROR,"flXHR::send(): Failed","The send() call failed to complete.")}}else $(b.CALL_ERROR,"flXHR::send(): Failed","The send() call cannot be made at this time.")}function oe(){if(Z(),typeof arguments[0]===n||typeof arguments[1]===n)$(b.CALL_ERROR,"flXHR::setRequestHeader(): Failed","The setRequestHeader() call requires 'name' and 'value' parameters.");else if(!je){var t=typeof arguments[0]!==n?arguments[0]:r,e=typeof arguments[1]!==n?arguments[1]:r;try{xe.setRequestHeader(t,e)}catch(i){$(b.CALL_ERROR,"flXHR::setRequestHeader(): Failed","The setRequestHeader() call failed to complete.")}}}function re(){return Z(),r}function ae(){return Z(),[]}var ue=o;if(null!==_&&typeof _===a&&typeof _.instancePooling!==n&&(ue=!!_.instancePooling)){var ce=function(){for(var t=0;t<v.length;t++){var e=v[t];if(4===e[E])return e.Reset(),e.Configure(_),e}return null}();if(null!==ce)return ce}{var he=++g,le=[],pe=null,de=null,fe=null,me=null,ge=-1,ve=0,ye=null,be=null,_e=null,we=null,Se=null,xe=null,ke=null,Ce=null,Oe=null,Te=s,je=o,Ee="flXHR_"+he,Ie=s,Ae=o,Pe=s,Ne=o,Me="flXHR_swf",Re="flXHRhideSwf",Be=null,Fe=-1,Le=r,ze=null,De=null,He=null;!function(){function t(){T(pe);try{e.detachEvent(l,t)}catch(i){}}typeof _===a&&null!==_&&(typeof _[j]!==n&&null!==_[j]&&_[j]!==r&&(Ee=_[j]),typeof _[z]!==n&&null!==_[z]&&_[z]!==r&&(Me=_[z]),typeof _[L]!==n&&null!==_[L]&&_[L]!==r&&(Be=_[L]),typeof _[R]!==n&&null!==_[R]&&_[R]!==r&&(Le=_[R]),typeof _[B]!==n&&(Ie=!!_[B]),typeof _[N]!==n&&(Ae=!!_[N]),typeof _[M]!==n&&(Pe=!!_[M]),typeof _.autoUpdatePlayer!==n&&(Ne=!!_.autoUpdatePlayer),typeof _[F]!==n&&(p=C(_[F],10))>0&&(Fe=p),typeof _[I]!==n&&null!==_[I]&&(ze=_[I]),typeof _[P]!==n&&null!==_[P]&&(De=_[P]),typeof _[A]!==n&&null!==_[A]&&(He=_[A])),me=Me+"_"+he;try{e.attachEvent(l,t)}catch(i){}!function(){try{d.bindEvent(e,l,D)}catch(i){return void(pe=O(arguments.callee,25))}t(),pe=O(w,1)}()}()}return ke={readyState:ve,responseBody:ye,responseText:be,responseXML:_e,status:we,statusText:Se,timeout:Fe,open:function(){return Z(),0===ke[E]&&U(1),!Te||0>ge?void X(ne,"open",arguments):void ne.apply({},arguments)},send:function(){return Z(),1===ke[E]&&U(2),!Te||0>ge?void X(se,"send",arguments):void se.apply({},arguments)},abort:ie,setRequestHeader:function(){return Z(),!Te||0>ge?void X(oe,"setRequestHeader",arguments):void oe.apply({},arguments)},getResponseHeader:re,getAllResponseHeaders:ae,onreadystatechange:ze,ontimeout:He,instanceId:Ee,loadPolicyURL:Le,noCacheHeader:Ie,binaryResponseBody:Ae,xmlResponseText:Pe,onerror:De,Configure:function(t){typeof t===a&&null!==t&&(typeof t[j]!==n&&null!==t[j]&&t[j]!==r&&(Ee=t[j]),typeof t[B]!==n&&(Ie=!!t[B],ge>=0&&xe.autoNoCacheHeader(Ie)),typeof t[N]!==n&&(Ae=!!t[N],ge>=0&&xe.returnBinaryResponseBody(Ae)),typeof t[M]!==n&&(Pe=!!t[M]),typeof t[I]!==n&&null!==t[I]&&(ze=t[I]),typeof t[P]!==n&&null!==t[P]&&(De=t[P]),typeof t[A]!==n&&null!==t[A]&&(He=t[A]),typeof t[F]!==n&&(p=C(t[F],10))>0&&(Fe=p),typeof t[R]!==n&&null!==t[R]&&t[R]!==r&&t[R]!==Le&&(Le=t[R],ge>=0&&xe.loadPolicy(Le)),W())},Reset:Q,Destroy:D},ue&&(v[v.length]=ke),ke},b=d.flXHR,b.HANDLER_ERROR=10,b.CALL_ERROR=11,b.TIMEOUT_ERROR=12,b.DEPENDENCY_ERROR=13,b.PLAYER_VERSION_ERROR=14,b.SECURITY_ERROR=15,b.COMMUNICATION_ERROR=16,b.MIN_PLAYER_VERSION="9.0.124",b.module_ready=function(){})}(window);var Base64=function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e={encode:function(e){var i,n,s,o,r,a,u,c="",h=0;do i=e.charCodeAt(h++),n=e.charCodeAt(h++),s=e.charCodeAt(h++),o=i>>2,r=(3&i)<<4|n>>4,a=(15&n)<<2|s>>6,u=63&s,isNaN(n)?a=u=64:isNaN(s)&&(u=64),c=c+t.charAt(o)+t.charAt(r)+t.charAt(a)+t.charAt(u);while(h<e.length);return c},decode:function(e){var i,n,s,o,r,a,u,c="",h=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do o=t.indexOf(e.charAt(h++)),r=t.indexOf(e.charAt(h++)),a=t.indexOf(e.charAt(h++)),u=t.indexOf(e.charAt(h++)),i=o<<2|r>>4,n=(15&r)<<4|a>>2,s=(3&a)<<6|u,c+=String.fromCharCode(i),64!=a&&(c+=String.fromCharCode(n)),64!=u&&(c+=String.fromCharCode(s));while(h<e.length);return c}};return e}(),MD5=function(){var t=0,e="",i=8,n=function(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i},s=function(t,e){return t<<e|t>>>32-e},o=function(t){for(var e=[],n=(1<<i)-1,s=0;s<t.length*i;s+=i)e[s>>5]|=(t.charCodeAt(s/i)&n)<<s%32;return e},r=function(t){for(var e="",n=(1<<i)-1,s=0;s<32*t.length;s+=i)e+=String.fromCharCode(t[s>>5]>>>s%32&n);return e},a=function(e){for(var i=t?"0123456789ABCDEF":"0123456789abcdef",n="",s=0;s<4*e.length;s++)n+=i.charAt(e[s>>2]>>s%4*8+4&15)+i.charAt(e[s>>2]>>s%4*8&15);return n},u=function(t){for(var i,n,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="",r=0;r<4*t.length;r+=3)for(i=(t[r>>2]>>8*(r%4)&255)<<16|(t[r+1>>2]>>8*((r+1)%4)&255)<<8|t[r+2>>2]>>8*((r+2)%4)&255,n=0;4>n;n++)o+=8*r+6*n>32*t.length?e:s.charAt(i>>6*(3-n)&63);return o},c=function(t,e,i,o,r,a){return n(s(n(n(e,t),n(o,a)),r),i)},h=function(t,e,i,n,s,o,r){return c(e&i|~e&n,t,e,s,o,r)},l=function(t,e,i,n,s,o,r){return c(e&n|i&~n,t,e,s,o,r)},p=function(t,e,i,n,s,o,r){return c(e^i^n,t,e,s,o,r)},d=function(t,e,i,n,s,o,r){return c(i^(e|~n),t,e,s,o,r)},f=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var i,s,o,r,a=1732584193,u=-271733879,c=-1732584194,f=271733878,m=0;m<t.length;m+=16)i=a,s=u,o=c,r=f,a=h(a,u,c,f,t[m+0],7,-680876936),f=h(f,a,u,c,t[m+1],12,-389564586),c=h(c,f,a,u,t[m+2],17,606105819),u=h(u,c,f,a,t[m+3],22,-1044525330),a=h(a,u,c,f,t[m+4],7,-176418897),f=h(f,a,u,c,t[m+5],12,1200080426),c=h(c,f,a,u,t[m+6],17,-1473231341),u=h(u,c,f,a,t[m+7],22,-45705983),a=h(a,u,c,f,t[m+8],7,1770035416),f=h(f,a,u,c,t[m+9],12,-1958414417),c=h(c,f,a,u,t[m+10],17,-42063),u=h(u,c,f,a,t[m+11],22,-1990404162),a=h(a,u,c,f,t[m+12],7,1804603682),f=h(f,a,u,c,t[m+13],12,-40341101),c=h(c,f,a,u,t[m+14],17,-1502002290),u=h(u,c,f,a,t[m+15],22,1236535329),a=l(a,u,c,f,t[m+1],5,-165796510),f=l(f,a,u,c,t[m+6],9,-1069501632),c=l(c,f,a,u,t[m+11],14,643717713),u=l(u,c,f,a,t[m+0],20,-373897302),a=l(a,u,c,f,t[m+5],5,-701558691),f=l(f,a,u,c,t[m+10],9,38016083),c=l(c,f,a,u,t[m+15],14,-660478335),u=l(u,c,f,a,t[m+4],20,-405537848),a=l(a,u,c,f,t[m+9],5,568446438),f=l(f,a,u,c,t[m+14],9,-1019803690),c=l(c,f,a,u,t[m+3],14,-187363961),u=l(u,c,f,a,t[m+8],20,1163531501),a=l(a,u,c,f,t[m+13],5,-1444681467),f=l(f,a,u,c,t[m+2],9,-51403784),c=l(c,f,a,u,t[m+7],14,1735328473),u=l(u,c,f,a,t[m+12],20,-1926607734),a=p(a,u,c,f,t[m+5],4,-378558),f=p(f,a,u,c,t[m+8],11,-2022574463),c=p(c,f,a,u,t[m+11],16,1839030562),u=p(u,c,f,a,t[m+14],23,-35309556),a=p(a,u,c,f,t[m+1],4,-1530992060),f=p(f,a,u,c,t[m+4],11,1272893353),c=p(c,f,a,u,t[m+7],16,-155497632),u=p(u,c,f,a,t[m+10],23,-1094730640),a=p(a,u,c,f,t[m+13],4,681279174),f=p(f,a,u,c,t[m+0],11,-358537222),c=p(c,f,a,u,t[m+3],16,-722521979),u=p(u,c,f,a,t[m+6],23,76029189),a=p(a,u,c,f,t[m+9],4,-640364487),f=p(f,a,u,c,t[m+12],11,-421815835),c=p(c,f,a,u,t[m+15],16,530742520),u=p(u,c,f,a,t[m+2],23,-995338651),a=d(a,u,c,f,t[m+0],6,-198630844),f=d(f,a,u,c,t[m+7],10,1126891415),c=d(c,f,a,u,t[m+14],15,-1416354905),u=d(u,c,f,a,t[m+5],21,-57434055),a=d(a,u,c,f,t[m+12],6,1700485571),f=d(f,a,u,c,t[m+3],10,-1894986606),c=d(c,f,a,u,t[m+10],15,-1051523),u=d(u,c,f,a,t[m+1],21,-2054922799),a=d(a,u,c,f,t[m+8],6,1873313359),f=d(f,a,u,c,t[m+15],10,-30611744),c=d(c,f,a,u,t[m+6],15,-1560198380),u=d(u,c,f,a,t[m+13],21,1309151649),a=d(a,u,c,f,t[m+4],6,-145523070),f=d(f,a,u,c,t[m+11],10,-1120210379),c=d(c,f,a,u,t[m+2],15,718787259),u=d(u,c,f,a,t[m+9],21,-343485551),a=n(a,i),u=n(u,s),c=n(c,o),f=n(f,r);
return[a,u,c,f]},m=function(t,e){var n=o(t);n.length>16&&(n=f(n,t.length*i));for(var s=new Array(16),r=new Array(16),a=0;16>a;a++)s[a]=909522486^n[a],r[a]=1549556828^n[a];var u=f(s.concat(o(e)),512+e.length*i);return f(r.concat(u),640)},g={hexdigest:function(t){return a(f(o(t),t.length*i))},b64digest:function(t){return u(f(o(t),t.length*i))},hash:function(t){return r(f(o(t),t.length*i))},hmac_hexdigest:function(t,e){return a(m(t,e))},hmac_b64digest:function(t,e){return u(m(t,e))},hmac_hash:function(t,e){return r(m(t,e))},test:function(){return"900150983cd24fb0d6963f7d28e17f72"===MD5.hexdigest("abc")}};return g}();Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;return function(){return e.apply(t,arguments)}}),Function.prototype.prependArg||(Function.prototype.prependArg=function(t){var e=this;return function(){for(var i=[t],n=0;n<arguments.length;n++)i.push(arguments[n]);return e.apply(this,i)}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length,i=Number(arguments[1])||0;for(i=0>i?Math.ceil(i):Math.floor(i),0>i&&(i+=e);e>i;i++)if(i in this&&this[i]===t)return i;return-1}),function(t){function e(t,e){return new o.Builder(t,e)}function i(t){return new o.Builder("message",t)}function n(t){return new o.Builder("iq",t)}function s(t){return new o.Builder("presence",t)}var o;o={VERSION:"1.0.1",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas"},addNamespace:function(t,e){o.NS[t]=e},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,forEachChild:function(t,e,i){var n,s;for(n=0;n<t.childNodes.length;n++)s=t.childNodes[n],s.nodeType!=o.ElementType.NORMAL||e&&!this.isTagEqual(s,e)||i(s)},isTagEqual:function(t,e){return t.tagName.toLowerCase()==e.toLowerCase()},_xmlGenerator:null,_makeGenerator:function(){var t;return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.appendChild(t.createElement("strophe"))):t=document.implementation.createDocument("jabber:client","strophe",null),t},xmlElement:function(t){if(!t)return null;var e=null;o._xmlGenerator||(o._xmlGenerator=o._makeGenerator()),e=o._xmlGenerator.createElement(t);var i,n,s;for(i=1;i<arguments.length;i++)if(arguments[i])if("string"==typeof arguments[i]||"number"==typeof arguments[i])e.appendChild(o.xmlTextNode(arguments[i]));else if("object"==typeof arguments[i]&&"function"==typeof arguments[i].sort)for(n=0;n<arguments[i].length;n++)"object"==typeof arguments[i][n]&&"function"==typeof arguments[i][n].sort&&e.setAttribute(arguments[i][n][0],arguments[i][n][1]);else if("object"==typeof arguments[i])for(s in arguments[i])arguments[i].hasOwnProperty(s)&&e.setAttribute(s,arguments[i][s]);return e},xmlescape:function(t){return t=t.replace(/\&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;")},xmlTextNode:function(t){return t=o.xmlescape(t),o._xmlGenerator||(o._xmlGenerator=o._makeGenerator()),o._xmlGenerator.createTextNode(t)},getText:function(t){if(!t)return null;var e="";0===t.childNodes.length&&t.nodeType==o.ElementType.TEXT&&(e+=t.nodeValue);for(var i=0;i<t.childNodes.length;i++)t.childNodes[i].nodeType==o.ElementType.TEXT&&(e+=t.childNodes[i].nodeValue);return e},copyElement:function(t){var e,i;if(t.nodeType==o.ElementType.NORMAL){for(i=o.xmlElement(t.tagName),e=0;e<t.attributes.length;e++)i.setAttribute(t.attributes[e].nodeName.toLowerCase(),t.attributes[e].value);for(e=0;e<t.childNodes.length;e++)i.appendChild(o.copyElement(t.childNodes[e]))}else t.nodeType==o.ElementType.TEXT&&(i=o.xmlTextNode(t.nodeValue));return i},escapeNode:function(t){return t.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(t){return t.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(t){return t.indexOf("@")<0?null:t.split("@")[0]},getDomainFromJid:function(t){var e=o.getBareJidFromJid(t);if(e.indexOf("@")<0)return e;var i=e.split("@");return i.splice(0,1),i.join("@")},getResourceFromJid:function(t){var e=t.split("/");return e.length<2?null:(e.splice(0,1),e.join("/"))},getBareJidFromJid:function(t){return t.split("/")[0]},log:function(){},debug:function(t){this.log(this.LogLevel.DEBUG,t)},info:function(t){this.log(this.LogLevel.INFO,t)},warn:function(t){this.log(this.LogLevel.WARN,t)},error:function(t){this.log(this.LogLevel.ERROR,t)},fatal:function(t){this.log(this.LogLevel.FATAL,t)},serialize:function(t){var e;if(!t)return null;"function"==typeof t.tree&&(t=t.tree());var i,n,s=t.nodeName;for(t.getAttribute("_realname")&&(s=t.getAttribute("_realname")),e="<"+s,i=0;i<t.attributes.length;i++)"_realname"!=t.attributes[i].nodeName&&(e+=" "+t.attributes[i].nodeName.toLowerCase()+"='"+t.attributes[i].value.replace("&","&amp;").replace("'","&apos;").replace("<","&lt;")+"'");if(t.childNodes.length>0){for(e+=">",i=0;i<t.childNodes.length;i++)n=t.childNodes[i],n.nodeType==o.ElementType.NORMAL?e+=o.serialize(n):n.nodeType==o.ElementType.TEXT&&(e+=n.nodeValue);e+="</"+s+">"}else e+="/>";return e},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(t,e){o._connectionPlugins[t]=e}},o.Builder=function(t,e){("presence"==t||"message"==t||"iq"==t)&&(e&&!e.xmlns?e.xmlns=o.NS.CLIENT:e||(e={xmlns:o.NS.CLIENT})),this.nodeTree=o.xmlElement(t,e),this.node=this.nodeTree},o.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return o.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},attrs:function(t){for(var e in t)t.hasOwnProperty(e)&&this.node.setAttribute(e,t[e]);return this},c:function(t,e){var i=o.xmlElement(t,e);return this.node.appendChild(i),this.node=i,this},cnode:function(t){return this.node.appendChild(t),this.node=t,this},t:function(t){var e=o.xmlTextNode(t);return this.node.appendChild(e),this}},o.Handler=function(t,e,i,n,s,r,a){this.handler=t,this.ns=e,this.name=i,this.type=n,this.id=s,this.options=a||{matchbare:!1},this.options.matchBare||(this.options.matchBare=!1),this.from=this.options.matchBare?o.getBareJidFromJid(r):r,this.user=!0},o.Handler.prototype={isMatch:function(t){var e,i=null;if(i=this.options.matchBare?o.getBareJidFromJid(t.getAttribute("from")):t.getAttribute("from"),e=!1,this.ns){var n=this;o.forEachChild(t,null,function(t){t.getAttribute("xmlns")==n.ns&&(e=!0)}),e=e||t.getAttribute("xmlns")==this.ns}else e=!0;return!e||this.name&&!o.isTagEqual(t,this.name)||this.type&&t.getAttribute("type")!==this.type||this.id&&t.getAttribute("id")!==this.id||this.from&&i!==this.from?!1:!0},run:function(t){var e=null;try{e=this.handler(t)}catch(i){throw i.sourceURL?o.fatal("error: "+this.handler+" "+i.sourceURL+":"+i.line+" - "+i.name+": "+i.message):i.fileName?("undefined"!=typeof console&&(console.trace(),console.error(this.handler," - error - ",i,i.message)),o.fatal("error: "+this.handler+" "+i.fileName+":"+i.lineNumber+" - "+i.name+": "+i.message)):o.fatal("error: "+this.handler),i}return e},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},o.TimedHandler=function(t,e){this.period=t,this.handler=e,this.lastCalled=(new Date).getTime(),this.user=!0},o.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},o.Request=function(t,e,i,n){this.id=++o._requestId,this.xmlData=t,this.data=o.serialize(t),this.origFunc=e,this.func=e,this.rid=i,this.date=0/0,this.sends=n||0,this.abort=!1,this.dead=null,this.age=function(){if(!this.date)return 0;var t=new Date;return(t-this.date)/1e3},this.timeDead=function(){if(!this.dead)return 0;var t=new Date;return(t-this.dead)/1e3},this.xhr=this._newXHR()},o.Request.prototype={getResponse:function(){var t=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if(t=this.xhr.responseXML.documentElement,"parsererror"==t.tagName)throw o.error("invalid response received"),o.error("responseText: "+this.xhr.responseText),o.error("responseXML: "+o.serialize(this.xhr.responseXML)),"parsererror"}else this.xhr.responseText&&(o.error("invalid response received"),o.error("responseText: "+this.xhr.responseText),o.error("responseXML: "+o.serialize(this.xhr.responseXML)));return t},_newXHR:function(){var t=null;return window.XMLHttpRequest?(t=new XMLHttpRequest,t.overrideMimeType&&t.overrideMimeType("text/xml")):window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLHTTP")),t.onreadystatechange=this.func.prependArg(this),t}},o.Connection=function(t){this.service=t,this.jid="",this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.streamId=null,this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.disconnecting=!1,this.connected=!1,this.errors=0,this.paused=!1,this.hold=1,this.wait=60,this.window=5,this._data=[],this._requests=[],this._uniqueId=Math.round(1e4*Math.random()),this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this._idleTimeout=setTimeout(this._onIdle.bind(this),100);for(var e in o._connectionPlugins)if(o._connectionPlugins.hasOwnProperty(e)){var i=o._connectionPlugins[e],n=function(){};n.prototype=i,this[e]=new n,this[e].init(this)}},o.Connection.prototype={reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.streamId=null,this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.disconnecting=!1,this.connected=!1,this.errors=0,this._requests=[],this._uniqueId=Math.round(1e4*Math.random())},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(t){return"string"==typeof t||"number"==typeof t?++this._uniqueId+":"+t:++this._uniqueId+""},connect:function(t,e,i,n,s){this.jid=t,this.pass=e,this.connect_callback=i,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.errors=0,this.wait=n||this.wait,this.hold=s||this.hold,this.domain=o.getDomainFromJid(this.jid);var r=this._buildBody().attrs({to:this.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":o.NS.BOSH});this._changeConnectStatus(o.Status.CONNECTING,null),this._requests.push(new o.Request(r.tree(),this._onRequestStateChange.bind(this).prependArg(this._connect_cb.bind(this)),r.tree().getAttribute("rid"))),this._throttledRequestHandler()},attach:function(t,e,i,n,s,r,a){this.jid=t,this.sid=e,this.rid=i,this.connect_callback=n,this.domain=o.getDomainFromJid(this.jid),this.authenticated=!0,this.connected=!0,this.wait=s||this.wait,this.hold=r||this.hold,this.window=a||this.window,this._changeConnectStatus(o.Status.ATTACHED,null)},xmlInput:function(){},xmlOutput:function(){},rawInput:function(){},rawOutput:function(){},send:function(t){if(null!==t){if("function"==typeof t.sort)for(var e=0;e<t.length;e++)this._queueData(t[e]);else this._queueData("function"==typeof t.tree?t.tree():t);this._throttledRequestHandler(),clearTimeout(this._idleTimeout),this._idleTimeout=setTimeout(this._onIdle.bind(this),100)}},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendIQ:function(t,e,i,n){var s=null,o=this;"function"==typeof t.tree&&(t=t.tree());var r=t.getAttribute("id");r||(r=this.getUniqueId("sendIQ"),t.setAttribute("id",r));var a=this.addHandler(function(t){s&&o.deleteTimedHandler(s);var n=t.getAttribute("type");if("result"===n)e&&e(t);else{if("error"!==n)throw{name:"StropheError",message:"Got bad IQ type of "+n};i&&i(t)}},null,"iq",null,r);return n&&(s=this.addTimedHandler(n,function(){return o.deleteHandler(a),i&&i(null),!1})),this.send(t),r},_queueData:function(t){if(null===t||!t.tagName||!t.childNodes)throw{name:"StropheError",message:"Cannot queue non-DOMElement."};this._data.push(t)},_sendRestart:function(){this._data.push("restart"),this._throttledRequestHandler(),clearTimeout(this._idleTimeout),this._idleTimeout=setTimeout(this._onIdle.bind(this),100)},addTimedHandler:function(t,e){var i=new o.TimedHandler(t,e);return this.addTimeds.push(i),i},deleteTimedHandler:function(t){this.removeTimeds.push(t)},addHandler:function(t,e,i,n,s,r,a){var u=new o.Handler(t,e,i,n,s,r,a);return this.addHandlers.push(u),u},deleteHandler:function(t){this.removeHandlers.push(t)},disconnect:function(t){if(this._changeConnectStatus(o.Status.DISCONNECTING,t),o.info("Disconnect was called because: "+t),this.connected){if(this._disconnectTimeout=this._addSysTimedHandler(3e4,this._onDisconnectTimeout.bind(this)),this._requests.length>0)for(var e=0;e<this._requests.length;e++)this._removeRequest(this._requests[e]);this._sendTerminate()}},_changeConnectStatus:function(t,e){for(var i in o._connectionPlugins)if(o._connectionPlugins.hasOwnProperty(i)){var n=this[i];if(n.statusChanged)try{n.statusChanged(t,e)}catch(s){o.error(""+i+" plugin caused an exception changing status: "+s)}}if(this.connect_callback)try{this.connect_callback(t,e)}catch(r){o.error("User connection callback caused an exception: "+r)}},_buildBody:function(){var t=e("body",{rid:this.rid++,xmlns:o.NS.HTTPBIND});return null!==this.sid&&t.attrs({sid:this.sid}),t},_removeRequest:function(t){o.debug("removing request");var e;for(e=this._requests.length-1;e>=0;e--)t==this._requests[e]&&this._requests.splice(e,1);t.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(t){var e=this._requests[t];null===e.dead&&(e.dead=new Date),this._processRequest(t)},_processRequest:function(t){var e=this._requests[t],i=-1;try{4==e.xhr.readyState&&(i=e.xhr.status)}catch(n){o.error("caught an error in _requests["+t+"], reqStatus: "+i)}"undefined"==typeof i&&(i=-1);var s=e.age(),r=!isNaN(s)&&s>Math.floor(o.TIMEOUT*this.wait),a=null!==e.dead&&e.timeDead()>Math.floor(o.SECONDARY_TIMEOUT*this.wait),u=4==e.xhr.readyState&&(1>i||i>=500);if((r||a||u)&&(a&&o.error("Request "+this._requests[t].id+" timed out (secondary), restarting"),e.abort=!0,e.xhr.abort(),e.xhr.onreadystatechange=function(){},this._requests[t]=new o.Request(e.xmlData,e.origFunc,e.rid,e.sends),e=this._requests[t]),0===e.xhr.readyState){o.debug("request id "+e.id+"."+e.sends+" posting"),e.date=new Date;try{e.xhr.open("POST",this.service,!0)}catch(c){return o.error("XHR open failed."),this.connected||this._changeConnectStatus(o.Status.CONNFAIL,"bad-service"),void this.disconnect()}var h=function(){try{e.xhr.send(e.data)}catch(i){o.error("send func caught an error in _requests["+t+"], reqStatus: "+e.xhr.status),o.error("exception was "+i)}};if(e.sends>1){var l=1e3*Math.pow(e.sends,3);setTimeout(h,l)}else h();e.sends++,this.xmlOutput(e.xmlData),this.rawOutput(e.data)}else o.debug("_processRequest: "+(0===t?"first":"second")+" request has readyState of "+e.xhr.readyState)},_throttledRequestHandler:function(){o.debug(this._requests?"_throttledRequestHandler called with "+this._requests.length+" requests":"_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window-1&&this._processRequest(1))},_onRequestStateChange:function(t,e){if(o.debug("request id "+e.id+"."+e.sends+" state changed to "+e.xhr.readyState),e.abort)return void(e.abort=!1);var i;if(4==e.xhr.readyState){i=0;try{i=e.xhr.status}catch(n){}if("undefined"==typeof i&&(i=0),this.disconnecting&&i>=400)return void this._hitError(i);var s=this._requests[0]==e,r=this._requests[1]==e;(i>0&&500>i||e.sends>5)&&(this._removeRequest(e),o.debug("request id "+e.id+" should now be removed")),200==i?((r||s&&this._requests.length>0&&this._requests[0].age()>Math.floor(o.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),o.debug("request id "+e.id+"."+e.sends+" got 200"),t(e),this.errors=0):(o.error("request id "+e.id+"."+e.sends+" error "+i+" happened"),(0===i||i>=400&&600>i||i>=12e3)&&(this._hitError(i),i>=400&&500>i&&(this._changeConnectStatus(o.Status.DISCONNECTING,null),this._doDisconnect()))),i>0&&1e4>i||e.sends>5||this._throttledRequestHandler()}},_hitError:function(t){this.errors++,o.warn("request errored, status: "+t+", number of errors: "+this.errors),this.errors>4&&this._onDisconnectTimeout()},_doDisconnect:function(){o.info("_doDisconnect was called"),this.authenticated=!1,this.disconnecting=!1,this.sid=null,this.streamId=null,this.rid=Math.floor(4294967295*Math.random()),this.connected&&(this._changeConnectStatus(o.Status.DISCONNECTED,null),this.connected=!1),this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[]},_dataRecv:function(t){try{var e=t.getResponse()}catch(i){if("parsererror"!=i)throw i;this.disconnect("strophe-parsererror")}if(null!==e){this.xmlInput(e),this.rawInput(o.serialize(e));for(var n,s;this.removeHandlers.length>0;)s=this.removeHandlers.pop(),n=this.handlers.indexOf(s),n>=0&&this.handlers.splice(n,1);for(;this.addHandlers.length>0;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&0===this._requests.length)return this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null,void this._doDisconnect();var r,a,u=e.getAttribute("type");if(null!==u&&"terminate"==u)return r=e.getAttribute("condition"),a=e.getElementsByTagName("conflict"),null!==r?("remote-stream-error"==r&&a.length>0&&(r="conflict"),this._changeConnectStatus(o.Status.CONNFAIL,r)):this._changeConnectStatus(o.Status.CONNFAIL,"unknown"),void this.disconnect();var c=this;o.forEachChild(e,null,function(t){var e,i;for(i=c.handlers,c.handlers=[],e=0;e<i.length;e++){var n=i[e];!n.isMatch(t)||!c.authenticated&&n.user?c.handlers.push(n):n.run(t)&&c.handlers.push(n)}})}},_sendTerminate:function(){o.info("_sendTerminate was called");var t=this._buildBody().attrs({type:"terminate"});this.authenticated&&t.c("presence",{xmlns:o.NS.CLIENT,type:"unavailable"}),this.disconnecting=!0;var e=new o.Request(t.tree(),this._onRequestStateChange.bind(this).prependArg(this._dataRecv.bind(this)),t.tree().getAttribute("rid"));this._requests.push(e),this._throttledRequestHandler()},_connect_cb:function(t){o.info("_connect_cb was called"),this.connected=!0;var i=t.getResponse();if(i){this.xmlInput(i),this.rawInput(o.serialize(i));var s,r,a=i.getAttribute("type");if(null!==a&&"terminate"==a)return s=i.getAttribute("condition"),r=i.getElementsByTagName("conflict"),void(null!==s?("remote-stream-error"==s&&r.length>0&&(s="conflict"),this._changeConnectStatus(o.Status.CONNFAIL,s)):this._changeConnectStatus(o.Status.CONNFAIL,"unknown"));this.sid||(this.sid=i.getAttribute("sid")),this.stream_id||(this.stream_id=i.getAttribute("authid"));var u=i.getAttribute("requests");u&&(this.window=parseInt(u,10));var c=i.getAttribute("hold");c&&(this.hold=parseInt(c,10));var h=i.getAttribute("wait");h&&(this.wait=parseInt(h,10));var l,p,d,f,m=!1,g=!1,v=!1,y=i.getElementsByTagName("mechanism");if(!(y.length>0)){var b=this._buildBody();return this._requests.push(new o.Request(b.tree(),this._onRequestStateChange.bind(this).prependArg(this._connect_cb.bind(this)),b.tree().getAttribute("rid"))),void this._throttledRequestHandler()}for(l=0;l<y.length;l++)p=o.getText(y[l]),"DIGEST-MD5"==p?g=!0:"PLAIN"==p?m=!0:"ANONYMOUS"==p&&(v=!0);null===o.getNodeFromJid(this.jid)&&v?(this._changeConnectStatus(o.Status.AUTHENTICATING,null),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(e("auth",{xmlns:o.NS.SASL,mechanism:"ANONYMOUS"}).tree())):null===o.getNodeFromJid(this.jid)?(this._changeConnectStatus(o.Status.CONNFAIL,"x-strophe-bad-non-anon-jid"),this.disconnect()):g?(this._changeConnectStatus(o.Status.AUTHENTICATING,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge1_cb.bind(this),null,"challenge",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(e("auth",{xmlns:o.NS.SASL,mechanism:"DIGEST-MD5"}).tree())):m?(d=o.getBareJidFromJid(this.jid),d+="\x00",d+=o.getNodeFromJid(this.jid),d+="\x00",d+=this.pass,this._changeConnectStatus(o.Status.AUTHENTICATING,null),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),f=Base64.encode(d),this.send(e("auth",{xmlns:o.NS.SASL,mechanism:"PLAIN"}).t(f).tree())):(this._changeConnectStatus(o.Status.AUTHENTICATING,null),this._addSysHandler(this._auth1_cb.bind(this),null,null,null,"_auth_1"),this.send(n({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:o.NS.AUTH}).c("username",{}).t(o.getNodeFromJid(this.jid)).tree()))}},_sasl_challenge1_cb:function(t){var i,n=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,s=Base64.decode(o.getText(t)),r=MD5.hexdigest(1234567890*Math.random()),a="",u=null,c="",h="";for(this.deleteHandler(this._sasl_failure_handler);s.match(n);)switch(i=s.match(n),s=s.replace(i[0],""),i[2]=i[2].replace(/^"(.+)"$/,"$1"),i[1]){case"realm":a=i[2];break;case"nonce":c=i[2];break;case"qop":h=i[2];break;case"host":u=i[2]}var l="xmpp/"+this.domain;null!==u&&(l=l+"/"+u);var p=MD5.hash(o.getNodeFromJid(this.jid)+":"+a+":"+this.pass)+":"+c+":"+r,d="AUTHENTICATE:"+l,f="";return f+="username="+this._quote(o.getNodeFromJid(this.jid))+",",f+="realm="+this._quote(a)+",",f+="nonce="+this._quote(c)+",",f+="cnonce="+this._quote(r)+",",f+='nc="00000001",',f+='qop="auth",',f+="digest-uri="+this._quote(l)+",",f+="response="+this._quote(MD5.hexdigest(MD5.hexdigest(p)+":"+c+":00000001:"+r+":auth:"+MD5.hexdigest(d)))+",",f+='charset="utf-8"',this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge2_cb.bind(this),null,"challenge",null,null),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(e("response",{xmlns:o.NS.SASL}).t(Base64.encode(f)).tree()),!1},_quote:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},_sasl_challenge2_cb:function(){return this.deleteHandler(this._sasl_success_handler),this.deleteHandler(this._sasl_failure_handler),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(e("response",{xmlns:o.NS.SASL}).tree()),!1},_auth1_cb:function(){var t=n({type:"set",id:"_auth_2"}).c("query",{xmlns:o.NS.AUTH}).c("username",{}).t(o.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return o.getResourceFromJid(this.jid)||(this.jid=o.getBareJidFromJid(this.jid)+"/strophe"),t.up().c("resource",{}).t(o.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(t.tree()),!1},_sasl_success_cb:function(){return o.info("SASL authentication succeeded."),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._addSysHandler(this._sasl_auth1_cb.bind(this),null,"stream:features",null,null),this._sendRestart(),!1},_sasl_auth1_cb:function(t){var e,i;for(e=0;e<t.childNodes.length;e++)i=t.childNodes[e],"bind"==i.nodeName&&(this.do_bind=!0),"session"==i.nodeName&&(this.do_session=!0);if(!this.do_bind)return this._changeConnectStatus(o.Status.AUTHFAIL,null),!1;this._addSysHandler(this._sasl_bind_cb.bind(this),null,null,null,"_bind_auth_2");var s=o.getResourceFromJid(this.jid);return this.send(s?n({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:o.NS.BIND}).c("resource",{}).t(s).tree():n({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:o.NS.BIND}).tree()),!1},_sasl_bind_cb:function(t){if("error"==t.getAttribute("type"))return o.info("SASL binding failed."),this._changeConnectStatus(o.Status.AUTHFAIL,null),!1;var e,i=t.getElementsByTagName("bind");return i.length>0?(e=i[0].getElementsByTagName("jid"),void(e.length>0&&(this.jid=o.getText(e[0]),this.do_session?(this._addSysHandler(this._sasl_session_cb.bind(this),null,null,null,"_session_auth_2"),this.send(n({type:"set",id:"_session_auth_2"}).c("session",{xmlns:o.NS.SESSION}).tree())):(this.authenticated=!0,this._changeConnectStatus(o.Status.CONNECTED,null))))):(o.info("SASL binding failed."),this._changeConnectStatus(o.Status.AUTHFAIL,null),!1)},_sasl_session_cb:function(t){if("result"==t.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(o.Status.CONNECTED,null);else if("error"==t.getAttribute("type"))return o.info("Session creation failed."),this._changeConnectStatus(o.Status.AUTHFAIL,null),!1;return!1},_sasl_failure_cb:function(){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._changeConnectStatus(o.Status.AUTHFAIL,null),!1},_auth2_cb:function(t){return"result"==t.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(o.Status.CONNECTED,null)):"error"==t.getAttribute("type")&&(this._changeConnectStatus(o.Status.AUTHFAIL,null),this.disconnect()),!1},_addSysTimedHandler:function(t,e){var i=new o.TimedHandler(t,e);return i.user=!1,this.addTimeds.push(i),i},_addSysHandler:function(t,e,i,n,s){var r=new o.Handler(t,e,i,n,s);return r.user=!1,this.addHandlers.push(r),r},_onDisconnectTimeout:function(){o.info("_onDisconnectTimeout was called");for(var t;this._requests.length>0;)t=this._requests.pop(),t.abort=!0,t.xhr.abort(),t.xhr.onreadystatechange=function(){};return this._doDisconnect(),!1},_onIdle:function(){for(var t,e,i,n;this.removeTimeds.length>0;)e=this.removeTimeds.pop(),t=this.timedHandlers.indexOf(e),t>=0&&this.timedHandlers.splice(t,1);for(;this.addTimeds.length>0;)this.timedHandlers.push(this.addTimeds.pop());var s=(new Date).getTime();for(n=[],t=0;t<this.timedHandlers.length;t++)e=this.timedHandlers[t],(this.authenticated||!e.user)&&(i=e.lastCalled+e.period,0>=i-s?e.run()&&n.push(e):n.push(e));this.timedHandlers=n;var r,a;if(this.authenticated&&0===this._requests.length&&0===this._data.length&&!this.disconnecting&&(o.info("no requests during idle cycle, sending blank request"),this._data.push(null)),this._requests.length<2&&this._data.length>0&&!this.paused){for(r=this._buildBody(),t=0;t<this._data.length;t++)null!==this._data[t]&&("restart"===this._data[t]?r.attrs({to:this.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":o.NS.BOSH}):r.cnode(this._data[t]).up());delete this._data,this._data=[],this._requests.push(new o.Request(r.tree(),this._onRequestStateChange.bind(this).prependArg(this._dataRecv.bind(this)),r.tree().getAttribute("rid"))),this._processRequest(this._requests.length-1)}this._requests.length>0&&(a=this._requests[0].age(),null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(o.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),a>Math.floor(o.TIMEOUT*this.wait)&&(o.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(o.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())),clearTimeout(this._idleTimeout),this._idleTimeout=setTimeout(this._onIdle.bind(this),100)}},t&&t(o,e,i,n,s)}(function(){window.PhonoStrophe=arguments[0],window.PhonoStrophe.build=arguments[1],window.PhonoStrophe.msg=arguments[2],window.PhonoStrophe.iq=arguments[3],window.PhonoStrophe.pres=arguments[4]}),PhonoStrophe.addConnectionPlugin("cors",{init:function(){if(window.XDomainRequest)PhonoStrophe.debug("CORS with IE"),PhonoStrophe.Request.prototype._newXHR=function(){var t=function(t,e){t.status=e,t.readyState=4;try{t.onreadystatechange()}catch(i){}t.readyState=0;try{t.onreadystatechange()}catch(i){}},e=new XDomainRequest;return e.readyState=0,e.onreadystatechange=this.func.prependArg(this),e.onload=function(){xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async="false",xmlDoc.loadXML(e.responseText),e.responseXML=xmlDoc,t(e,200)},e.onerror=function(){t(e,500)},e.ontimeout=function(){t(e,500)},e.sendFnc=e.send,e.send=function(t){return e.readyState=2,e.sendFnc(t)},e};else if(void 0!==(new XMLHttpRequest).withCredentials)PhonoStrophe.debug("CORS with Firefox/Safari/Chome");else if(flensed&&flensed.flXHR){PhonoStrophe.debug("CORS not supported, using flXHR");var t=!0;-1!=navigator.userAgent.indexOf("MSIE")&&(t=!1),PhonoStrophe.Request.prototype._newXHR=function(){var e=new flensed.flXHR({autoUpdatePlayer:!0,instancePooling:t,noCacheHeader:!1});return e.onreadystatechange=this.func.prependArg(this),e}}else PhonoStrophe.error("No CORS and no flXHR. You may experience cross domain turbulence.")}}),Phono.events={handlerCount:1,add:function(t,e,i){e=e.toLowerCase(),i.$$guid||(i.$$guid=this.handlerCount++),t.events||(t.events={});var n=t.events[e];n||(n=t.events[e]={},t["on"+e]&&(n[0]=t["on"+e])),n[i.$$guid]=i,t["on"+e]=this.handle},bind:function(t,e){for(k in e)k.match("^on")&&this.add(t,k.substr(2).toLowerCase(),e[k])},remove:function(t,e,i){e=e.toLowerCase(),t.events&&t.events[e]&&delete t.events[e][i.$$guid]},trigger:function(t,e,i,n){i=i||{},i.type=e;var s=t["on"+e.toLowerCase()];s&&("log"!=e.toLowerCase()&&Phono.log.info("[EVENT] "+e+"["+n+"]"),s.call(t,i,n))},handle:function(t,e){var i=this.events[t.type.toLowerCase()];t.source=this;var n=new Array;if(n.push(t),e){var s;for(s=0;s<e.length;s++)n.push(e[s])}var o=this;Phono.util.each(i,function(){this.apply(o,n)})}},function(){function t(t,e){if(e)for(key in e)e.hasOwnProperty(key)&&(t[key]=e[key]);return t}function e(t,e){var i=[];for(var n in t)t.hasOwnProperty(n)&&(i[n]=e(t[n]));return i}function i(e,i,o){if(u.isSupported(i.version))e.innerHTML=u.getHTML(i,o);else if(i.expressInstall&&u.isSupported([6,65]))e.innerHTML=u.getHTML(t(i,{src:i.expressInstall}),{MMredirectURL:location.href,MMplayerType:"PlugIn",MMdoctitle:document.title});else if(e.innerHTML.replace(/\s/g,"")||(e.innerHTML="<h2>Flash version "+i.version+" or greater is required</h2><h3>"+(c[0]>0?"Your version is "+c:"You have no flash plugin installed")+"</h3>"+("A"==e.tagName?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='"+s+"'>here</a></p>"),"A"==e.tagName&&(e.onclick=function(){location.href=s})),i.onFail){var r=i.onFail.call(this);"string"==typeof r&&(e.innerHTML=r)}n&&(window[i.id]=document.getElementById(i.id)),t(this,{getRoot:function(){return e},getOptions:function(){return i},getConf:function(){return o},getApi:function(){return e.firstChild}})}var n=document.all,s="http://www.adobe.com/go/getflashplayer",o="function"==typeof $,r=/(\d+)[^\d]+(\d+)[^\d]*(\d*)/,a={width:"100%",height:"100%",id:"_"+(""+Math.random()).slice(9),allowfullscreen:!0,allowscriptaccess:"always",quality:"high",version:[3,0],onFail:null,expressInstall:null,w3c:!1,cachebusting:!1};
window.attachEvent&&window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){},__flash_savedUnloadHandler=function(){}}),window.flashembed=function(e,n,s){return"string"==typeof e&&(e=document.getElementById(e.replace("#",""))),e?("string"==typeof n&&(n={src:n}),new i(e,t(t({},a),n),s)):void 0};var u=t(window.flashembed,{conf:a,getVersion:function(){var t;try{t=navigator.plugins["Shockwave Flash"].description.slice(16)}catch(e){try{var i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");t=i&&i.GetVariable("$version")}catch(n){}}return(t=r.exec(t))?[t[1],t[3]]:[0,0]},asString:function(t){if(null===t||void 0===t)return null;var i=typeof t;switch("object"==i&&t.push&&(i="array"),i){case"string":return t=t.replace(new RegExp('(["\\\\])',"g"),"\\$1"),t=t.replace(/^\s?(\d+\.?\d+)%/,"$1pct"),'"'+t+'"';case"array":return"["+e(t,function(t){return u.asString(t)}).join(",")+"]";case"function":return'"function()"';case"object":i=[];for(var n in t)t.hasOwnProperty(n)&&i.push('"'+n+'":'+u.asString(t[n]));return"{"+i.join(",")+"}"}return String(t).replace(/\s/g," ").replace(/\'/g,'"')},getHTML:function(e,i){e=t({},e);var s='<object width="'+e.width+'" height="'+e.height+'" id="'+e.id+'" name="'+e.id+'"';e.cachebusting&&(e.src+=(-1!=e.src.indexOf("?")?"&":"?")+Math.random()),s+=e.w3c||!n?' data="'+e.src+'" type="application/x-shockwave-flash"':' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"',s+=">",(e.w3c||n)&&(s+='<param name="movie" value="'+e.src+'" />'),e.width=e.height=e.id=e.w3c=e.src=null,e.onFail=e.version=e.expressInstall=null;for(var o in e)e[o]&&(s+='<param name="'+o+'" value="'+e[o]+'" />');if(e="",i){for(var r in i)i[r]&&(o=i[r],e+=r+"="+(/function|object/.test(typeof o)?u.asString(o):o)+"&");e=e.slice(0,-1),s+='<param name="flashvars" value=\''+e+"' />"}return s+="</object>"},isSupported:function(t){return c[0]>t[0]||c[0]==t[0]&&c[1]>=t[1]}}),c=u.getVersion();o&&($.tools=$.tools||{version:"1.2.2"},$.tools.flashembed={conf:a},$.fn.flashembed=function(t,e){return this.each(function(){$(this).data("flashembed",flashembed(this,t,e))})})}(),function(){function FlashAudio(t,e,i){this.type="flash",this.config=Phono.util.extend({protocol:"rtmfp",swf:"//"+MD5.hexdigest(window.location.host+t.config.apiKey)+".u.phono.com/releases/"+Phono.version+"/plugins/audio/phono.audio.swf",cirrus:"rtmfp://phono-fms1-ext.voxeolabs.net/phono",bridged:!1,reliable:!1,media:{audio:!0,video:!0},watchdog:25e3},e),Phono.events.bind(this,e);var n=this.config.containerId;n||(this.config.containerId=n=this.createContainer()),Phono.events.bind(this,{onPermissionBoxShow:function(){var t=$("#"+n).position();$("#"+n).css("left",parseInt(t.left)),$("#"+n).css("top",parseInt(t.top))}});var s=this;FABridge.addInitializationCallback(n,function(){Phono.log.info("FlashAudio Ready"),s.$flash=this.create("Wrapper").getAudio(),s.$flash.addEventListener(null,function(e){var i=e.getType()+"";Phono.events.trigger(s,i,{reason:e.getReason()}),"mediaError"==i&&Phono.events.trigger(t,"error",{reason:e.getReason()})}),s.$flash.setVersion(Phono.version),i(s)}),wmodeSetting="opaque",(-1!=navigator.appVersion.indexOf("X11")||-1!=navigator.appVersion.indexOf("Linux")||$.browser.opera)&&(wmodeSetting="window"),window.setInterval(function(){s.$flash||(Phono.events.trigger(t,"error",{reason:"Timeout waiting for flash to load."}),Phono.log.error("Timeout waiting for flash to load."))},s.config.watchdog),flashembed(n,{id:n+"id",src:this.config.swf+"?rnd="+(new Date).getTime(),wmode:wmodeSetting},{bridgeName:n})}function JavaAudio(phono,config,callback){if(this.type="java",JavaAudio.exists()){this.config=Phono.util.extend({jar:"//s.phono.com/releases/"+Phono.version+"/plugins/audio/phono.audio.jar"},config),Phono.events.bind(this,config);var containerId=this.config.containerId;containerId||(this.config.containerId=containerId=_createContainer());var plugin=this;plugin.$applet=_loadApplet(containerId,this.config.jar,callback,plugin),window.setInterval(function(){var str="Loading...";try{var json=plugin.$applet[0].getJSONStatus();if(json){var statusO=eval("("+json+")");statusO.userTrust?(eps=statusO.endpoints,eps.length>0&&(eps[0].sent>50&&0==eps[0].rcvd&&Phono.events.trigger(phono,"error",{reason:"Java Applet detected firewall."}),str="share: "+eps[0].uri,str+=" sent "+eps[0].sent,str+=" rcvd "+eps[0].rcvd,str+=" error "+eps[0].error,Phono.log.debug("[JAVA RTP] "+str))):Phono.events.trigger(phono,"error",{reason:"Java Applet not trusted by user - cannot continue"})}else Phono.events.trigger(phono,"error",{reason:"Java applet did not load."}),Phono.log.debug("[JAVA Load errror] no status returned.")}catch(e){Phono.events.trigger(phono,"error",{reason:"Can not communicate with Java Applet - perhaps it did not load."}),Phono.log.debug("[JAVA Load error] "+e)}},25e3)}else Phono.events.trigger(phono,"error",{reason:"Java not available in this browser."})}function PhonegapIOSAudio(t,e,i){this.type="phonegap-ios",Phono.events.bind(this,e);var n=this;this.initState(i,n)}function PhonegapAndroidAudio(t,e,i){this.type="phonegap-android",Phono.events.bind(this,e);var n=this;PhoneGap.exec(null,null,"App","addService",["PhonogapAudio","com.phono.android.phonegap.Phono"]),this.allocateEndpoint(),this.initState(i,n)}function JSEPAudio(t,e,i){this.type="jsep",Phono.log.info("Initialize JSEP"),"undefined"!=typeof webkitAudioContext?(Phono.log.info("Have webkitAudio def"),JSEPAudio.webAudioContext=new webkitAudioContext):"undefined"!=typeof AudioContext?(Phono.log.info("Have AudioContext def"),JSEPAudio.webAudioContext=new AudioContext):"undefined"!=typeof mozAudioContext?(Phono.log.info("Have mozAudio def"),JSEPAudio.webAudioContext=new mozAudioContext):Phono.log.info("No webAudio available - so no freep"),"function"==typeof webkitRTCPeerConnection?(JSEPAudio.GUM=function(t,e,i){navigator.webkitGetUserMedia(t,e,i)},JSEPAudio.mkPeerConnection=function(t,e){return new webkitRTCPeerConnection(t,e)},JSEPAudio.mkSessionDescription=function(t){return new RTCSessionDescription(t)},JSEPAudio.createObjectURL=function(t){return webkitURL.createObjectURL(t)},JSEPAudio.stun="stun:stun.l.google.com:19302",JSEPAudio.attachMediaStream=function(t,e){t.src=webkitURL.createObjectURL(e)},JSEPAudio.stripCrypto=function(t){return t},JSEPAudio.AudioUrl=function(t){return t},JSEPAudio.addCreateConstraint=function(t){return t}):"function"==typeof mozRTCPeerConnection&&(JSEPAudio.GUM=function(t,e,i){navigator.mozGetUserMedia(t,e,i)},JSEPAudio.mkPeerConnection=function(t,e){return new mozRTCPeerConnection(t,e)},JSEPAudio.mkSessionDescription=function(t){return new mozRTCSessionDescription(t)},JSEPAudio.createObjectURL=function(t){return URL.createObjectURL(t)},JSEPAudio.stun="stun:23.21.150.121",JSEPAudio.attachMediaStream=function(t,e){t.mozSrcObject=e,t.play()},JSEPAudio.stripCrypto=function(t){return Phono.util.each(t.contents,function(){this.crypto&&delete this.crypto}),t},JSEPAudio.AudioUrl=function(t){return t.replace(".mp3",".ogg")},JSEPAudio.addCreateConstraint=function(t){return t.mandatory.MozDontOfferDataChannel=!0,t}),JSEPAudio.spk=0,JSEPAudio.mic=0,this.config=Phono.util.extend({media:{audio:!0,video:!1}},e);var n=this,s=this.config.localContainerId;s||(this.config.localContainerId=this.createContainer()),JSEPAudio.localVideo=document.getElementById(this.config.localContainerId),i(n)}FlashAudio.count=0,FlashAudio.prototype.getCaps=function(t){return t.c(this.type,{protocol:this.config.protocol,bridged:this.config.bridged}).up()},FlashAudio.prototype.showPermissionBox=function(){this.$flash.showPermissionBox()},FlashAudio.prototype.permission=function(){return this.$flash.getHasPermission()},FlashAudio.prototype.play=function(t,e){url=t.uri.replace("protocol",this.config.protocol);var i=url,n=Phono.util.parseUri(url),s=Phono.util.parseUri(document.location);if("rtp"==n.protocol)return null;0==url.indexOf("//")?i=s.protocol+":"+url:n.protocol.length<2&&(i=s.protocol+"://"+s.authority+s.directoryPath+url);var o;return 0==this.config.bridged&&void 0!=t.peerID&&void 0!=this.config.cirrus?(Phono.log.info("Direct media play with peer "+t.peerID),o=this.$flash.play(i,e,t.peerID,this.config.video)):o=this.$flash.play(i,e),{url:function(){return o.getUrl()},start:function(){o.start()},stop:function(){o.stop(),o.release()},volume:function(t){return 0===arguments.length?o.getVolume():void o.setVolume(t)}}},FlashAudio.prototype.share=function(t,e,i){var n=t.uri.replace("protocol",this.config.protocol),s="";0==this.config.bridged&&void 0!=t.peerID&&void 0!=this.config.cirrus&&(s=t.peerID,Phono.log.info("Direct media share with peer "+t.peerID));var o=!1,r=this.$flash.share(n,e,i.id,i.name,i.rate,!0,s,this.config.video,this.config.reliable);0==n.indexOf("rtmfp://")&&(o=!0);var a={url:function(){return r.getUrl()},codec:function(){var t=r.getCodec();return{id:t.getId(),name:t.getName(),rate:t.getRate()}},start:function(){r.start()},stop:function(){r.stop(),r.release()},digit:function(t,e,i){r.digit(t,e,i)},gain:function(t){return 0===arguments.length?r.getGain():void r.setGain(t)},mute:function(t){return 0===arguments.length?r.getMute():void r.setMute(t)},suppress:function(t){return 0===arguments.length?r.getSuppress():void r.setSuppress(t)},energy:function(){return{mic:0,spk:0}},secure:function(){return o}};return r.addEventListener(null,function(t){var e=t.getType()+"";Phono.events.trigger(a,e,{reason:t.getReason()})}),a},FlashAudio.prototype.transport=function(){var t=this.$flash,e=this.config,i=this.config.cirrus,n=this,s=this.$flash.getTransport(),o=this.$flash.getDescription();return{name:s,description:o,buildTransport:function(o,r,a){var u="";if(e.bridged)r.c("transport",{xmlns:this.name}),a();else{var c=function(){""==u&&(u=t.nearID(i),Phono.log.info("Got nearID = "+u),""!=u?r.c("transport",{xmlns:s,peerID:u}):r.c("transport",{xmlns:s}),a())},h=t.doCirrusConnect(i);Phono.log.info("doCirrusConnect"),h?(Phono.log.info("doCirrusConnect - already connected"),c()):Phono.events.add(n,"flashConnected",c)}},processTransport:function(t){var e,i=t.attr("peerid");return void 0!=i&&(e={input:{uri:"rtmfp://invalid/invalid",peerID:i},output:{uri:"rtmfp://invalid/invalid",peerID:i}}),t.find("candidate").each(function(){e={input:{uri:$(this).attr("rtmpUri")+"/"+$(this).attr("playName"),peerID:i},output:{uri:$(this).attr("rtmpUri")+"/"+$(this).attr("publishName"),peerID:i}}}),e},destroyTransport:function(){e.bridged||(Phono.log.info("Disconnecting from cirrus server"),t.doCirrusDisconnect(i))}}},FlashAudio.prototype.codecs=function(){var t=new Array,e=this.$flash.getCodecs();return Phono.util.each(e,function(){t.push({id:this.getId(),name:this.getName(),rate:this.getRate()})}),t},FlashAudio.prototype.createContainer=function(){var t=$("<div>").attr("id","_phono-audio-flash"+FlashAudio.count++).addClass("phono_FlashHolder").appendTo("body");t.css({width:"1px",height:"1px",position:"absolute",top:"50%",left:"50%","margin-top":"-69px","margin-left":"-107px","z-index":"10001",visibility:"visible"});var e=$(t).attr("id");return Phono.events.bind(this,{onPermissionBoxShow:function(){$("#"+e).css({width:"240px",height:"160px"})},onPermissionBoxHide:function(){$("#"+e).css({width:"1px",height:"1px"})}}),e},JavaAudio.exists=function(){return navigator.javaEnabled()},JavaAudio.count=0,JavaAudio.prototype.play=function(t,e){var i,n=t.uri,s=this.$applet[0],o=n,r=Phono.util.parseUri(n),a=Phono.util.parseUri(document.location);return"rtp"==r.protocol?null:(0==n.indexOf("//")?o=a.protocol+":"+n:r.protocol.length<2&&(o=a.protocol+"://"+a.authority+a.directoryPath+n),void 0===e&&(e=!1),i=s.play(o,e),{url:function(){return i.getUrl()},start:function(){i.start()},stop:function(){i.stop()},volume:function(){return 0===arguments.length?i.volume():void i.volume(value)}})},JavaAudio.prototype.share=function(t,e,i,n,s){var o=t.uri,r=this.$applet[0];Phono.log.debug("[JAVA share codec ] "+i.p.pt+" id = "+i.id);var a,u=r.mkCodec(i.p,i.id),c=!1;return void 0!=n&&void 0!=s?(a=r.share(o,u,e,n,s),c=!0):a=r.share(o,u,e),{url:function(){return a.getUrl()},codec:function(){var t=a.getCodec();return{id:t.getId(),name:t.getName(),rate:t.getRate()}},start:function(){a.start()},stop:function(){a.stop()},digit:function(t,e,i){a.digit(t,e,i)},gain:function(t){return 0===arguments.length?a.gain():void a.gain(t)},mute:function(t){return 0===arguments.length?a.mute():void a.mute(t)},suppress:function(t){return 0===arguments.length?a.doES():void a.doES(t)},energy:function(){var t=a.energy();return{mic:Math.floor(Math.max(Math.LOG2E*Math.log(t[0])-4,0)),spk:Math.floor(Math.max(Math.LOG2E*Math.log(t[1])-4,0))}},secure:function(){return c}}},JavaAudio.prototype.permission=function(){return!0},JavaAudio.prototype.transport=function(){var t=this.$applet[0],e=t.allocateEndpoint();return{name:"urn:xmpp:jingle:transports:raw-udp:1",description:"urn:xmpp:jingle:apps:rtp:1",supportsSRTP:!0,buildTransport:function(t,i,n){var s=Phono.util.parseUri(e);i.c("transport",{xmlns:"urn:xmpp:jingle:transports:raw-udp:1"}).c("candidate",{ip:s.domain,port:s.port,generation:"1"}),n()},processTransport:function(t){var i;return t.find("candidate").each(function(){i=e+":"+$(this).attr("ip")+":"+$(this).attr("port")}),{input:{uri:i},output:{uri:i}}}}},String.prototype.startsWith=function(t){return this.match("^"+t)==t},JavaAudio.prototype.codecs=function(){var t=new Array,e=this.$applet[0],i=e.codecs();for(l=0;l<i.length;l++){var n;n=i[l].name.startsWith("SPEEX")?"SPEEX":i[l].name,t.push({id:i[l].pt,name:n,rate:i[l].rate,p:i[l]})}return t},JavaAudio.prototype.audioIn=function(t){var e=this.$applet[0];e.setAudioIn(t)},JavaAudio.prototype.audioInDevices=function(){var result=new Array,devs=eval("("+this.audioDeviceList+")"),mixers=devs.mixers;for(result.push("Let my system choose"),l=0;l<mixers.length;l++)mixers[l].targets.length>0&&result.push(mixers[l].name);return result},_createContainer=function(){var t=$("<div>").attr("id","_phono-appletHolder"+JavaAudio.count++).addClass("phono_AppletHolder").appendTo("body");t.css({width:"1px",height:"1px",position:"absolute",top:"50%",left:"50%","margin-top":"-69px","margin-left":"-107px","z-index":"10001",visibility:"visible"});var e=$(t).attr("id");return e},_loadApplet=function(e,i,n,s){var o="_phonoAudio"+JavaAudio.count++,r=o+"Callback";window[r]=function(e){s.audioDeviceList=e,t=window.setTimeout(function(){n(s)},10)};var a=$("<applet>").attr("id",o).attr("name",o).attr("code","com.phono.applet.rtp.RTPApplet").attr("archive",i).attr("width","1px").attr("height","1px").attr("mayscript","true").append($("<param>").attr("name","doEC").attr("value","true")).append($("<param>").attr("name","callback").attr("value",r)).appendTo("#"+e);return a},PhonegapIOSAudio.exists=function(){return"undefined"!=typeof PhoneGap&&Phono.util.isIOS()},PhonegapIOSAudio.codecs=new Array,PhonegapIOSAudio.endpoint="rtp://0.0.0.0",PhonegapIOSAudio.prototype.allocateEndpoint=function(){PhonegapIOSAudio.endpoint="rtp://0.0.0.0",PhoneGap.exec(function(t){console.log("endpoint success: "+t),PhonegapIOSAudio.endpoint=t},function(t){console.log("endpoint fail:"+t)},"Phono","allocateEndpoint",[])},PhonegapIOSAudio.prototype.initState=function(t,e){this.allocateEndpoint(),PhoneGap.exec(function(i){console.log("codec success: "+i);var n=$.parseJSON(i);for(l=0;l<n.length;l++){var s;s=n[l].name.startsWith("SPEEX")?"SPEEX":n[l].name,PhonegapIOSAudio.codecs.push({id:n[l].ptype,name:s,rate:n[l].rate,p:n[l]})}t(e)},function(t){console.log("codec fail:"+t)},"Phono","codecs",[])},PhonegapIOSAudio.prototype.play=function(t,e){var i=t.uri,n=i,s=Phono.util.parseUri(i),o=Phono.util.parseUri(document.location);return"rtp"==s.protocol?null:(0==i.indexOf("//")?n=o.protocol+":"+i:s.protocol.length<2&&(n=o.protocol+"://"+o.directoryPath.substring(0,o.directoryPath.length)+i,n=encodeURI(n)),console.log("play("+n+","+e+")"),PhoneGap.exec(function(t){console.log("play success: "+t)},function(t){console.log("play fail:"+t)},"Phono","play",[{uri:n,autoplay:1==e?"YES":"NO"}]),{url:function(){return n},start:function(){console.log("play.start "+n),PhoneGap.exec(function(t){console.log("start success: "+t)},function(t){console.log("start fail:"+t)},"Phono","start",[{uri:n}])},stop:function(){PhoneGap.exec(function(t){console.log("stop success: "+t)},function(t){console.log("stop fail:"+t)},"Phono","stop",[{uri:n}])},volume:function(){0===arguments.length}})},PhonegapIOSAudio.prototype.share=function(t,e,i,n,s){var o,r=t.uri,a=""+i.name+":"+i.rate+":"+i.id,u=!1;void 0!=n&&void 0!=s?(o=[{uri:r,autoplay:1==e?"YES":"NO",codec:a,srtpPropsl:n,srtpPropsr:s}],u=!0):o=[{uri:r,autoplay:1==e?"YES":"NO",codec:a}],PhoneGap.exec(function(t){console.log("share success: "+t)},function(t){console.log("share fail:"+t)},"Phono","share",o);var c=Phono.util.localUri(r),h=!1,l=50,p=0,d=0;return{url:function(){return r},codec:function(){var t;return{id:t.getId(),name:t.getName(),rate:t.getRate()}},start:function(){console.log("share.start "+c),PhoneGap.exec(function(t){console.log("start success: "+t)},function(t){console.log("start fail:"+t)},"Phono","start",[{uri:c}])},stop:function(){PhoneGap.exec(function(t){console.log("stop success: "+t)},function(t){console.log("stop fail:"+t)},"Phono","stop",[{uri:c}])},digit:function(t,e,i){PhoneGap.exec(function(t){console.log("digit success: "+t)},function(t){console.log("digit fail:"+t)},"Phono","digit",[{uri:c,digit:t,duration:e,audible:1==i?"YES":"NO"}])},gain:function(t){return 0===arguments.length?l:void PhoneGap.exec(function(e){console.log("gain success: "+e+" "+t),l=t},function(t){console.log("gain fail:"+t)},"Phono","gain",[{uri:c,value:t}])},mute:function(t){return 0===arguments.length?h:void PhoneGap.exec(function(e){console.log("mute success: "+e+" "+t),h=t},function(t){console.log("mute fail:"+t)},"Phono","mute",[{uri:c,value:1==t?"YES":"NO"}])},suppress:function(){0===arguments.length},energy:function(){return PhoneGap.exec(function(t){console.log("energy success: "+t);var e=$.parseJSON(t);p=Math.floor(Math.max(Math.LOG2E*Math.log(e[0])-4,0)),d=Math.floor(Math.max(Math.LOG2E*Math.log(e[1])-4,0))},function(t){console.log("energy fail:"+t)},"Phono","energy",[{uri:c}]),{mic:p,spk:d}},secure:function(){return u}}},PhonegapIOSAudio.prototype.permission=function(){return!0},PhonegapIOSAudio.prototype.transport=function(){var t=PhonegapIOSAudio.endpoint;return this.allocateEndpoint(),{name:"urn:xmpp:jingle:transports:raw-udp:1",description:"urn:xmpp:jingle:apps:rtp:1",supportsSRTP:!0,buildTransport:function(e,i,n){console.log("buildTransport: "+t);var s=Phono.util.parseUri(t);i.c("transport",{xmlns:"urn:xmpp:jingle:transports:raw-udp:1"}).c("candidate",{ip:s.domain,port:s.port,generation:"1"}),n()},processTransport:function(e){var i;return e.find("candidate").each(function(){i=t+":"+$(this).attr("ip")+":"+$(this).attr("port")}),{input:{uri:i},output:{uri:i}}}}},String.prototype.startsWith=function(t){return this.match("^"+t)==t},PhonegapIOSAudio.prototype.codecs=function(){return PhonegapIOSAudio.codecs},PhonegapAndroidAudio.exists=function(){return"undefined"!=typeof PhoneGap&&Phono.util.isAndroid()},PhonegapAndroidAudio.codecs=new Array,PhonegapAndroidAudio.endpoint="rtp://0.0.0.0",PhonegapAndroidAudio.prototype.allocateEndpoint=function(){PhonegapAndroidAudio.endpoint="rtp://0.0.0.0",PhoneGap.exec(function(t){console.log("endpoint: success"),PhonegapAndroidAudio.endpoint=t.uri},function(){console.log("endpoint: fail")},"PhonogapAudio","allocateEndpoint",[{}])},PhonegapAndroidAudio.prototype.initState=function(t,e){this.allocateEndpoint();var i=function(i){console.log("codec: success");var n=i.codecs;for(l=0;l<n.length;l++){var s;s=n[l].name.startsWith("SPEEX")?"SPEEX":n[l].name,PhonegapAndroidAudio.codecs.push({id:n[l].ptype,name:s,rate:n[l].rate,p:n[l]})}t(e)},n=function(){console.log("codec:fail")};PhoneGap.exec(i,n,"PhonogapAudio","codecs",[{}])},PhonegapAndroidAudio.prototype.play=function(t,e){var i=t.uri,n=i,s=Phono.util.parseUri(i),o=Phono.util.parseUri(document.location);return"rtp"==s.protocol?null:(0==i.indexOf("//")?n=o.protocol+":"+i:s.protocol.length<2&&(n=o.protocol+"://"+o.directoryPath.substring(0,o.directoryPath.length)+i,n=encodeURI(n)),PhoneGap.exec(function(){console.log("play: success")},function(){console.log("play: fail")},"PhonogapAudio","play",[{uri:n,autoplay:1==e?"YES":"NO"}]),{url:function(){return n},start:function(){console.log("play.start "+n),PhoneGap.exec(function(){console.log("start: success")},function(){console.log("start: fail")},"PhonogapAudio","start",[{uri:n}])},stop:function(){console.log("play.stop "+n),PhoneGap.exec(function(){console.log("stop: success")},function(){console.log("stop: fail")},"PhonogapAudio","stop",[{uri:n}])},volume:function(){0===arguments.length}})},PhonegapAndroidAudio.prototype.share=function(t,e,i,n,s){var o,r=t.uri,a=""+i.name+":"+i.rate+":"+i.id,u=!1;void 0!=n&&void 0!=s?(o=[{uri:r,autoplay:1==e?"YES":"NO",codec:a,lsrtp:n,rsrtp:s}],u=!0):o=[{uri:r,autoplay:1==e?"YES":"NO",codec:a}],PhoneGap.exec(function(){console.log("share: success")},function(){console.log("share: fail")},"PhonogapAudio","share",o);var c=Phono.util.localUri(r),h=!1,l=50,p=0,d=0;return{url:function(){return r},codec:function(){var t;return{id:t.getId(),name:t.getName(),rate:t.getRate()}},start:function(){console.log("share.start "+c),PhoneGap.exec(function(){console.log("start: success")},function(){console.log("start: fail")},"PhonogapAudio","start",[{uri:c}])},stop:function(){console.log("share.stop "+c),PhoneGap.exec(function(){console.log("stop: success")},function(){console.log("stop: fail")},"PhonogapAudio","stop",[{uri:c}])},digit:function(t,e,i){console.log("share.digit "+c),PhoneGap.exec(function(){console.log("digit: success")},function(){console.log("digit: fail")},"PhonogapAudio","digit",[{uri:c,digit:t,duration:e,audible:1==i?"YES":"NO"}])},gain:function(t){return 0===arguments.length?l:(console.log("share.gain "+c),void PhoneGap.exec(function(){console.log("gain: success")},function(){console.log("gain: fail")},"PhonogapAudio","gain",[{uri:c,value:t}]))},mute:function(t){return 0===arguments.length?h:(console.log("share.mute "+c),void PhoneGap.exec(function(){console.log("mute: success")},function(){console.log("mute: fail")},"PhonogapAudio","mute",[{uri:c,value:1==t?"YES":"NO"}]))},suppress:function(){0===arguments.length},energy:function(){return PhoneGap.exec(function(t){console.log("energy success: "+t);var e=$.parseJSON(t);null!=e&&(p=Math.floor(Math.max(Math.LOG2E*Math.log(e.mic)-4,0)),d=Math.floor(Math.max(Math.LOG2E*Math.log(e.spk)-4,0)))},function(t){console.log("energy fail:"+t)},"PhonogapAudio","energy",[{uri:c}]),{mic:p,spk:d}},secure:function(){return u}}},PhonegapAndroidAudio.prototype.permission=function(){return!0},PhonegapAndroidAudio.prototype.transport=function(){var t=PhonegapAndroidAudio.endpoint;return this.allocateEndpoint(),{name:"urn:xmpp:jingle:transports:raw-udp:1",description:"urn:xmpp:jingle:apps:rtp:1",supportsSRTP:device.version.charAt(0)>="4",buildTransport:function(e,i,n){console.log("buildTransport: "+t);var s=Phono.util.parseUri(t);i.c("transport",{xmlns:"urn:xmpp:jingle:transports:raw-udp:1"}).c("candidate",{ip:s.domain,port:s.port,generation:"1"}),n()},processTransport:function(e){var i;return e.find("candidate").each(function(){i=t+":"+$(this).attr("ip")+":"+$(this).attr("port")}),{input:{uri:i},output:{uri:i}}}}},String.prototype.startsWith=function(t){return this.match("^"+t)==t},PhonegapAndroidAudio.prototype.codecs=function(){return PhonegapAndroidAudio.codecs},JSEPAudio.exists=function(){if("function"==typeof webkitRTCPeerConnection)return!0;if("function"==typeof mozRTCPeerConnection){try{mozRTCPeerConnection()}catch(t){return!1}return!0}},JSEPAudio.prototype.getCaps=function(t){return t.c(this.type).up()},JSEPAudio.count=0,JSEPAudio.toneMap={0:[1336,941],1:[1209,697],2:[1336,697],3:[1477,696],4:[1209,770],5:[1336,770],6:[1477,770],7:[1209,852],8:[1336,852],9:[1447,852],"*":[1209,941],"#":[1477,941]},JSEPAudio.prototype.play=function(t){var e=null,i=null;return t.uri&&(e=JSEPAudio.AudioUrl(t.uri)),{url:function(){return e},start:function(){if(e){i=new Audio(e);var t=function(){i=new Audio(e),i.play(),i.addEventListener("ended",t)};t()}},stop:function(){i&&i.pause(),i=null},volume:function(e){return 0===arguments.length?100*t.volume:void(t.volume=e/100)}}},JSEPAudio.prototype.share=function(t,e,i){return{url:function(){return null},codec:function(){return i},start:function(){return null},stop:function(){JSEPAudio.localStream&&JSEPAudio.localStream.stop()},gain:function(){return null},mute:function(t){var e=[];if(JSEPAudio.localStream.getAudioTracks&&(e=JSEPAudio.localStream.getAudioTracks()),0===arguments.length){var i=!0;return Phono.util.each(e,function(){1==this.enabled&&(i=!1)}),i}1==t?Phono.util.each(e,function(){this.enabled=!1}):Phono.util.each(e,function(){this.enabled=!0})},suppress:function(){return null},energy:function(){return JSEPAudio.pc&&JSEPAudio.pc.getStats&&JSEPAudio.pc.getStats(function(t){for(var e=t.result(),i=0;i<e.length;i++){var n=e[i].remote;if(n){var s=0,o=0;n.stat("audioInputLevel")&&(o=n.stat("audioInputLevel")),o>0&&(JSEPAudio.mic=Math.floor(Math.max(Math.LOG2E*Math.log(o)-4,0))),n.stat("audioOutputLevel")&&(s=n.stat("audioOutputLevel")),s>0&&(JSEPAudio.spk=Math.floor(Math.max(Math.LOG2E*Math.log(s)-4,0)))}}}),{mic:JSEPAudio.mic,spk:JSEPAudio.spk}},secure:function(){return!0},freep:function(t,e,i){if(i){var n=JSEPAudio.webAudioContext;if(n){var s,o;100>e&&(e=100),s=n.createOscillator(),o=n.createOscillator(),s.connect(n.destination),o.connect(n.destination);var r=JSEPAudio.toneMap[t];s.frequency.value=r[0],o.frequency.value=r[1],s.noteOn(0),o.noteOn(0),window.setTimeout(function(){s.noteOff(0),o.noteOff(0)},e)}}}}},JSEPAudio.prototype.showPermissionBox=function(t){Phono.log.info("Requesting access to local media"),JSEPAudio.GUM({audio:this.config.media.audio,video:this.config.media.video},function(e){JSEPAudio.localStream=e,JSEPAudio.localVideo.style.opacity=1,JSEPAudio.attachMediaStream(JSEPAudio.localVideo,e),JSEPAudio.localVideo.muted="muted","function"==typeof t&&t(!0)},function(e){Phono.log.info("Failed to get access to local media. Error code was "+e.code),alert("Failed to get access to local media. Error code was "+e.code+"."),"function"==typeof t&&t(!1)})},JSEPAudio.prototype.permission=function(){return void 0!=JSEPAudio.localStream},JSEPAudio.prototype.transport=function(t){var e,i,n,s,o,r={iceServers:[{url:JSEPAudio.stun}]},a=!1,u=this,c=0;n={mandatory:{OfferToReceiveAudio:this.config.media.audio,OfferToReceiveVideo:this.config.media.video}},n=JSEPAudio.addCreateConstraint(n),s={optional:[{DtlsSrtpKeyAgreement:"true"}]},o=t&&t.remoteContainerId?t.remoteContainerId:this.config.remoteContainerId?this.config.remoteContainerId:this.createContainer();var h=document.getElementById(o);return{name:"urn:xmpp:jingle:transports:ice-udp:1",buildTransport:function(t,o,l){e=JSEPAudio.mkPeerConnection(r,s),JSEPAudio.pc=e;var p=function(i){if(!a)if(null==i.candidate||c>=1&&!u.config.media.video&&"answer"==t){Phono.log.info("All Ice candidates in "),a=!0;var n=e.localDescription.sdp;Phono.log.info("SDP "+JSON.stringify(n));var s=Phono.sdp.parseSDP(n);Phono.log.info("SdpObj "+JSON.stringify(s)),Phono.sdp.buildJingle(o,s);var r=0;"telephone-event"==s.contents[0].codecs[0].name&&(r=1);var h={id:s.contents[0].codecs[r].id,name:s.contents[0].codecs[r].name,rate:s.contents[0].codecs[r].clockrate};l(h)}else Phono.log.info("An Ice candidate "),c+=1};e.onicecandidate=p,e.onaddstream=function(t){Phono.log.info("onAddStream. Attaching"),JSEPAudio.attachMediaStream(h,t.stream),h.style.opacity=1},Phono.log.debug("Adding localStream");var d=function(){e.addStream(JSEPAudio.localStream);var s=function(t){Phono.log.error("failed to setlocal "+t)},o=function(){Phono.log.info("setlocal ok")},r=function(t){var i=JSEPAudio.mkSessionDescription(t);e.setLocalDescription(i,o,s),window.setTimeout(function(){p({})},1e3),Phono.log.info("Set local description "+JSON.stringify(t))},a=function(){Phono.log.error("failed to create offer")},u=function(){Phono.log.error("failed to create answer")};"answer"==t?(Phono.log.info("Set remote description "+JSON.stringify(i)),e.setRemoteDescription(i,function(){Phono.log.debug("remoteDescription happy"),e.createAnswer(r,u)},function(){Phono.log.error("remoteDescription error")})):(Phono.log.info("create offer with  "+JSON.stringify(n)),e.createOffer(r,a,n))};u.permission()?d():u.showPermissionBox(d)},processTransport:function(t,n,s){var o=Phono.sdp.parseJingle(s);Phono.log.info("Made remote sdp Obj"+JSON.stringify(o)),o=JSEPAudio.stripCrypto(o);var r=Phono.sdp.buildSDP(o);Phono.log.info("constructed remote sdp "+JSON.stringify(r));var a=0;"telephone-event"==o.contents[0].codecs[0].name&&(a=1);var u={id:o.contents[0].codecs[a].id,name:o.contents[0].codecs[a].name,rate:o.contents[0].codecs[a].clockrate};if(e){Phono.log.info("Got remote sdp "+JSON.stringify(r));var c=JSEPAudio.mkSessionDescription({sdp:r,type:"answer"});Phono.log.info("Set remote description "+JSON.stringify(c)),e.setRemoteDescription(c,function(){Phono.log.debug("remoteDescription happy")},function(){Phono.log.error("remoteDescription sad")})}else{Phono.log.info("Got remote description "+JSON.stringify(r));var c=JSEPAudio.mkSessionDescription({sdp:r,type:"offer"});i=c}return{codec:u,input:h}},destroyTransport:function(){e&&(e.close(),0==$(h).attr("id").indexOf("_phono-audio-webrtc")&&h.parentNode.removeChild(h)),JSEPAudio.localStream&&(JSEPAudio.localStream.stop(),JSEPAudio.localStream=null)}}},JSEPAudio.prototype.codecs=function(){return{}},JSEPAudio.prototype.audioInDevices=function(){var t=new Array;return t},JSEPAudio.prototype.createContainer=function(){var t=$("<video>").attr("id","_phono-audio-webrtc"+JSEPAudio.count++).attr("autoplay","autoplay").appendTo("body"),e=$(t).attr("id");return e},Phono.registerPlugin("audio",{create:function(t,e,i){return e=Phono.util.extend({type:"auto"},e),"java"===e.type?Phono.util.loggify("JavaAudio",new JavaAudio(t,e,i)):"phonegap-ios"===e.type?Phono.util.loggify("PhonegapIOSAudio",new PhonegapIOSAudio(t,e,i)):"phonegap-android"===e.type?Phono.util.loggify("PhonegapAndroidAudio",new PhonegapAndroidAudio(t,e,i)):"flash"===e.type?Phono.util.loggify("FlashAudio",new FlashAudio(t,e,i)):"jsep"===e.type?Phono.util.loggify("JSEPAudio",new JSEPAudio(t,e,i)):"none"===e.type?(window.setTimeout(i,10),null):"auto"===e.type?(Phono.log.info("Detecting Audio Plugin"),JSEPAudio.exists()?(Phono.log.info("Detected JSEP browser"),Phono.util.loggify("JSEPAudio",new JSEPAudio(t,e,i))):PhonegapIOSAudio.exists()?(Phono.log.info("Detected iOS"),Phono.util.loggify("PhonegapIOSAudio",new PhonegapIOSAudio(t,e,i))):PhonegapAndroidAudio.exists()?(Phono.log.info("Detected Android"),Phono.util.loggify("PhonegapAndroidAudio",new PhonegapAndroidAudio(t,e,i))):(Phono.log.info("Using Flash default"),Phono.util.loggify("FlashAudio",new FlashAudio(t,e,i)))):void 0}})}(),function(){function t(t){this.from=null,this.body=null,this.connection=t}function e(t,e,i){this.connection=t.connection,this.connection.addHandler(this.handleMessage.bind(this),null,"message","chat"),Phono.events.bind(this,e),i(this)}t.prototype.reply=function(t){this.connection.send(Strophe.msg({to:this.from,type:"chat"}).c("body").t(t))},e.prototype.send=function(t,e){this.connection.send(Strophe.msg({to:t,type:"chat"}).c("body").t(e))},e.prototype.handleMessage=function(e){var i=new t(this.connection);return i.from=Strophe.getBareJidFromJid($(e).attr("from")),i.body=$(e).find("body").text(),Phono.events.trigger(this,"message",{message:i},[i]),!0},Phono.registerPlugin("messaging",{create:function(t,i,n){return new e(t,i,n)}})}(),function(){if(_parseLine=function(t){var e=t.split("=");return{type:e[0],contents:e[1]}},_parseA=function(t){var e=t.split(":");return{key:e[0],params:t.substring(t.indexOf(":")+1).split(" ")}},_parseM=function(t){var e=t.split(" ");
return{type:e[0],port:e[1],proto:e[2],pts:t.substring((e[0]+e[1]+e[2]).length+3).split(" ")}},_parseO=function(t){var e=t.split(" ");return{username:e[0],id:e[1],ver:e[2],nettype:e[3],addrtype:e[4],address:e[5]}},_parseC=function(t){var e=t.split(" ");return{nettype:e[0],addrtype:e[1],address:e[2]}},_parseCandidate=function(t){for(var e={foundation:t[0],component:t[1],protocol:t[2],priority:t[3],ip:t[4],port:t[5]},i=6;i+1<=t.length;)"typ"==t[i]&&(e.type=t[i+1]),"generation"==t[i]&&(e.generation=t[i+1]),"username"==t[i]&&(e.username=t[i+1]),"password"==t[i]&&(e.password=t[i+1]),i+=2;return e},_parseRtcp=function(t){var e={port:t[0]};return t.length>1&&(e.nettype=t[1],e.addrtype=t[2],e.address=t[3]),e},_parseCrypto=function(t){var e={tag:t[0],"crypto-suite":t[1],"key-params":t[2]};return e},_parseFingerprint=function(t){var e={hash:t[0],print:t[1],required:"1"};return e},_parseRtpmap=function(t){var e=t[1].split("/"),i={id:t[0],name:e[0],clockrate:e[1]};return e.length>2&&(i.channels=e[2]),i},_parseSsrc=function(t,e){var i={};void 0!=e&&(i=e),i.ssrc=t[0];var n=t[1];return i[n.split(":")[0]]=n.split(":")[1],i},_parseGroup=function(t){var e={type:t[0]};e.contents=[];for(var i=1;i+1<=t.length;)e.contents.push(t[i]),i+=1;return e},_parseMid=function(t){var e=t[0];return e},_buildCandidate=function(t,e){var i=t,n="a=candidate:"+i.foundation+" "+i.component+" "+i.protocol.toUpperCase()+" "+i.priority+" "+i.ip+" "+i.port;return i.type&&(n+=" typ host"),1==i.component&&(n+=" name rtp"),2==i.component&&(n+=" name rtcp"),n+=" network_name en0",i.username&&i.password?(n=n+" username "+i.username,n=n+" password "+i.password,e.ufrag||(e.ufrag=i.username),e.pwd||(e.pwd=i.username)):e?(e.ufrag&&(n=n+" username "+e.ufrag),e.pwd&&(n=n+" password "+e.pwd)):n+=" username root password mysecret",i.generation&&(n=n+" generation "+i.generation),n+="\r\n"},_buildCodec=function(t){var e="a=rtpmap:"+t.id+" "+t.name+"/"+t.clockrate;return t.channels&&(e+="/"+t.channels),e+="\r\n",t.ptime?(e+="a=ptime:"+t.ptime,e+="\r\n"):0==t.name.toLowerCase().indexOf("opus")&&(e+="a=ptime:20\r\n"),0==t.name.toLowerCase().indexOf("telephone-event")&&(e+="a=fmtp:"+t.id+" 0-15\r\n"),e},_buildCrypto=function(t){var e="a=crypto:"+t.tag+" "+t["crypto-suite"]+" "+t["key-params"]+"\r\n";return e},_buildFingerprint=function(t){var e="a=fingerprint:"+t.hash+" "+t.print+"\r\n";return e},_buildIce=function(t){var e="";return t.ufrag&&(t.filterLines||(e=e+"a=ice-ufrag:"+t.ufrag+"\r\n",e=e+"a=ice-pwd:"+t.pwd+"\r\n"),t.options&&(e=e+"a=ice-options:"+t.options+"\r\n")),e},_buildSessProps=function(t){var e="";return t.fingerprint&&(e+=_buildFingerprint(t.fingerprint)),t.ice&&(e+=_buildIce(t.ice)),e},_buildMedia=function(t){var e="";e+="m="+t.media.type+" "+t.media.port+" "+t.media.proto;for(var i=0;i+1<=t.media.pts.length;)e=e+" "+t.media.pts[i],i+=1;e+="\r\n",t.connection&&(e=e+"c="+t.connection.nettype+" "+t.connection.addrtype+" "+t.connection.address+"\r\n"),t.mid&&(e=e+"a=mid:"+t.mid+"\r\n"),t.rtcp&&(e=e+"a=rtcp:"+t.rtcp.port+" "+t.rtcp.nettype+" "+t.rtcp.addrtype+" "+t.rtcp.address+"\r\n"),t.ice&&(e+=_buildIce(t.ice));for(var n=0;n+1<=t.candidates.length;)e+=_buildCandidate(t.candidates[n],t.ice),n+=1;t.direction?"recvonly"==t.direction?e+="a=recvonly\r\n":"sendonly"==t.direction?e+="a=sendonly\r\n":"none"==t.direction?e=e:e+="a=sendrecv\r\n":e+="a=sendrecv\r\n",t["rtcp-mux"]&&(e+="a=rtcp-mux\r\n"),t.crypto&&(e+=_buildCrypto(t.crypto)),t.fingerprint&&(e+=_buildFingerprint(t.fingerprint));for(var s=0;s+1<=t.codecs.length;)e+=_buildCodec(t.codecs[s]),s+=1;if(t.ssrc){var o=t.ssrc;o.cname&&(e=e+"a=ssrc:"+o.ssrc+" cname:"+o.cname+"\r\n"),o.mslabel&&(e=e+"a=ssrc:"+o.ssrc+" mslabel:"+o.mslabel+"\r\n"),o.label&&(e=e+"a=ssrc:"+o.ssrc+" label:"+o.label+"\r\n")}return e},"undefined"==typeof Phono&&(Phono={log:{debug:function(t){print(t)}}},load("phono.util.js")),Phono.sdp={buildJingle:function(t,e){var i="urn:xmpp:jingle:apps:rtp:1",n=t;if(e.group){n.c("group",{type:e.group.type,contents:e.group.contents.join(",")}).up()}return Phono.util.each(e.contents,function(){var t=this,s={xmlns:i,media:t.media.type};t.ssrc&&(s.ssrc=t.ssrc.ssrc,s.cname=t.ssrc.cname,s.mslabel=t.ssrc.mslabel,s.label=t.ssrc.label),t.mid&&(s.mid=t.mid),t["rtcp-mux"]&&(s["rtcp-mux"]=t["rtcp-mux"]),n=n.c("content",{creator:"initiator"}).c("description",s),Phono.util.each(t.codecs,function(){n=n.c("payload-type",this).up()}),t.crypto&&(n=n.c("encryption",{required:"1"}).c("crypto",t.crypto).up(),n=n.up()),n=n.up().c("transport",{xmlns:"urn:xmpp:jingle:transports:raw-udp:1"}),n=n.c("candidate",{component:"1",ip:t.connection.address,port:t.media.port}).up(),t.rtcp&&(n=n.c("candidate",{component:"2",ip:t.rtcp.address,port:t.rtcp.port}).up()),n=n.up();var o={};t.candidates[0].username?o={ufrag:t.candidates[0].username,pwd:t.candidates[0].password}:t.ice&&t.ice.ufrag?o=t.ice:e.session.ice&&e.session.ice.ufrag&&(o=e.session.ice);var r={xmlns:"urn:xmpp:jingle:transports:ice-udp:1",pwd:o.pwd,ufrag:o.ufrag};o.options&&(r.options=o.options),n=n.c("transport",r),Phono.util.each(t.candidates,function(){n=n.c("candidate",this).up()});var a=null;t.fingerprint?a=t.fingerprint:e.session.fingerprint&&(a=e.session.fingerprint),a&&(n=n.c("fingerprint",{xmlns:"urn:xmpp:tmp:jingle:apps:dtls:0",hash:a.hash,required:a.required}),n.t(a.print),n.up()),n=n.up().up()}),n},parseJingle:function(t){var e={};return t.find("group").each(function(){e.group={},e.group.type=$(this).attr("type"),e.group.contents=$(this).attr("contents").split(",")}),e.contents=[],t.find("content").each(function(){var t={},i={};i.pts=[],e.contents.push(t),t.candidates=[],t.codecs=[],$(this).find("description").each(function(){if("urn:xmpp:jingle:apps:rtp:1"==$(this).attr("xmlns")){var e=$(this).attr("media");i.type=e,i.proto="RTP/SAVPF",i.port=1e3;var n={};$(this).attr("ssrc")&&(n.ssrc=$(this).attr("ssrc"),$(this).attr("cname")&&(n.cname=$(this).attr("cname")),$(this).attr("mslabel")&&(n.mslabel=$(this).attr("mslabel")),$(this).attr("label")&&(n.label=$(this).attr("label")),t.ssrc=n),$(this).attr("rtcp-mux")&&(t["rtcp-mux"]=$(this).attr("rtcp-mux")),$(this).attr("mid")&&(t.mid=$(this).attr("mid")),t.media=i,$(this).find("payload-type").each(function(){var e=Phono.util.getAttributes(this);Phono.log.debug("codec: "+JSON.stringify(e,null," ")),t.codecs.push(e),i.pts.push(e.id)})}else Phono.log.debug("skip description with wrong xmlns: "+$(this).attr("xmlns"))}),$(this).find("crypto").each(function(){var e=Phono.util.getAttributes(this);t.crypto=e}),$(this).find("fingerprint").each(function(){var e=Phono.util.getAttributes(this);e.print=Strophe.getText(this),Phono.log.debug("fingerprint: "+JSON.stringify(e,null," ")),t.fingerprint=e}),t.ice={},$(this).find("transport").each(function(){"urn:xmpp:jingle:transports:raw-udp:1"==$(this).attr("xmlns")&&$(this).find("candidate").each(function(){var e=Phono.util.getAttributes(this);"1"==e.component&&(t.media.port=e.port,t.connection={},t.connection.address=e.ip,t.connection.addrtype="IP4",t.connection.nettype="IN"),"2"==e.component&&(t.rtcp={},t.rtcp.port=e.port,t.rtcp.address=e.ip,t.rtcp.addrtype="IP4",t.rtcp.nettype="IN")}),"urn:xmpp:jingle:transports:ice-udp:1"==$(this).attr("xmlns")&&(t.ice.pwd=$(this).attr("pwd"),t.ice.ufrag=$(this).attr("ufrag"),$(this).attr("options")&&(t.ice.options=$(this).attr("options")),$(this).find("candidate").each(function(){var e=Phono.util.getAttributes(this);t.candidates.push(e)}))})}),e},dumpSDP:function(t){var e=t.split("\r\n");for(var i in e);},parseSDP:function(t){var e={};e.contents=[];var i=null,n=t.split("\r\n");for(var s in n){Phono.log.debug(n[s]);var o=_parseLine(n[s]);if("o"==o.type&&(e.session=_parseO(o.contents),e.session.ice={},i=e.session),"m"==o.type){var r=_parseM(o.contents);i={},i.candidates=[],i.codecs=[],i.ice={},null!=e.session.fingerprint&&(i.fingerprint=e.session.fingerprint),i.media=r,e.contents.push(i)}if("c"==o.type&&(null!=i?i.connection=_parseC(o.contents):e.connection=_parseC(o.contents)),"a"==o.type){var a=_parseA(o.contents);switch(a.key){case"candidate":var u=_parseCandidate(a.params);i.candidates.push(u);break;case"group":var c=_parseGroup(a.params);e.group=c;break;case"mid":var h=_parseMid(a.params);i.mid=h;break;case"rtcp":var l=_parseRtcp(a.params);i.rtcp=l;break;case"rtcp-mux":i["rtcp-mux"]=!0;break;case"rtpmap":var p=_parseRtpmap(a.params);p&&i.codecs.push(p);break;case"sendrecv":i.direction="sendrecv";break;case"sendonly":i.direction="sendonly";break;case"recvonly":i.recvonly="recvonly";break;case"ssrc":i.ssrc=_parseSsrc(a.params,i.ssrc);break;case"fingerprint":var d=_parseFingerprint(a.params);i.fingerprint=d;break;case"crypto":var f=_parseCrypto(a.params);i.crypto=f;break;case"ice-ufrag":i.ice.ufrag=a.params[0];break;case"ice-pwd":i.ice.pwd=a.params[0];break;case"ice-options":i.ice.options=a.params[0]}}}return e},buildSDP:function(t){var e=t.session,i="v=0\r\n";if(t.session){var e=t.session;i=i+"o="+e.username+" "+e.id+" "+e.ver+" "+e.nettype+" "+e.addrtype+" "+e.address+"\r\n"}else{var n=(new Date).getTime(),s=2;i=i+"o=- 3"+n+" "+s+" IN IP4 192.67.4.14\r\n"}if(i+="s=-\r\nt=0 0\r\n",t.connection){var o=t.connection;i=i+"c="+o.nettype+" "+o.addrtype+" "+o.address+"\r\n"}if(t.group){var r=t.group;i=i+"a=group:"+r.type;for(var a=0;a+1<=r.contents.length;)i=i+" "+r.contents[a],a+=1;i+="\r\n"}t.session&&(i+=_buildSessProps(t.session));for(var u=t.contents,c=0;c+1<=u.length;){var h=u[c];i+=_buildMedia(h),c+=1}return i},parseCandidate:function(t){var e=_parseLine(t);return _parseCandidate(e.contents)},buildCandidate:function(t){return _buildCandidate(t)}},"undefined"==typeof window){var t={chromeVideo:"v=0\r\no=- 466604799 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\na=msid-semantic: WMS 0c2n3jRwGhjfwzKzLxMER8lpRIHMQaZiIw7k\r\nm=audio 51233 RTP/SAVPF 109 0 8 101\r\nc=IN IP4 192.67.4.10\r\na=rtcp:62387 IN IP4 192.67.4.10\r\na=candidate:2812693356 1 udp 2113937151 192.67.4.10 51233 typ host generation 0\r\na=candidate:2812693356 2 udp 2113937150 192.67.4.10 62387 typ host generation 0\r\na=ice-ufrag:A7xRf5m5sDv8Qnda\r\na=ice-pwd:sIxXUQ1R5euE6QY/ntMS9xpu\r\na=fingerprint:sha-256 A4:06:4B:AC:92:8B:FA:A0:CE:56:78:A4:B9:A4:2A:41:16:DD:D7:6C:E9:D2:71:81:20:99:F1:3A:4E:C7:71:8D\r\na=sendrecv\r\na=mid:audio\r\na=rtpmap:109 opus/48000/2\r\na=fmtp:109 minptime=10\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=rtpmap:101 telephone-event/8000\r\na=maxptime:60\r\na=ssrc:3307173785 cname:3iNNp5tCCbH8QdE8\r\na=ssrc:3307173785 msid:0c2n3jRwGhjfwzKzLxMER8lpRIHMQaZiIw7k 0c2n3jRwGhjfwzKzLxMER8lpRIHMQaZiIw7ka0\r\na=ssrc:3307173785 mslabel:0c2n3jRwGhjfwzKzLxMER8lpRIHMQaZiIw7k\r\na=ssrc:3307173785 label:0c2n3jRwGhjfwzKzLxMER8lpRIHMQaZiIw7ka0\r\nm=video 51841 RTP/SAVPF 120\r\nc=IN IP4 192.67.4.10\r\na=rtcp:58612 IN IP4 192.67.4.10\r\na=candidate:2812693356 1 udp 2113937151 192.67.4.10 51841 typ host generation 0\r\na=candidate:2812693356 2 udp 2113937150 192.67.4.10 58612 typ host generation 0\r\na=ice-ufrag:vYDcPP0KgdP9VHjY\r\na=ice-pwd:JEkYOiuKuiny1sJNZlBHZyZ5\r\na=fingerprint:sha-256 A4:06:4B:AC:92:8B:FA:A0:CE:56:78:A4:B9:A4:2A:41:16:DD:D7:6C:E9:D2:71:81:20:99:F1:3A:4E:C7:71:8D\r\na=sendrecv\r\na=mid:video\r\na=rtpmap:120 VP8/90000\r\na=ssrc:1230164494 cname:3iNNp5tCCbH8QdE8\r\na=ssrc:1230164494 msid:0c2n3jRwGhjfwzKzLxMER8lpRIHMQaZiIw7k 0c2n3jRwGhjfwzKzLxMER8lpRIHMQaZiIw7kv0\r\na=ssrc:1230164494 mslabel:0c2n3jRwGhjfwzKzLxMER8lpRIHMQaZiIw7k\r\na=ssrc:1230164494 label:0c2n3jRwGhjfwzKzLxMER8lpRIHMQaZiIw7kv0\r\n",chromeAudio:"v=0\r\no=- 2751679977 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\na=group:BUNDLE audio\r\na=msid-semantic: WMS YyMaveYaWtkfdWeZtSHs3AHFuH4TEYh4MZDh\r\nm=audio 63231 RTP/SAVPF 111 103 104 0 8 107 106 105 13 126\r\nc=IN IP4 192.67.4.11\r\na=rtcp:63231 IN IP4 192.67.4.11\r\na=candidate:521808905 1 udp 2113937151 192.67.4.11 63231 typ host generation 0\r\na=candidate:521808905 2 udp 2113937151 192.67.4.11 63231 typ host generation 0\r\na=ice-ufrag:1VZUXywcfSTmvPBK\r\na=ice-pwd:NHrjWPuvIlyBQD7UVw4zi/4F\r\na=ice-options:google-ice\r\na=fingerprint:sha-256 49:1E:A3:EB:78:C2:89:55:5D:0D:6E:F2:B7:41:50:DB:10:C4:B2:54:8F:D8:24:A5:E8:56:0A:56:F4:BA:3A:ED\r\na=extmap:1 urn:ietf:params:rtp-hdrext:ssrc-audio-level\r\na=sendrecv\r\na=mid:audio\r\na=rtcp-mux\r\na=crypto:0 AES_CM_128_HMAC_SHA1_32 inline:MpqMpDpEDjNDfpquFL8jIkO9oLp2Dp4NOYiSmrea\r\na=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:/yAvMdC0p1e/4c/Jc6ljepmHpIuHV9jO3FyrrTX4\r\na=rtpmap:111 opus/48000/2\r\na=fmtp:111 minptime=10\r\na=rtpmap:103 ISAC/16000\r\na=rtpmap:104 ISAC/32000\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=rtpmap:107 CN/48000\r\na=rtpmap:106 CN/32000\r\na=rtpmap:105 CN/16000\r\na=rtpmap:13 CN/8000\r\na=rtpmap:126 telephone-event/8000\r\na=maxptime:60\r\na=ssrc:3334051080 cname:ECpt57S24HzaX1WY\r\na=ssrc:3334051080 msid:YyMaveYaWtkfdWeZtSHs3AHFuH4TEYh4MZDh YyMaveYaWtkfdWeZtSHs3AHFuH4TEYh4MZDha0\r\na=ssrc:3334051080 mslabel:YyMaveYaWtkfdWeZtSHs3AHFuH4TEYh4MZDh\r\na=ssrc:3334051080 label:YyMaveYaWtkfdWeZtSHs3AHFuH4TEYh4MZDha0\r\n",firefoxVideo:"v=0\r\no=Mozilla-SIPUA-24.0a1 12643 0 IN IP4 0.0.0.0\r\ns=SIP Call\r\nt=0 0\r\na=ice-ufrag:1a870bf3\r\na=ice-pwd:948d30c7fe15b95a7bd63743ae84ac2e\r\na=fingerprint:sha-256 1C:D2:EC:A0:51:89:35:BE:84:4B:BC:11:F3:D4:D6:C7:F7:39:52:C5:2D:55:88:1D:61:24:7A:54:20:8A:AE:C2\r\nm=audio 50859 RTP/SAVPF 109 0 8 101\r\nc=IN IP4 192.67.4.11\r\na=rtpmap:109 opus/48000/2\r\na=ptime:20\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=rtpmap:101 telephone-event/8000\r\na=fmtp:101 0-15\r\na=sendrecv\r\na=candidate:0 1 UDP 2113601791 192.67.4.11 50859 typ host\r\na=candidate:0 2 UDP 2113601790 192.67.4.11 53847 typ host\r\nm=video 62311 RTP/SAVPF 120\r\nc=IN IP4 192.67.4.11\r\na=rtpmap:120 VP8/90000\r\na=sendrecv\r\na=candidate:0 1 UDP 2113601791 192.67.4.11 62311 typ host\r\na=candidate:0 2 UDP 2113601790 192.67.4.11 54437 typ host\r\n",firefoxAudio:"v=0\r\no=Mozilla-SIPUA-24.0a1 20557 0 IN IP4 0.0.0.0\r\ns=SIP Call\r\nt=0 0\r\na=ice-ufrag:66600851\r\na=ice-pwd:aab7c3c8d881f6406eff1f1ff2e3bc5e\r\na=fingerprint:sha-256 C3:C4:98:95:D0:58:B1:D2:F9:72:A0:44:EB:C7:C4:49:95:8F:EE:00:05:10:82:A8:6E:F6:4A:DF:43:A3:2A:16\r\nm=audio 56026 RTP/SAVPF 109 0 8 101\r\nc=IN IP4 192.67.4.11\r\na=rtpmap:109 opus/48000/2\r\na=ptime:20\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=rtpmap:101 telephone-event/8000\r\na=fmtp:101 0-15\r\na=sendrecv\r\na=candidate:0 1 UDP 2113601791 192.67.4.11 56026 typ host\r\na=candidate:0 2 UDP 2113601790 192.67.4.11 56833 typ host\r\n"};for(s in t){var e=t[s];Phono.log.debug("testing "+s);var i=Phono.sdp.parseSDP(e);Phono.log.debug(JSON.stringify(i,null," "));var n=Phono.sdp.buildSDP(i);Phono.log.debug(s+" Resulting SDP:"),Phono.log.debug(n)}}}(),function(){function t(t,e,i,s){var o=this;this.phone=t,this.phono=t.phono,this.audioLayer=this.phono.audio,this.transport=this.audioLayer.transport(s),this.connection=this.phono.connection,this.config=Phono.util.extend({pushToTalk:!1,mute:!1,talking:!1,hold:!1,volume:50,gain:50,tones:!1,codecs:t.config.codecs,security:t._security},s),Phono.util.each(this.config,function(t,e){"function"==typeof o[t]&&o[t](e)}),this.id=e,this.direction=i,this.state=n.INITIAL,this.remoteJid=null,this.initiator=null,this.codec=null,this.srtpPropsr=void 0,this.srtpPropsl=void 0,"disabled"!=this._security&&1==this.transport.supportsSRTP&&(this.tag="1",this.crypto="AES_CM_128_HMAC_SHA1_80",this.keyparams="inline:"+Phono.util.genKey(30),this.srtpPropsl=Phono.util.srtpProps(this.tag,this.crypto,this.keyparams)),this.headers=[],this.config.headers&&(this.headers=this.config.headers),Phono.events.bind(this,s),this.ringer=this.audioLayer.play({uri:t.ringTone()}),this.ringback=this.audioLayer.play({uri:t.ringbackTone()}),this.audioLayer.audioIn&&this.audioLayer.audioIn(t.audioInput())}function e(t,e,n){var s=this;this.phono=t,this.connection=t.connection,this.calls={},this._wideband=!0,this.config=Phono.util.extend({audioInput:"System Default",ringTone:"//s.phono.com/ringtones/Diggztone_Marimba.mp3",ringbackTone:"//s.phono.com/ringtones/ringback-us.mp3",wideband:!0,headset:!1,codecs:function(t){return t},security:"disabled"},e),Phono.util.each(this.config,function(t,e){"function"==typeof s[t]&&s[t](e)}),Phono.events.bind(this,e),this.connection.addHandler(this.doJingle.bind(this),i.JINGLE,"iq","set"),n(this)}var i={};i.JINGLE="urn:xmpp:jingle:1",i.JINGLE_SESSION_INFO="urn:xmpp:jingle:apps:rtp:1:info",i.JINGLE_DTMF="urn:xmpp:jingle:dtmf:0";var n={CONNECTED:0,RINGING:1,DISCONNECTED:2,PROGRESS:3,INITIAL:4},s={OUTBOUND:0,INBOUND:1};t.prototype.bind=function(t){Phono.events.bind(this,t)},t.prototype.startAudio=function(){this.input&&this.input.start(),this.output&&this.output.start()},t.prototype.stopAudio=function(){this.input&&this.input.stop(),this.output&&this.output.stop()},t.prototype.start=function(){var t=this;if(t.state==n.INITIAL){var e=Strophe.iq({type:"set",to:t.remoteJid}),s=e.c("jingle",{xmlns:i.JINGLE,action:"session-initiate",initiator:t.initiator,sid:t.id});$(t.headers).each(function(){s.c("custom-header",{name:this.name,data:this.value}).up()});var o=Strophe.iq({type:"set",to:t.remoteJid}),r=o.c("jingle",{xmlns:i.JINGLE,action:"transport-accept",initiator:t.initiator,sid:t.id}),a=r.c("content",{creator:"initiator"}).c("description",{xmlns:this.transport.description});if(t.transport.description){s=s.c("content",{creator:"initiator"}).c("description",{xmlns:t.transport.description}),Phono.util.each(t.config.codecs(Phono.util.filterWideband(t.audioLayer.codecs(),t.phone.wideband())),function(){s=s.c("payload-type",{id:this.id,name:this.name,clockrate:this.rate}).up()});var u="0";"mandatory"==t._security&&(u="1"),"disabled"!=t._security&&1==t.transport.supportsSRTP&&(s=s.c("encryption",{required:u}).c("crypto",{tag:t.tag,"crypto-suite":t.crypto,"key-params":t.keyparams}).up()),s=s.up()}this.transport.buildTransport("offer",s,function(){t.state!=n.DISCONNECTED&&t.connection.sendIQ(e,function(){t.state=n.PROGRESS})},a.up(),function(){t.state!=n.DISCONNECTED&&t.connection.sendIQ(o,function(){})})}},t.prototype.accept=function(){var t=this;if(t.state==n.PROGRESS){var e=Strophe.iq({type:"set",to:t.remoteJid}).c("jingle",{xmlns:i.JINGLE,action:"session-info",initiator:t.initiator,sid:t.id}).c("ringing",{xmlns:i.JINGLE_SESSION_INFO});this.connection.sendIQ(e,function(){t.state=n.RINGING,Phono.events.trigger(t,"ring")})}},t.prototype.answer=function(){var t=this;if(t.state==n.RINGING||t.state==n.PROGRESS){var e=Strophe.iq({type:"set",to:t.remoteJid}),s=e.c("jingle",{xmlns:i.JINGLE,action:"session-accept",initiator:t.initiator,sid:t.id}),o=Strophe.iq({type:"set",to:t.remoteJid}),r=o.c("jingle",{xmlns:i.JINGLE,action:"transport-replace",initiator:t.initiator,sid:t.id}),a=r.c("content",{creator:"initiator"}).c("description",{xmlns:this.transport.description});if(t.transport.description){var s=s.c("content",{creator:"initiator"}).c("description",{xmlns:t.transport.description});s=s.c("payload-type",{id:t.codec.id,name:t.codec.name,clockrate:t.codec.rate}).up(),$.each(t.audioLayer.codecs(),function(){"telephone-event"==this.name&&(s=s.c("payload-type",{id:this.id,name:this.name,clockrate:this.rate}).up())}),void 0!=t.srtpPropsl&&void 0!=t.srtpPropsr&&(s=s.c("encryption").c("crypto",{tag:t.tag,"crypto-suite":t.crypto,"key-params":t.keyparams}).up()),s=s.up()}this.transport.buildTransport("answer",s,function(i){i&&(t.codec=i),t.connection.sendIQ(e,function(){t.state=n.CONNECTED,null!=t.ringer&&t.ringer.stop(),t.setupBinding(),"mandatory"==t._security&&0==t.output.secure()?(Phono.log.error("Security error, call not secure when mandatory specified"),t.hangup()):(Phono.events.trigger(t,"answer"),t.startAudio())})},a.up(),function(){t.connection.sendIQ(o,function(){})})}},t.prototype.bindAudio=function(t){this.input=t.input,this.output=t.output,this.volume(this.volume()),this.gain(this.gain()),this.mute(this.mute()),this.hold(this.hold()),this.headset(this.headset()),this.pushToTalkStateChanged(),Phono.events.bind(this.output,{onMediaReady:function(){Phono.events.trigger(call,"mediaReady")}})},t.prototype.hangup=function(){var t=this;if(t.state==n.INITIAL)return void(t.state=n.DISCONNECTED);if(t.state==n.CONNECTED||t.state==n.RINGING||t.state==n.PROGRESS){var e=Strophe.iq({type:"set",to:t.remoteJid}).c("jingle",{xmlns:i.JINGLE,action:"session-terminate",initiator:t.initiator,sid:t.id});t.stopAudio(),t.transport.destroyTransport&&t.transport.destroyTransport(),this.connection.sendIQ(e,function(){t.state=n.DISCONNECTED,Phono.events.trigger(t,"hangup"),null!=t.ringer&&t.ringer.stop(),null!=t.ringback&&t.ringback.stop()})}},t.prototype.digit=function(t,e){if(e||(e=50),this.output.digit)this.output.digit(t,e,this._tones);else{var n=Strophe.iq({type:"set",to:this.remoteJid}).c("jingle",{xmlns:i.JINGLE,action:"session-info",initiator:this.initiator,sid:this.id}).c("dtmf",{xmlns:i.JINGLE_DTMF,code:t,duration:e,volume:"42"});this.connection.sendIQ(n),this.output.freep?(Phono.log.debug("freep "+t),this.output.freep(t,e,this._tones)):Phono.log.debug("no freep "+t)}},t.prototype.pushToTalk=function(t){return 0===arguments.length?this._pushToTalk:(this._pushToTalk=t,void this.pushToTalkStateChanged())},t.prototype.talking=function(t){return 0===arguments.length?this._talking:(this._talking=t,void this.pushToTalkStateChanged())},t.prototype.mute=function(t){return 0===arguments.length?this._mute:(this._mute=t,void(this.output&&this.output.mute(t)))},t.prototype.hold=function(){},t.prototype.volume=function(t){return 0===arguments.length?this._volume:(this._volume=t,void(this.input&&this.input.volume(t)))},t.prototype.tones=function(t){return 0===arguments.length?this._tones:void(this._tones=t)},t.prototype.gain=function(t){return 0===arguments.length?this._gain:(this._gain=t,void(this.output&&this.output.gain(t)))},t.prototype.energy=function(){return this.output&&(ret=this.output.energy()),ret},t.prototype.secure=function(){var t=!1;return this.output&&(t=this.output.secure()),t},t.prototype.security=function(t){return 0===arguments.length?this._security:void(this._security=t)},t.prototype.headset=function(t){return 0===arguments.length?this._headset:(this._headset=t,void(this.output&&this.output.suppress(!t)))},t.prototype.pushToTalkStateChanged=function(){this.input&&this.output&&(this._pushToTalk?this._talking?(this.input.volume(20),this.output.mute(!1)):(this.input.volume(this._volume),this.output.mute(!0)):(this.input.volume(this._volume),this.output.mute(!1)))},t.prototype.negotiate=function(t){var e=this,i=$(t).find("description"),n=null;if(i.find("payload-type").each(function(){var t=$(this).attr("name"),i=$(this).attr("clockrate"),s=$(this).attr("id");$.each(e.config.codecs(Phono.util.filterWideband(e.audioLayer.codecs(),e.phone.wideband())),function(){return this.name==t&&this.rate==i&&"telephone-event"!=this.name||parseInt(this.id)<90&&this.id==s?(null==n&&(n={id:s,name:this.name,rate:this.rate,p:this.p}),!1):void 0})}),"disabled"!=e._security&&1==this.transport.supportsSRTP&&(i.find("crypto").each(function(){$(this).attr("crypto-suite")==e.crypto&&(e.srtpPropsr=Phono.util.srtpProps($(this).attr("tag"),$(this).attr("crypto-suite"),$(this).attr("key-params"),$(this).attr("session-params")),e.tag=$(this).attr("tag"))}),"mandatory"==e._security&&void 0==e.srtpPropsr))return Phono.log.error("No security when mandatory specified"),null;var s=!1;return $(t).find("transport").each(function(){if(e.transport.name==$(this).attr("xmlns")&&0==s){var i=e.transport.processTransport($(this),!1,$(t));void 0!=i?(e.setupBinding=function(){return e.bindAudio({input:e.audioLayer.play(i.input,!1),output:e.audioLayer.share(i.output,!1,n,e.srtpPropsl,e.srtpPropsr)})},s=!0,i.codec&&(n=i.codec)):Phono.log.error("No valid candidate in transport")}}),0==s?(Phono.log.error("No matching valid transport"),null):(n||(Phono.log.error("No matching jingle codec (not a problem if using ROAP WebRTC)"),n={id:1,name:"webrtc-ulaw",rate:8e3,p:20}),n)},e.prototype.doJingle=function(e){var i=this,o=this.phono.audio,r=$(e).find("jingle"),a=r.attr("action")||"",u=r.attr("sid")||"",c=this.calls[u]||null;switch(a){case"session-initiate":if(c=Phono.util.loggify("Call",new t(i,u,s.INBOUND)),c.phone=i,c.remoteJid=$(e).attr("from"),c.initiator=r.attr("initiator"),i.calls[c.id]=c,c.state=n.PROGRESS,c.codec=c.negotiate(e),null==c.codec){Phono.log.warn("Failed to negotiate incoming call",e),c.hangup();break}c.headers=new Array,r.find("custom-header").each(function(){c.headers.push({name:$(this).attr("name"),value:$(this).attr("data")})}),null!=c.ringer&&c.ringer.start(),c.accept(),Phono.events.trigger(this,"incomingCall",{call:c}),o.permission()||Phono.events.trigger(o,"permissionBoxShow");break;case"session-accept":if(c.codec=c.negotiate(e),null==c.codec){Phono.log.warn("Failed to negotiate outbound call",e),c.hangup();break}if(null!=c.ringback&&c.ringback.stop(),c.setupBinding(),"mandatory"==c._security&&0==c.output.secure()){Phono.log.error("Security error, call not secure when mandatory specified"),c.hangup();break}c.startAudio(),c.state=n.CONNECTED,Phono.events.trigger(c,"answer");break;case"transport-replace":case"transport-accept":c.transport.processTransport($(e),!0);break;case"session-terminate":c.state=n.DISCONNECTED,c.stopAudio(),null!=c.ringer&&c.ringer.stop(),null!=c.ringback&&c.ringback.stop(),c.transport.destroyTransport&&c.transport.destroyTransport(),Phono.events.trigger(c,"hangup");break;case"session-info":$(e).find("ringing")&&(c.state=n.RINGING,null!=c.ringback&&c.ringback.start(),Phono.events.trigger(c,"ring"))}return this.connection.send(Strophe.iq({type:"result",id:$(e).attr("id"),to:c.remoteJid})),!0},e.prototype.dial=function(e,i){var n=Phono.util.guid();i=Phono.util.extend({headset:this.headset(),callerId:this.connection.jid},i||{});var o=new Phono.util.loggify("Call",new t(this,n,s.OUTBOUND,i));return o.phone=this,o.remoteJid=e,o.initiator=i.callerId,(void 0==o.initiator||null==o.initiator||""==o.initiator)&&(o.initiator=this.connection.jid),this.beforeDial(o),this.calls[o.id]=o,o.start(),o},e.prototype.beforeDial=function(t){var e=t.remoteJid;if(e.match("^sip:")||e.match("^sips:"))t.remoteJid=Phono.util.escapeXmppNode(e.substr(4))+"@sip";else if(e.match("^xmpp:"))t.remoteJid=e.substr(5);else if(e.match("^app:"))t.remoteJid=Phono.util.escapeXmppNode(e.substr(4))+"@app";else if(e.match("^tel:"))t.remoteJid="9996182316@app",t.headers.push({name:"x-numbertodial",value:e.substr(4)});else{var i=e.replace(/[\(\)\-\.\ ]/g,"");i.match(/^\+?\d+$/)?(t.remoteJid="9996182316@app",t.headers.push({name:"x-numbertodial",value:i})):e.indexOf("@")>0&&(t.remoteJid=Phono.util.escapeXmppNode(e)+"@sip")}},e.prototype.audioInput=function(t){return 0==arguments.length?this._audioInput:void(this._audioInput=t)},e.prototype.audioInDevices=function(){var t=this.phono.audio,e=new Object;return t.audioInDevices&&(e=t.audioInDevices()),e},e.prototype.ringTone=function(t){return 0==arguments.length?this._ringTone:void(this._ringTone=t)},e.prototype.ringbackTone=function(t){return 0==arguments.length?this._ringbackTone:void(this._ringbackTone=t)},e.prototype.headset=function(t){return 0==arguments.length?this._headset:(this._headset=t,void Phono.util.each(this.calls,function(){this.headset(t)}))},e.prototype.wideband=function(t){return 0==arguments.length?this._wideband:void(this._wideband=t)},e.prototype.security=function(t){return 0==arguments.length?this._security:void(this._security=t)},Phono.registerPlugin("phone",{create:function(t,i,n){return Phono.util.loggify("Phone",new e(t,i,n))}})}(),PhonoStrophe.log=function(t,e){Phono.log.debug("[PSTROPHE] "+e)},Phono.events.add(Phono.log,"log",function(t){var e=t.timeStamp,i=Phono.util.padWithZeroes(e.getHours(),2)+":"+Phono.util.padWithZeroes(e.getMinutes(),2)+":"+Phono.util.padWithZeroes(e.getSeconds(),2)+"."+Phono.util.padWithZeroes(e.getMilliseconds(),3),n=i+" "+Phono.util.padWithSpaces(t.level.name,5)+" - "+t.getCombinedMessages(),s=t.getThrowableStrRep();s&&(n+=newLine+s),console.log(n)}),PluginManager.prototype.init=function(){this.chain()},PluginManager.prototype.chain=function(){var t=this,e=t.pluginNames[this.index];Phono.plugins[e].create(t.phono,t.config[e],function(i){t.phono[e]=i,t.index++,t.index===t.pluginNames.length?t.readyHandler.apply(t.phono):t.chain()})}}(),$.phono=function(t){return new Phono(t)}}(Zepto)}.bind(this)),require.register("app/vendor/underscore.js",function(t,e,i){(function(){var e=this,n=e._,s={},o=Array.prototype,r=Object.prototype,a=Function.prototype,u=o.push,c=o.slice,h=o.concat,l=r.toString,p=r.hasOwnProperty,d=o.forEach,f=o.map,m=o.reduce,g=o.reduceRight,v=o.filter,y=o.every,b=o.some,_=o.indexOf,w=o.lastIndexOf,S=Array.isArray,x=Object.keys,k=a.bind,C=function(t){return t instanceof C?t:this instanceof C?void(this._wrapped=t):new C(t)};"undefined"!=typeof t?("undefined"!=typeof i&&i.exports&&(t=i.exports=C),t._=C):e._=C,C.VERSION="1.6.0";var O=C.each=C.forEach=function(t,e,i){if(null==t)return t;if(d&&t.forEach===d)t.forEach(e,i);else if(t.length===+t.length){for(var n=0,o=t.length;o>n;n++)if(e.call(i,t[n],n,t)===s)return}else for(var r=C.keys(t),n=0,o=r.length;o>n;n++)if(e.call(i,t[r[n]],r[n],t)===s)return;return t};C.map=C.collect=function(t,e,i){var n=[];return null==t?n:f&&t.map===f?t.map(e,i):(O(t,function(t,s,o){n.push(e.call(i,t,s,o))}),n)};var T="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(t,e,i,n){var s=arguments.length>2;if(null==t&&(t=[]),m&&t.reduce===m)return n&&(e=C.bind(e,n)),s?t.reduce(e,i):t.reduce(e);if(O(t,function(t,o,r){s?i=e.call(n,i,t,o,r):(i=t,s=!0)}),!s)throw new TypeError(T);return i},C.reduceRight=C.foldr=function(t,e,i,n){var s=arguments.length>2;if(null==t&&(t=[]),g&&t.reduceRight===g)return n&&(e=C.bind(e,n)),s?t.reduceRight(e,i):t.reduceRight(e);var o=t.length;if(o!==+o){var r=C.keys(t);o=r.length}if(O(t,function(a,u,c){u=r?r[--o]:--o,s?i=e.call(n,i,t[u],u,c):(i=t[u],s=!0)}),!s)throw new TypeError(T);return i},C.find=C.detect=function(t,e,i){var n;return j(t,function(t,s,o){return e.call(i,t,s,o)?(n=t,!0):void 0}),n},C.filter=C.select=function(t,e,i){var n=[];return null==t?n:v&&t.filter===v?t.filter(e,i):(O(t,function(t,s,o){e.call(i,t,s,o)&&n.push(t)}),n)},C.reject=function(t,e,i){return C.filter(t,function(t,n,s){return!e.call(i,t,n,s)},i)},C.every=C.all=function(t,e,i){e||(e=C.identity);var n=!0;return null==t?n:y&&t.every===y?t.every(e,i):(O(t,function(t,o,r){return(n=n&&e.call(i,t,o,r))?void 0:s}),!!n)};var j=C.some=C.any=function(t,e,i){e||(e=C.identity);var n=!1;return null==t?n:b&&t.some===b?t.some(e,i):(O(t,function(t,o,r){return n||(n=e.call(i,t,o,r))?s:void 0}),!!n)};C.contains=C.include=function(t,e){return null==t?!1:_&&t.indexOf===_?-1!=t.indexOf(e):j(t,function(t){return t===e})},C.invoke=function(t,e){var i=c.call(arguments,2),n=C.isFunction(e);return C.map(t,function(t){return(n?e:t[e]).apply(t,i)})},C.pluck=function(t,e){return C.map(t,C.property(e))},C.where=function(t,e){return C.filter(t,C.matches(e))},C.findWhere=function(t,e){return C.find(t,C.matches(e))},C.max=function(t,e,i){if(!e&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var n=-1/0,s=-1/0;return O(t,function(t,o,r){var a=e?e.call(i,t,o,r):t;a>s&&(n=t,s=a)}),n},C.min=function(t,e,i){if(!e&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var n=1/0,s=1/0;return O(t,function(t,o,r){var a=e?e.call(i,t,o,r):t;s>a&&(n=t,s=a)}),n},C.shuffle=function(t){var e,i=0,n=[];return O(t,function(t){e=C.random(i++),n[i-1]=n[e],n[e]=t}),n},C.sample=function(t,e,i){return null==e||i?(t.length!==+t.length&&(t=C.values(t)),t[C.random(t.length-1)]):C.shuffle(t).slice(0,Math.max(0,e))};var E=function(t){return null==t?C.identity:C.isFunction(t)?t:C.property(t)};C.sortBy=function(t,e,i){return e=E(e),C.pluck(C.map(t,function(t,n,s){return{value:t,index:n,criteria:e.call(i,t,n,s)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index
}),"value")};var I=function(t){return function(e,i,n){var s={};return i=E(i),O(e,function(o,r){var a=i.call(n,o,r,e);t(s,a,o)}),s}};C.groupBy=I(function(t,e,i){C.has(t,e)?t[e].push(i):t[e]=[i]}),C.indexBy=I(function(t,e,i){t[e]=i}),C.countBy=I(function(t,e){C.has(t,e)?t[e]++:t[e]=1}),C.sortedIndex=function(t,e,i,n){i=E(i);for(var s=i.call(n,e),o=0,r=t.length;r>o;){var a=o+r>>>1;i.call(n,t[a])<s?o=a+1:r=a}return o},C.toArray=function(t){return t?C.isArray(t)?c.call(t):t.length===+t.length?C.map(t,C.identity):C.values(t):[]},C.size=function(t){return null==t?0:t.length===+t.length?t.length:C.keys(t).length},C.first=C.head=C.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:0>e?[]:c.call(t,0,e)},C.initial=function(t,e,i){return c.call(t,0,t.length-(null==e||i?1:e))},C.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:c.call(t,Math.max(t.length-e,0))},C.rest=C.tail=C.drop=function(t,e,i){return c.call(t,null==e||i?1:e)},C.compact=function(t){return C.filter(t,C.identity)};var A=function(t,e,i){return e&&C.every(t,C.isArray)?h.apply(i,t):(O(t,function(t){C.isArray(t)||C.isArguments(t)?e?u.apply(i,t):A(t,e,i):i.push(t)}),i)};C.flatten=function(t,e){return A(t,e,[])},C.without=function(t){return C.difference(t,c.call(arguments,1))},C.partition=function(t,e){var i=[],n=[];return O(t,function(t){(e(t)?i:n).push(t)}),[i,n]},C.uniq=C.unique=function(t,e,i,n){C.isFunction(e)&&(n=i,i=e,e=!1);var s=i?C.map(t,i,n):t,o=[],r=[];return O(s,function(i,n){(e?n&&r[r.length-1]===i:C.contains(r,i))||(r.push(i),o.push(t[n]))}),o},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=function(t){var e=c.call(arguments,1);return C.filter(C.uniq(t),function(t){return C.every(e,function(e){return C.contains(e,t)})})},C.difference=function(t){var e=h.apply(o,c.call(arguments,1));return C.filter(t,function(t){return!C.contains(e,t)})},C.zip=function(){for(var t=C.max(C.pluck(arguments,"length").concat(0)),e=new Array(t),i=0;t>i;i++)e[i]=C.pluck(arguments,""+i);return e},C.object=function(t,e){if(null==t)return{};for(var i={},n=0,s=t.length;s>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},C.indexOf=function(t,e,i){if(null==t)return-1;var n=0,s=t.length;if(i){if("number"!=typeof i)return n=C.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,s+i):i}if(_&&t.indexOf===_)return t.indexOf(e,i);for(;s>n;n++)if(t[n]===e)return n;return-1},C.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=null!=i;if(w&&t.lastIndexOf===w)return n?t.lastIndexOf(e,i):t.lastIndexOf(e);for(var s=n?i:t.length;s--;)if(t[s]===e)return s;return-1},C.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),s=0,o=new Array(n);n>s;)o[s++]=t,t+=i;return o};var P=function(){};C.bind=function(t,e){var i,n;if(k&&t.bind===k)return k.apply(t,c.call(arguments,1));if(!C.isFunction(t))throw new TypeError;return i=c.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(c.call(arguments)));P.prototype=t.prototype;var s=new P;P.prototype=null;var o=t.apply(s,i.concat(c.call(arguments)));return Object(o)===o?o:s}},C.partial=function(t){var e=c.call(arguments,1);return function(){for(var i=0,n=e.slice(),s=0,o=n.length;o>s;s++)n[s]===C&&(n[s]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return t.apply(this,n)}},C.bindAll=function(t){var e=c.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return O(e,function(e){t[e]=C.bind(t[e],t)}),t},C.memoize=function(t,e){var i={};return e||(e=C.identity),function(){var n=e.apply(this,arguments);return C.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}},C.delay=function(t,e){var i=c.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},C.defer=function(t){return C.delay.apply(C,[t,1].concat(c.call(arguments,1)))},C.throttle=function(t,e,i){var n,s,o,r=null,a=0;i||(i={});var u=function(){a=i.leading===!1?0:C.now(),r=null,o=t.apply(n,s),n=s=null};return function(){var c=C.now();a||i.leading!==!1||(a=c);var h=e-(c-a);return n=this,s=arguments,0>=h?(clearTimeout(r),r=null,a=c,o=t.apply(n,s),n=s=null):r||i.trailing===!1||(r=setTimeout(u,h)),o}},C.debounce=function(t,e,i){var n,s,o,r,a,u=function(){var c=C.now()-r;e>c?n=setTimeout(u,e-c):(n=null,i||(a=t.apply(o,s),o=s=null))};return function(){o=this,s=arguments,r=C.now();var c=i&&!n;return n||(n=setTimeout(u,e)),c&&(a=t.apply(o,s),o=s=null),a}},C.once=function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments),t=null,e)}},C.wrap=function(t,e){return C.partial(e,t)},C.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},C.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},C.keys=function(t){if(!C.isObject(t))return[];if(x)return x(t);var e=[];for(var i in t)C.has(t,i)&&e.push(i);return e},C.values=function(t){for(var e=C.keys(t),i=e.length,n=new Array(i),s=0;i>s;s++)n[s]=t[e[s]];return n},C.pairs=function(t){for(var e=C.keys(t),i=e.length,n=new Array(i),s=0;i>s;s++)n[s]=[e[s],t[e[s]]];return n},C.invert=function(t){for(var e={},i=C.keys(t),n=0,s=i.length;s>n;n++)e[t[i[n]]]=i[n];return e},C.functions=C.methods=function(t){var e=[];for(var i in t)C.isFunction(t[i])&&e.push(i);return e.sort()},C.extend=function(t){return O(c.call(arguments,1),function(e){if(e)for(var i in e)t[i]=e[i]}),t},C.pick=function(t){var e={},i=h.apply(o,c.call(arguments,1));return O(i,function(i){i in t&&(e[i]=t[i])}),e},C.omit=function(t){var e={},i=h.apply(o,c.call(arguments,1));for(var n in t)C.contains(i,n)||(e[n]=t[n]);return e},C.defaults=function(t){return O(c.call(arguments,1),function(e){if(e)for(var i in e)void 0===t[i]&&(t[i]=e[i])}),t},C.clone=function(t){return C.isObject(t)?C.isArray(t)?t.slice():C.extend({},t):t},C.tap=function(t,e){return e(t),t};var N=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof C&&(t=t._wrapped),e instanceof C&&(e=e._wrapped);var s=l.call(t);if(s!=l.call(e))return!1;switch(s){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=i.length;o--;)if(i[o]==t)return n[o]==e;var r=t.constructor,a=e.constructor;if(r!==a&&!(C.isFunction(r)&&r instanceof r&&C.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1;i.push(t),n.push(e);var u=0,c=!0;if("[object Array]"==s){if(u=t.length,c=u==e.length)for(;u--&&(c=N(t[u],e[u],i,n)););}else{for(var h in t)if(C.has(t,h)&&(u++,!(c=C.has(e,h)&&N(t[h],e[h],i,n))))break;if(c){for(h in e)if(C.has(e,h)&&!u--)break;c=!u}}return i.pop(),n.pop(),c};C.isEqual=function(t,e){return N(t,e,[],[])},C.isEmpty=function(t){if(null==t)return!0;if(C.isArray(t)||C.isString(t))return 0===t.length;for(var e in t)if(C.has(t,e))return!1;return!0},C.isElement=function(t){return!(!t||1!==t.nodeType)},C.isArray=S||function(t){return"[object Array]"==l.call(t)},C.isObject=function(t){return t===Object(t)},O(["Arguments","Function","String","Number","Date","RegExp"],function(t){C["is"+t]=function(e){return l.call(e)=="[object "+t+"]"}}),C.isArguments(arguments)||(C.isArguments=function(t){return!(!t||!C.has(t,"callee"))}),"function"!=typeof/./&&(C.isFunction=function(t){return"function"==typeof t}),C.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},C.isNaN=function(t){return C.isNumber(t)&&t!=+t},C.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==l.call(t)},C.isNull=function(t){return null===t},C.isUndefined=function(t){return void 0===t},C.has=function(t,e){return p.call(t,e)},C.noConflict=function(){return e._=n,this},C.identity=function(t){return t},C.constant=function(t){return function(){return t}},C.property=function(t){return function(e){return e[t]}},C.matches=function(t){return function(e){if(e===t)return!0;for(var i in t)if(t[i]!==e[i])return!1;return!0}},C.times=function(t,e,i){for(var n=Array(Math.max(0,t)),s=0;t>s;s++)n[s]=e.call(i,s);return n},C.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},C.now=Date.now||function(){return(new Date).getTime()};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};M.unescape=C.invert(M.escape);var R={escape:new RegExp("["+C.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+C.keys(M.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(t){C[t]=function(e){return null==e?"":(""+e).replace(R[t],function(e){return M[t][e]})}}),C.result=function(t,e){if(null==t)return void 0;var i=t[e];return C.isFunction(i)?i.call(t):i},C.mixin=function(t){O(C.functions(t),function(e){var i=C[e]=t[e];C.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),D.call(this,i.apply(C,t))}})};var B=0;C.uniqueId=function(t){var e=++B+"";return t?t+e:e},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(t,e,i){var n;i=C.defaults({},i,C.templateSettings);var s=new RegExp([(i.escape||F).source,(i.interpolate||F).source,(i.evaluate||F).source].join("|")+"|$","g"),o=0,r="__p+='";t.replace(s,function(e,i,n,s,a){return r+=t.slice(o,a).replace(z,function(t){return"\\"+L[t]}),i&&(r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(r+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),s&&(r+="';\n"+s+"\n__p+='"),o=a+e.length,e}),r+="';\n",i.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{n=new Function(i.variable||"obj","_",r)}catch(a){throw a.source=r,a}if(e)return n(e,C);var u=function(t){return n.call(this,t,C)};return u.source="function("+(i.variable||"obj")+"){\n"+r+"}",u},C.chain=function(t){return C(t).chain()};var D=function(t){return this._chain?C(t).chain():t};C.mixin(C),O(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];C.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!=t&&"splice"!=t||0!==i.length||delete i[0],D.call(this,i)}}),O(["concat","join","slice"],function(t){var e=o[t];C.prototype[t]=function(){return D.call(this,e.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return C})}).call(this)}.bind(this)),require.register("app/vendor/zepto.js",function(){var t=function(){function t(t){return null==t?String(t):X[G.call(t)]||"object"}function e(e){return"function"==t(e)}function i(t){return null!=t&&t==t.window}function n(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function s(e){return"object"==t(e)}function o(t){return s(t)&&!i(t)&&Object.getPrototypeOf(t)==Object.prototype}function r(t){return t instanceof Array}function a(t){return"number"==typeof t.length}function u(t){return I.call(t,function(t){return null!=t})}function c(t){return t.length>0?k.fn.concat.apply([],t):t}function h(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(t){return t in N?N[t]:N[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function p(t,e){return"number"!=typeof e||M[h(t)]?e:e+"px"}function d(t){var e,i;return P[t]||(e=A.createElement(t),A.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),P[t]=i),P[t]}function f(t){return"children"in t?E.call(t.children):k.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function m(t,e,i){for(x in e)i&&(o(e[x])||r(e[x]))?(o(e[x])&&!o(t[x])&&(t[x]={}),r(e[x])&&!r(t[x])&&(t[x]=[]),m(t[x],e[x],i)):e[x]!==S&&(t[x]=e[x])}function g(t,e){return null==e?k(t):k(t).filter(e)}function v(t,i,n,s){return e(i)?i.call(t,n,s):i}function y(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function b(t,e){var i=t.className,n=i&&i.baseVal!==S;return e===S?n?i.baseVal:i:void(n?i.baseVal=e:t.className=e)}function _(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\[\{]/.test(t)?k.parseJSON(t):t:e):t}catch(i){return t}}function w(t,e){e(t);for(var i in t.childNodes)w(t.childNodes[i],e)}var S,x,k,C,O,T,j=[],E=j.slice,I=j.filter,A=window.document,P={},N={},M={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},R=/^\s*<(\w+|!)[^>]*>/,B=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,F=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,L=/^(?:body|html)$/i,z=/([A-Z])/g,D=["val","css","html","text","data","width","height","offset"],H=["after","prepend","before","append"],q=A.createElement("table"),U=A.createElement("tr"),$={tr:A.createElement("tbody"),tbody:q,thead:q,tfoot:q,td:U,th:U,"*":A.createElement("div")},V=/complete|loaded|interactive/,J=/^[\w-]*$/,X={},G=X.toString,Y={},W=A.createElement("div"),Z={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"};return Y.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n,s=t.parentNode,o=!s;return o&&(s=W).appendChild(t),n=~Y.qsa(s,e).indexOf(t),o&&W.removeChild(t),n},O=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},T=function(t){return I.call(t,function(e,i){return t.indexOf(e)==i})},Y.fragment=function(t,e,i){var n,s,r;return B.test(t)&&(n=k(A.createElement(RegExp.$1))),n||(t.replace&&(t=t.replace(F,"<$1></$2>")),e===S&&(e=R.test(t)&&RegExp.$1),e in $||(e="*"),r=$[e],r.innerHTML=""+t,n=k.each(E.call(r.childNodes),function(){r.removeChild(this)})),o(i)&&(s=k(n),k.each(i,function(t,e){D.indexOf(t)>-1?s[t](e):s.attr(t,e)})),n},Y.Z=function(t,e){return t=t||[],t.__proto__=k.fn,t.selector=e||"",t},Y.isZ=function(t){return t instanceof Y.Z},Y.init=function(t,i){var n;if(!t)return Y.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&R.test(t))n=Y.fragment(t,RegExp.$1,i),t=null;else{if(i!==S)return k(i).find(t);n=Y.qsa(A,t)}else{if(e(t))return k(A).ready(t);if(Y.isZ(t))return t;if(r(t))n=u(t);else if(s(t))n=[t],t=null;else if(R.test(t))n=Y.fragment(t.trim(),RegExp.$1,i),t=null;else{if(i!==S)return k(i).find(t);n=Y.qsa(A,t)}}return Y.Z(n,t)},k=function(t,e){return Y.init(t,e)},k.extend=function(t){var e,i=E.call(arguments,1);return"boolean"==typeof t&&(e=t,t=i.shift()),i.forEach(function(i){m(t,i,e)}),t},Y.qsa=function(t,e){var i,s="#"==e[0],o=!s&&"."==e[0],r=s||o?e.slice(1):e,a=J.test(r);return n(t)&&a&&s?(i=t.getElementById(r))?[i]:[]:1!==t.nodeType&&9!==t.nodeType?[]:E.call(a&&!s?o?t.getElementsByClassName(r):t.getElementsByTagName(e):t.querySelectorAll(e))},k.contains=function(t,e){return t!==e&&t.contains(e)},k.type=t,k.isFunction=e,k.isWindow=i,k.isArray=r,k.isPlainObject=o,k.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},k.inArray=function(t,e,i){return j.indexOf.call(e,t,i)},k.camelCase=O,k.trim=function(t){return null==t?"":String.prototype.trim.call(t)},k.uuid=0,k.support={},k.expr={},k.map=function(t,e){var i,n,s,o=[];if(a(t))for(n=0;n<t.length;n++)i=e(t[n],n),null!=i&&o.push(i);else for(s in t)i=e(t[s],s),null!=i&&o.push(i);return c(o)},k.each=function(t,e){var i,n;if(a(t)){for(i=0;i<t.length;i++)if(e.call(t[i],i,t[i])===!1)return t}else for(n in t)if(e.call(t[n],n,t[n])===!1)return t;return t},k.grep=function(t,e){return I.call(t,e)},window.JSON&&(k.parseJSON=JSON.parse),k.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){X["[object "+e+"]"]=e.toLowerCase()}),k.fn={forEach:j.forEach,reduce:j.reduce,push:j.push,sort:j.sort,indexOf:j.indexOf,concat:j.concat,map:function(t){return k(k.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return k(E.apply(this,arguments))},ready:function(t){return V.test(A.readyState)&&A.body?t(k):A.addEventListener("DOMContentLoaded",function(){t(k)},!1),this},get:function(t){return t===S?E.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return j.every.call(this,function(e,i){return t.call(e,i,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):k(I.call(this,function(e){return Y.matches(e,t)}))},add:function(t,e){return k(T(this.concat(k(t,e))))},is:function(t){return this.length>0&&Y.matches(this[0],t)},not:function(t){var i=[];if(e(t)&&t.call!==S)this.each(function(e){t.call(this,e)||i.push(this)});else{var n="string"==typeof t?this.filter(t):a(t)&&e(t.item)?E.call(t):k(t);this.forEach(function(t){n.indexOf(t)<0&&i.push(t)})}return k(i)},has:function(t){return this.filter(function(){return s(t)?k.contains(this,t):k(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!s(t)?t:k(t)},last:function(){var t=this[this.length-1];return t&&!s(t)?t:k(t)},find:function(t){var e,i=this;return e="object"==typeof t?k(t).filter(function(){var t=this;return j.some.call(i,function(e){return k.contains(e,t)})}):1==this.length?k(Y.qsa(this[0],t)):this.map(function(){return Y.qsa(this,t)})},closest:function(t,e){var i=this[0],s=!1;for("object"==typeof t&&(s=k(t));i&&!(s?s.indexOf(i)>=0:Y.matches(i,t));)i=i!==e&&!n(i)&&i.parentNode;return k(i)},parents:function(t){for(var e=[],i=this;i.length>0;)i=k.map(i,function(t){return(t=t.parentNode)&&!n(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return g(e,t)},parent:function(t){return g(T(this.pluck("parentNode")),t)},children:function(t){return g(this.map(function(){return f(this)}),t)},contents:function(){return this.map(function(){return E.call(this.childNodes)})},siblings:function(t){return g(this.map(function(t,e){return I.call(f(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return k.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=d(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var i=e(t);if(this[0]&&!i)var n=k(t).get(0),s=n.parentNode||this.length>1;return this.each(function(e){k(this).wrapAll(i?t.call(this,e):s?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){k(this[0]).before(t=k(t));for(var e;(e=t.children()).length;)t=e.first();k(t).append(this)}return this},wrapInner:function(t){var i=e(t);return this.each(function(e){var n=k(this),s=n.contents(),o=i?t.call(this,e):t;s.length?s.wrapAll(o):n.append(o)})},unwrap:function(){return this.parent().each(function(){k(this).replaceWith(k(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=k(this);(t===S?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return k(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return k(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(e){var i=this.innerHTML;k(this).empty().append(v(this,t,e,i))})},text:function(t){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t===S?"":""+t})},attr:function(t,e){var i;return"string"==typeof t&&e===S?0==this.length||1!==this[0].nodeType?S:"value"==t&&"INPUT"==this[0].nodeName?this.val():!(i=this[0].getAttribute(t))&&t in this[0]?this[0][t]:i:this.each(function(i){if(1===this.nodeType)if(s(t))for(x in t)y(this,x,t[x]);else y(this,t,v(this,e,i,this.getAttribute(t)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&y(this,t)})},prop:function(t,e){return t=Z[t]||t,e===S?this[0]&&this[0][t]:this.each(function(i){this[t]=v(this,e,i,this[t])})},data:function(t,e){var i=this.attr("data-"+t.replace(z,"-$1").toLowerCase(),e);return null!==i?_(i):S},val:function(t){return 0===arguments.length?this[0]&&(this[0].multiple?k(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(e){this.value=v(this,t,e,this.value)})},offset:function(t){if(t)return this.each(function(e){var i=k(this),n=v(this,t,e,i.offset()),s=i.offsetParent().offset(),o={top:n.top-s.top,left:n.left-s.left};"static"==i.css("position")&&(o.position="relative"),i.css(o)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,i){if(arguments.length<2){var n=this[0],s=getComputedStyle(n,"");if(!n)return;if("string"==typeof e)return n.style[O(e)]||s.getPropertyValue(e);if(r(e)){var o={};return k.each(r(e)?e:[e],function(t,e){o[e]=n.style[O(e)]||s.getPropertyValue(e)}),o}}var a="";if("string"==t(e))i||0===i?a=h(e)+":"+p(e,i):this.each(function(){this.style.removeProperty(h(e))});else for(x in e)e[x]||0===e[x]?a+=h(x)+":"+p(x,e[x])+";":this.each(function(){this.style.removeProperty(h(x))});return this.each(function(){this.style.cssText+=";"+a})},index:function(t){return t?this.indexOf(k(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?j.some.call(this,function(t){return this.test(b(t))},l(t)):!1},addClass:function(t){return t?this.each(function(e){C=[];var i=b(this),n=v(this,t,e,i);n.split(/\s+/g).forEach(function(t){k(this).hasClass(t)||C.push(t)},this),C.length&&b(this,i+(i?" ":"")+C.join(" "))}):this},removeClass:function(t){return this.each(function(e){return t===S?b(this,""):(C=b(this),v(this,t,e,C).split(/\s+/g).forEach(function(t){C=C.replace(l(t)," ")}),void b(this,C.trim()))})},toggleClass:function(t,e){return t?this.each(function(i){var n=k(this),s=v(this,t,i,b(this));s.split(/\s+/g).forEach(function(t){(e===S?!n.hasClass(t):e)?n.addClass(t):n.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===S?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===S?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),n=L.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(k(t).css("margin-top"))||0,i.left-=parseFloat(k(t).css("margin-left"))||0,n.top+=parseFloat(k(e[0]).css("border-top-width"))||0,n.left+=parseFloat(k(e[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||A.body;t&&!L.test(t.nodeName)&&"static"==k(t).css("position");)t=t.offsetParent;return t})}},k.fn.detach=k.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});k.fn[t]=function(s){var o,r=this[0];return s===S?i(r)?r["inner"+e]:n(r)?r.documentElement["scroll"+e]:(o=this.offset())&&o[t]:this.each(function(e){r=k(this),r.css(t,v(this,s,e,r[t]()))})}}),H.forEach(function(e,i){var n=i%2;k.fn[e]=function(){var e,s,o=k.map(arguments,function(i){return e=t(i),"object"==e||"array"==e||null==i?i:Y.fragment(i)}),r=this.length>1;return o.length<1?this:this.each(function(t,e){s=n?e:e.parentNode,e=0==i?e.nextSibling:1==i?e.firstChild:2==i?e:null,o.forEach(function(t){if(r)t=t.cloneNode(!0);else if(!s)return k(t).remove();w(s.insertBefore(t,e),function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},k.fn[n?e+"To":"insert"+(i?"Before":"After")]=function(t){return k(t)[e](this),this}}),Y.Z.prototype=k.fn,Y.uniq=T,Y.deserializeValue=_,k.zepto=Y,k}();window.Zepto=t,void 0===window.$&&(window.$=t),function(t){function e(t){return t._zid||(t._zid=p++)}function i(t,i,o,r){if(i=n(i),i.ns)var a=s(i.ns);return(g[e(t)]||[]).filter(function(t){return!(!t||i.e&&t.e!=i.e||i.ns&&!a.test(t.ns)||o&&e(t.fn)!==e(o)||r&&t.sel!=r)})}function n(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function s(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function o(t,e){return t.del&&!y&&t.e in b||!!e}function r(t){return _[t]||y&&b[t]||t}function a(i,s,a,u,h,p,d){var f=e(i),m=g[f]||(g[f]=[]);s.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(a);var s=n(e);s.fn=a,s.sel=h,s.e in _&&(a=function(e){var i=e.relatedTarget;return!i||i!==this&&!t.contains(this,i)?s.fn.apply(this,arguments):void 0}),s.del=p;var f=p||a;s.proxy=function(t){if(t=c(t),!t.isImmediatePropagationStopped()){t.data=u;var e=f.apply(i,t._args==l?[t]:[t].concat(t._args));return e===!1&&(t.preventDefault(),t.stopPropagation()),e}},s.i=m.length,m.push(s),"addEventListener"in i&&i.addEventListener(r(s.e),s.proxy,o(s,d))})}function u(t,n,s,a,u){var c=e(t);(n||"").split(/\s/).forEach(function(e){i(t,e,s,a).forEach(function(e){delete g[c][e.i],"removeEventListener"in t&&t.removeEventListener(r(e.e),e.proxy,o(e,u))})})}function c(e,i){return(i||!e.isDefaultPrevented)&&(i||(i=e),t.each(k,function(t,n){var s=i[t];e[t]=function(){return this[n]=w,s&&s.apply(i,arguments)},e[n]=S}),(i.defaultPrevented!==l?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=w)),e}function h(t){var e,i={originalEvent:t};for(e in t)x.test(e)||t[e]===l||(i[e]=t[e]);return c(i,t)}var l,p=(t.zepto.qsa,1),d=Array.prototype.slice,f=t.isFunction,m=function(t){return"string"==typeof t},g={},v={},y="onfocusin"in window,b={focus:"focusin",blur:"focusout"},_={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",t.event={add:a,remove:u},t.proxy=function(i,n){if(f(i)){var s=function(){return i.apply(n,arguments)};return s._zid=e(i),s}if(m(n))return t.proxy(i[n],i);throw new TypeError("expected function")},t.fn.bind=function(t,e,i){return this.on(t,e,i)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var w=function(){return!0},S=function(){return!1},x=/^([A-Z]|returnValue$|layer[XY]$)/,k={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,i){return this.on(e,t,i)},t.fn.undelegate=function(t,e,i){return this.off(e,t,i)},t.fn.live=function(e,i){return t(document.body).delegate(this.selector,e,i),this},t.fn.die=function(e,i){return t(document.body).undelegate(this.selector,e,i),this},t.fn.on=function(e,i,n,s,o){var r,c,p=this;return e&&!m(e)?(t.each(e,function(t,e){p.on(t,i,n,e,o)}),p):(m(i)||f(s)||s===!1||(s=n,n=i,i=l),(f(n)||n===!1)&&(s=n,n=l),s===!1&&(s=S),p.each(function(l,p){o&&(r=function(t){return u(p,t.type,s),s.apply(this,arguments)}),i&&(c=function(e){var n,o=t(e.target).closest(i,p).get(0);return o&&o!==p?(n=t.extend(h(e),{currentTarget:o,liveFired:p}),(r||s).apply(o,[n].concat(d.call(arguments,1)))):void 0}),a(p,e,s,n,i,c||r)}))},t.fn.off=function(e,i,n){var s=this;return e&&!m(e)?(t.each(e,function(t,e){s.off(t,i,e)}),s):(m(i)||f(n)||n===!1||(n=i,i=l),n===!1&&(n=S),s.each(function(){u(this,e,n,i)}))},t.fn.trigger=function(e,i){return e=m(e)||t.isPlainObject(e)?t.Event(e):c(e),e._args=i,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,i)})},t.fn.triggerHandler=function(e,n){var s,o;return this.each(function(r,a){s=h(m(e)?t.Event(e):e),s._args=n,s.target=a,t.each(i(a,e.type||e),function(t,e){return o=e.proxy(s),s.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.Event=function(t,e){m(t)||(e=t,t=e.type);var i=document.createEvent(v[t]||"Events"),n=!0;if(e)for(var s in e)"bubbles"==s?n=!!e[s]:i[s]=e[s];return i.initEvent(t,n,!0),c(i)}}(t),function(t){function e(e,i,n){var s=t.Event(i);return t(e).trigger(s,n),!s.isDefaultPrevented()}function i(t,i,n,s){return t.global?e(i||y,n,s):void 0}function n(e){e.global&&0===t.active++&&i(e,null,"ajaxStart")}function s(e){e.global&&!--t.active&&i(e,null,"ajaxStop")}function o(t,e){var n=e.context;return e.beforeSend.call(n,t,e)===!1||i(e,n,"ajaxBeforeSend",[t,e])===!1?!1:void i(e,n,"ajaxSend",[t,e])}function r(t,e,n,s){var o=n.context,r="success";n.success.call(o,t,r,e),s&&s.resolveWith(o,[t,r,e]),i(n,o,"ajaxSuccess",[e,n,t]),u(r,e,n)}function a(t,e,n,s,o){var r=s.context;s.error.call(r,n,e,t),o&&o.rejectWith(r,[n,e,t]),i(s,r,"ajaxError",[n,s,t||e]),u(e,n,s)}function u(t,e,n){var o=n.context;n.complete.call(o,e,t),i(n,o,"ajaxComplete",[e,n]),s(n)}function c(){}function h(t){return t&&(t=t.split(";",2)[0]),t&&(t==x?"html":t==S?"json":_.test(t)?"script":w.test(t)&&"xml")||"text"}function l(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function p(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=l(e.url,e.data),e.data=void 0)}function d(e,i,n,s){var o=!t.isFunction(i);return{url:e,data:o?i:void 0,success:o?t.isFunction(n)?n:void 0:i,dataType:o?s||n:n}}function f(e,i,n,s){var o,r=t.isArray(i),a=t.isPlainObject(i);t.each(i,function(i,u){o=t.type(u),s&&(i=n?s:s+"["+(a||"object"==o||"array"==o?i:"")+"]"),!s&&r?e.add(u.name,u.value):"array"==o||!n&&"object"==o?f(e,u,n,i):e.add(i,u)})}var m,g,v=0,y=window.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,_=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,S="application/json",x="text/html",k=/^\s*$/;t.active=0,t.ajaxJSONP=function(e,i){if(!("type"in e))return t.ajax(e);var n,s,u=e.jsonpCallback,c=(t.isFunction(u)?u():u)||"jsonp"+ ++v,h=y.createElement("script"),l=window[c],p=function(e){t(h).triggerHandler("error",e||"abort")},d={abort:p};return i&&i.promise(d),t(h).on("load error",function(o,u){clearTimeout(s),t(h).off().remove(),"error"!=o.type&&n?r(n[0],d,e,i):a(null,u||"error",d,e,i),window[c]=l,n&&t.isFunction(l)&&l(n[0]),l=n=void 0}),o(d,e)===!1?(p("abort"),d):(window[c]=function(){n=arguments},h.src=e.url.replace(/=\?/,"="+c),y.head.appendChild(h),e.timeout>0&&(s=setTimeout(function(){p("timeout")},e.timeout)),d)},t.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:S,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var i=t.extend({},e||{}),s=t.Deferred&&t.Deferred();for(m in t.ajaxSettings)void 0===i[m]&&(i[m]=t.ajaxSettings[m]);n(i),i.crossDomain||(i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!=window.location.host),i.url||(i.url=window.location.toString()),p(i),i.cache===!1&&(i.url=l(i.url,"_="+Date.now()));
var u=i.dataType,d=/=\?/.test(i.url);if("jsonp"==u||d)return d||(i.url=l(i.url,i.jsonp?i.jsonp+"=?":i.jsonp===!1?"":"callback=?")),t.ajaxJSONP(i,s);var f,v=i.accepts[u],y={},b=function(t,e){y[t.toLowerCase()]=[t,e]},_=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,w=i.xhr(),S=w.setRequestHeader;if(s&&s.promise(w),i.crossDomain||b("X-Requested-With","XMLHttpRequest"),b("Accept",v||"*/*"),(v=i.mimeType||v)&&(v.indexOf(",")>-1&&(v=v.split(",",2)[0]),w.overrideMimeType&&w.overrideMimeType(v)),(i.contentType||i.contentType!==!1&&i.data&&"GET"!=i.type.toUpperCase())&&b("Content-Type",i.contentType||"application/x-www-form-urlencoded"),i.headers)for(g in i.headers)b(g,i.headers[g]);if(w.setRequestHeader=b,w.onreadystatechange=function(){if(4==w.readyState){w.onreadystatechange=c,clearTimeout(f);var e,n=!1;if(w.status>=200&&w.status<300||304==w.status||0==w.status&&"file:"==_){u=u||h(i.mimeType||w.getResponseHeader("content-type")),e=w.responseText;try{"script"==u?(1,eval)(e):"xml"==u?e=w.responseXML:"json"==u&&(e=k.test(e)?null:t.parseJSON(e))}catch(o){n=o}n?a(n,"parsererror",w,i,s):r(e,w,i,s)}else a(w.statusText||null,w.status?"error":"abort",w,i,s)}},o(w,i)===!1)return w.abort(),a(null,"abort",w,i,s),w;if(i.xhrFields)for(g in i.xhrFields)w[g]=i.xhrFields[g];var x="async"in i?i.async:!0;w.open(i.type,i.url,x,i.username,i.password);for(g in y)S.apply(w,y[g]);return i.timeout>0&&(f=setTimeout(function(){w.onreadystatechange=c,w.abort(),a(null,"timeout",w,i,s)},i.timeout)),w.send(i.data?i.data:null),w},t.get=function(){return t.ajax(d.apply(null,arguments))},t.post=function(){var e=d.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=d.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,i,n){if(!this.length)return this;var s,o=this,r=e.split(/\s/),a=d(e,i,n),u=a.success;return r.length>1&&(a.url=r[0],s=r[1]),a.success=function(e){o.html(s?t("<div>").html(e.replace(b,"")).find(s):e),u&&u.apply(o,arguments)},t.ajax(a),this};var C=encodeURIComponent;t.param=function(t,e){var i=[];return i.add=function(t,e){this.push(C(t)+"="+C(e))},f(i,t,e),i.join("&").replace(/%20/g,"+")}}(t),function(t){t.fn.serializeArray=function(){var e,i=[];return t([].slice.call(this.get(0).elements)).each(function(){e=t(this);var n=e.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&("radio"!=n&&"checkbox"!=n||this.checked)&&i.push({name:e.attr("name"),value:e.val()})}),i},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var i=t.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(t),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,i){return e=e||[],t.extend(e,t.fn),e.selector=i||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(e){var i=getComputedStyle;window.getComputedStyle=function(t){try{return i(t)}catch(e){return null}}}}(t)}.bind(this)),require.register("famous_modules/famous/entity/_git_master/index.js",function(t,e,i){function n(t){var e=r.length;return o(e,t),e}function s(t){return r[t]}function o(t,e){r[t]=e}var r=[];i.exports={register:n,get:s,set:o}}.bind(this)),require.register("famous_modules/famous/surface/_git_master/index.js",function(t,e,i){function n(t){this.options={},this.properties={},this.content="",this.classList=[],this.size=void 0,this._classesDirty=!0,this._stylesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._dirtyClasses=[],this._matrix=void 0,this._opacity=1,this._origin=void 0,this._size=void 0,this.eventForwarder=function(t){this.emit(t.type,t)}.bind(this),this.eventHandler=new p,this.eventHandler.bindThis(this),this.id=l.register(this),t&&this.setOptions(t),this._currTarget=void 0}function s(t){for(var e in this.eventHandler.listeners)t.addEventListener(e,this.eventForwarder)}function o(t){for(var e in this.eventHandler.listeners)t.removeEventListener(e,this.eventForwarder)}function r(t){for(var e=0;e<this._dirtyClasses.length;e++)t.classList.remove(this._dirtyClasses[e]);this._dirtyClasses=[]}function a(t){for(var e in this.properties)t.style[e]=this.properties[e]}function u(t){for(var e in this.properties)t.style[e]=""}function c(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]:t!==e}function h(t){return(100*t[0]).toFixed(6)+"% "+(100*t[1]).toFixed(6)+"%"}var l=e("famous/entity"),p=e("famous/event-handler"),d=e("famous/transform"),f=void 0!==document.body.style.webkitTransform;n.prototype.elementType="div",n.prototype.elementClass="famous-surface",n.prototype.on=function(t,e){this._currTarget&&this._currTarget.addEventListener(t,this.eventForwarder),this.eventHandler.on(t,e)},n.prototype.unbind=function(t,e){this.eventHandler.unbind(t,e)},n.prototype.emit=function(t,e){e&&!e.origin&&(e.origin=this);var i=this.eventHandler.emit(t,e);return i&&e.stopPropagation&&e.stopPropagation(),i},n.prototype.pipe=function(t){return this.eventHandler.pipe(t)},n.prototype.unpipe=function(t){return this.eventHandler.unpipe(t)},n.prototype.render=function(){return this.id},n.prototype.setProperties=function(t){for(var e in t)this.properties[e]=t[e];this._stylesDirty=!0},n.prototype.getProperties=function(){return this.properties},n.prototype.addClass=function(t){this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0)},n.prototype.removeClass=function(t){var e=this.classList.indexOf(t);e>=0&&(this._dirtyClasses.push(this.classList.splice(e,1)[0]),this._classesDirty=!0)},n.prototype.setClasses=function(t){for(var e=[],i=0;i<this.classList.length;i++)t.indexOf(this.classList[i])<0&&e.push(this.classList[i]);for(var i=0;i<e.length;i++)this.removeClass(e[i]);for(var i=0;i<t.length;i++)this.addClass(t[i])},n.prototype.getClassList=function(){return this.classList},n.prototype.setContent=function(t){this.content!=t&&(this.content=t,this._contentDirty=!0)},n.prototype.getContent=function(){return this.content},n.prototype.setOptions=function(t){t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.content&&this.setContent(t.content)};var m,g,v;m=f?function(t,e){t.style.webkitTransform=d.formatCSS(e)}:function(t,e){t.style.transform=d.formatCSS(e)},g=f?function(t,e){t.style.webkitTransformOrigin=h(e)}:function(t,e){t.style.transformOrigin=h(e)},v=f?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,1)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,1)",t.style.opacity=0},n.prototype.setup=function(t){var e=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var i=0;i<this.elementClass.length;i++)e.classList.add(this.elementClass[i]);else e.classList.add(this.elementClass);s.call(this,e),g(e,[0,0]),this._currTarget=e,this._stylesDirty=!0,this._classesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._matrix=void 0,this._opacity=void 0,this._origin=void 0,this._size=void 0},n.prototype.commit=function(t){this._currTarget||this.setup(t.allocator);var e=this._currTarget,i=t.transform,n=t.opacity,s=t.origin,o=t.size;if(this.size){var u=o;o=[this.size[0],this.size[1]],void 0===o[0]&&u[0]&&(o[0]=u[0]),void 0===o[1]&&u[1]&&(o[1]=u[1])}if(c(this._size,o)&&(this._size=[o[0],o[1]],this._sizeDirty=!0),!i&&this._matrix)return this._matrix=void 0,this._opacity=0,void v(e);if(this._opacity!==n&&(this._opacity=n,e.style.opacity=Math.min(n,.999999)),c(this._origin,s)||d.notEquals(this._matrix,i)){i||(i=d.identity),s||(s=[0,0]),this._origin=[s[0],s[1]],this._matrix=i;var h=i;s&&(h=d.moveThen([-this._size[0]*s[0],-this._size[1]*s[1]],i)),m(e,h)}if(this._classesDirty||this._stylesDirty||this._sizeDirty||this._contentDirty){if(this._classesDirty){r.call(this,e);for(var l=this.getClassList(),p=0;p<l.length;p++)e.classList.add(l[p]);this._classesDirty=!1}this._stylesDirty&&(a.call(this,e),this._stylesDirty=!1),this._sizeDirty&&(this._size&&(e.style.width=this._size[0]!==!0?this._size[0]+"px":"",e.style.height=this._size[1]!==!0?this._size[1]+"px":""),this._sizeDirty=!1),this._contentDirty&&(this.deploy(e),this.eventHandler.emit("deploy"),this._contentDirty=!1)}},n.prototype.cleanup=function(t){var e=this._currTarget;this.eventHandler.emit("recall"),this.recall(e),e.style.width="",e.style.height="",this._size=void 0,u.call(this,e);var i=this.getClassList();r.call(this,e);for(var n=0;n<i.length;n++)e.classList.remove(i[n]);if(this.elementClass)if(this.elementClass instanceof Array)for(var n=0;n<this.elementClass.length;n++)e.classList.remove(this.elementClass[n]);else e.classList.remove(this.elementClass);o.call(this,e),this._currTarget=void 0,t.deallocate(e),v(e)},n.prototype.deploy=function(t){var e=this.getContent();if(e instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}else t.innerHTML=e},n.prototype.recall=function(t){for(var e=document.createDocumentFragment();t.hasChildNodes();)e.appendChild(t.firstChild);this.setContent(e)},n.prototype.getSize=function(t){return t?this._size:this.size||this._size},n.prototype.setSize=function(t){this.size=t?[t[0],t[1]]:void 0,this._sizeDirty=!0},i.exports=n}.bind(this)),require.register("famous_modules/famous/spec-parser/_git_master/index.js",function(t,e,i){function n(){this.reset()}function s(t,e){return[t[0]*e[0]+t[1]*e[4]+t[2]*e[8],t[0]*e[1]+t[1]*e[5]+t[2]*e[9],t[0]*e[2]+t[1]*e[6]+t[2]*e[10]]}var o=e("famous/transform");n.parse=function(t,e,i){var s=new n,r=s.parse(t,e,o.identity);return i?void i(r):r},n.prototype.parse=function(t,e){return this.reset(),this._parseSpec(t,e,o.identity),this.result},n.prototype.reset=function(){this.result={}};var r=[0,0];n.prototype._parseSpec=function(t,e,i){if(void 0===t);else if("number"==typeof t){var n=t,a=e.transform;if(e.size&&e.origin&&(e.origin[0]||e.origin[1])){var u=[e.origin[0]*e.size[0],e.origin[1]*e.size[1],0];a=o.move(a,s(u,i))}this.result[n]={transform:a,opacity:e.opacity,origin:e.origin||r,size:e.size}}else if(t instanceof Array)for(var c=0;c<t.length;c++)this._parseSpec(t[c],e,i);else if(void 0!==t.target){var h=t.target,a=e.transform,l=e.opacity,p=e.origin,d=e.size;if(void 0!==t.opacity&&(l=e.opacity*t.opacity),t.transform&&(a=o.multiply(e.transform,t.transform)),t.origin&&(p=t.origin),t.size){d=t.size;var f=e.size;f&&p&&(p[0]||p[1])&&(d=[t.size[0]||f[0],t.size[1]||f[1]],a=o.move(a,s([p[0]*f[0],p[1]*f[1],0],i)),a=o.moveThen([-p[0]*d[0],-p[1]*d[1],0],a)),p=null}this._parseSpec(h,{transform:a,opacity:l,origin:p,size:d},e.transform)}},i.exports=n}.bind(this)),require.register("famous_modules/famous/render-node/_git_master/index.js",function(t,e,i){function n(t){this._object=t?t:null,this._child=null,this._hasCached=!1,this._resultCache={},this._prevResults={},this._childResult=null}function s(t,e,i){var n=r.parse(t,e);for(var a in n){var u=o.get(a),c=n[a];c.allocator=e.allocator;var h=u.commit(c);h?s(h,e,i):i[a]=c}}var o=e("famous/entity"),r=e("famous/spec-parser");n.prototype.add=function(t){var e=t instanceof n?t:new n(t);return this._child instanceof Array?this._child.push(e):this._child?(this._child=[this._child,e],this._childResult=[]):this._child=e,e},n.prototype.get=function(){return this._object||this._child.get()},n.prototype.getSize=function(){var t=this.get();return t&&t.getSize?t.getSize():this._child&&this._child.getSize?this._child.getSize():null},n.prototype.commit=function(t){var e=this.render(void 0,this._hasCached);if(e!==!0){for(var i in this._prevResults)if(!(i in this._resultCache)){var n=o.get(i);n.cleanup&&n.cleanup(t.allocator)}this._prevResults=this._resultCache,this._resultCache={},s(e,t,this._resultCache),this._hasCached=!0}},n.prototype.render=function(){if(this._object&&this._object.render)return this._object.render();var t={};if(this._child instanceof Array){t=this._childResult;for(var e=this._child,i=0;i<e.length;i++)t[i]=e[i].render()}else this._child&&(t=this._child.render());return this._object&&this._object.modify&&(t=this._object.modify(t)),t},i.exports=n}.bind(this)),require.register("famous_modules/famous/view/_git_master/index.js",function(t,e,i){function n(t){this._node=new r,this._eventInput=new s,this._eventOutput=new s,s.setInputHandler(this,this._eventInput),s.setOutputHandler(this,this._eventOutput),this.options=Object.create(this.constructor.DEFAULT_OPTIONS||n.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t)}var s=e("famous/event-handler"),o=e("famous/options-manager"),r=e("famous/render-node");n.DEFAULT_OPTIONS={},n.prototype.getOptions=function(){return this._optionsManager.value()},n.prototype.setOptions=function(t){this._optionsManager.patch(t)},n.prototype._add=function(){return this._node.add.apply(this._node,arguments)},n.prototype.render=function(){return this._node.render.apply(this._node,arguments)},n.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},i.exports=n}.bind(this)),require.register("famous_modules/famous/views/header-footer-layout/_git_master/index.js",function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._entityId=a.register(this),this._header=new u,this._footer=new u,this._content=new u,this.id={header:this._header,footer:this._footer,content:this._content}}function s(t,e){var i=t.getSize();return i?i[this.options.direction]:e}function o(t){return this.options.direction==n.DIRECTION_X?c.translate(t,0,0):c.translate(0,t,0)}function r(t,e){return this.options.direction==n.DIRECTION_X?[t,e[1]]:[e[0],t]}var a=e("famous/entity"),u=e("famous/render-node"),c=e("famous/transform");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.DEFAULT_OPTIONS={direction:n.DIRECTION_Y,headerSize:void 0,footerSize:void 0,defaultHeaderSize:0,defaultFooterSize:0},n.prototype.render=function(){return this._entityId},n.prototype.setOptions=function(t){for(var e in n.DEFAULT_OPTIONS)void 0!==t[e]&&(this.options[e]=t[e])},n.prototype.commit=function(t){var e=t.transform,i=t.opacity,n=t.origin,a=t.size,u=void 0!==this.options.headerSize?this.options.headerSize:s.call(this,this._header,this.options.defaultHeaderSize),h=void 0!==this.options.footerSize?this.options.footerSize:s.call(this,this._footer,this.options.defaultFooterSize),l=a[this.options.direction]-u-h,p=[.5,.5],d=[.5,.5];p[this.options.direction]=0,d[this.options.direction]=1;var f=[{origin:p,size:r.call(this,u,a),target:this._header.render()},{transform:o.call(this,u),origin:p,size:r.call(this,l,a),target:this._content.render()},{origin:d,size:r.call(this,h,a),target:this._footer.render()}];e=c.moveThen([-a[0]*n[0],-a[1]*n[1],0],e);var m={transform:e,opacity:i,origin:n,size:a,target:f};return m},i.exports=n}.bind(this)),require.register("famous_modules/famous/element-allocator/_git_master/index.js",function(t,e,i){function n(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}n.prototype.migrate=function(t){var e=this.container;if(t!==e){if(e instanceof DocumentFragment)t.appendChild(e);else for(;e.hasChildNodes();)t.appendChild(e.removeChild(e.firstChild));this.container=t}},n.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var e,i=this.detachedNodes[t];return i.length>0?e=i.pop():(e=document.createElement(t),this.container.appendChild(e)),this.nodeCount++,e},n.prototype.deallocate=function(t){var e=t.nodeName.toLowerCase(),i=this.detachedNodes[e];i.push(t),this.nodeCount--},n.prototype.getNodeCount=function(){return this.nodeCount},i.exports=n}.bind(this)),require.register("famous_modules/famous/transitions/multiple-transition/_git_master/index.js",function(t,e,i){function n(t){this.method=t,this._instances=[],this.state=[]}var s=e("famous/utilities/utility");n.SUPPORTS_MULTIPLE=!0,n.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},n.prototype.set=function(t,e,i){for(var n=s.after(t.length,i),o=0;o<t.length;o++)this._instances[o]||(this._instances[o]=new this.method),this._instances[o].set(t[o],e,n)},n.prototype.reset=function(t){for(var e=0;e<t.length;e++)this._instances[e]||(this._instances[e]=new this.method),this._instances[e].reset(t[e])},i.exports=n}.bind(this)),require.register("famous_modules/famous/transitions/tween-transition/_git_master/index.js",function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function s(t,e,i){return(1-i)*t+i*e}function o(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function r(t,e){var i={curve:e.curve};return e.duration&&(i.duration=e.duration),e.speed&&(i.speed=e.speed),t instanceof Object&&(void 0!==t.duration&&(i.duration=t.duration),t.curve&&(i.curve=t.curve),t.speed&&(i.speed=t.speed)),"string"==typeof i.curve&&(i.curve=n.getCurve(i.curve)),i}function a(t,e,i,n,s){var o,r=1e-7,a=(i(s)-i(s-r))/r;if(t instanceof Array){o=[];for(var u=0;u<t.length;u++)o[u]=a*(t[u]-e[u])/n}else o=a*(t-e)/n;return o}function u(t,e,i){var n;if(t instanceof Array){n=[];for(var o=0;o<t.length;o++)n[o]=s(t[o],e[o],i)}else n=s(t,e,i);return n}var c=e("famous/utilities/utility");n.SUPPORTS_MULTIPLE=!0,n.DEFAULT_OPTIONS={curve:c.Curve.linear,duration:500,speed:0};var h={};n.registerCurve=function(t,e){return h[t]?!1:(h[t]=e,!0)},n.unregisterCurve=function(t){return h[t]?(delete h[t],!0):!1},n.getCurve=function(t){return h[t]},n.getCurves=function(){return h},n.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},n.prototype.set=function(t,e,i){if(!e)return this.reset(t),void(i&&i());if(this._startValue=o(this.get()),e=r(e,this.options),e.speed){var n=this._startValue;if(n instanceof Object){var s=0;for(var a in n)s+=(t[a]-n[a])*(t[a]-n[a]);e.duration=Math.sqrt(s)/e.speed}else e.duration=Math.abs(t-n)/e.speed}this._startTime=Date.now(),this._endValue=o(t),this._startVelocity=o(e.velocity),this._duration=e.duration,this._curve=e.curve,this._active=!0,this._callback=i},n.prototype.reset=function(t,e){if(this._callback){var i=this._callback;this._callback=void 0,i()}this.state=o(t),this.velocity=o(e),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},n.prototype.getVelocity=function(){return this.velocity},n.prototype.get=function(t){return this.update(t),this.state},n.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var e=t-this._startTime;if(e>=this._duration)this.state=this._endValue,this.velocity=a(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>e)this.state=this._startValue,this.velocity=this._startVelocity;else{var i=e/this._duration;this.state=u(this._startValue,this._endValue,this._curve(i)),this.velocity=a(this.state,this._startValue,this._curve,this._duration,i)}}}else if(this._callback){var n=this._callback;this._callback=void 0,n()}},n.prototype.isActive=function(){return this._active},n.prototype.halt=function(){this.reset(this.get())},n.registerCurve("linear",c.Curve.linear),n.registerCurve("easeIn",c.Curve.easeIn),n.registerCurve("easeOut",c.Curve.easeOut),n.registerCurve("easeInOut",c.Curve.easeInOut),n.registerCurve("easeOutBounce",c.Curve.easeOutBounce),n.registerCurve("spring",c.Curve.spring),n.customCurve=function(t,e){return t=t||0,e=e||0,function(i){return t*i+(-2*t-e+3)*i*i+(t+e-2)*i*i*i}},i.exports=n}.bind(this)),require.register("famous_modules/famous/transitions/transitionable/_git_master/index.js",function(t,e,i){function n(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function s(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var e=null,i=this.currentAction[0],n=this.currentAction[1];n instanceof Object&&n.method?(e=n.method,"string"==typeof e&&(e=a[e])):e=r,this._currentMethod!==e&&(this._engineInstance=!(i instanceof Object)||e.SUPPORTS_MULTIPLE===!0||i.length<=e.SUPPORTS_MULTIPLE?new e:new o(e),this._currentMethod=e),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(n.velocity=this.velocity),this._engineInstance.set(i,n,s.bind(this))}var o=(e("famous/utilities/utility"),e("famous/transitions/multiple-transition")),r=e("famous/transitions/tween-transition"),a={};n.registerMethod=function(t,e){return t in a?!1:(a[t]=e,!0)},n.unregisterMethod=function(t){return t in a?(delete a[t],!0):!1},n.prototype.set=function(t,e,i){if(!e)return this.reset(t),i&&i(),this;var n=[t,e];return this.actionQueue.push(n),this.callbackQueue.push(i),this.currentAction||s.call(this),this},n.prototype.reset=function(t,e){this._currentMethod=null,this._engineInstance=null,this.state=t,this.velocity=e,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},n.prototype.delay=function(t,e){this.set(this._engineInstance.get(),{duration:t,curve:function(){return 0}},e)},n.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},n.prototype.isActive=function(){return!!this.currentAction},n.prototype.halt=function(){this.set(this.get())},i.exports=n}.bind(this)),require.register("famous_modules/famous/context/_git_master/index.js",function(t,e,i){function n(t){this.container=t,this.allocator=new a(t),this.srcNode=new o,this.eventHandler=new r,this._size=s(this.container),this.perspectiveState=new c(0),this._perspective=void 0,this.eventHandler.on("resize",function(){this._size=s(this.container)}.bind(this))}function s(t){return[t.clientWidth,t.clientHeight]}var o=e("famous/render-node"),r=e("famous/event-handler"),a=(e("famous/spec-parser"),e("famous/element-allocator")),u=e("famous/transform"),c=e("famous/transitions/transitionable");n.prototype.getAllocator=function(){return this.allocator},n.prototype.add=function(t){return this.srcNode.add(t)},n.prototype.migrate=function(t){t!==this.container&&(this.container=t,this.allocator.migrate(t))},n.prototype.getSize=function(){return this._size},n.prototype.setSize=function(t){t||(t=s(this.container)),this._size=t},n.prototype.update=function(){var t=this.perspectiveState.get();t!==this._perspective&&(this.container.style.perspective=t?t.toFixed()+"px":"",this.container.style.webkitPerspective=t?t.toFixed():"",this._perspective=t),this.srcNode&&this.srcNode.commit({allocator:this.getAllocator(),transform:u.identity,opacity:1,origin:[0,0],size:this._size})},n.prototype.getPerspective=function(){return this.perspectiveState.get()},n.prototype.setPerspective=function(t,e,i){return this.perspectiveState.set(t,e,i)},n.prototype.emit=function(t,e){return this.eventHandler.emit(t,e)},n.prototype.on=function(t,e){return this.eventHandler.on(t,e)},n.prototype.unbind=function(t,e){return this.eventHandler.unbind(t,e)},n.prototype.pipe=function(t){return this.eventHandler.pipe(t)},n.prototype.unpipe=function(t){return this.eventHandler.unpipe(t)},i.exports=n}.bind(this)),require.register("famous_modules/famous/engine/_git_master/index.js",function(t,e,i){function n(){y.runLoop?(u.step(),requestAnimationFrame(n)):m=!1}function s(t){if(!window._disableResize){if(document.activeElement&&"INPUT"==document.activeElement.nodeName)return void document.activeElement.addEventListener("blur",function i(){this.removeEventListener("blur",i),s(t)});window.scrollTo(0,0);for(var e=0;e<c.length;e++)c[e].emit("resize");v.emit("resize")}}var o=e("famous/context"),r=e("famous/event-handler"),a=e("famous/options-manager"),u={},c=[],h=[],l=[],p=Date.now(),d=void 0,f=void 0,m=!0,g={},v=new r,y={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0},b=new a(y);b.on("change",function(t){"fpsCap"===t.id?setFPSCap(t.value):"runLoop"===t.id&&!m&&t.value&&(m=!0,requestAnimationFrame(n))});var _=10;u.step=function(){var t=Date.now();if(!(f&&f>t-p)){d=t-p,p=t,v.emit("prerender");for(var e=0;e<h.length;e++)h[e].call(this);for(h.splice(0);l.length&&Date.now()-t<_;)l.shift().call(this);for(var e=0;e<c.length;e++)c[e].update();v.emit("postrender")}},requestAnimationFrame(n),window.addEventListener("resize",s,!1),s(),window.addEventListener("touchmove",function(t){t.preventDefault()},!1),u.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(u):v.pipe(t)},u.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(u):v.unpipe(t)},u.on=function(t,e){return t in g||(g[t]=v.emit.bind(v,t),document.body.addEventListener(t,g[t])),v.on(t,e)},u.emit=function(t,e){return v.emit(t,e)},u.unbind=function(t,e){return v.unbind(t,e)},u.getFPS=function(){return 1e3/d},u.setFPSCap=function(t){f=Math.floor(1e3/t)},u.getOptions=function(){return b.getOptions.apply(b,arguments)},u.setOptions=function(){return b.setOptions.apply(b,arguments)},u.createContext=function(t){void 0===t?(t=document.createElement(y.containerType),t.classList.add(y.containerClass),document.body.appendChild(t)):t instanceof Element||(t=document.createElement(y.containerType),console.warn("Tried to create context on non-existent element"));var e=new o(t);return u.registerContext(e),e},u.registerContext=function(t){return c.push(t),t},u.nextTick=function(t){h.push(t)},u.defer=function(t){l.push(t)},i.exports=u}.bind(this)),require.register("famous_modules/famous/modifier/_git_master/index.js",function(t,e,i){function n(t){var e=s.identity,i=1,n=void 0,r=void 0;arguments.length>1||arguments[0]instanceof Array?(void 0!==arguments[0]&&(e=arguments[0]),void 0!==arguments[1]&&(i=arguments[1]),n=arguments[2],r=arguments[3]):t&&(t.transform&&(e=t.transform),void 0!==t.opacity&&(i=t.opacity),t.origin&&(n=t.origin),t.size&&(r=t.size)),this.transformTranslateState=new o([0,0,0]),this.transformRotateState=new o([0,0,0]),this.transformSkewState=new o([0,0,0]),this.transformScaleState=new o([1,1,1]),this.opacityState=new o(i),this.originState=new o([0,0]),this.sizeState=new o([0,0]),this._originEnabled=!1,this._sizeEnabled=!1,this.setTransform(e),this.setOpacity(i),this.setOrigin(n),this.setSize(r)}var s=e("famous/transform"),o=e("famous/transitions/transitionable"),r=e("famous/utilities/utility");n.prototype.getTransform=function(){return this.isActive()?s.build({translate:this.transformTranslateState.get(),rotate:this.transformRotateState.get(),skew:this.transformSkewState.get(),scale:this.transformScaleState.get()}):this.getFinalTransform()},n.prototype.getFinalTransform=function(){return this._finalTransform},n.prototype.setTransform=function(t,e,i){var n=i?r.after(4,i):void 0;if(e){if(this._transformDirty){var o=s.interpret(this.getFinalTransform());this.transformTranslateState.set(o.translate),this.transformRotateState.set(o.rotate),this.transformSkewState.set(o.skew),this.transformScaleState.set(o.scale),this._transformDirty=!1}var a=s.interpret(t);this.transformTranslateState.set(a.translate,e,n),this.transformRotateState.set(a.rotate,e,n),this.transformSkewState.set(a.skew,e,n),this.transformScaleState.set(a.scale,e,n)}else this.transformTranslateState.halt(),this.transformRotateState.halt(),this.transformSkewState.halt(),this.transformScaleState.halt(),this._transformDirty=!0;this._finalTransform=t},n.prototype.getOpacity=function(){return this.opacityState.get()},n.prototype.setOpacity=function(t,e,i){this.opacityState.set(t,e,i)},n.prototype.getOrigin=function(){return this._originEnabled?this.originState.get():void 0},n.prototype.setOrigin=function(t,e,i){this._originEnabled=!!t,t||(t=[0,0]),t instanceof Array||(t=r.origins[t]),this.originState.set(t,e,i)},n.prototype.getSize=function(){return this._sizeEnabled?this.sizeState.get():void 0},n.prototype.setSize=function(t,e,i){this._sizeEnabled=!!t,t||(t=[0,0]),this.sizeState.set(t,e,i)},n.prototype.setDefaultTransition=function(t){this.transformTranslateState.setDefault(t),this.transformRotateState.setDefault(t),this.transformSkewState.setDefault(t),this.transformScaleState.setDefault(t),this.opacityState.setDefault(t),this.originState.setDefault(t),this.sizeState.setDefault(t)},n.prototype.halt=function(){this.transformTranslateState.halt(),this.transformRotateState.halt(),this.transformSkewState.halt(),this.transformScaleState.halt(),this.opacityState.halt(),this.originState.halt(),this.sizeState.halt()},n.prototype.isActive=function(){return this.transformTranslateState.isActive()||this.transformRotateState.isActive()||this.transformSkewState.isActive()||this.transformScaleState.isActive()},n.prototype.modify=function(t){return{transform:this.getTransform(),opacity:this.getOpacity(),origin:this.getOrigin(),size:this.getSize(),target:t}},i.exports=n}.bind(this)),require.register("app/custom/light-box/light-box.js",function(t,e,i){function n(t){this.options={inTransform:s.scale(.001,.001,.001),inOpacity:0,inOrigin:[.5,.5],outTransform:s.scale(.001,.001,.001),outOpacity:0,outOrigin:[.5,.5],showTransform:s.identity,showOpacity:1,showOrigin:[.5,.5],inTransition:!0,outTransition:!0,overlap:!1},t&&this.setOptions(t),this._showing=!1,this.nodes=[],this.transforms=[]}var s=e("famous/transform"),o=e("famous/modifier"),r=e("famous/render-node"),a=e("famous/utilities/utility");n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.inTransform&&(this.options.inTransform=t.inTransform),void 0!==t.inOpacity&&(this.options.inOpacity=t.inOpacity),void 0!==t.inOrigin&&(this.options.inOrigin=t.inOrigin),void 0!==t.outTransform&&(this.options.outTransform=t.outTransform),void 0!==t.outOpacity&&(this.options.outOpacity=t.outOpacity),void 0!==t.outOrigin&&(this.options.outOrigin=t.outOrigin),void 0!==t.showTransform&&(this.options.showTransform=t.showTransform),void 0!==t.showOpacity&&(this.options.showOpacity=t.showOpacity),void 0!==t.showOrigin&&(this.options.showOrigin=t.showOrigin),void 0!==t.inTransition&&(this.options.inTransition=t.inTransition),void 0!==t.outTransition&&(this.options.outTransition=t.outTransition),void 0!==t.overlap&&(this.options.overlap=t.overlap)},n.prototype.show=function(t,e,i){if(this.curRenderable=t,!t)return this.hide(i);if(e instanceof Function&&(i=e,e=void 0),this._showing){if(!this.options.overlap)return void this.hide(this.show.bind(this,t,i));this.hide()}this._showing=!0,t.options&&this.setOptions(t.options);var n=new o({transform:this.options.inTransform,opacity:this.options.inOpacity,origin:this.options.inOrigin}),s=new r;s.add(n).add(t),this.nodes.push(s),this.transforms.push(n);var u=i?a.after(3,i):void 0;e||(e=this.options.inTransition),n.setTransform(this.options.showTransform,e,u),n.setOpacity(this.options.showOpacity,e,u),n.setOrigin(this.options.showOrigin,e,u)},n.prototype.hide=function(t,e){if(this._showing){this._showing=!1,t instanceof Function&&(e=t,t=void 0);var i=this.nodes[this.nodes.length-1],n=this.transforms[this.transforms.length-1],s=a.after(3,function(){this.nodes.splice(this.nodes.indexOf(i),1),this.transforms.splice(this.transforms.indexOf(n),1),e&&e.call(this)}.bind(this));t||(t=this.options.outTransition),n.setTransform(this.options.outTransform,t,s),n.setOpacity(this.options.outOpacity,t,s),n.setOrigin(this.options.outOrigin,t,s)}},n.prototype.render=function(){for(var t=[],e=0;e<this.nodes.length;e++)t.push(this.nodes[e].render());
return t},i.exports=n}.bind(this)),require.register("famous_modules/famous/views/light-box/_git_master/index.js",function(t,e,i){function n(t){this.options={inTransform:s.scale(.001,.001,.001),inOpacity:0,inOrigin:[.5,.5],outTransform:s.scale(.001,.001,.001),outOpacity:0,outOrigin:[.5,.5],showTransform:s.identity,showOpacity:1,showOrigin:[.5,.5],inTransition:!0,outTransition:!0,overlap:!1},t&&this.setOptions(t),this._showing=!1,this.nodes=[],this.transforms=[]}var s=e("famous/transform"),o=e("famous/modifier"),r=e("famous/render-node"),a=e("famous/utilities/utility");n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.inTransform&&(this.options.inTransform=t.inTransform),void 0!==t.inOpacity&&(this.options.inOpacity=t.inOpacity),void 0!==t.inOrigin&&(this.options.inOrigin=t.inOrigin),void 0!==t.outTransform&&(this.options.outTransform=t.outTransform),void 0!==t.outOpacity&&(this.options.outOpacity=t.outOpacity),void 0!==t.outOrigin&&(this.options.outOrigin=t.outOrigin),void 0!==t.showTransform&&(this.options.showTransform=t.showTransform),void 0!==t.showOpacity&&(this.options.showOpacity=t.showOpacity),void 0!==t.showOrigin&&(this.options.showOrigin=t.showOrigin),void 0!==t.inTransition&&(this.options.inTransition=t.inTransition),void 0!==t.outTransition&&(this.options.outTransition=t.outTransition),void 0!==t.overlap&&(this.options.overlap=t.overlap)},n.prototype.show=function(t,e,i){if(!t)return this.hide(i);if(e instanceof Function&&(i=e,e=void 0),this._showing){if(!this.options.overlap)return void this.hide(this.show.bind(this,t,i));this.hide()}this._showing=!0;var n=new o({transform:this.options.inTransform,opacity:this.options.inOpacity,origin:this.options.inOrigin}),s=new r;s.add(n).add(t),this.nodes.push(s),this.transforms.push(n);var u=i?a.after(3,i):void 0;e||(e=this.options.inTransition),n.setTransform(this.options.showTransform,e,u),n.setOpacity(this.options.showOpacity,e,u),n.setOrigin(this.options.showOrigin,e,u)},n.prototype.hide=function(t,e){if(this._showing){this._showing=!1,t instanceof Function&&(e=t,t=void 0);var i=this.nodes[this.nodes.length-1],n=this.transforms[this.transforms.length-1],s=a.after(3,function(){this.nodes.splice(this.nodes.indexOf(i),1),this.transforms.splice(this.transforms.indexOf(n),1),e&&e.call(this)}.bind(this));t||(t=this.options.outTransition),n.setTransform(this.options.outTransform,t,s),n.setOpacity(this.options.outOpacity,t,s),n.setOrigin(this.options.outOrigin,t,s)}},n.prototype.render=function(){for(var t=[],e=0;e<this.nodes.length;e++)t.push(this.nodes[e].render());return t},i.exports=n}.bind(this)),require.register("famous_modules/famous/views/edge-swapper/_git_master/index.js",function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._currTarget=void 0,this._size=[window.innerWidth,window.innerHeight],this.lightbox=new a(this.options),this.eventInput=new o,o.setInputHandler(this,this.eventInput),this.id=s.register(this),t&&this.setOptions(t)}var s=e("famous/entity"),o=e("famous/event-handler"),r=e("famous/transform"),a=e("famous/views/light-box");n.DEFAULT_OPTIONS={inOrigin:[0,0],outOrigin:[0,0],showOrigin:[0,0],inTransform:r.translate(window.innerWidth,0,0),outTransform:r.translate(window.innerWidth,0,.01)},n.prototype.show=function(t){this._currTarget&&this.eventInput.unpipe(this._currTarget),this._currTarget=t,this._currTarget&&(this._currTarget.setSize&&this._currTarget.setSize(this._size),this._currTarget.emit&&this.eventInput.pipe(this._currTarget)),this.lightbox.show.apply(this.lightbox,arguments)},n.prototype.setOptions=function(t){this.lightbox.setOptions(t)},n.prototype.render=function(){return this.id},n.prototype.commit=function(t){var e=t.transform,i=t.opacity,n=t.origin,s=t.size;return(s[0]!=this._size[0]||s[1]!=this._size[1])&&(this._size=s,this.lightbox.setOptions({inTransform:r.translate(this._size[0],0,0),outTransform:r.translate(this._size[0],0,.01)}),this._currTarget&&this._currTarget.setSize&&this._currTarget.setSize(s)),{transform:e,opacity:i,origin:n,size:s,target:this.lightbox.render()}},i.exports=n}.bind(this)),require.register("famous_modules/famous/widgets/title-bar/_git_master/index.js",function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this.lightbox=new r,this._surfaces={},t&&this.setOptions(t)}var s=e("famous/transform"),o=e("famous/surface"),r=e("famous/views/light-box");n.DEFAULT_OPTIONS={widget:o,inOrigin:[.5,0],outOrigin:[.5,0],showOrigin:[.5,0],inTransition:!0,outTransition:!0,size:[void 0,50],look:void 0},n.prototype.show=function(t){var e=this.options.widget;if(!(t in this._surfaces)){var i=new e({size:this.options.size});i.setOptions(this.options.look),i.setContent(t),this._surfaces[t]=i}this.lightbox.show(this._surfaces[t])},n.prototype.getSize=function(){return this.options.size},n.prototype.setOptions=function(t){if(this.lightbox.setOptions(t),t.widget&&(this.options.widget=t.widget,this._surfaces={}),t.look&&(this.options.look=t.look),t.size){this.options.size=t.size;var e=s.translate(0,-this.options.size[1]);this.lightbox.setOptions({inTransform:e,outTransform:e})}},n.prototype.render=function(){return this.lightbox.render()},i.exports=n}.bind(this)),require.register("famous_modules/famous/view-sequence/_git_master/index.js",function(t,e,i){function n(t,e,i){this.array=t||[],this.index=e||0,this.loop=i||!1,this._prev=null,this._prevIndex=void 0,this._next=null,this._nextIndex=void 0}function s(t){for(var e=this.index,i=this;i&&e<this.array.length;)i.index+=t,void 0!==i._prevIndex&&(i._prevIndex+=t),void 0!==i._nextIndex&&(i._nextIndex+=t),i=i._next}n.prototype._createPrevious=function(){var t=new this.constructor(this.array,this._prevIndex,this.loop);return t._next=this,t._nextIndex=this.index,t},n.prototype._createNext=function(){var t=new this.constructor(this.array,this._nextIndex,this.loop);return t._prev=this,t._prevIndex=this.index,t},n.prototype.getPrevious=function(){var t=this.index-1;if(0==this.index){if(!this.loop)return null;t=this.array.length-1}return this._prev&&this._prevIndex==t||(this._prevIndex=t,this._prev=this._createPrevious()),this._prev},n.prototype.getNext=function(){var t=this.index+1;if(t>=this.array.length){if(!this.loop)return null;t=0}return this._next&&this._nextIndex==t||(this._nextIndex=t,this._next=this._createNext()),this._next},n.prototype.toString=function(){return this.index},n.prototype.unshift=function(){if(this._prev&&0!==this.index)this._prev.unshift.apply(this._prev,arguments);else{var t=arguments.length;this.array.unshift.apply(this.array,arguments),s.call(this,t)}},n.prototype.push=function(){this.array.push.apply(this.array,arguments)},n.prototype.splice=function(t,e){if(this._prev&&this.index!==t)this._prev.splice.apply(this._prev,arguments);else{var i=this.index>=t?arguments.length-2-e:0;this.array.splice.apply(this.array,arguments),i&&s.call(this,i)}},n.prototype.get=function(){return this.array[this.index]},n.prototype.getSize=function(){var t=this.get();if(t)return t.getSize?t.getSize.apply(t,arguments):null},n.prototype.render=function(){var t=this.get();if(t)return t.render.apply(t,arguments)},i.exports=n}.bind(this)),require.register("famous_modules/famous/views/grid-layout/_git_master/index.js",function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this.optionsManager=new u(this.options),t&&this.setOptions(t),this.id=s.register(this),this._modifiers=[],this._contextSizeCache=[0,0],this._dimensionsCache=[0,0],this._activeCount=0}var s=e("famous/entity"),o=(e("famous/render-node"),e("famous/transform")),r=e("famous/view-sequence"),a=e("famous/modifier"),u=e("famous/options-manager");n.DEFAULT_OPTIONS={dimensions:[1,1],cellSize:[250,250],transition:!1},n.prototype.render=function(){return this.id},n.prototype.setOptions=function(t){return this.optionsManager.setOptions(t)},n.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new r(t)),this.sequence=t},n.prototype.commit=function(t){var e=t.transform,i=t.opacity,n=t.origin,s=t.size,r=this.options.dimensions[0],u=this.options.dimensions[1];if(s[0]!==this._contextSizeCache[0]||s[1]!==this._contextSizeCache[1]||r!==this._dimensionsCache[0]||u!==this._dimensionsCache[1]){u||(u=Math.floor(s[1]/this.options.cellSize[1])),r||(r=Math.floor(s[0]/this.options.cellSize[0]));for(var c=s[1]/u,h=s[0]/r,l=0;u>l;l++)for(var p=Math.round(c*l),d=0;r>d;d++){var f=Math.round(h*d),m=l*r+d;m in this._modifiers||(this._modifiers[m]=new a({opacity:0}));var g=this._modifiers[m];g.halt(),g.setTransform(o.translate(f,p),this.options.transition),g.setSize([Math.round(h*(d+1))-f,Math.round(c*(l+1))-p],this.options.transition),g.setOpacity(1,this.options.transition)}this._dimensionsCache=[this.options.dimensions[0],this.options.dimensions[1]],this._contextSizeCache=[s[0],s[1]],this._activeCount=u*r;for(var l=this._activeCount;l<this._modifiers.length;l++){var g=this._modifiers[l];g.halt(),g.setTransform(o.identity,this.options.transition),g.setSize([Math.round(h),Math.round(c)],this.options.transition),g.setOpacity(0,this.options.transition)}}for(var v=this.sequence,y=[],m=0;v&&m<this._modifiers.length;){var b=v.get(),_=this._modifiers[m];m>=this._activeCount&&!_.isActive()&&this._modifiers.splice(m),b&&(y[m]=_.modify({origin:n,target:b.render()})),v=v.getNext(),m++}s&&(e=o.moveThen([-s[0]*n[0],-s[1]*n[1],0],e));var w={transform:e,opacity:i,size:s,target:y};return w},i.exports=n}.bind(this)),require.register("famous_modules/famous/views/fader/_git_master/index.js",function(t,e,i){function n(t,e){this.options={cull:!1,transition:!0,pulseInTransition:!0,pulseOutTransition:!0,visibilityThreshold:0},t&&this.setOptions(t),e||(e=0),this.transitionHelper=new s(e)}var s=e("famous/transitions/transitionable");n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.cull&&(this.options.cull=t.cull),void 0!==t.transition&&(this.options.transition=t.transition),void 0!==t.pulseInTransition&&(this.options.pulseInTransition=t.pulseInTransition),void 0!==t.pulseOutTransition&&(this.options.pulseOutTransition=t.pulseOutTransition),void 0!==t.visibilityThreshold&&(this.options.visibilityThreshold=t.visibilityThreshold)},n.prototype.show=function(t){this.set(1,this.options.transition,t)},n.prototype.hide=function(t){this.set(0,this.options.transition,t)},n.prototype.pulse=function(t,e){void 0===t&&(t=1);var i=this.transitionHelper.get();this.transitionHelper.set(t,this.options.pulseInTransition),this.transitionHelper.set(i,this.options.pulseOutTransition,e)},n.prototype.set=function(t,e,i){this.transitionHelper.halt(),this.transitionHelper.set(t,e,i)},n.prototype.render=function(t){var e=this.transitionHelper.get();return this.options.cull&&!e?void 0:{opacity:e,target:t}},n.prototype.isVisible=function(){var t=this.options.visibilityThreshold;return t>=1?1==this.transitionHelper.get():this.transitionHelper.get()>t},i.exports=n}.bind(this)),require.register("famous_modules/famous/views/image-fader/_git_master/index.js",function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._nodes=[],this._faders=[],this._mode=-1,t&&this.setOptions(t),this._output=[]}var s=e("famous/render-node"),o=e("famous/views/fader"),r=e("famous/transform");n.DEFAULT_OPTIONS={crossfade:!1},n.prototype.getMode=function(){return this._mode},n.prototype.setMode=function(t,e,i){if(this._mode=t,this.options.crossfade){for(var n=0;n<this._faders.length;n++)this._faders[n].set(0,e);this._faders[t].set(1,e,i)}else this._faders[t].set(1,e,function(){if(this._mode==t){for(var e=0;e<this._faders.length;e++)e!=t&&this._faders[e].set(0);i&&i()}}.bind(this))},n.prototype.forMode=function(t){return this._nodes[t]||(this._nodes[t]=new s,this._faders[t]=new o(this.options)),this._nodes[t]},n.prototype.setOptions=function(t){void 0!==t.crossfade&&(this.options.crossfade=t.crossfade)},n.behindMatrix=r.translate(0,0,-.01),n.prototype.render=function(){this._nodes.length>this._output.length&&this._output.splice(this._nodes.length);for(var t=0;t<this._nodes.length;t++){var e=this._faders[t].render(this._nodes[t].render());t!==this._mode&&(e={transform:n.behindMatrix,target:e}),this._output[t]=e}return this._output},i.exports=n}.bind(this)),require.register("famous_modules/famous/widgets/toggle-button/_git_master/index.js",function(t,e,i){function n(t){this.options={content:"",offClasses:["off"],onClasses:["on"],size:void 0,outTransition:{curve:"easeInOut",duration:300},inTransition:{curve:"easeInOut",duration:300},toggleMode:n.TOGGLE,crossfade:!1},this.eventOutput=new o,o.setOutputHandler(this,this.eventOutput),this.offSurface=new s,this.offSurface.on("click",function(){this.options.toggleMode!==n.OFF&&this.select()}.bind(this)),this.offSurface.pipe(this.eventOutput),this.onSurface=new s,this.onSurface.on("click",function(){this.options.toggleMode!==n.ON&&this.deselect()}.bind(this)),this.onSurface.pipe(this.eventOutput),this.arbiter=new r({crossfade:this.options.crossfade}),this.arbiter.forMode(n.OFF).add(this.offSurface),this.arbiter.forMode(n.ON).add(this.onSurface),this.arbiter.setMode(n.OFF),this.selected=!1,t&&this.setOptions(t)}var s=e("famous/surface"),o=e("famous/event-handler"),r=e("famous/views/image-fader");n.OFF=0,n.ON=1,n.TOGGLE=2,n.prototype.select=function(){this.selected=!0,this.arbiter.setMode(n.ON,this.options.inTransition),this.eventOutput.emit("select")},n.prototype.deselect=function(){this.selected=!1,this.arbiter.setMode(n.OFF,this.options.outTransition),this.eventOutput.emit("deselect")},n.prototype.isSelected=function(){return this.selected},n.prototype.setOptions=function(t){void 0!==t.content&&(this.options.content=t.content,this.offSurface.setContent(this.options.content),this.onSurface.setContent(this.options.content)),t.offClasses&&(this.options.offClasses=t.offClasses,this.offSurface.setClasses(this.options.offClasses)),t.onClasses&&(this.options.onClasses=t.onClasses,this.onSurface.setClasses(this.options.onClasses)),void 0!==t.size&&(this.options.size=t.size,this.onSurface.setSize(this.options.size),this.offSurface.setSize(this.options.size)),void 0!==t.toggleMode&&(this.options.toggleMode=t.toggleMode),void 0!==t.outTransition&&(this.options.outTransition=t.outTransition),void 0!==t.inTransition&&(this.options.inTransition=t.inTransition),void 0!==t.crossfade&&(this.options.crossfade=t.crossfade,this.arbiter.setOptions({crossfade:this.options.crossfade}))},n.prototype.getSize=function(){return this.options.size},n.prototype.render=function(){return this.arbiter.render()},i.exports=n}.bind(this)),require.register("famous_modules/famous/widgets/tab-bar/_git_master/index.js",function(t,e,i){function n(){a.apply(this,arguments),this.layout=new u,this.buttons=[],this._buttonIds={},this._buttonCallbacks={},this.layout.sequenceFrom(this.buttons),this._add(this.layout),this._optionsManager.on("change",s.bind(this))}function s(t){var e=t.id,i=t.value;if("direction"===e)this.layout.setOptions({dimensions:o.call(this.buttons.length,this.options.direction)});else if("buttons"===e)for(var n in this.buttons)this.buttons[n].setOptions(i);else if("sections"===e)for(var e in this.options.sections)this.defineSection(e,this.options.sections[e])}function o(t,e){return e===r.Direction.X?[t,1]:[1,t]}var r=(e("famous/event-handler"),e("famous/utilities/utility")),a=e("famous/view"),u=e("famous/views/grid-layout"),c=e("famous/widgets/toggle-button");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={sections:[],widget:c,size:[void 0,50],direction:r.Direction.X,buttons:{toggleMode:c.ON}},n.prototype.defineSection=function(t,e){var i,n=this._buttonIds[t];if(void 0===n){n=this.buttons.length,this._buttonIds[t]=n;var s=this.options.widget;i=new s,this.buttons[n]=i,this.layout.setOptions({dimensions:o(this.buttons.length,this.options.direction)})}else i=this.buttons[n],i.unbind("select",this._buttonCallbacks[t]);this.options.buttons&&i.setOptions(this.options.buttons),i.setOptions(e),this._buttonCallbacks[t]=this.select.bind(this,t),i.on("select",this._buttonCallbacks[t])},n.prototype.select=function(t){var e=this._buttonIds[t];this.buttons[e]&&this.buttons[e].isSelected()?this._eventOutput.emit("select",{id:t}):this.buttons[e]&&this.buttons[e].select();for(var i=0;i<this.buttons.length;i++)i!=e&&this.buttons[i].deselect()},i.exports=n}.bind(this)),require.register("famous_modules/famous/group/_git_master/index.js",function(t,e,i){function n(t){r.call(this,t),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new s(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0],this._origin=void 0,this._originTransfer={render:function(t){return{origin:this._origin,target:t}}.bind(this)}}var s=e("famous/context"),o=e("famous/transform"),r=e("famous/surface");n.SIZE_ZERO=[0,0],n.prototype=Object.create(r.prototype),n.prototype.elementType="div",n.prototype.elementClass="famous-group",n.prototype.add=function(){var t=this.context.add(this._originTransfer);return t.add.apply(t,arguments)},n.prototype.add=function(){return this.context.add.apply(this.context,arguments)},n.prototype.render=function(){return r.prototype.render.call(this)},n.prototype.deploy=function(t){this.context.migrate(t)},n.prototype.recall=function(){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},n.prototype.commit=function(t){var e=t.transform,i=t.opacity,s=t.origin,a=t.size;e=o.moveThen([-s[0]*a[0],-s[1]*a[1],0],e);var u=r.prototype.commit.call(this,t,e,i,s,n.SIZE_ZERO);return this._origin=s,(a[0]!=this._groupSize[0]||a[1]!=this._groupSize[1])&&(this.context.setSize(a),this._groupSize[0]=a[0],this._groupSize[1]=a[1]),this.context.update(),u},i.exports=n}.bind(this)),require.register("famous_modules/famous/input/mouse-sync/_git_master/index.js",function(t,e,i){function n(t,e){this.targetGet=t,this.options={direction:void 0,rails:!1,scale:1,stallTime:50,propogate:!0},this.setOptions(e?e:this.options),this.input=new u,this.output=new u,u.setInputHandler(this,this.input),u.setOutputHandler(this,this.output),this._prevCoord=void 0,this._prevTime=void 0,this._prevVel=void 0,this.input.on("mousedown",s.bind(this)),this.input.on("mousemove",o.bind(this)),this.input.on("mouseup",r.bind(this)),this.options.propogate?this.input.on("mouseleave",a.bind(this)):this.input.on("mouseleave",r.bind(this))}function s(t){t.preventDefault(),this._prevCoord=[t.clientX,t.clientY],this._prevTime=Date.now(),this._prevVel=void 0!==this.options.direction?0:[0,0],this.output.emit("start")}function o(t){if(this._prevCoord){var e=this._prevCoord,i=this._prevTime,s=[t.clientX,t.clientY],o=Date.now(),r=s[0]-e[0],a=s[1]-e[1];this.options.rails&&(Math.abs(r)>Math.abs(a)?a=0:r=0);var u,c,h=Math.max(o-i,8),l=r/h,p=a/h,d=this.targetGet(),f=this.options.scale;this.options.direction==n.DIRECTION_X?(u=d+f*r,c=f*l):this.options.direction==n.DIRECTION_Y?(u=d+f*a,c=f*p):(u=[d[0]+f*r,d[1]+f*a],c=[f*l,f*p]),this.output.emit("update",{p:u,v:c}),this._prevCoord=s,this._prevTime=o,this._prevVel=c}}function r(){if(this._prevCoord){var t=this._prevTime,e=Date.now();e-t>this.options.stallTime&&(this._prevVel=void 0==this.options.direction?[0,0]:0);var i=this.targetGet();this.output.emit("end",{p:i,v:this._prevVel}),this._prevCoord=void 0,this._prevTime=void 0,this._prevVel=void 0}}function a(){if(this._prevCoord){var t=function(t){o.call(this,t)}.bind(this),e=function(i){r.call(this,i),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",e)}.bind(this);document.addEventListener("mousemove",t),document.addEventListener("mouseup",e)}}var u=e("famous/event-handler");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime),void 0!==t.propogate&&(this.options.propogate=t.propogate)},i.exports=n}.bind(this)),require.register("app/custom/up-down-transform/up-down-transform.js",function(t,e,i){function n(){this.options={inTransform:s.translate(0,1500,0),inOpacity:1,inOrigin:[.5,.5],outTransform:s.translate(0,600,0),outOpacity:1,outOrigin:[.5,.5],showTransform:s.identity,showOpacity:1,showOrigin:[.5,.5],inTransition:{duration:500,curve:o.inQuad()},outTransition:{duration:100,curve:o.outQuint()},overlap:!0}}var s=e("famous/transform"),o=e("famous/transitions/easing");i.exports=n}.bind(this)),require.register("app/custom/conversation-surface/conversation-surface.js",function(t,e,i){function n(){s.apply(this,arguments),this.setSize([void 0,!0])}var s=e("famous/surface");n.prototype=Object.create(s.prototype),n.prototype.deploy=function(t){s.prototype.deploy.apply(this,arguments),this.__size=[t.offsetWidth,t.offsetHeight]},n.prototype.getSize=function(){return this.__size||this._size||this.size},i.exports=n}.bind(this)),require.register("app/custom/sound-player/sound-player.js",function(t,e,i){function n(t,e){this.context,this.node,this.buffersActive=[];try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.context=new AudioContext,this.bufferLoader=new s(this.context,t,this.setSounds.bind(this)),this.sounds,this.callback=e||void 0,this.bufferLoader.load()}catch(i){}}var s=e("buffer-loader");n.prototype.setSounds=function(t){this.sounds=t,void 0!=this.callback&&this.callback()},n.prototype.isPlaying=function(){return this.buffersActive.length>0?!0:!1},n.prototype.stopPlaying=function(){var t=this.buffersActive.length;if(t>0)for(var e=0;t>e;e++){var i=this.buffersActive[e];i.stop(0)}},n.prototype.getContext=function(){return this.context},n.prototype.addNode=function(t){this.node=t},n.prototype.playSound=function(t,e,i){if(this.context&&this.sounds){var n=this.context.createBufferSource(),s=this.context.createGainNode?this.context.createGainNode():this.context.createGain();s.gain.value="undefined"==typeof e?.5:e,n.buffer=this.sounds[t],n.connect(s);var o=s;this.node&&(o.connect(this.node),o=this.node),o.connect(this.context.destination),n.start(0),n.onended=function(){var t=this.buffersActive.indexOf(n);-1!==t&&this.buffersActive.splice(t,1),i&&i()}.bind(this,n),this.buffersActive.push(n)}},i.exports=n}.bind(this)),require.register("app/custom/sound-player/buffer-loader.js",function(t,e,i){function n(t,e,i){this.context=t,this.urlList=e,this.onload=i,this.bufferList=[],this.loadCount=0}n.prototype.loadBuffer=function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer";var n=this;i.onload=function(){n.context.decodeAudioData(i.response,function(i){return i?(n.bufferList[e]=i,void(++n.loadCount==n.urlList.length&&n.onload(n.bufferList))):void console.log("error decoding file data: "+t)})},i.onerror=function(){console.log("BufferLoader: XHR error")},i.send()},n.prototype.load=function(){for(var t=0;t<this.urlList.length;++t)this.loadBuffer(this.urlList[t],t)},i.exports=n}.bind(this)),require.register("famous_modules/famous/input/touch-tracker/_git_master/index.js",function(t,e,i){function n(t){this.selective=t,this.touchHistory={},this.eventInput=new c,this.eventOutput=new c,c.setInputHandler(this,this.eventInput),c.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",o.bind(this)),this.eventInput.on("touchmove",r.bind(this)),this.eventInput.on("touchend",a.bind(this)),this.eventInput.on("touchcancel",a.bind(this)),this.eventInput.on("unpipe",u.bind(this))}function s(t,e,i,n){var s={};for(var o in t)s[o]=t[o];return{touch:s,origin:e,timestamp:Date.now(),count:n,history:i}}function o(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],n=s(i,t.origin,void 0,t.touches.length);this.eventOutput.emit("trackstart",n),this.selective||this.touchHistory[i.identifier]||this.track(n)}}function r(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],n=this.touchHistory[i.identifier];if(n){var o=s(i,t.origin,n,t.touches.length);this.touchHistory[i.identifier].push(o),this.eventOutput.emit("trackmove",o)}}}function a(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],n=this.touchHistory[i.identifier];if(n){var o=s(i,t.origin,n,t.touches.length);this.eventOutput.emit("trackend",o),delete this.touchHistory[i.identifier]}}}function u(){for(var t in this.touchHistory){var e=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:e[e.length-1].touch,timestamp:Date.now(),count:0,history:e}),delete this.touchHistory[t]}}var c=e("famous/event-handler");n.prototype.track=function(t){this.touchHistory[t.touch.identifier]=[t]},i.exports=n}.bind(this)),require.register("famous_modules/famous/input/touch-sync/_git_master/index.js",function(t,e,i){function n(t,e){this.targetGet=t,this.output=new u,this.touchTracker=new a,this.options={direction:void 0,rails:!1,scale:1},this.setOptions(e?e:this.options),u.setOutputHandler(this,this.output),u.setInputHandler(this,this.touchTracker),this.touchTracker.on("trackstart",s.bind(this)),this.touchTracker.on("trackmove",o.bind(this)),this.touchTracker.on("trackend",r.bind(this))}function s(t){this.output.emit("start",{count:t.count,touch:t.touch.identifier})}function o(t){var e=t.history,i=e[e.length-2].timestamp,s=e[e.length-1].timestamp,o=e[e.length-2].touch,r=e[e.length-1].touch,a=r.pageX-o.pageX,u=r.pageY-o.pageY;this.options.rails&&(Math.abs(a)>Math.abs(u)?u=0:a=0);var c=Math.max(s-i,8),h=a/c,l=u/c;if(e.length>2)var p=e[e.length-3].touch,d=(r.pageX-2*o.pageX+p.pageX)/(c*c),f=(r.pageY-2*o.pageY+p.pageY)/(c*c);else var d=0,f=0;var m,g,v,y=this.targetGet(),b=this.options.scale;this.options.direction==n.DIRECTION_X?(m=y+b*a,g=b*h,v=b*l):this.options.direction==n.DIRECTION_Y?(m=y+b*u,g=b*l,v=b*f):(m=[y[0]+b*a,y[1]+b*u],g=[b*h,b*l],v=[b*d,b*f]),this.output.emit("update",{p:m,v:g,a:v,touch:t.touch.identifier})}function r(t){var e=void 0!==this.options.direction?0:[0,0],i=t.history,s=t.count,o=this.targetGet();if(i.length>1){var r=i[i.length-2].timestamp,a=i[i.length-1].timestamp,u=i[i.length-2].touch,c=i[i.length-1].touch,h=c.pageX-u.pageX,l=c.pageY-u.pageY;this.options.rails&&(Math.abs(h)>Math.abs(l)?l=0:h=0);var e,p=Math.max(a-r,1),d=h/p,f=l/p,m=this.options.scale;e=this.options.direction==n.DIRECTION_X?m*d:this.options.direction==n.DIRECTION_Y?m*f:[m*d,m*f]}this.output.emit("end",{p:o,v:e,count:s,touch:t.touch.identifier})}var a=e("famous/input/touch-tracker"),u=e("famous/event-handler");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale)},n.prototype.getOptions=function(){return this.options},i.exports=n}.bind(this)),require.register("app/custom/helpers/helpers.js",function(t,e,i){var n=e("famous/input/mouse-sync"),s=e("famous/input/touch-sync");i.exports={timeAgo:function(t){var e=Date.now(),i=e-t,n=6e4,s=60*n,o=24*s;if(n>i)return"Just Now";if(s>i){var r=~~(i/n);return r+"m ago"}if(o>i){var a=~~(i/s);return a+"h ago"}var u=~~(i/o);return u+"d ago"},timeSince:function(t){var e=Date.now(),i=new Date(t),n=e-e%864e5;return t>=n?i.toTimeString().split(" ")[0].substring(0,5):t>=n-864e5&&n>t?"yesterday":t>=n-6048e5&&n-864e5>t?i.toDateString().split(" ")[0]:i.toLocaleDateString()},capitalize:function(t){return t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()},isDev:_.memoize(function(){return 0==window.location.host.indexOf("localhost:3")}),isMobile:_.memoize(function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)}),isIPhone:_.memoize(function(){return/iPhone/i.test(navigator.userAgent)}),deviceSync:_.memoize(function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)?s:n}),linkify:function(t){var e=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;return t.replace(e,function(t){return'<a href="'+t+'">'+t+"</a>"})}}}.bind(this)),require.register("app/custom/templates/templates.js",function(t,e,i){var n=e("helpers"),s=e("famous/utilities/utility");i.exports={toggleSwitch:function(t,e,i){var n=['<div class="onoffswitch">','<input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="',t,'" '];return e&&n.push("checked "),i&&n.push("disabled "),n.push('><label class="onoffswitch-label'),i&&n.push(" disabled"),n=n.concat(['" for="',t,'">','<div class="onoffswitch-inner"></div>','<div class="onoffswitch-switch"></div>',"</label>","</div>"]),n.join("")},toggleButton:function(t){t.id||(t.id="toggleButton"+Math.floor(1e5*Math.random())),t.classes||(t.classes=[]);var e=['<div class="onoffbutton '+t.classes.join(" ")+'">','<input type="checkbox" name="onoffbutton" class="onoffbutton-checkbox"'];return t.id&&e.push(' id="'+t.id+'" '),t.checked&&e.push("checked"),e.push('><label class="onoffbutton-label" for="'+t.id+'"'),t.size&&(e=e.concat(['style="width:'+t.size[0]+"px;","line-height:"+t.size[1]+'px;"'])),e.push('><div class="onoffbutton-on"'),t.onBackgroundColor&&e.push('style="background-color:'+t.onBackgroundColor+';"'),e.push(">"+t.onContent+"</div>"),e.push('<div class="onoffbutton-off"'),t.offBackgroundColor&&e.push('style="background-color:'+t.offBackgroundColor+';"'),e=e.concat([">"+t.offContent+"</div>","</label>","</div>"]),e.join("")},deleteButton:function(){return'<button class="delete-button fa fa-trash-o fa-lg"></button>'},addButton:function(t){return'<i class="fa fa-plus add-button" id="'+t+'"></i>'},plusButton:function(t){return['<span class="fa-stack fa-lg delete-button2" id="',t,'"><i class="fa fa-circle fa-stack"></i>','<i class="fa fa-plus fa-stack"></i>',"</span>"].join("")},phoneButton:function(t){return['<span class="fa-stack fa-lg phone-button touchable" id="',t,'"><i class="fa fa-square fa-stack-2x fa-background"></i>','<i class="fa fa-phone fa-stack-1x fa-frontground"></i>',"</span>"].join("")},removeButton:function(t){return'<i class="fa fa-times remove-button" id="'+t+'"></i>'},editButton:function(t){return['<span class="fa-stack edit-button2" id="',t,'"><i class="fa fa-circle-o fa-stack-2x fa-background"></i>','<i class="fa fa-info fa-stack-1x fa-frontground"></i>',"</span>"].join("")},crossButton:function(t){return['<span class="fa-stack delete-button2" id="',t,'"><i class="fa fa-circle-o fa-stack-2x fa-background"></i>','<i class="fa fa-times fa-stack-1x fa-frontground"></i>',"</span>"].join("")},favoriteButton2:function(t,e){var i=['<span class="fa-stack favorite-button2" id="',e,'"><i class="fa fa-circle fa-stack-2x fa-background"></i>','<i class="fa fa-star fa-stack-1x fa-frontground'];return t&&i.push(" active"),i.push('"></i></span>'),i.join("")},nextButton:function(t){return'<i class="arrow fa fa-angle-right fa-lg import-contact" id="'+t+'"></i>'},favoriteButton:function(t){var e=['<i class="favorite-button fa fa-star fa-2x'];return t&&e.push(" active"),e.push('"></i>'),e.join("")},button:function(t){t.id||(t.id="button"+Math.floor(1e5*Math.random())),t.classes||(t.classes=[]);var e=['<button class="button '+t.classes.join(" ")+'" style="'];return t.size&&(e=e.concat(["width:"+t.size[0]+"px;","height:"+t.size[1]+"px;","line-height:"+t.size[1]+"px;"])),e.push('">'+t.content+"</button>"),e.join("")},itemFrame:function(t,e){var i=window.innerWidth-t-e;return['<div class="item-frame" style="width: ',i,"px; margin-left: ",t,"px; margin-right: ",e,'px"></div>'].join("")},itemFrame2:function(t,e,i,n){var s=window.innerWidth-i-n,o=t?_(t).map(function(t){return t.content}).join(""):"",r=e?e.content:"";return['<div class="item-frame item-view-2S" style="width: ',s,"px; margin-left: ",i,"px; margin-right: ",n,'px">',o,r,"</div>"].join("")},recentItemView:function(t){var e;e=t.get("firstname")||t.get("lastname")?t.get("firstname")+" <b>"+t.get("lastname")+"</b>":t.get(t.get("email")?"email":"phone");var i="",s="";return"outgoing"==t.get("type")?i='<i class="fa fa-sign-out"></i>':t.get("success")||(s="missed"),['<div style = " width: ',window.innerWidth,'px"><div class="source ',s,'"><div class="call-type">',i,"</div>",e,'<div class="call-time">',n.timeSince(t.get("time")),"</div></div></div>"].join("")
},chatItemView:function(t){var e,i="";return t.get("firstname")||t.get("lastname")?(e=t.get("firstname")+" <b>"+t.get("lastname")+"</b>",t.get("firstname")&&(i=t.get("firstname")[0]),t.get("lastname")&&(i+=t.get("lastname")[0])):t.get("email")?(e=t.get("email"),e&&(i=e[0])):(e=t.get("phone"),e&&(i=e[0])),['<div style = " width: ',window.innerWidth,'px"><div class="source"><div class="initial ',t.get("read")?"":"unread",'">',i,"</div>",e,'<div class="call-time">',n.timeSince(t.get("time")),"</div>",'<div class="message">',t.get("content"),"</div></div>"].join("")},contactItemView:function(t){var e;e=t.get("firstname")||t.get("lastname")?[t.get("firstname")," <b>",t.get("lastname"),"</b>"].join(""):t.get(t.get("email")?"email":"phone");var i=['<div style = " width: ',window.innerWidth,'px"><div class="source">',e].join("");return t.attributes.phone&&(i=[i,'<i class="fa fa-phone contact-icon"></i>'].join("")),t.attributes.email&&(i=[i,'<i class="fa fa-envelope contact-icon"></i>'].join("")),t.attributes.facebook&&(i=[i,'<i class="fa fa-facebook-square contact-icon"></i>'].join("")),t.attributes.google&&(i=[i,'<i class="fa fa-google-plus-square contact-icon"></i>'].join("")),t.attributes.twitter&&(i=[i,'<i class="fa fa-twitter-square contact-icon"></i>'].join("")),t.attributes.github&&(i=[i,'<i class="fa fa-github-square contact-icon"></i>'].join("")),t.attributes.linkedin&&(i=[i,'<i class="fa fa-linkedin-square contact-icon"></i>'].join("")),t.attributes.yammer&&(i=[i,'<i class="fa fa-yammer-todo contact-icon"></i>'].join("")),i=[i,"</div></div>"].join("")},favoriteItemView:function(t){var e,i="";return t.get("firstname")||t.get("lastname")?(e=t.get("firstname")+" <b>"+t.get("lastname")+"</b>",t.get("firstname")&&(i=t.get("firstname")[0]),t.get("lastname")&&(i+=t.get("lastname")[0])):t.get("email")?(e=t.get("email"),e&&(i=e[0])):(e=t.get("phone"),e&&(i=e[0])),['<div style = " width: ',window.innerWidth,'px"><div class="source"><div class="initial">',i,"</div>",e,"</div></div>"].join("")},headerItemView:function(t,e,i){var n=window.innerWidth-e-i;return['<div class="header-view" style="width: ',n,"px; margin-left: ",e,"px; margin-right: ",i,'px">',t,"</div>"].join("")},fateHeaderItemView:function(t,e){var i=window.innerWidth-t-e;return['<div class="header-view" style="width: ',i,"px; margin-left: ",t,"px; margin-right: ",e,'px"></div>'].join("")},socialItemView:function(t){var e;e=t.get("firstname")||t.get("lastname")?[t.get("firstname")," <b>",t.get("lastname"),"</b>"].join(""):t.get(t.get("email")?"email":"phone");var i=['<div style = " width: ',window.innerWidth,'px"><div class="source">',e].join("");return i=[i,"</div></div>"].join("")},editContactHeader:function(t){return['<button class="left close-button cancel-contact touchable" id="close-button">Cancel</button><div>',t,'</div><button class="right close-button done-contact touchable">Done</button>'].join("")},recentsHeader:function(){var t=['<div class="recent-toggle"><input type="radio" id="all" name="recents-toggle" value="all" checked>','<label for="all" class="first" id="recent-toggle">all</label>','<input type="radio" id="missed" name="recents-toggle" value="missed">','<label for="missed" class="last" id="recent-toggle">missed</label></div>','<button class="right clear-button" id="clear-button"></button>'];return n.isMobile()||(t=['<button class="left edit-button touchable" id="recent-edit-contact"></button>'].concat(t)),t.join("")},chatsHeader:function(){var t=["<div>Messages</div>"];return n.isMobile()||(t=['<button class="left edit-button touchable" id="chats-edit-contact"></button>'].concat(t)),t.join("")},favoriteHeader:function(){return n.isMobile()?"<div>Favorites</div>":'<button class="left edit-button touchable" id="favorite-edit-contact"></button><div>Favorites</div>'},contactHeader:function(){var t=["<div>All Contacts</div>",'<button class="right add-contact touchable" id="add-contact">','<i class="fa fa-plus" id="add-contact"></i>',"</button>"];return n.isMobile()||(t=['<button class="left edit-button touchable" id="contact-edit-contact"></button>'].concat(t)),t.join("")},dialHeader:function(){return"<div></div>"},dialNumber:function(t,e){var i=['<div class="dial-number">',t].join("");return e&&(i=[i,'<div class="dial-number-abc">',e,"</div>"].join("")),i=[i,"</div>"].join("")},dialOutputView:function(t){return['<div class="dial-output-view">',t,"</div>"].join("")},dialOutputViewMatchContact:function(t){var e;return e=t.get("firstname")||t.get("lastname")?t.get("firstname")+" <b>"+t.get("lastname")+"</b>":t.get(t.get("email")?"email":"phone"),['<div class="dial-output-view-match-contact">',e,"</div>"].join("")},dialOutputViewButton:function(){return['<div class="dial-output-view-button">','<i class="fa fa-plus add-button touchable"></i>','<i class="fa fa-caret-square-o-left delete-num-button touchable"></i></div>'].join("")},conversationViewHeader:function(t){var e;return e=t?t.get("firstname")||t.get("lastname")?[t.get("firstname")," <b>",t.get("lastname"),"</b>"].join(""):t.get("email"):"Shana <b> Ho </b>",['<div class="touchable"><i class="fa fa-chevron-left fa-lg"></i><span class="conversation-callee">',e,"</span></div>"].join("")},conversationInputBar:function(){return['<div><button class="fa fa-comments-o menu-toggle-button fade"></button>','<button class="fa fa-phone menu-end-button"></button>','<textarea class="input-msg" name="message"></textarea>','<button class="send-text-button">Send</button></div>'].join("")},settingsPage:function(t){var e=['<div class="box">','<div class="info">'+t.get("firstname")+" "+t.get("lastname"),'<button class="logout-button touchable">Log Out</button></div>','<div class="desc"></div>','<div class="info">ID: '+t.get("username")+"</div>",'<div class="desc"></div>','<div class="info">Camera ',this.toggleSwitch("camera",t.get("camera"))+"</div>",'<div class="info">Blur ',this.toggleSwitch("blur",t.get("blur"))+"</div>"];return s.isMobile()||(e.push('<div class="info">Notification '),e.push(this.toggleSwitch("notification",t.get("notification"))+"</div>")),e=e.concat(['<div class="desc">YOU CAN BE REACHED AT</div>','<div class="info">Facebook ',this.toggleSwitch("facebook",t.get("linkAccounts").facebook)+"</div>",'<div class="info">Google ',this.toggleSwitch("google",t.get("linkAccounts").google)+"</div>",'<div class="info">Twitter ',this.toggleSwitch("twitter",t.get("linkAccounts").twitter)+"</div>",'<div class="info">Linkedin ',this.toggleSwitch("linkedin",t.get("linkAccounts").linkedin)+"</div>",'<div class="info">Github ',this.toggleSwitch("github",t.get("linkAccounts").github)+"</div>",'<div class="info">Yammer ',this.toggleSwitch("yammer",t.get("linkAccounts").yammer)+"</div>"]),n.isDev()&&(e=e.concat(['<div class="desc">Testing</div>','<div class="info"><button class="call-button">Call</button>','<button class="incoming-button">Incoming</button>','<button class="connected-button">Connected</button>','<button class="conversations-button">Message</button></div>',"</div>"])),e.join("")},abcButtons:function(){return'<button id="A">A</button><button id="B">B</button><button id="C">C</button><button id="D">D</button><button id="E">E</button><button id="F">F</button><button id="G">G</button><button id="H">H</button><button id="I">I</button><button id="J">J</button><button id="K">K</button><button id="L">L</button><button id="M">M</button><button id="N">N</button><button id="O">O</button><button id="P">P</button><button id="Q">Q</button><button id="R">R</button><button id="S">S</button><button id="T">T</button><button id="U">U</button><button id="V">V</button><button id="W">W</button><button id="X">X</button><button id="Y">Y</button><button id="Z">Z</button><button id="#">#</button>'},navigationButton:function(t,e){return['<div><span class="icon ',t.caption.toLowerCase(),'"><div class="badge">',e,"</div>",t.icon,"</span><br />",t.caption,"</div>"].join("")},getFacebookInvite:function(t){return t.facebook&&t.dcr?['<a class="touchable button invite-button" target="_blank" href="',"https://www.facebook.com/dialog/send?","app_id=648143008577417","&link=",encodeURI("https://beepe.me/welcome?r="),t.dcr,"&to=",t.facebook.id,"&display=popup","&redirect_uri=",encodeURI("https://beepe.me/invitation"),'">Invite</a>'].join(""):""},getSMSInvite:function(t){return n.isMobile()&&t.phone&&t.dcr?['<a class="touchable button invite-button" target="_blank" href="',"sms:",encodeURI(t.phone),encodeURI("?body=Hey, call me back on "),encodeURI("https://beepe.me/welcome?r="),t.dcr,'">Invite</a>'].join(""):""},getEmailInvite:function(t){return t.email&&t.dcr?['<a class="touchable button invite-button" target="_blank" href="',"mailto:",encodeURI(t.email),encodeURI("?subject=I just added you on my Beepe contact list"),encodeURI("&body=Now you can call me back on \n\n"),encodeURI("https://beepe.me/welcome?r="),t.dcr,'">Invite</a>'].join(""):""},getInvite:function(t){return t.dcr?['<div class="inviteLink">',"<h3>Start chatting now.<br>Send this invitation URL to ",t.firstname||t.lastname,".</h3>","URL:<br>",encodeURI("https://beepe.me/welcome?r="),t.dcr,"</div>"].join(""):""},addSocialContact:function(t,e){var i="fa-"+e+"-square";"google"==e&&(i="fa-google-plus-square");var s='<div class="info import-contact touchable" id="'+e+'"><i class="fa '+i+' fa-lg import-contact" id="'+e+'"></i>';if(t[e]){var o=t[e];s+='<span class="import-contact touchable" id="'+e+'">  '+o.firstname+" "+o.lastname+"</span>",s+=this.removeButton(e),"facebook"==e&&(s+=this.getFacebookInvite(t)),s+="</div>"}else s+='<span class="import-contact touchable" id="'+e+'">  New '+n.capitalize(e)+" Contact</span>",s+=this.nextButton(e)+"</div>";return s}}}.bind(this)),require.register("app/custom/custom-input-sync/index.js",function(t,e,i){i.exports={TouchSync:e("touch-sync"),MouseSync:e("mouse-sync")}}.bind(this)),require.register("app/custom/custom-input-sync/mouse-sync.js",function(t,e,i){function n(t,e){this.targetGet=t,this.options={direction:void 0,rails:!1,scale:1,stallTime:50,propogate:!0},this.setOptions(e?e:this.options),this.input=new u,this.output=new u,u.setInputHandler(this,this.input),u.setOutputHandler(this,this.output),this._prevCoord=void 0,this._prevTime=void 0,this._prevVel=void 0,this.input.on("mousedown",s.bind(this)),this.input.on("mousemove",o.bind(this)),this.input.on("mouseup",r.bind(this)),this.options.propogate?this.input.on("mouseleave",a.bind(this)):this.input.on("mouseleave",r.bind(this))}function s(t){t.preventDefault(),this._prevCoord=[t.clientX,t.clientY],this._prevTime=Date.now(),this._prevVel=void 0!==this.options.direction?0:[0,0],this.output.emit("start",{ap:this._prevCoord})}function o(t){if(this._prevCoord){var e=this._prevCoord,i=this._prevTime,s=[t.clientX,t.clientY],o=Date.now(),r=s[0]-e[0],a=s[1]-e[1];this.options.rails&&(Math.abs(r)>Math.abs(a)?a=0:r=0);var u,c,h=Math.max(o-i,8),l=r/h,p=a/h,d=this.targetGet(),f=this.options.scale;this.options.direction==n.DIRECTION_X?(u=d+f*r,c=f*l):this.options.direction==n.DIRECTION_Y?(u=d+f*a,c=f*p):(u=[d[0]+f*r,d[1]+f*a],c=[f*l,f*p]),this.output.emit("update",{ap:s,p:u,v:c}),this._prevCoord=s,this._prevTime=o,this._prevVel=c}}function r(){if(this._prevCoord){var t=this._prevTime,e=Date.now();e-t>this.options.stallTime&&(this._prevVel=void 0==this.options.direction?[0,0]:0);var i=this.targetGet();this.output.emit("end",{p:i,v:this._prevVel}),this._prevCoord=void 0,this._prevTime=void 0,this._prevVel=void 0}}function a(){if(this._prevCoord){var t=function(t){o.call(this,t)}.bind(this),e=function(i){r.call(this,i),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",e)}.bind(this);document.addEventListener("mousemove",t),document.addEventListener("mouseup",e)}}var u=e("famous/event-handler");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime),void 0!==t.propogate&&(this.options.propogate=t.propogate)},i.exports=n}.bind(this)),require.register("app/custom/custom-input-sync/touch-sync.js",function(t,e,i){function n(t,e){this.targetGet=t,this.output=new u,this.touchTracker=new a,this.options={direction:void 0,rails:!1,scale:1},this.setOptions(e?e:this.options),u.setOutputHandler(this,this.output),u.setInputHandler(this,this.touchTracker),this.touchTracker.on("trackstart",s.bind(this)),this.touchTracker.on("trackmove",o.bind(this)),this.touchTracker.on("trackend",r.bind(this))}function s(t){this.output.emit("start",{ap:[t.touch.clientX,t.touch.clientY],count:t.count,touch:t.touch.identifier})}function o(t){var e=t.history,i=e[e.length-2].timestamp,s=e[e.length-1].timestamp,o=e[e.length-2].touch,r=e[e.length-1].touch,a=r.pageX-o.pageX,u=r.pageY-o.pageY;this.options.rails&&(Math.abs(a)>Math.abs(u)?u=0:a=0);var c=Math.max(s-i,8),h=a/c,l=u/c;if(e.length>2)var p=e[e.length-3].touch,d=(r.pageX-2*o.pageX+p.pageX)/(c*c),f=(r.pageY-2*o.pageY+p.pageY)/(c*c);else var d=0,f=0;var m,g,v,y=this.targetGet(),b=this.options.scale;this.options.direction==n.DIRECTION_X?(m=y+b*a,g=b*h,v=b*l):this.options.direction==n.DIRECTION_Y?(m=y+b*u,g=b*l,v=b*f):(m=[y[0]+b*a,y[1]+b*u],g=[b*h,b*l],v=[b*d,b*f]),this.output.emit("update",{ap:[r.pageX,r.pageY],p:m,v:g,a:v,touch:t.touch.identifier})}function r(t){var e=void 0!==this.options.direction?0:[0,0],i=t.history,s=t.count,o=this.targetGet();if(i.length>1){var r=i[i.length-2].timestamp,a=i[i.length-1].timestamp,u=i[i.length-2].touch,c=i[i.length-1].touch,h=c.pageX-u.pageX,l=c.pageY-u.pageY;this.options.rails&&(Math.abs(h)>Math.abs(l)?l=0:h=0);var e,p=Math.max(a-r,1),d=h/p,f=l/p,m=this.options.scale;e=this.options.direction==n.DIRECTION_X?m*d:this.options.direction==n.DIRECTION_Y?m*f:[m*d,m*f]}this.output.emit("end",{p:o,v:e,count:s,touch:t.touch.identifier})}var a=e("famous/input/touch-tracker"),u=e("famous/event-handler");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale)},n.prototype.getOptions=function(){return this.options},i.exports=n}.bind(this)),require.register("famous_modules/famous/input/scroll-sync/_git_master/index.js",function(t,e,i){function n(t,e){this.targetGet=t,this.options={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40},this.setOptions(e?e:this.options),this.input=new r,this.output=new r,r.setInputHandler(this,this.input),r.setOutputHandler(this,this.output),this._prevTime=void 0,this._prevVel=void 0,this.input.on("mousewheel",o.bind(this)),this.input.on("wheel",o.bind(this)),this.inProgress=!1,this._loopBound=!1}function s(){var t=Date.now();if(this.inProgress&&t-this._prevTime>this.options.stallTime){var e=this.targetGet();this.inProgress=!1;var i=0;Math.abs(this._prevVel)>=this.options.minimumEndSpeed&&(i=this._prevVel),this.output.emit("end",{p:e,v:i,slip:!0})}}function o(t){t.preventDefault(),this.inProgress||(this.inProgress=!0,this.output.emit("start",{slip:!0}),this._loopBound||(a.on("prerender",s.bind(this)),this._loopBound=!0));var e=this._prevTime,i=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,o=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY;1===t.deltaMode&&(i*=this.options.lineHeight,o*=this.options.lineHeight);var r=Date.now();this.options.rails&&(Math.abs(i)>Math.abs(o)?o=0:i=0);var u,c,h=Math.max(r-e,8),l=i/h,p=o/h,d=this.targetGet(),f=this.options.scale;this.options.direction==n.DIRECTION_X?(u=d+f*i,c=f*l):this.options.direction==n.DIRECTION_Y?(u=d+f*o,c=f*p):(u=[d[0]+f*i,d[1]+f*o],c=[f*l,f*p]),this.output.emit("update",{p:u,v:c,slip:!0}),this._prevTime=r,this._prevVel=c}var r=e("famous/event-handler"),a=e("famous/engine");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.minimumEndSpeed&&(this.options.minimumEndSpeed=t.minimumEndSpeed),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime)},i.exports=n}.bind(this)),require.register("famous_modules/famous/input/generic-sync/_git_master/index.js",function(t,e,i){function n(t,e){this.targetGet=t,this.eventInput=new o,o.setInputHandler(this,this.eventInput),this.eventOutput=new o,o.setOutputHandler(this,this.eventOutput),this._handlers=void 0,this.options={syncClasses:u},this._handlerOptions=this.options,e&&this.setOptions(e),this._handlers||s.call(this)}function s(){if(this._handlers)for(var t=0;t<this._handlers.length;t++)this.eventInput.unpipe(this._handlers[t]),this._handlers[t].unpipe(this.eventOutput);this._handlers=[];for(var t=0;t<this.options.syncClasses.length;t++){var e=this.options.syncClasses[t];this._handlers[t]=new e(this.targetGet,this._handlerOptions),this.eventInput.pipe(this._handlers[t]),this._handlers[t].pipe(this.eventOutput)}}var o=e("famous/event-handler"),r=e("famous/input/touch-sync"),a=e("famous/input/scroll-sync"),u=[r,a];n.register=function(t){u.indexOf(t)<0&&u.push(t)},n.DIRECTION_X=0,n.DIRECTION_Y=1,n.DIRECTION_Z=2,n.prototype.setOptions=function(t){if(this._handlerOptions=t,t.syncClasses&&(this.options.syncClasses=t.syncClasses,s.call(this)),this._handlers)for(var e=0;e<this._handlers.length;e++)this._handlers[e].setOptions(this._handlerOptions)},i.exports=n}.bind(this)),require.register("famous_modules/famous/math/vector/_git_master/index.js",function(t,e,i){function n(t,e,i){return 1===arguments.length?this.set(t):(this.x=t||0,this.y=e||0,this.z=i||0),this}var s=new n(0,0,0);n.prototype.add=function(t){return s.setXYZ(this.x+(t.x||0),this.y+(t.y||0),this.z+(t.z||0))},n.prototype.sub=function(t){return s.setXYZ(this.x-t.x,this.y-t.y,this.z-t.z)},n.prototype.mult=function(t){return s.setXYZ(t*this.x,t*this.y,t*this.z)},n.prototype.div=function(t){return this.mult(1/t)},n.prototype.cross=function(t){var e=this.x,i=this.y,n=this.z,o=t.x,r=t.y,a=t.z;return s.setXYZ(n*r-i*a,e*a-n*o,i*o-e*r)},n.prototype.equals=function(t){return t.x==this.x&&t.y==this.y&&t.z==this.z},n.prototype.rotateX=function(t){var e=this.x,i=this.y,n=this.z,o=Math.cos(t),r=Math.sin(t);return s.setXYZ(e,i*o-n*r,i*r+n*o)},n.prototype.rotateY=function(t,e){e=e||s;var i=this.x,n=this.y,o=this.z,r=Math.cos(t),a=Math.sin(t);return e.setXYZ(o*a+i*r,n,o*r-i*a)},n.prototype.rotateZ=function(t){var e=this.x,i=this.y,n=this.z,o=Math.cos(t),r=Math.sin(t);return s.setXYZ(e*o-i*r,e*r+i*o,n)},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},n.prototype.normSquared=function(){return this.dot(this)},n.prototype.norm=function(){return Math.sqrt(this.normSquared())},n.prototype.normalize=function(t){t=void 0!==t?t:1;var e=1e-7,i=this.norm();return Math.abs(i)>e?s.set(this.mult(t/i)):s.setXYZ(t,0,0)},n.prototype.clone=function(){return new n(this)},n.prototype.isZero=function(){return!(this.x||this.y||this.z)},n.prototype.setFromArray=function(t){return this.x=t[0],this.y=t[1],this.z=t[2]||0,this},n.prototype.set=function(t){return t instanceof Array&&this.setFromArray(t),t instanceof n&&(this.x=t.x,this.y=t.y,this.z=t.z),"number"==typeof t&&(this.x=t,this.y=0,this.z=0),this!==s&&s.clear(),this},n.prototype.put=function(t){t.set(s)},n.prototype.setXYZ=function(t,e,i){return s.clear(),this.x=t,this.y=e,this.z=i,this},n.prototype.clear=function(){this.x=0,this.y=0,this.z=0},n.prototype.cap=function(t){if(1/0===t)return s.set(this);var e=this.norm();return s.set(e>t?this.mult(t/e):this)},n.prototype.project=function(t){return t.mult(this.dot(t))},n.prototype.reflectAcross=function(t){return t.set(t.normalize()),s.set(this.sub(this.project(t).mult(2)))},n.prototype.toArray=function(){return[this.x,this.y,this.z]},n.prototype.get=function(){return this.toArray()},i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/bodies/particle/_git_master/index.js",function(t,e,i){function n(t){t=t||{},this.p=t.p?new o(t.p):new o(0,0,0),this.v=t.v?new o(t.v):new o(0,0,0),this.f=t.f?new o(t.f):new o(0,0,0),this.m=void 0!==t.m?t.m:1,this.restitution=void 0!==t.restitution?t.restitution:.5,this.dissipation=void 0!==t.dissipation?t.dissipation:0,this.axis=void 0!==t.axis?t.axis:void 0,this.setImmunity(t.immunity||n.IMMUNITIES.NONE),this.mInv=1/this.m,this.size=[0,0,0],this.node=void 0,this.spec={size:[!1,!1],target:{origin:[.5,.5],transform:void 0,target:void 0}}}var s=e("famous/render-node"),o=e("famous/math/vector"),r=e("famous/transform");n.AXIS={X:1,Y:2,Z:4},n.IMMUNITIES={NONE:0,POSITION:1,VELOCITY:2,ROTATION:4,AGENTS:8,UPDATE:16};for(var a in n.IMMUNITIES)n.IMMUNITIES.ALL|=n.IMMUNITIES[a];n.prototype.setPos=function(t){this.p.set(t)},n.prototype.getPos=function(){return this.p.get()},n.prototype.setVel=function(t){this.hasImmunity(n.IMMUNITIES.VELOCITY)||this.v.set(t)},n.prototype.getVel=function(){return this.v.get()},n.prototype.setMass=function(t){this.m=t,this.mInv=1/t},n.prototype.getMass=function(){return this.m},n.prototype.addImmunity=function(t){"string"==typeof t&&(t=n.IMMUNITIES[t.toUpperCase()]),this.immunity|=t},n.prototype.removeImmunity=function(t){"string"==typeof t&&(t=n.IMMUNITIES[t.toUpperCase()]),this.immunity&=~t},n.prototype.setImmunity=function(t){"string"==typeof t&&(t=n.IMMUNITIES[t.toUpperCase()]),this.immunity=t},n.prototype.hasImmunity=function(t){return"string"==typeof t&&(t=n.IMMUNITIES[t.toUpperCase()]),this.getImmunity()&t},n.prototype.getImmunity=function(){return this.immunity},n.prototype.reset=function(t,e){t=t||[0,0,0],e=e||[0,0,0],this.setPos(t),this.setVel(e)},n.prototype.applyForce=function(t){this.hasImmunity(n.IMMUNITIES.AGENTS)||this.f.set(this.f.add(t))},n.prototype.applyImpulse=function(t){this.hasImmunity(n.IMMUNITIES.AGENTS)||this.setVel(this.v.add(t.mult(this.mInv)))},n.prototype.getEnergy=function(){return.5*this.m*this.v.normSquared()},n.prototype.getTransform=function(){var t=this.p,e=this.axis;return void 0!==e&&(e&~n.AXIS.X&&(t.x=0),e&~n.AXIS.Y&&(t.y=0),e&~n.AXIS.Z&&(t.z=0)),r.translate(t.x,t.y,t.z)},n.prototype.link=function(t){return this.node||(this.node=new s),this.node.link(t)},n.prototype.add=function(t){return this.node||(this.node=new s),this.node.add(t)},n.prototype.replace=function(t){this.node.object=t},n.prototype.render=function(t){return t=void 0!==t?t:this.node.render(),this.spec.target.transform=this.getTransform(),this.spec.target.target=t,this.spec},i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/forces/force/_git_master/index.js",function(t,e,i){function n(){this.force=new s}var s=e("famous/math/vector");n.prototype.setOpts=function(t){for(var e in t)this.opts[e]=t[e]},n.prototype.applyConstraint=function(){},n.prototype.setupSlider=function(t,e){e=e||t.opts.name,t.setOpts({value:this.opts[e]}),t.init&&t.init(),t.on("change",function(t){this.opts[e]=t.value}.bind(this))},n.prototype.getEnergy=function(){return 0},i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/forces/drag/_git_master/index.js",function(t,e,i){function n(t){this.opts={strength:.01,forceFunction:n.FORCE_FUNCTIONS.LINEAR},t&&this.setOpts(t),s.call(this)}var s=e("famous/physics/forces/force");n.prototype=Object.create(s.prototype),n.prototype.constructor=s,n.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},n.prototype.applyForce=function(t){for(var e=this.opts.strength,i=this.opts.forceFunction,n=this.force,s=0;s<t.length;s++){var o=t[s];i(o.v).mult(-e).put(n),o.applyForce(n)}},n.prototype.setOpts=function(t){for(var e in t)this.opts[e]=t[e]},i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/forces/spring/_git_master/index.js",function(t,e,i){function n(t){this.opts={period:300,dampingRatio:.1,length:0,lMin:0,lMax:1/0,anchor:void 0,forceFunction:n.FORCE_FUNCTIONS.HOOK,restTolerance:1e-5},t&&this.setOpts(t),this.eventOutput=void 0,this._atRest=!1,this.init(),h.call(this),this.disp=new l(0,0,0)}function s(t){this.forceFunction=t}function o(){var t=this.opts;t.stiffness=Math.pow(2*Math.PI/t.period,2)}function r(){var t=this.opts;t.damping=4*Math.PI*t.dampingRatio/t.period}function a(t,e){return.5*t*e*e}function u(t,e){t<this.opts.restTolerance?(this._atRest||this.eventOutput.emit("atRest",{particle:e}),this._atRest=!0):this._atRest=!1}function c(){this.eventOutput=new p,this.eventOutput.bindThis(this),p.setOutputHandler(this,this.eventOutput)}var h=e("famous/physics/forces/force"),l=e("famous/math/vector"),p=e("famous/event-handler");n.prototype=Object.create(h.prototype),n.prototype.constructor=h,n.FORCE_FUNCTIONS={FENE:function(t,e){var i=.99*e,n=Math.max(Math.min(t,i),-i);return n/(1-n*n/(e*e))},HOOK:function(t){return t}},n.prototype.init=function(){s.call(this,this.opts.forceFunction),o.call(this),r.call(this)},n.prototype.applyForce=function(t,e){for(var i=this.force,n=this.disp,s=this.opts,o=s.stiffness,r=s.damping,c=s.length,h=s.lMax,l=s.anchor||e.p,p=0;p<t.length;p++){var d=t[p];n.set(l.sub(d.p));var f=n.norm()-c;if(0==f)return;var m=d.m;if(o*=m,r*=m,i.set(n.normalize(o*this.forceFunction(f,h))),r&&i.set(e?i.add(d.v.sub(e.v).mult(-r)):i.add(d.v.mult(-r))),d.applyForce(i),e&&e.applyForce(i.mult(-1)),this.eventOutput){var g=d.getEnergy()+a(o,f);u.call(this,g,d)}}},n.prototype.getEnergy=function(t,e){var i=this.opts,n=i.length,s=i.anchor||e.p,o=i.stiffness,r=s.sub(t.p).norm()-n;return.5*o*r*r},n.prototype.setOpts=function(t){void 0!==t.anchor&&(t.anchor.p instanceof l&&(this.opts.anchor=t.anchor.p),t.anchor instanceof l&&(this.opts.anchor=t.anchor),t.anchor instanceof Array&&(this.opts.anchor=new l(t.anchor))),void 0!==t.period&&(this.opts.period=t.period),void 0!==t.dampingRatio&&(this.opts.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.opts.length=t.length),void 0!==t.lMin&&(this.opts.lMin=t.lMin),void 0!==t.lMax&&(this.opts.lMax=t.lMax),void 0!==t.forceFunction&&(this.opts.forceFunction=t.forceFunction),void 0!==t.restTolerance&&(this.opts.restTolerance=t.restTolerance),this.init()},n.prototype.setAnchor=function(t){void 0===this.opts.anchor&&(this.opts.anchor=new l),this.opts.anchor.set(t)},n.prototype.on=function(){return c.call(this),this.on.apply(this,arguments)},n.prototype.unbind=function(){return c.call(this),this.unbind.apply(this,arguments)},n.prototype.pipe=function(){return c.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return c.call(this),this.unpipe.apply(this,arguments)},i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/constraints/constraint/_git_master/index.js",function(t,e,i){function n(){}n.prototype.setOpts=function(t){for(var e in t)this.opts[e]=t[e]},n.prototype.applyConstraint=function(){},n.prototype.setupSlider=function(t,e){e=e||t.opts.name,t.setOpts({value:this.opts[e]}),t.init&&t.init(),t.on("change",function(t){this.opts[e]=t.value}.bind(this))},i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/integrator/symplectic-euler/_git_master/index.js",function(t,e,i){function n(t){this.opts={velocityCap:1/0,angularVelocityCap:1/0},t&&this.setOpts(t)}n.prototype.integrateVelocity=function(t,e){var i=t.v,n=t.m,s=t.f;s.isZero()||(t.setVel(i.add(s.mult(e/n))),s.clear())},n.prototype.integratePosition=function(t,e){var i=t.p,n=t.v;n.isZero()||(n.set(n.cap(this.opts.velocityCap)),t.setPos(i.add(n.mult(e))))},n.prototype.integrateAngularMomentum=function(t,e){var i=t.L,n=t.t;n.isZero()||(n.set(n.cap(this.opts.angularVelocityCap)),i.add(n.mult(e)).put(i),n.clear())},n.prototype.integrateOrientation=function(t,e){var i=t.q,n=t.w;n.isZero()||(i.set(i.add(i.multiply(n).scalarMultiply(.5*e))),i.set(i.normalize()))},n.prototype.setOpts=function(t){for(var e in t)this.opts[e]=t[e]},i.exports=n}.bind(this)),require.register("famous_modules/famous/math/quaternion/_git_master/index.js",function(t,e,i){function n(t,e,i,n){return 1===arguments.length?this.set(t):(this.w=void 0!==t?t:1,this.x=void 0!==e?e:0,this.y=void 0!==i?i:0,this.z=void 0!==n?n:0),this}var s=new n(1,0,0,0);n.prototype.add=function(t){return s.setWXYZ(this.w+t.w,this.x+t.x,this.y+t.y,this.z+t.z)},n.prototype.sub=function(t){return s.setWXYZ(this.w-t.w,this.x-t.x,this.y-t.y,this.z-t.z)},n.prototype.scalarDivide=function(t){return this.scalarMultiply(1/t)},n.prototype.scalarMultiply=function(t){return s.setWXYZ(this.w*t,this.x*t,this.y*t,this.z*t)},n.prototype.multiply=function(t){var e=this.x,i=this.y,n=this.z,o=this.w,r=t.x,a=t.y,u=t.z,c=t.w||0;return s.setWXYZ(o*c-e*r-i*a-n*u,e*c+r*o+a*n-i*u,i*c+a*o+e*u-r*n,n*c+u*o+r*i-e*a)};var o=new n(1,0,0,0);n.prototype.rotateVector=function(t){return o.set(this.conj()),s.set(this.multiply(t).multiply(o))},n.prototype.inverse=function(){return s.set(this.conj().scalarDivide(this.normSquared()))},n.prototype.negate=function(){return this.scalarMultiply(-1)},n.prototype.conj=function(){return s.setWXYZ(this.w,-this.x,-this.y,-this.z)},n.prototype.normalize=function(t){return t=void 0===t?1:t,this.scalarDivide(t*this.norm())},n.prototype.makeFromAngleAndAxis=function(t,e){var i=e.normalize(),n=.5*t,s=-Math.sin(n);return this.x=s*i.x,this.y=s*i.y,this.z=s*i.z,this.w=Math.cos(n),this},n.prototype.setWXYZ=function(t,e,i,n){return s.clear(),this.w=t,this.x=e,this.y=i,this.z=n,this},n.prototype.set=function(t){return t instanceof Array?(this.w=t[0],this.x=t[1],this.y=t[2],this.z=t[3]):(this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z),this!==s&&s.clear(),this},n.prototype.put=function(t){t.set(s)},n.prototype.clone=function(){return new n(this)},n.prototype.clear=function(){return this.w=1,this.x=0,this.y=0,this.z=0,this},n.prototype.isEqual=function(t){return t.w==this.w&&t.x==this.x&&t.y==this.y&&t.z==this.z},n.prototype.dot=function(t){return this.w*t.w+this.x*t.x+this.y*t.y+this.z*t.z},n.prototype.normSquared=function(){return this.dot(this)},n.prototype.norm=function(){return Math.sqrt(this.normSquared())},n.prototype.isZero=function(){return!(this.x||this.y||this.z)},n.prototype.getMatrix=function(){var t=this.normalize(1),e=t.x,i=t.y,n=t.z,s=t.w;return[1-2*i*i-2*n*n,2*e*i-2*n*s,2*e*n+2*i*s,0,2*e*i+2*n*s,1-2*e*e-2*n*n,2*i*n-2*e*s,0,2*e*n-2*i*s,2*i*n+2*e*s,1-2*e*e-2*i*i,0,0,0,0,1]},n.prototype.getMatrix3x3=function(){var t=this.normalize(1),e=t.x,i=t.y,n=t.z,s=t.w;return[[1-2*i*i-2*n*n,2*e*i+2*n*s,2*e*n-2*i*s],[2*e*i-2*n*s,1-2*e*e-2*n*n,2*i*n+2*e*s],[2*e*n+2*i*s,2*i*n-2*e*s,1-2*e*e-2*i*i]]};var r=1e-5;n.prototype.slerp=function(t,e){var i,n,o,a,u;return n=this.dot(t),1-n>r?(i=Math.acos(n),o=Math.sin(i),a=Math.sin((1-e)*i)/o,u=Math.sin(e*i)/o):(a=1-e,u=e),s.set(this.scalarMultiply(a/u).add(t).multiply(u))},i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/bodies/body/_git_master/index.js",function(t,e,i){function n(t){s.call(this,t),this.q=t.q?new r(t.q):new r,this.w=t.w?new o(t.w):new o,this.L=t.L?new o(t.L):new o,this.t=t.t?new o(t.t):new o,this.I=[1,0,0,1,0,0,1,0,0],this.Iinv=[1,0,0,1,0,0,1,0,0],this.w.w=0,this.pWorld=new o}var s=e("famous/physics/bodies/particle"),o=e("famous/math/vector"),r=e("famous/math/quaternion"),a=e("famous/transform");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.IMMUNITIES=s.IMMUNITIES,n.prototype.updateAngularVelocity=function(){var t=this.Iinv,e=this.L,i=e.x,n=e.y,s=e.z,o=t[0],r=t[1],a=t[2];this.w.setXYZ(o[0]*i+o[1]*n+o[2]*s,r[0]*i+r[1]*n+r[2]*s,a[0]*i+a[1]*n+a[2]*s)},n.prototype.toWorldCoordinates=function(t){var e=this.q;return t.w=0,this.pWorld.set(e.inverse().multiply(t).multiply(e))},n.prototype.getEnergy=function(){var t=this.w,e=this.I,i=t.x,n=t.y,s=t.z,o=this.I[0],r=e[1],a=e[2];return.5*(this.m*this.v.normSquared()+o[0]*i*i+o[1]*i*n+o[2]*i*s+r[0]*n*i+r[1]*n*n+r[2]*n*s+a[0]*s*i+a[1]*s*n+a[2]*s*s)},n.prototype.reset=function(t,e,i,n){this.setPos(t||[0,0,0]),this.setVel(e||[0,0,0]),this.w.clear(),this.setOrientation(i||[1,0,0,0]),this.setAngularMomentum(n||[0,0,0])
},n.prototype.setOrientation=function(t){this.q.set(t)},n.prototype.setAngularMomentum=function(t){this.L.set(t)},n.prototype.applyForce=function(t,e){this.hasImmunity(n.IMMUNITIES.AGENTS)||(this.f.set(this.f.add(t)),void 0!==e&&this.applyTorque(e.cross(t)))},n.prototype.applyTorque=function(t){this.hasImmunity(n.IMMUNITIES.ROTATION)||this.t.set(this.t.add(t))},n.prototype.getTransform=function(){return a.move(this.q.getMatrix(),this.p.get())},i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/bodies/circle/_git_master/index.js",function(t,e,i){function n(t){s.call(this,t),t=t||{},this.r=t.r||0,this.size=[2*this.r,2*this.r];var e=this.r,i=this.m;this.I=[[.25*i*e*e,0,0],[0,.25*i*e*e,0],[0,0,.5*i*e*e]],this.Iinv=[[4/(i*e*e),0,0],[0,4/(i*e*e),0],[0,0,2/(i*e*e)]]}var s=e("famous/physics/bodies/body");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.IMMUNITIES=s.IMMUNITIES,i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/bodies/rectangle/_git_master/index.js",function(t,e,i){function n(t){s.call(this,t),t=t||{},this.size=t.size||[0,0];var e=this.size[0],i=this.size[1];this.I=[[i*i/12,0,0],[0,e*e/12,0],[0,0,(e*e+i*i)/12]],this.Iinv=[[12/(i*i),0,0],[0,12/(e*e),0],[0,0,12/(e*e+i*i)]]}var s=e("famous/physics/bodies/body");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.IMMUNITIES=s.IMMUNITIES,i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/engine/_git_master/index.js",function(t,e,i){function n(t){this.opts={speed:1,steps:1,velocityCap:1/0,angularVelocityCap:1/0,constraintSteps:1,constraintTolerance:1e-4},t&&this.setOpts(t),this._particles=[],this._agents={},this._forces=[],this._constraints=[],this._playing=!0,this._buffer=0,this._timestep=1e3/60/this.opts.steps,this._prevTime=void 0,this._currTime=void 0,this._integrator=new E({velocityCap:this.opts.velocityCap,angularVelocityCap:this.opts.angularVelocityCap}),this._currAgentId=0,this.BODIES=n.BODIES}function s(){return Date.now()}function o(t,e,i){return void 0===e&&(e=this.getParticles()),e instanceof Array||(e=[e]),this._agents[this._currAgentId]={agent:t,targets:e,source:i},r.call(this,t).push(this._currAgentId),this._currAgentId++}function r(t){return t instanceof T?this._forces:t instanceof j?this._constraints:void 0}function a(t){return this._agents[t]}function u(t){var e=a.call(this,this._forces[t]);e.agent.applyForce(e.targets,e.source)}function c(t,e){var i=this._agents[this._constraints[t]];return i.agent.applyConstraint(i.targets,i.source,e)}function h(){for(var t=this._forces.length-1;t>-1;t--)u.call(this,t)}function l(t){var e=1/0,i=0;for(this.opts.constraintTolerance;i<this.opts.constraintSteps;){e=0;for(var n=this._constraints.length-1;n>-1;n--)e+=c.call(this,n,t);i++}}function p(t,e){t.hasImmunity(x.IMMUNITIES.UPDATE)||this._integrator.integrateVelocity(t,e)}function d(t){t.hasImmunity(x.IMMUNITIES.ROTATION)||t instanceof k&&t.updateAngularVelocity()}function f(t,e){t.hasImmunity(x.IMMUNITIES.ROTATION)||t instanceof k&&this._integrator.integrateAngularMomentum(t,e)}function m(t,e){t.hasImmunity(x.IMMUNITIES.UPDATE)||this._integrator.integratePosition(t,e)}function g(t,e){t.hasImmunity(x.IMMUNITIES.ROTATION)||t instanceof k&&this._integrator.integrateOrientation(t,e)}function v(t){this.forEachParticle(p,t)}function y(t){this.forEachParticle(m,t)}function b(){this.forEachParticle(d)}function _(t){this.forEachParticle(f,t)}function w(t){this.forEachParticle(g,t)}function S(t){h.call(this),v.call(this,t),_.call(this,t),b.call(this,t),l.call(this,t),y.call(this,t),w.call(this,t)}var x=e("famous/physics/bodies/particle"),k=e("famous/physics/bodies/body"),C=e("famous/physics/bodies/circle"),O=e("famous/physics/bodies/rectangle"),T=e("famous/physics/forces/force"),j=e("famous/physics/constraints/constraint"),E=e("famous/physics/integrator/symplectic-euler");n.BODIES={POINT:x,BODY:k,CIRCLE:C,RECTANGLE:O},n.IMMUNITIES=x.IMMUNITIES,n.prototype.setOpts=function(t){for(var e in t)this.opts[e]&&(this.opts[e]=t[e])},n.prototype.addBody=function(t){return this._particles.push(t),t},n.prototype.createParticle=function(t){return this.addBody(new x(t))},n.prototype.createBody=function(t){var e=t.shape||n.BODIES.POINT;return this.addBody(new e(t))},n.prototype.remove=function(t){var e=this._particles.indexOf(t);if(e>-1){for(var i=0;i<Object.keys(this._agents);i++)this.detachFrom(i,t);this._particles.splice(e,1)}},n.prototype.attach=function(t,e,i){if(t instanceof Array){for(var n=[],s=0;s<t.length;s++)n[s]=o.call(this,t[s],e,i);return n}return o.call(this,t,e,i)},n.prototype.attachTo=function(t,e){a.call(this,t).targets.push(e)},n.prototype.detach=function(t){var e=this.getAgent(t),i=r.call(this,e),n=i.indexOf(t);i.splice(n,1),delete this._agents[t]},n.prototype.detachFrom=function(t,e){var i=a.call(this,t);if(i.source===e)this.detach(t);else{var n=i.targets,s=n.indexOf(e);s>-1&&n.splice(s,1)}},n.prototype.detachAll=function(){this._agents={},this._forces=[],this._constraints=[],this._currAgentId=0},n.prototype.getAgent=function(t){return a.call(this,t).agent},n.prototype.getParticles=function(){return this._particles},n.prototype.getParticlesExcept=function(t){var e=[];return this.forEachParticle(function(i){-1===t.indexOf(i)&&e.push(i)}),e},n.prototype.getPos=function(t){return(t||this._particles[0]).getPos()},n.prototype.getVel=function(t){return(t||this._particles[0]).getVel()},n.prototype.getTransform=function(t){return(t||this._particles[0]).getTransform()},n.prototype.setPos=function(t,e){(e||this._particles[0]).setPos(t)},n.prototype.setVel=function(t,e){(e||this._particles[0]).setVel(t)},n.prototype.forEachParticle=function(t,e){for(var i=this.getParticles(),n=0,s=i.length;s>n;n++)t.call(this,i[n],e)},n.prototype.step=function(){if(this._playing){this._prevTime||(this._prevTime=s()),this._currTime=s();var t=this._currTime-this._prevTime;this._prevTime=this._currTime,0!=t&&S.call(this,this.opts.speed*this._timestep)}},n.prototype.render=function(t){this.step();var e=[];return this.forEachParticle(function(i){e.push(i.render(t))}),e},n.prototype.play=function(){this._prevTime=s(),this._playing=!0},n.prototype.pause=function(){this._playing=!1},n.prototype.toggle=function(){this._playing?this.pause():this.play()},n.prototype.reverseTime=function(){this.opts.speed*=-1},n.prototype.reverseVelocities=function(){this.forEachParticle(function(t){t.v.mult(-1,t.v)})},i.exports=n}.bind(this)),require.register("famous_modules/famous/views/scrollview/_git_master/index.js",function(t,e,i){function n(t){this.options={direction:_.Direction.Y,rails:!0,itemSpacing:0,clipSize:void 0,margin:void 0,friction:.001,drag:1e-4,edgeGrip:.5,edgePeriod:300,edgeDamp:1,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:1/0,pageSwitchSpeed:1,speedLimit:10},this.node=null,this.physicsEngine=new w,this.particle=new S,this.physicsEngine.addBody(this.particle),this.spring=new k({anchor:[0,0,0]}),this.drag=new x({forceFunction:x.FORCE_FUNCTIONS.QUADRATIC}),this.friction=new x({forceFunction:x.FORCE_FUNCTIONS.LINEAR}),this.sync=new T(function(){return-this.getPosition()}.bind(this),{direction:this.options.direction==_.Direction.X?T.DIRECTION_X:T.DIRECTION_Y}),this.eventInput=new O,this.eventOutput=new O,this.rawInput=new O,this.rawInput.pipe(this.sync),this.sync.pipe(this.eventInput),this.sync.pipe(this.eventOutput),this.rawInput.pipe(this.eventInput),O.setInputHandler(this,this.rawInput),O.setOutputHandler(this,this.eventOutput),this._outputFunction=null,this._masterOutputFunction=null,this.setOutputFunction(),this.touchCount=0,this._springAttached=!1,this._onEdge=0,this._springPosition=0,this._touchVelocity=void 0,this._earlyEnd=!1,this._masterOffset=0,this._offsetDifferential=0,this._lastFrameNode=null,this.setOptions(t?t:{}),a.call(this),this.group=new E,this.group.add({render:b.bind(this)}),this._entityId=I.register(this),this._contextSize=[window.innerWidth,window.innerHeight],this._size=[this._contextSize[0],this._contextSize[1]],this._offsets={}}function s(t){this.touchCount=t.count,void 0===t.count&&(this.touchCount=1),c.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function o(t){var e=-t.p,i=-t.v;this._onEdge&&t.slip&&(0>i&&this._onEdge<0||i>0&&this._onEdge>0?this._earlyEnd||(r.call(this,t),this._earlyEnd=!0):this._earlyEnd&&Math.abs(i)>Math.abs(this.particle.getVel()[0])&&s.call(this,t)),this._earlyEnd||(this._touchVelocity=i,t.slip?this.setVelocity(i):this.setPosition(e))}function r(t){if(this.touchCount=t.count||0,!this.touchCount){c.call(this),this._onEdge&&(this._springAttached=!0),u.call(this);var e=-t.v,i=this.options.speedLimit;t.slip&&(i*=this.options.edgeGrip),-i>e?e=-i:e>i&&(e=i),this.setVelocity(e),this._touchVelocity=void 0}}function a(){this.eventInput.on("start",s.bind(this)),this.eventInput.on("update",o.bind(this)),this.eventInput.on("end",r.bind(this))}function u(){this._springAttached?this.physicsEngine.attach([this.spring],this.particle):this.physicsEngine.attach([this.drag,this.friction],this.particle)}function c(){this._springAttached=!1,this.physicsEngine.detachAll()}function h(t){t||(t=this._contextSize);var e=this.options.direction===_.Direction.X?0:1;return void 0===t[e]?this._contextSize[e]:t[e]}function l(t){this._springPosition+=t,this._offsetDifferential-=t,this.setPosition(this.getPosition()+t),this.spring.setOpts({anchor:[this._springPosition,0,0]})}function p(){for(var t=!1;!t&&this.getPosition()<0;){var e=this.node.getPrevious?this.node.getPrevious():null;if(e){var i=e.getSize?e.getSize():this._contextSize,n=h.call(this,i)+this.options.itemSpacing;l.call(this,n),this._masterOffset-=n,this.node=e}else t=!0}for(var s=this.node&&this.node.getSize?this.node.getSize():this._contextSize;!t&&this.getPosition()>=h.call(this,s)+this.options.itemSpacing;){var o=this.node.getNext?this.node.getNext():null;if(o){var n=h.call(this,s)+this.options.itemSpacing;l.call(this,-n),this._masterOffset+=n,this.node=o,s=this.node.getSize?this.node.getSize():this._contextSize}else t=!0}Math.abs(this._masterOffset)>y.call(this)+this.options.margin&&(this._masterOffset=0)}function d(t){!this._onEdge&&t?(this.sync.setOptions({scale:this.options.edgeGrip}),this.touchCount||this._springAttached||(this._springAttached=!0,this.physicsEngine.attach([this.spring],this.particle))):this._onEdge&&!t&&(this.sync.setOptions({scale:1}),this._springAttached&&Math.abs(this.getVelocity())<.001&&(this.setVelocity(0),this.setPosition(this._springPosition),c.call(this),u.call(this))),this._onEdge=t}function f(){if(0==this.touchCount&&!this._springAttached&&!this._onEdge&&this.options.paginated&&Math.abs(this.getVelocity())<this.options.pageStopSpeed){var t=this.node.getSize?this.node.getSize():this._contextSize,e=Math.abs(this.getVelocity())>this.options.pageSwitchSpeed,i=this.getVelocity()>0,n=this.getPosition()>.5*h.call(this,t);e&&i||!e&&n?this.goToNextPage():m.call(this)}}function m(){g.call(this,0,{period:this.options.pagePeriod,damp:this.options.pageDamp}),this._springAttached||(this._springAttached=!0,this.physicsEngine.attach([this.spring],this.particle))}function g(t,e){this._springPosition=t,this.spring.setOpts({anchor:[this._springPosition,0,0],period:e?e.period:this.options.edgePeriod,dampingRatio:e?e.damp:this.options.edgeDamp})}function v(t,e,i){var n=t.getSize?t.getSize():this._contextSize,s=this._outputFunction(e);return i.push({transform:s,target:t.render()}),h.call(this,n)}function y(){return this.options.clipSize?this.options.clipSize:h.call(this,this._contextSize)}function b(){var t={},e=this.getPosition(),i=[],n=0,s=0,o=this.node;for(t[o]=0;o&&s-e<y.call(this)+this.options.margin;)s+=v.call(this,o,s+this._masterOffset,i)+this.options.itemSpacing,o=o.getNext?o.getNext():null,t[o]=s,!o&&s-e-this.options.itemSpacing<=y.call(this)&&(this._onEdge||g.call(this,s-y.call(this)-this.options.itemSpacing),n=1);if(o=this.node&&this.node.getPrevious?this.node.getPrevious():null,s=0,o){var r=o.getSize?o.getSize():this._contextSize;s-=h.call(this,r)+this.options.itemSpacing}else 0>=e&&(this._onEdge||g.call(this,0),n=-1);for(;o&&s-e>-(y.call(this)+this.options.margin);)if(t[o]=s,v.call(this,o,s+this._masterOffset,i),o=o.getPrevious?o.getPrevious():null){var r=o.getSize?o.getSize():this._contextSize;s-=h.call(this,r)+this.options.itemSpacing}return this._offsetDifferential=0,this._offsets=t,d.call(this,n),f.call(this),this.options.paginated&&this._lastFrameNode!==this.node&&(this.eventOutput.emit("pageChange"),this._lastFrameNode=this.node),i}var _=e("famous/utilities/utility"),w=e("famous/physics/engine"),S=e("famous/physics/bodies/particle"),x=e("famous/physics/forces/drag"),k=e("famous/physics/forces/spring"),C=e("famous/transform"),O=e("famous/event-handler"),T=e("famous/input/generic-sync"),j=e("famous/view-sequence"),E=e("famous/group"),I=e("famous/entity");n.prototype.getPosition=function(t){var e=this.particle.getPos()[0];if(void 0===t)return e;var i=this._offsets[t];return void 0!==i?e-i+this._offsetDifferential:void 0},n.prototype.setPosition=function(t){this.particle.setPos([t,0,0])},n.prototype.getVelocity=function(){return this.touchCount?this._touchVelocity:this.particle.getVel()[0]},n.prototype.setVelocity=function(t){this.particle.setVel([t,0,0])},n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction,"x"===this.options.direction?this.options.direction=_.Direction.X:"y"===this.options.direction&&(this.options.direction=_.Direction.Y)),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.itemSpacing&&(this.options.itemSpacing=t.itemSpacing),void 0!==t.clipSize&&(t.clipSize!==this.options.clipSize&&(this._onEdge=0),this.options.clipSize=t.clipSize),void 0!==t.margin&&(this.options.margin=t.margin),void 0!==t.drag&&(this.options.drag=t.drag),void 0!==t.friction&&(this.options.friction=t.friction),void 0!==t.edgeGrip&&(this.options.edgeGrip=t.edgeGrip),void 0!==t.edgePeriod&&(this.options.edgePeriod=t.edgePeriod),void 0!==t.edgeDamp&&(this.options.edgeDamp=t.edgeDamp),void 0!==t.paginated&&(this.options.paginated=t.paginated),void 0!==t.pageStopSpeed&&(this.options.pageStopSpeed=t.pageStopSpeed),void 0!==t.pageSwitchSpeed&&(this.options.pageSwitchSpeed=t.pageSwitchSpeed),void 0!==t.pagePeriod&&(this.options.pagePeriod=t.pagePeriod),void 0!==t.pageDamp&&(this.options.pageDamp=t.pageDamp),void 0!==t.speedLimit&&(this.options.speedLimit=t.speedLimit),void 0===this.options.margin&&(this.options.margin=.5*Math.max(window.innerWidth,window.innerHeight)),this.drag.setOpts({strength:this.options.drag}),this.friction.setOpts({strength:this.options.friction}),this.spring.setOpts({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.sync.setOptions({rails:this.options.rails,direction:this.options.direction==_.Direction.X?T.DIRECTION_X:T.DIRECTION_Y})},n.prototype.setOutputFunction=function(t,e){t||(t=function(t){return this.options.direction==_.Direction.X?C.translate(t,0):C.translate(0,t)}.bind(this),e||(e=t)),this._outputFunction=t,this._masterOutputFunction=e?e:function(e){return C.inverse(t(-e))}},n.prototype.goToPreviousPage=function(){if(this.node){var t=this.node.getPrevious?this.node.getPrevious():null;if(t){var e=h.call(this,this.node.getSize())+this.options.itemSpacing;this.node=t,this._springPosition-=e,l.call(this,e),m.call(this)}return t}},n.prototype.goToNextPage=function(){if(this.node){var t=this.node.getNext?this.node.getNext():null;if(t){var e=h.call(this,this.node.getSize())+this.options.itemSpacing;this.node=t,this._springPosition+=e,l.call(this,-e),m.call(this)}return t}},n.prototype.getCurrentNode=function(){return this.node},n.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new j(t)),this.node=t,this._lastFrameNode=t},n.prototype.getSize=function(){return this._size},n.prototype.render=function(){return this.node?(this.physicsEngine.step(),this._entityId):void 0},n.prototype.commit=function(t){var e=t.transform,i=t.opacity,n=t.origin,s=t.size;this.options.clipSize||s[0]===this._contextSize[0]&&s[1]===this._contextSize[1]||(this._onEdge=0,this._contextSize=s,this.options.direction===_.Direction.X?(this._size[0]=y.call(this),this._size[1]=void 0):(this._size[0]=void 0,this._size[1]=y.call(this))),p.call(this);var o=this.getPosition(),r=this._masterOutputFunction(-(o+this._masterOffset));return{transform:C.moveThen([-n[0]*s[0],-n[1]*s[1],0],e),opacity:i,origin:n,size:s,target:{transform:r,origin:n,target:this.group.render()}}},i.exports=n}.bind(this)),require.register("famous_modules/famous/transitions/spring-transition/_git_master/index.js",function(t,e,i){function n(t){t=t||0,this.endState=new y(t),this.initState=new y,this._dimensions=void 0,this._restTolerance=1e-8,this._absRestTolerance=this._restTolerance,this._active=!1,this._callback=void 0,this.PhysicsEngine=new g,this.spring=new v({anchor:this.endState}),this.particle=this.PhysicsEngine.createParticle(),this.PhysicsEngine.attach(this.spring,this.particle)}function s(){if(this._active)this.PhysicsEngine.step(),o.call(this)<this._absRestTolerance&&(l.call(this,this.endState),p.call(this,[0,0,0]),h.call(this));else if(this._callback){var t=this._callback;this._callback=void 0,t()}}function o(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function r(t){var e=n.DEFAULT_OPTIONS;void 0===t.period&&(t.period=e.period),void 0===t.dampingRatio&&(t.dampingRatio=e.dampingRatio),void 0===t.velocity&&(t.velocity=e.velocity),t.period<150&&console.warn("period may be unstable, increase the period or use a stiff transition"),this.spring.setOpts({period:t.period,dampingRatio:t.dampingRatio}),p.call(this,t.velocity)}function a(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function u(t){this.endState.set(t),a.call(this)}function c(){this.PhysicsEngine.play(),this._active=!0}function h(){this.PhysicsEngine.pause(),this._active=!1}function l(t){this.particle.p.set(t)}function p(t){this.particle.v.set(t)}function d(){return 0===this._dimensions?this.particle.p.x:this.particle.p.get()}function f(){return 0===this._dimensions?this.particle.v.x:this.particle.v.get()}function m(t){this._callback=t}var g=e("famous/physics/engine"),v=e("famous/physics/forces/spring"),y=e("famous/math/vector");n.SUPPORTS_MULTIPLE=3,n.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0},n.prototype.reset=function(t,e){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),l.call(this,t),u.call(this,t),e&&p.call(this,e),m.call(this,void 0)},n.prototype.getVelocity=function(){return f.call(this)},n.prototype.setVelocity=function(t){this.call(this,p(t))},n.prototype.halt=function(){this.set(this.get())},n.prototype.get=function(){return s.call(this),d.call(this)},n.prototype.set=function(t,e,i){return e?(this._dimensions=t instanceof Array?t.length:0,c.call(this),r.call(this,e),u.call(this,t),void m.call(this,i)):(this.reset(t),void(i&&i()))},i.exports=n}.bind(this)),require.register("app/custom/vertical-scroll-view/vertical-scroll-view.js",function(t,e,i){function n(){r.apply(this,arguments),this.prepareEmptySurface(),this.prepareResize(),this.itemArray=[],window.ss=this}var s=(e("famous/view"),e("famous/utilities/utility")),o=e("famous/surface"),r=e("famous/views/scrollview"),a=e("famous/engine");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.setOptions=function(t){this.options.startAt="top",this.options.direction=s.Direction.Y,this.options.margin=1e4,Object.getPrototypeOf(n.prototype).setOptions.apply(this,arguments),_.extend(this.options,t)},n.prototype.prepareEmptySurface=function(){this.emptySurface=new o({properties:{backgroundColor:"transparent"},size:[void 0,1]}),this.emptySurface.pipe(this)},n.prototype.prepareResize=function(){var t,e=function(){this.emptySurfaceResize()};a.on("resize",function(){t&&clearTimeout(t),t=setTimeout(e.bind(this),300)}.bind(this))},n.prototype.sortBy=function(t){this.sequenceFrom(_.sortBy(this.itemArray,t))},n.prototype.filter=function(t){this.sequenceFrom(_.filter(this.itemArray,t))},n.prototype.sequenceFrom=function(t){this.itemArray=_.clone(t),"top"==this.options.startAt?t.push(this.emptySurface):t.unshift(this.emptySurface),Object.getPrototypeOf(n.prototype).sequenceFrom.apply(this,arguments),this.emptySurfaceResize()},n.prototype.emptySurfaceResize=function(){function t(){var t=this.getSize()[1];if(this.node)for(var e=_.filter(this.node.array,function(t){return t instanceof o==0}),i=0;i<e.length;i++)if(t-=e[i].getSize()[1],1>=t){t=1;break}this.emptySurface.setSize([void 0,t])}this.emptySurface&&setTimeout(t.bind(this),300)},n.prototype.scrollTo=function(t,e){t||(t=0),e||(e=0),this.node.index=t,this.setPosition(e)},n.prototype.removeByIndex=function(t){if(!(0>t)&&this.node){var e=this.itemArray.splice(t,1)[0];e.collapse(function(){a.defer(function(){var t=this.node.array.indexOf(e);this.node.splice(t,1),0==t&&(this.node.index=0),this.emptySurfaceResize()}.bind(this))}.bind(this))}},n.prototype.addByIndex=function(t,e){this.itemArray.splice(t,0,e),this.node.splice(t,0,e),this.node.index=0,this.emptySurfaceResize()},n.prototype.push=function(t){this.itemArray.push(t),this.node.push(t),this.emptySurfaceResize("push")},n.prototype.scrollToEnd=function(){var t=this.node.array.length-1,e=this.node.index,i=this.getSize()[1],n=this.getPosition(),s=this.node.array.map(function(t){return t.getSize()[1]===!0?100:t.getSize()[1]}),o=_.reduce(_(s).last(t-e+1),function(t,e){return t+e},0),r=o-n-i+100,u=Math.max(2*r/200,0);-1==this._onEdge&&this.emptySurface.getSize()[1]<=1&&this._springAttached?(this.scrollTo(1,0),setTimeout(function(){this.setVelocity(u)}.bind(this),300)):a.defer(function(){this.setVelocity(u)}.bind(this))},n.prototype.jumpToEnd=function(){if(!(this.emptySurface.getSize()[1]>1)){if(0!=this._onEdge){var t=this.node.array.length,e=Math.max(t-15,1);this.node.index=e}setTimeout(function(){this.node.index=this.node.array.length-1}.bind(this),100)}},n.prototype.jumpToEnd0=function(){var t=this.getSize()[1],e=62,i=Math.max(this.node.array.length-Math.ceil(t/e),0);this.node.index=i,this.setVelocity(0)},n.prototype.jumpToEnd1=function(){this.node.index=this.node.array.length-1},n.prototype.attachAgent=function(){this._springAttached?this.physicsEngine.attach([this.spring],this.particle):this.physicsEngine.attach([this.drag,this.friction],this.particle)},n.prototype.detachAgent=function(){this._springAttached=!1,this.physicsEngine.detachAll()},i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/constraints/wall/_git_master/index.js",function(t,e,i){function n(t){this.opts={restitution:.7,k:0,n:new r,d:0,onContact:n.ON_CONTACT.REFLECT},t&&this.setOpts(t),this.diff=new r,this.impulse=new r,this.slop=-1,this.eventOutput=void 0}function s(){this.eventOutput=new a,this.eventOutput.bindThis(this),a.setOutputHandler(this,this.eventOutput)}var o=e("famous/physics/constraints/constraint"),r=e("famous/math/vector"),a=e("famous/event-handler");n.prototype=Object.create(o.prototype),n.prototype.constructor=o,n.ON_CONTACT={REFLECT:0,WRAP:1,ABSORB:2},n.prototype.setOpts=function(t){void 0!==t.restitution&&(this.opts.restitution=t.restitution),void 0!==t.k&&(this.opts.k=t.k),void 0!==t.d&&(this.opts.d=t.d),void 0!==t.onContact&&(this.opts.onContact=t.onContact),void 0!==t.n&&this.opts.n.set(t.n)},n.prototype.getNormalVelocity=function(t){var e=this.opts.n;return t.dot(e)},n.prototype.getDistance=function(t){var e=this.opts.n,i=this.opts.d;return t.dot(e)+i},n.prototype.onEnter=function(t,e,i){var s=t.p,o=t.v,r=t.m,a=this.opts.n,u=this.opts.onContact,c=this.opts.restitution,h=this.impulse,l=this.opts.k,p=0;if(this.eventOutput){var d={particle:t,wall:this,overlap:e};this.eventOutput.emit("preCollision",d),this.eventOutput.emit("collision",d)}switch(u){case n.ON_CONTACT.REFLECT:var f=e<this.slop?-((1+c)*a.dot(o)+l/i*(e-this.slop))/(r*i+p):-((1+c)*a.dot(o))/(r*i+p);h.set(a.mult(i*f)),t.applyImpulse(h),t.setPos(s.add(a.mult(-e)));break;case n.ON_CONTACT.ABSORB:var f=a.dot(o)/(r*i+p);h.set(a.mult(i*f)),t.applyImpulse(h),t.setPos(s.add(a.mult(-e))),o.clear();break;case n.ON_CONTACT.WRAP:if(e<-t.r)break}this.eventOutput&&this.eventOutput.emit("postCollision",d)},n.prototype.onExit=function(t,e){var i=this.opts.onContact,s=t.p,o=this.opts.n;i==n.ON_CONTACT.REFLECT?t.setPos(s.add(o.mult(-e))):i==n.ON_CONTACT.WRAP||i==n.ON_CONTACT.ABSORB},n.prototype.applyConstraint=function(t,e,i){for(var n=this.opts.n,s=0;s<t.length;s++){var o=t[s],r=o.p,a=o.v,u=o.r||0,c=this.getDistance(r.add(n.mult(-u))),h=this.getNormalVelocity(a);0>=c&&(0>h?this.onEnter(o,c,i):this.onExit(o,c,i))}},n.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},n.prototype.unbind=function(){return s.call(this),this.unbind.apply(this,arguments)},n.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},i.exports=n}.bind(this)),require.register("famous_modules/famous/transitions/wall-transition/_git_master/index.js",function(t,e,i){function n(t){t=t||0,this.endState=new b(t),this.initState=new b,this._active=!1,this.spring=new v({anchor:this.endState}),this.wall=new y,this._restTolerance=1e-8,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PhysicsEngine=new g,this.particle=this.PhysicsEngine.createParticle({p:this.endState}),this.PhysicsEngine.attach([this.wall,this.spring],this.particle)}function s(){if(this._active){this.PhysicsEngine.step();var t=o.call(this);t<this._absRestTolerance&&(c.call(this),l.call(this,this.endState),p.call(this,[0,0,0]))}else if(this._callback){var e=this._callback;this._callback=void 0,e()}}function o(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function r(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function a(t){var e=n.DEFAULT_OPTIONS;void 0===t.period&&(t.period=e.period),void 0===t.dampingRatio&&(t.dampingRatio=e.dampingRatio),void 0===t.velocity&&(t.velocity=e.velocity),void 0===t.restitution&&(t.restitution=e.restitution),this.spring.setOpts({period:t.period,dampingRatio:t.dampingRatio}),this.wall.setOpts({restitution:t.restitution}),p.call(this,t.velocity)}function u(){this.PhysicsEngine.play(),this._active=!0}function c(){this.PhysicsEngine.pause(),this._active=!1}function h(t){this.endState.set(t);var e=this.endState.sub(this.initState).norm();this.wall.setOpts({d:this.endState.norm(),n:0==e?this.particle.v.normalize(-1):this.endState.sub(this.initState).normalize(-1)}),r.call(this)}function l(t){this.particle.p.set(t)}function p(t){this.particle.v.set(t)}function d(){return 0===this.dimensions?this.particle.p.x:this.particle.p.get()}function f(){return 0===this.dimensions?this.particle.v.x:this.particle.v.get()}function m(t){this._callback=t}var g=e("famous/physics/engine"),v=e("famous/physics/forces/spring"),y=e("famous/physics/constraints/wall"),b=e("famous/math/vector");n.SUPPORTS_MULTIPLE=3,n.DEFAULT_OPTIONS={period:300,dampingRatio:0,restitution:.5,velocity:0},n.prototype.reset=function(t,e){this.dimensions=t instanceof Array?t.length:0,this.initState.set(t),l.call(this,t),e&&p.call(this,e),h.call(this,t),m.call(this,void 0)},n.prototype.getVelocity=function(){return f.call(this)},n.prototype.setVelocity=function(t){this.call(this,p(t))},n.prototype.halt=function(){this.set(this.get())},n.prototype.get=function(){return s.call(this),d.call(this)},n.prototype.set=function(t,e,i){return e?(this.dimensions=t instanceof Array?t.length:0,u.call(this),a.call(this,e),h.call(this,t),void m.call(this,i)):(this.reset(t),void(i&&i()))},i.exports=n}.bind(this)),require.register("app/custom/row-view/header-bar.js",function(t,e,i){function n(){s.apply(this,arguments),this.surfacesMod=new o}var s=e("famous/widgets/title-bar"),o=e("famous/modifier");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.collapse=function(){this.hide(),this.headerResize=!0,this.setOptions({size:[void 0,-1]})},n.prototype.expand=function(){this.show(),this.headerResize=!0,this.setOptions({size:[void 0,50]})},n.prototype.show=function(t){t?this.curTitle=t:t=this.curTitle,"<div></div>"!=t?s.prototype.show.apply(this,[t]):this.lightbox.hide(),this.headerResize=!1},n.prototype.hide=function(){this.lightbox.hide(),this.headerResize=!1},i.exports=n}.bind(this)),require.register("app/custom/row-view/header-view.js",function(t,e,i){function n(t){a.call(this),this.options={header:void 0,buttonSizeY:20,classes:[],content:"",size:[!0,20]},this.setOptions(t),this.setupSurfaces(),this.events(),window.hh=this}var s=e("famous/surface"),o=e("famous/modifier"),r=(e("famous/transform"),e("famous/engine")),a=(e("templates"),e("row-view"));n.prototype=Object.create(a.prototype),n.prototype.constructor=n,n.prototype.setOptions=function(t){_.extend(this.options,t)},n.prototype.setupSurfaces=function(){this.headerMod=new o,this.headerSurface=new s({classes:this.options.classes,size:this.options.size,properties:{color:"white"},content:this.options.content}),this.headerSurface.pipe(this._eventOutput),this.surfaces.add(this.headerMod).add(this.headerSurface)},n.prototype.resizeItem=function(){this.headerSurface._currTarget&&(this.headerSurface._currTarget.children[0].style.width=window.innerWidth+"px")},n.prototype.events=function(){r.on("resize",this.resizeItem.bind(this))},i.exports=n}.bind(this)),require.register("app/custom/row-view/index.js",function(t,e,i){i.exports={RowView:e("row-view"),ItemView:e("item-view"),ItemView2S:e("item-view-2S"),HeaderView:e("header-view"),HeaderBar:e("header-bar")}}.bind(this)),require.register("app/custom/row-view/item-view-2S.js",function(t,e,i){function n(t){m.apply(this,arguments),this.model=t.model,this.options={paddingLeft:20,paddingRight:20,buttonSizeX:50,buttonSizeY:50,_leftEndOrigin:[0,0],_rightEndOrigin:[1,0],size:[!0,50]},this.setOptions(t),this.setupSurfaces(),this.setupEvent(),this.buttonsClickEvents(),this.isEditingMode=!1,this.areEditingMode=!1,this.returnZeroOpacityTransition={curve:u.linearNorm,duration:100},this.wallTransition={method:"wall",period:300,dampingRatio:1},p.on("resize",this.resizeItem.bind(this))}var s=(e("famous/render-node"),e("famous/surface")),o=e("famous/modifier"),r=e("famous/input/generic-sync"),a=(e("famous/input/mouse-sync"),e("famous/input/touch-sync"),e("famous/transform")),u=e("famous/transitions/easing"),c=e("famous/transitions/transitionable"),h=e("famous/transitions/wall-transition"),l=e("famous/transitions/spring-transition"),p=e("famous/engine"),d=e("famous/utilities/utility"),f=e("templates"),m=e("row-view"),g=e("helpers");c.registerMethod("wall",h),c.registerMethod("spring",l),n.prototype=Object.create(m.prototype),n.prototype.constructor=n,n.prototype.setupEvent=function(){this.pos=new c([0,0]);var t=new r(function(){return this.pos.get()}.bind(this),{syncClasses:[g.deviceSync()]});this.itemSurface.pipe(t),this.itemSurface.pipe(this._eventOutput),t.on("start",function(){this.pos.set(this.isEditingMode?[this.options.nButtons*this.options.buttonSizeX,0]:[0,0]),this._directionChosen=!1,this.clickTimeout=setTimeout(function(){this.itemSurface.setProperties({backgroundColor:"rgba(255,255,255,0.1)"})}.bind(this),100)}.bind(this)),t.on("update",function(t){if(this.clickTimeout&&(clearTimeout(this.clickTimeout),delete this.clickTimeout),this.itemSurface.setProperties({backgroundColor:"transparent"}),this.pos.set(t.p),g.isMobile()&&!this._directionChosen){var e=Math.abs(this.isEditingMode?this.pos.get()[0]-this.options.nButtons*this.options.buttonSizeX:this.pos.get()[0]),i=Math.abs(this.pos.get()[1]);this.direction=e>i?d.Direction.X:d.Direction.Y,this._directionChosen=!0,this.direction==d.Direction.X?this.itemSurface.unpipe(this._eventOutput):this.itemSurface.pipe(this._eventOutput)}else g.isMobile()&&this.direction!=d.Direction.X||(this.animateItem(),this.animateLeftButtons(),this.animateRightButtons())
}.bind(this)),t.on("end",function(t){setTimeout(function(){this.itemSurface.setProperties({backgroundColor:"transparent"})}.bind(this),300),this.pos.set(t.p),g.isMobile()&&this.direction!=d.Direction.X||(this.pos.get()[0]>this.options.nButtons*this.options.buttonSizeX?this.toggleEditing():this.setEditingOff(),this.pos.get()[0]<-.3*window.innerWidth&&(this._eventOutput.emit(this.options.rightButton.event,this.model),this.setEditingOff()))}.bind(this))},n.prototype.setOptions=function(t){_.extend(this.options,t),this.options.nButtons=t.leftButtons?t.leftButtons.length:0},n.prototype.setupSurfaces=function(){this.backgroundSurface=new s({content:f.itemFrame2(this.options.leftButtons,this.options.rightButton,this.options.paddingLeft,this.options.paddingRight),size:this.options.size,properties:{zIndex:-1}}),this.surfaces.add(this.backgroundSurface),this.itemSurface=new s({classes:this.options.itemButton.classes,content:this.options.itemButton.content,size:this.options.size,properties:{backgroundColor:"transparent",zIndex:9}}),this.itemMod=new o({origin:this.options._leftEndOrigin}),this.surfaces.add(this.itemMod).add(this.itemSurface)},n.prototype.updateItem=function(){this.itemSurface.setContent(f.recentItemView(this.model))},n.prototype.animateItem=function(){this.itemMod.setTransform(a.translate(this.pos.get()[0],0,0))},n.prototype.animateItemEnd=function(){var t=a.identity;t=this.isEditingMode?a.translate(this.options.nButtons*this.options.buttonSizeX,0,0):a.translate(0,0,0),this.itemMod.setTransform(t,this.wallTransition)},n.prototype.animateLeftButtons=function(){this.leftButtons=_.first(this.getButtons(),this.options.nButtons);for(var t=0;t<this.options.nButtons;t++)this.leftButtons[t].style.opacity=Math.min((this.pos.get()[0]-this.options.buttonSizeX*t)/this.options.buttonSizeX,1)},n.prototype.animateLeftButtonsEnd=function(){if(this.leftButtons=_.first(this.getButtons(),this.options.nButtons),this.leftButtons)for(var t=0;t<this.options.nButtons;t++)this.leftButtons[t].style.opacity=this.isEditingMode?1:0},n.prototype.animateRightButtons=function(){this.rightButton=_.last(this.getButtons()),this.options.rightButton&&this.pos.get()[0]<0&&(this.rightButton.style.opacity=Math.min(-1*this.pos.get()[0]/(.3*window.innerWidth),1))},n.prototype.animateRightButtonsEnd=function(){this.rightButton=_.last(this.getButtons()),this.rightButton&&this.options.rightButton&&(this.rightButton.style.opacity=0)},n.prototype.resizeItem=function(){this.itemSurface._currTarget&&(this.itemSurface._currTarget.children[0].style.width=window.innerWidth+"px"),this.backgroundSurface._currTarget&&(this.backgroundSurface._currTarget.children[0].style.width=window.innerWidth-this.options.paddingLeft-this.options.paddingRight+"px")},n.prototype.setEditingOn=function(){this.isEditingMode=!0,this.animateItemEnd(),this.animateLeftButtonsEnd(),this.animateRightButtonsEnd()},n.prototype.setEditingOff=function(){setTimeout(function(){this.isEditingMode=!1,this.animateItemEnd(),this.animateLeftButtonsEnd(),this.animateRightButtonsEnd()}.bind(this),100)},n.prototype.toggleEditing=function(){this.isEditingMode=!this.isEditingMode,this.animateItemEnd(),this.animateLeftButtonsEnd(),this.animateRightButtonsEnd()},n.prototype.onToggleAll=function(){0==this.areEditingMode?this.setEditingOn():this.setEditingOff(),this.areEditingMode=!this.areEditingMode},n.prototype.buttonsClickEvents=function(){this.itemSurface.on("click",function(){0==this.pos.get()[0]&&0==this.pos.get()[1]&&0==this.isEditingMode&&this._eventOutput.emit(this.options.itemButton.event,this.model)}.bind(this)),this._eventInput.on("backToNoneEditing",function(){this.areEditingMode=!1}.bind(this))},n.prototype.getButtons=function(){return!this.buttons&&this.backgroundSurface._currTarget&&(this.buttons=this.backgroundSurface._currTarget.children[0].children,_(_.first(this.buttons,this.options.nButtons)).each(function(t,e){$(t).on("click",function(){this._eventOutput.emit(this.options.leftButtons[e].event,this.model)}.bind(this))}.bind(this))),this.buttons},i.exports=n}.bind(this)),require.register("app/custom/row-view/item-view.js",function(t,e,i){function n(t){m.apply(this,arguments),this.model=t.model,this.options={paddingLeft:20,paddingRight:20,buttonSizeX:50,buttonSizeY:50,_leftEndOrigin:[0,0],_rightEndOrigin:[1,0],size:[!0,50]},this.setOptions(t),this.setupSurfaces(),this.setupEvent(),this.buttonsClickEvents(),this.isEditingMode=!1,this.areEditingMode=!1,this.returnZeroOpacityTransition={curve:u.linearNorm,duration:100},this.wallTransition={method:"wall",period:300,dampingRatio:1},p.on("resize",this.resizeItem.bind(this))}var s=(e("famous/render-node"),e("famous/surface")),o=e("famous/modifier"),r=e("famous/input/generic-sync"),a=(e("famous/input/mouse-sync"),e("famous/input/touch-sync"),e("famous/transform")),u=e("famous/transitions/easing"),c=e("famous/transitions/transitionable"),h=e("famous/transitions/wall-transition"),l=e("famous/transitions/spring-transition"),p=e("famous/engine"),d=e("famous/utilities/utility"),f=e("templates"),m=e("row-view"),g=e("helpers");c.registerMethod("wall",h),c.registerMethod("spring",l),n.prototype=Object.create(m.prototype),n.prototype.constructor=n,n.prototype.setupEvent=function(){var t=new r(function(){return this.pos}.bind(this),{syncClasses:[g.deviceSync()]});this.itemSurface.pipe(t),this.itemSurface.pipe(this._eventOutput),this.pos=[0,0],t.on("start",function(){this.pos=this.isEditingMode?[this.options.nButtons*this.options.buttonSizeX,0]:[0,0],this._directionChosen=!1,this.clickTimeout=setTimeout(function(){this.itemSurface.setProperties({backgroundColor:"rgba(255,255,255,0.1)"})}.bind(this),100)}.bind(this)),t.on("update",function(t){if(this.clickTimeout&&(clearTimeout(this.clickTimeout),delete this.clickTimeout),this.itemSurface.setProperties({backgroundColor:"transparent"}),this.pos=t.p,g.isMobile()&&!this._directionChosen){var e=Math.abs(this.isEditingMode?this.pos[0]-this.options.nButtons*this.options.buttonSizeX:this.pos[0]),i=Math.abs(this.pos[1]);this.direction=e>i?d.Direction.X:d.Direction.Y,this._directionChosen=!0,this.direction==d.Direction.X?this.itemSurface.unpipe(this._eventOutput):this.itemSurface.pipe(this._eventOutput)}else g.isMobile()&&this.direction!=d.Direction.X||(this.animateItem(),this.animateLeftButtons(),this.animateRightButtons())}.bind(this)),t.on("end",function(t){setTimeout(function(){this.itemSurface.setProperties({backgroundColor:"transparent"})}.bind(this),300),this.pos=t.p,g.isMobile()&&this.direction!=d.Direction.X||(this.pos[0]>this.options.nButtons*this.options.buttonSizeX?this.toggleEditing():this.setEditingOff(),this.pos[0]<-.3*window.innerWidth&&(this._eventOutput.emit(this.options.rightButton.event,this.model),this.setEditingOff()))}.bind(this))},n.prototype.setOptions=function(t){_.extend(this.options,t),this.options.nButtons=t.leftButtons?t.leftButtons.length:0},n.prototype.setupSurfaces=function(){this.backgroundSurface=new s({content:f.itemFrame(this.options.paddingLeft,this.options.paddingRight),size:this.options.size,properties:{zIndex:-1}}),this.surfaces.add(this.backgroundSurface),_(this.options.leftButtons).each(function(t,e){this["leftButton"+e]=new s({content:t.content,size:[this.options.buttonSizeX,this.options.buttonSizeY]}),this["leftButton"+e+"Mod"]=new o({origin:this.options._leftEndOrigin,opacity:0,transform:a.translate(this.options.paddingLeft+this.options.buttonSizeX*e,0,0)}),this["leftButton"+e].pipe(this._eventOutput),this.surfaces.add(this["leftButton"+e+"Mod"]).add(this["leftButton"+e])}.bind(this)),this.options.rightButton&&(this.rightButton=new s({content:this.options.rightButton.content,size:[this.options.buttonSizeX,this.options.buttonSizeY]}),this.rightButtonMod=new o({origin:this.options._rightEndOrigin,opacity:0,transform:a.translate(-this.options.paddingRight,0,0)}),this.surfaces.add(this.rightButtonMod).add(this.rightButton)),this.itemSurface=new s({classes:this.options.itemButton.classes,content:this.options.itemButton.content,size:this.options.size,properties:{backgroundColor:"transparent",zIndex:9}}),this.itemMod=new o({origin:this.options._leftEndOrigin}),this.surfaces.add(this.itemMod).add(this.itemSurface)},n.prototype.updateItem=function(){this.itemSurface.setContent(f.recentItemView(this.model))},n.prototype.animateItem=function(){this.itemMod.setTransform(a.translate(this.pos[0],0,0))},n.prototype.animateItemEnd=function(){var t=a.identity;t=this.isEditingMode?a.translate(this.options.nButtons*this.options.buttonSizeX,0,0):a.translate(0,0,0),this.itemMod.setTransform(t,this.wallTransition)},n.prototype.animateLeftButtons=function(){for(var t=0;t<this.options.nButtons;t++){var e=Math.min((this.pos[0]-this.options.buttonSizeX*t)/this.options.buttonSizeX,1);this["leftButton"+t+"Mod"].setOpacity(e)}},n.prototype.animateLeftButtonsEnd=function(){for(var t=0;t<this.options.nButtons;t++)this.isEditingMode?this["leftButton"+t+"Mod"].setOpacity(1,this.returnZeroOpacityTransition):this["leftButton"+t+"Mod"].setOpacity(0,this.returnZeroOpacityTransition)},n.prototype.animateRightButtons=function(){this.rightButton&&this.pos[0]<0&&this.rightButtonMod.setOpacity(Math.min(-1*this.pos[0]/(.3*window.innerWidth),1))},n.prototype.animateRightButtonsEnd=function(){this.rightButton&&this.rightButtonMod.setOpacity(0,this.returnZeroOpacityTransition)},n.prototype.resizeItem=function(){this.itemSurface._currTarget&&(this.itemSurface._currTarget.children[0].style.width=window.innerWidth+"px"),this.backgroundSurface._currTarget&&(this.backgroundSurface._currTarget.children[0].style.width=window.innerWidth-this.options.paddingLeft-this.options.paddingRight+"px")},n.prototype.setEditingOn=function(){this.isEditingMode=!0,this.animateItemEnd(),this.animateLeftButtonsEnd(),this.animateRightButtonsEnd()},n.prototype.setEditingOff=function(){setTimeout(function(){this.isEditingMode=!1,this.animateItemEnd(),this.animateLeftButtonsEnd(),this.animateRightButtonsEnd()}.bind(this),100)},n.prototype.toggleEditing=function(){this.isEditingMode=!this.isEditingMode,this.animateItemEnd(),this.animateLeftButtonsEnd(),this.animateRightButtonsEnd()},n.prototype.onToggleAll=function(){0==this.areEditingMode?this.setEditingOn():this.setEditingOff(),this.areEditingMode=!this.areEditingMode},n.prototype.buttonsClickEvents=function(){_(this.options.leftButtons).each(function(t,e){this["leftButton"+e].on("click",function(t){this._eventOutput.emit(t.event,this.model)}.bind(this,t))}.bind(this)),this.itemSurface.on("click",function(){0==this.pos[0]&&0==this.pos[1]&&0==this.isEditingMode&&this._eventOutput.emit(this.options.itemButton.event,this.model)}.bind(this)),this._eventInput.on("backToNoneEditing",function(){this.areEditingMode=!1}.bind(this))},i.exports=n}.bind(this)),require.register("app/custom/row-view/row-view.js",function(t,e,i){function n(){o.apply(this,arguments),this.surfaces=new s,this.surfacesMod=new r,this._node.add(this.surfacesMod).add(this.surfaces)}var s=e("famous/render-node"),o=e("famous/view"),r=e("famous/modifier");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.collapse=function(t){this.surfacesMod.setOpacity(0,{duration:300},t)},n.prototype.expand=function(t){this.surfacesMod.setOpacity(1,{duration:300},t)},n.prototype.getSize=function(){var t=this.surfacesMod.opacityState.get();return[this.options.size[0],Math.floor(this.options.size[1]*t)||0]},i.exports=n}.bind(this)),require.register("app/views/add-contact-view.js",function(t,e,i){function n(t){function e(t){t&&t.attributes&&(this.getFormObject(),t.attributes.provider?this.formObject[t.attributes.provider]=t.attributes:this.formObject=_.extend(this.formObject,t.attributes),this.formObject.firstname=this.formObject.firstname?this.formObject.firstname:t.attributes.firstname,this.formObject.lastname=this.formObject.lastname?this.formObject.lastname:t.attributes.lastname,this.formObject.email=this.formObject.email?this.formObject.email:t.attributes.email,this.renderContact())}function i(t){c.show(this.headerFooterLayout,!0,function(){e.bind(this)(t)}.bind(this))}r.call(this),this.formObject={},this.socialCollection={},this.socialView={},this.headerFooterLayout=new s({headerSize:50,footerSize:0});var n=new u;void 0===t.inTransform&&(this.options.inTransform=n.options.inTransform),void 0===t.outTransform&&(this.options.outTransform=n.options.outTransform),void 0===t.inTransition&&(this.options.inTransition=n.options.inTransition),void 0===t.outTransition&&(this.options.outTransition=n.options.outTransition),void 0===t.inOpacity&&(this.options.inOpacity=n.options.inOpacity),void 0===t.outOpacity&&(this.options.outOpacity=n.options.outOpacity),this.options.showOrigin=[0,0],this.options.inOrigin=[0,0],this.options.outOrigin=[0,0],this.model=t.model,this.header=new o({classes:["header"],size:[void 0,50],properties:{}}),this.content=new o({classes:["add-contact-view"],size:[void 0,void 0],properties:{padding:"20px",backgroundColor:"transparent"}}),this.headerFooterLayout.id.header.add(this.header),this.headerFooterLayout.id.content.add(this.content);var c=new a;this._add(c),c.show(this.headerFooterLayout),this.content.pipe(this._eventOutput),this.header.pipe(this._eventOutput),this.renderContact(),this.header.on("click",function(t){var e=$(t.target);e.hasClass("done-contact")?(this.submitForm(),$("body").removeClass("editing"),this._eventOutput.emit("triggerBackToNoneEditing"),this._eventOutput.emit("showApp")):e.hasClass("close-button")&&this._eventOutput.emit("showApp")}.bind(this)),this.collection=t.collection,this.content.on("click",function(t){function e(){if(!this.socialView[s]){if(!_.isArray(this.socialCollection[s].models))return void alert("Your "+s+" contact list is empty.");this.socialView[s]=new f({title:h.capitalize(s),collection:this.socialCollection[s]}),this.socialView[s].pipe(this._eventOutput)}c.show(this.socialView[s],!0)}function i(){this._eventOutput.emit("onSocialLink",s),delete this.socialCollection[s]}var n=$(t.target);if(n.hasClass("import-contact")){var s=n[0].id;this.socialCollection[s]?e.bind(this)():(this.socialCollection[s]=new d,this.socialCollection[s].url="/contact/"+s,this.socialCollection[s].fetch({success:e.bind(this),error:i.bind(this)}))}else if(n.hasClass("remove-button")){var s=n[0].id;s&&delete this.formObject[s],this.renderContact()}}.bind(this)),this._eventOutput.on("goBack",i)}var s=e("famous/views/header-footer-layout"),o=e("famous/surface"),r=(e("famous/event-handler"),e("famous/view")),a=e("famous/views/edge-swapper"),u=e("up-down-transform"),c=e("templates"),h=e("helpers"),l=e("models"),l=(l.Settings,e("models")),p=l.Contact,d=l.SocialContactCollection,f=e("import-contact-view");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.renderContact=function(){var t='<div class="initial">'+this.initial+"</div>";t+='<form role="form">',t+='<div class="form-group small">',t+='<input type="text" class="form-control" id="input-first-name" placeholder="First" name="firstname"',this.formObject.firstname&&(t+=' value="'+this.formObject.firstname+'"'),t+="></div>",t+='<div class="form-group small">',t+='<input type="text" class="form-control" id="input-last-name" placeholder="Last" name="lastname"',this.formObject.lastname&&(t+=' value="'+this.formObject.lastname+'"'),t+="></div>",t+='<div class="form-group small">',t+='<input type="email" class="form-control" id="input-email" placeholder="Email" name="email"',this.formObject.email?(t+=' value="'+this.formObject.email+'">',t+=c.getEmailInvite(this.formObject),t+="</div>"):t+="></div>",t+='<div class="form-group small">',t+='<input type="phone" class="form-control" id="input-phone" placeholder="Phone" name="phone"',this.formObject.phone?(t+=' value="'+this.formObject.phone+'">',t+=c.getSMSInvite(this.formObject),t+="</div>"):t+="></div>",t+='<div class="box">',t+=c.addSocialContact(this.formObject,"google"),t+=c.addSocialContact(this.formObject,"facebook"),t+=c.addSocialContact(this.formObject,"twitter"),t+=c.addSocialContact(this.formObject,"linkedin"),t+=c.getInvite(this.formObject),t+="</div></form>",this.content.setContent(t);var t=c.editContactHeader(this.title);this.header.setContent(t)},n.prototype.getFormObject=function(){var t=$(".add-contact-view form").serializeArray(),e={};for(var i in t)t[i].name&&(e[t[i].name]=t[i].value);this.formObject=_.extend(this.formObject,e);for(var i in this.formObject)void 0===this.formObject[i]&&delete this.formObject[i];return this.formObject},n.prototype.submitForm=function(){var t=this.getFormObject();if("Edit Contact"==this.title)this.model.set(t),this._eventOutput.emit("submitContact",this.model);else{var e=this.collection.create(t),i=this.collection.findWhere({id:e.id});this._eventOutput.emit("submitContact",i)}this.collection.trigger("sync")},n.prototype.setContact=function(t){t&&t instanceof p?(this.formObject=_.omit(t.attributes,"id"),this.title="Edit Contact",this.initial="",this.formObject.firstname&&(this.initial=this.formObject.firstname[0]),this.formObject.lastname&&(this.initial+=this.formObject.lastname[0]),this.model=t):(this.formObject={},t&&(this.formObject=_.omit(t.attributes,"id")),this.title="New Contact",this.initial='<i class="fa fa-user fa-lg"></i>')},i.exports=n}.bind(this)),require.register("app/views/alert-view.js",function(t,e,i){function n(t,e){s.call(this),this.options={inTransform:r.identity,outTransform:r.identity,showTransform:r.identity,inTransition:{duration:100},outTransition:{duration:100},overlap:!0},this.bigSurface=new o({size:[void 0,void 0],properties:{background:"rgba(0,0,0,0.5)",zIndex:1e3}}),this.alertSurface=new o({classes:["alert"],size:[340,220],properties:{borderRadius:"10px",background:"rgba(59, 59, 59, 0.90)",color:"rgba(245, 236, 236,1)",zIndex:1001}}),this.alertLightBox=new u({inTransform:r.identity,inOpacity:.1,inOrigin:[.5,.45],outTransform:r.scale(.001,.001,.001),outOpacity:1,outOrigin:[.5,.45],showTransform:r.identity,showOpacity:1,showOrigin:[.5,.45],inTransition:{duration:200,curve:a.inQuad()},outTransition:{duration:100,curve:a.outQuint()}}),this.setAlertMessage(t,e),this._add(this.bigSurface),this._add(this.alertLightBox),this.alertLightBox.show(this.alertSurface)}var s=e("famous/view"),o=e("famous/surface"),r=(e("famous/event-handler"),e("famous/transform")),a=e("famous/transitions/easing"),u=e("light-box");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.setAlertMessage=function(t,e){var i=['<div class="alert-title"><b>Beepe</b></div><div id="message">',t,"</div>"];e||i.push('<div id="close-alert"> OK </div>'),this.alertSurface.setContent(i.join(""))},i.exports=n}.bind(this)),require.register("app/views/camera-view.js",function(t,e,i){function n(t){s.call(this),this.model=t.model,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;var e='<div class="camera local-video blur off">';navigator.getUserMedia&&(e+='<video muted="true" autoplay poster="content/images/transparent.png"></video>'),e+="</div>",this.localVideoSurface=new o({content:e});var e='<div class="camera remote-video">';navigator.getUserMedia&&(e+='<video autoplay poster="content/images/transparent.png"></video>'),e+="</div>",this.remoteVideoSurface=new o({properties:{zIndex:-3},content:e}),this.localVideoSurface.pipe(this._eventOutput),this.remoteVideoSurface.pipe(this._eventOutput),this.transform=new r({origin:[.9,.1]}),this._add(new r({transform:a.translate(0,0,-5)})).add(this.remoteVideoSurface),this._add(this.transform).add(this.localVideoSurface),this.turnOff()}var s=e("famous/view"),o=e("famous/surface"),r=(e("famous/event-handler"),e("famous/modifier")),a=e("famous/transform");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.turnOn=function(){$(".remote-video").show(),this.transform.setTransform(a.move(a.scale(.25,.25),[0,0,-5]),{duration:500})},n.prototype.turnOff=function(){$(".remote-video").hide(),this.transform.setTransform(a.move(a.scale(1,1),[0,0,-5]),{duration:500})},i.exports=n}.bind(this)),require.register("app/views/chat-item-view.js",function(t,e,i){function n(t){t.leftButtons=[{content:s.crossButton(),event:"deleteItem"},{content:s.editButton(),event:"editContact"}],t.rightButton={content:s.phoneButton(),event:"outgoingCall"},t.itemButton={classes:["contact-item","chat-item"],content:s.chatItemView(t.model),event:"chatContact"},t.buttonSizeY=60,t.size=[!0,60],r.apply(this,arguments),this._eventInput.on("toggleAllChat",this.onToggleAll.bind(this)),this._eventInput.on("backToNoneEditing",this.setEditingOff.bind(this))}var s=e("templates"),o=e("row-view"),r=o.ItemView2S;n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.updateItem=function(){this.itemSurface.setContent(s.chatItemView(this.model))},i.exports=n}.bind(this)),require.register("app/views/chats-section-view.js",function(t,e,i){function n(t){s.call(this),this.title=r.chatsHeader(),this.navigation={caption:"Messages",icon:'<i class="fa fa-comments-o"></i>'},this.collection=t.collection,this.scrollview=new o({startAt:"top"}),this.pipe(this.scrollview),this._add(this.scrollview),this.scrollview.sequenceFrom([]),this.collection.on("all",function(t,e,i,n){switch(t){case"remove":var s=n.index;console.log(s),this.scrollview.removeByIndex(s);break;case"add":this.addItem(e),this.collection.sort(),this.scrollview.sortBy(function(t){return-1*t.model.get("time")});break;case"change":this.collection.sort(),this.scrollview.sortBy(function(t){return-1*t.model.get("time")})}this.updateItems()}.bind(this))}var s=e("famous/view"),o=(e("famous/utilities/utility"),e("famous/surface"),e("vertical-scroll-view")),r=(e("famous/engine"),e("templates")),a=e("chat-item-view");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.updateItems=function(){_.each(this.scrollview.node.array,function(t){t.updateItem&&t.updateItem()})},n.prototype.loadItems=function(){this.scrollview.setPosition(0),this.sequence=this.collection.map(function(t){var e=new a({model:t});return e.pipe(this._eventOutput),this._eventInput.pipe(e),e}.bind(this)),this.scrollview.sequenceFrom(this.sequence)},n.prototype.addItem=function(t){var e=new a({model:t});e.pipe(this._eventOutput),this._eventInput.pipe(e),this.scrollview.addByIndex(0,e)},n.prototype.removeItemByIndex=function(t){this.scrollview.removeByIndex(t)},i.exports=n}.bind(this)),require.register("app/views/connected-call-view.js",function(t,e,i){function n(t){s.call(this),this.collection=t.collection,this._eventOutput.on("menu-toggle-button",this.onMenuToggleButton),this.conversationView=new r,this.conversationView.pipe(this._eventOutput),this._eventInput.pipe(this.conversationView),this._add(this.conversationView)}var s=e("famous/view"),o=(e("famous/transform"),e("famous/surface"),e("famous/event-handler"),e("templates"),e("models").Call),r=e("conversation-view");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.start=function(t,e){this.conversationView.start(t,e),this.model=this.collection.models[0]||new o,this.appSettings=t,$(".camera").removeClass("blur")},n.prototype.stop=function(t){this._eventOutput.emit("outgoingCallEnd",this.model),this._eventOutput.emit("incomingCallEnd",this.model),t.exit&&this._eventOutput.emit("showApp"),this.conversationView.stop(t)},i.exports=n}.bind(this)),require.register("app/views/contact-item-view.js",function(t,e,i){function n(t){this.model=t.model,t.paddingRight=40,t.leftButtons=[{content:s.crossButton(),event:"deleteItem"},{content:s.editButton(),event:"editContact"}],t.rightButton={content:s.phoneButton(),event:"outgoingCall"},t.itemButton={classes:["contact-item","editable"],content:s.contactItemView(t.model),event:"chatContact"},r.apply(this,arguments),this.model.on("all",function(t){switch(t){case"change:favorite":$(this.leftButton1._currTarget).find(".favorite-button").toggleClass("active")}}.bind(this)),this._eventInput.on("toggleAllContact",this.onToggleAll.bind(this)),this._eventInput.on("backToNoneEditing",this.setEditingOff.bind(this)),this.model.on("change",function(){this.changeItem()}.bind(this))}var s=e("templates"),o=e("row-view"),r=o.ItemView2S;n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.changeItem=function(){this.itemSurface.setContent(s.contactItemView(this.model))},i.exports=n}.bind(this)),require.register("app/views/contacts-scroll-view.js",function(t,e,i){function n(t){h.call(this),u=t.sortKey||"lastname",this.sortKey=u,c=t.itemView||S,this.searchKey=!1,this.abcArray="ABCDEFGHIJKLMNOPQRSTUVWXYZ#",this.setupLayout(t),this.renderHeaders(),this.prepareSequences(),this.collectionEvents(),this.abcSurfaceEvents(),this.searchSurfaceEvents()}function s(){function t(){var t=this.getSize()[1];if(this.node)var e=_.chain(this.node.array).filter(function(t){return t instanceof c}).map(function(t){return t.model.get(u)[0]||"#"}.bind(this)).map(function(t){return/^[a-zA-Z]+$/.test(t)?t.toUpperCase():"#"}).value();var i=_.filter(e,function(t){return t==_.last(e)}).length,n=_.find(this.node.array,function(t){return t instanceof c}),s=n?n.getSize()[1]:0,o=_.find(_.clone(this.node.array).reverse(),function(t){return t instanceof k}),r=o?o.getSize()[1]:0;t=Math.max(0,t-r-i*s),this.emptySurface.setSize([void 0,t])}this.emptySurface&&setTimeout(t.bind(this),300)}function o(t){return t=t||"lastname",function(e){var i,n,s;i=n=s="",e.model&&(i=e.model.get("lastname")||"#"),e.model&&(n=e.model.get("firstname")||"#"),e.options&&e.options.header&&(s=e.options.header);var o;return o="firstname"==t.toLowerCase()?s+n+" "+i:s+i+" "+n,/^[a-zA-Z]+$/.test(o[0])||(o="{"+o),o.toUpperCase()}}function r(t){return function(e){return t?(t=t.toLowerCase(),e.model?-1!=e.model.get("firstname").toLowerCase().indexOf(t)||-1!=e.model.get("lastname").toLowerCase().indexOf(t)?!0:!1:!1):t===!1}}function a(t,e,i){return _.chain(t).filter(i).sortBy(e).value()}var u,c,h=e("famous/view"),l=e("famous/views/header-footer-layout"),p=(e("famous/utilities/utility"),e("famous/modifier")),d=e("famous/input/generic-sync"),f=e("famous/surface"),m=(e("famous/transitions/easing"),e("custom-input-sync")),g=m.TouchSync,v=m.MouseSync,y=e("templates"),b=e("famous/transform"),w=e("vertical-scroll-view"),S=e("contact-item-view"),x=e("row-view"),k=x.HeaderView,C=e("helpers");n.prototype=Object.create(h.prototype),n.prototype.constructor=n,n.prototype.collectionEvents=function(){this.collection.on("all",function(t,e){switch(t){case"change":this.changeItem(e);break;case"remove":this.removeItem(e),this.renderHeaders(),0==this.collection.length&&this.renderAddSurface();break;case"add":this.addItem(e);break;case"sync":this.renderHeaders(),setTimeout(this.renderScrollView.bind(this),this.scrollview.node.array.length>1?0:1e3)}}.bind(this))},n.prototype.prepareSequences=function(){this.contactSequence=[],this.headerSequence=_.map("ABCDEFGHIJKLMNOPQRSTUVWXYZ#",function(t){var e=new k({content:y.headerItemView(t,0,0),header:t});return e.pipe(this.scrollview),e}.bind(this))},n.prototype.setupLayout=function(t){this.searchBarSize=50,this.abcSurfaceWidth=30,this.abcSurfaceHeight=void 0,this.headerFooterLayout=new l({headerSize:this.searchBarSize,footerSize:0}),this.LayoutMod=new p,this.searchSurface=new f({size:[void 0,this.searchBarSize],content:['<div class="contact-section-search-bar"><div><i class="fa fa-search"></i>   ','<input type="text" class="search-contact" placeholder = "Search" ><span class="cancel">cancel</span></input></div></div>'].join(""),properties:{backgroundColor:"rgba(15,15,15,0.9)",color:"white"}}),this.searchSurfaceMod=new p({transform:b.translate(0,0,3)}),this.searhBarTransition={duration:0},this.searchMode=!1,this.abcSurface=new f({size:[this.abcSurfaceWidth,this.abcSurfaceHeight],classes:["abcButton"],content:y.abcButtons(),properties:{backgroundColor:"rgba(160,160,160,0.0)",zIndex:2}}),this._eventInput.pipe(this.searchSurface),this.abcMod=new p({origin:[1,0],transform:b.translate(0,0,10)}),this.title='<button class="left edit-button" id="contact-edit-contact"></button><div>All Contacts</div><button class="right add-contact" id="add-contact"><i class="fa fa-plus" id="add-contact"></i></button>',this.navigation={caption:"Contacts",icon:'<i class="fa fa-users"></i>'},this.collection=t.collection;var e=C.isMobile()?500:1e4;this.scrollview=new w({margin:e}),this.scrollview.emptySurfaceResize=s,this.scrollview.sequenceFrom([]),this.headerFooterLayout.id.header.add(this.searchSurfaceMod).add(this.searchSurface),this.headerFooterLayout.id.content.add(this.scrollview),this.headerFooterLayout.id.content.add(this.abcMod).add(this.abcSurface),this.pipe(this.scrollview),this._add(this.LayoutMod).add(this.headerFooterLayout)},n.prototype.renderAddSurface=function(){var t='<div class="firstAdd"><div> <i class="fa fa-plus fa-5x" ></i> </div> <div> Your contact list is empty,</div><div> Please add your first contact.</div></div>',e=new f({size:[void 0,void 0]});e.setContent(t),e.on("click",function(t){$(t.target).hasClass("fa-plus")&&this._eventOutput.emit("editContact")}.bind(this)),this.scrollview.sequenceFrom([e])},n.prototype.renderScrollView=function(){if(0==this.collection.length)return void this.renderAddSurface();var t=this.headerSequence.concat(this.contactSequence),e=a(t,o(this.sortKey),r(this.searchKey));this.scrollview.sequenceFrom(e)},n.prototype.createItem=function(t){var e=new S({model:t});return e.pipe(this._eventOutput),this._eventInput.pipe(e),e},n.prototype.addItem=function(t){var e=this.createItem(t);this.contactSequence.push(e)},n.prototype.removeItem=function(t){var e=this.contactSequence.map(function(t){return t.model}).indexOf(t);this.contactSequence.splice(e,1);var e=this.scrollview.node.array.map(function(t){return t.model}).indexOf(t);this.scrollview.removeByIndex(e)},n.prototype.changeItem=function(){},n.prototype.abcSurfaceEvents=function(){var t=[0,0],e=new d(function(){return t},{syncClasses:[v,g]});this.abcSurface.pipe(e),e.on("start",function(t){this.scrollToContact(t)}.bind(this)),e.on("update",function(t){this.scrollToContact(t)}.bind(this))},n.prototype.scrollToContact=function(t){var e=document.elementFromPoint(t.ap[0],t.ap[1]);if(e&&e.id){var i=this.abcArray.indexOf(e.id),n=this.scrollview.node.array.indexOf(this.headerSequence[i]);this.scrollview.scrollTo(n,0)}},n.prototype.searchSurfaceEvents=function(){this.searchSurface.on("click",function(t){"search-contact"==t.target.className?this._eventInput.emit("searchOnFocus",t):"cancel"==t.target.className&&this._eventInput.emit("searchOnCancel")}.bind(this)),this._eventInput.on("searchOnFocus",this.searchOnFocus.bind(this)),this._eventInput.on("searchOnCancel",this.searchOnCancel.bind(this)),this.searchSurface.on("keyup",function(){this.searchKey=this.getSearchKey(),this.renderScrollView()}.bind(this))},n.prototype.searchOnFocus=function(){this.searchKey=this.getSearchKey(),this.searchKey||(this._eventInput.emit("backToNoneEditing"),this.abcSurface.setContent(""),this.scrollview.scrollTo(0,0),this.LayoutMod.setTransform(b.translate(0,-50,0),this.searhBarTransition),this.searchSurface._currTarget.children[0].children[0].children[2].style.opacity=1,this.searchSurface._currTarget.children[0].children[0].children[2].style.display="inline",this.searchSurface._currTarget.children[0].style.paddingRight="100px",this.renderScrollView())},n.prototype.searchOnCancel=function(){this.abcSurface.setContent(y.abcButtons()),this.LayoutMod.setTransform(b.translate(0,0,0),this.searhBarTransition),this.searchSurface._currTarget.children[0].children[0].children[2].style.opacity=0,this.searchSurface._currTarget.children[0].children[0].children[2].style.display="none",this.searchSurface._currTarget.children[0].style.paddingRight="10px",document.getElementsByClassName("search-contact")[0].value="",this.searchKey=this.getSearchKey(),this.renderScrollView()},n.prototype.renderHeaders=function(){var t=_.chain(this.collection.models).map(function(t){return t.get(this.sortKey)[0]||"#"
}.bind(this)).map(function(t){return/^[a-zA-Z]+$/.test(t)?t.toUpperCase():"#"}).uniq().value();_.each(this.headerSequence,function(e){-1==t.indexOf(e.options.header)?e.collapse():e.expand()}.bind(this))},n.prototype.getSearchKey=function(){return $(document.activeElement).hasClass("search-contact")?document.activeElement.value:!1},i.exports=n}.bind(this)),require.register("app/views/contacts-section-view.js",function(t,e,i){function n(){s.apply(this,arguments),this.title=o.contactHeader(),this.navigation={caption:"Contacts",icon:'<i class="fa fa-users"></i>'}}var s=e("contacts-scroll-view"),o=e("templates");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,i.exports=n}.bind(this)),require.register("app/views/contacts-section-view2.js",function(t,e,i){function n(t){r.call(this),this.searchBarSize=50,this.abcSurfaceWidth=30,this.abcSurfaceHeight=void 0,this.a2zString="ABCDEFGHIJKLMNOPQRSTUVWXYZ#",this.setupLayout(t),this.collectionEvents(),this.abcSurfaceEvents(),this.searchSurfaceEvents()}function s(t){var e,i,n;e=i=n="",t.model&&(e=t.model.get("lastname")),t.model&&(i=t.model.get("firstname")),t.options&&t.options.header&&(n=t.options.header);var s=n+e+" "+i;return/^[a-zA-Z]+$/.test(s[0])||(s="zzzz"+s),s.toUpperCase()}function o(t){var e,i,n;e=i=n="",t.model&&(e=t.model.get("lastname")),t.model&&(i=t.model.get("firstname")),t.options&&t.options.header&&(n=t.options.header);var s=n+i+" "+e;return/^[a-zA-Z]+$/.test(s[0])||(s="zzzz"+s),s.toUpperCase()}var r=e("famous/view"),a=e("famous/views/header-footer-layout"),u=e("famous/utilities/utility"),c=e("famous/modifier"),h=e("famous/input/generic-sync"),l=e("famous/surface"),p=(e("famous/transitions/easing"),e("custom-input-sync")),d=p.TouchSync,f=p.MouseSync,m=e("templates"),g=e("famous/transform"),v=e("vertical-scroll-view"),y=e("contact-item-view"),b=e("row-view"),w=b.HeaderView;n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.setupLayout=function(t){this.headerFooterLayout=new a({headerSize:this.searchBarSize,footerSize:0}),this.LayoutMod=new c,this.searchSurface=new l({size:[void 0,this.searchBarSize],classes:["contact-section-search-bar"],content:'<div><i class="fa fa-search"></i>   <input type="text" class="search-contact" placeholder = "Search" ><span class="cancel">cancel</span></input></div></div>',properties:{backgroundColor:"rgba(15,15,15,0.9)",color:"white",zIndex:10}}),this.searchSurfaceMod=new c({transform:g.translate(0,0,3)}),this.searhBarTransition={duration:0},this.searchMode=!1,this.abcSurface=new l({size:[this.abcSurfaceWidth,this.abcSurfaceHeight],classes:["abcButton"],content:'<button id="A">A</button><button id="B">B</button><button id="C">C</button><button id="D">D</button><button id="E">E</button><button id="F">F</button><button id="G">G</button><button id="H">H</button><button id="I">I</button><button id="J">J</button><button id="K">K</button><button id="L">L</button><button id="M">M</button><button id="N">N</button><button id="O">O</button><button id="P">P</button><button id="Q">Q</button><button id="R">R</button><button id="S">S</button><button id="T">T</button><button id="U">U</button><button id="V">V</button><button id="W">W</button><button id="X">X</button><button id="Y">Y</button><button id="Z">Z</button><button id="#">#</button>',properties:{backgroundColor:"rgba(160,160,160,0.0)",zIndex:2}}),this._eventInput.pipe(this.searchSurface),this.abcMod=new c({origin:[1,0],transform:g.translate(0,0,10)}),this.title='<button class="left edit-button" id="contact-edit-contact"></button><div>All Contacts</div><button class="right add-contact" id="add-contact"><i class="fa fa-plus" id="add-contact"></i></button>',this.navigation={caption:"Contacts",icon:'<i class="fa fa-users"></i>'},this.collection=t.collection,this.scrollview=new v({direction:u.Direction.Y,margin:1e4}),this.headerFooterLayout.id.header.add(this.searchSurfaceMod).add(this.searchSurface),this.headerFooterLayout.id.content.add(this.scrollview),this.headerFooterLayout.id.content.add(this.abcMod).add(this.abcSurface),this.pipe(this.scrollview),this._add(this.LayoutMod).add(this.headerFooterLayout)},n.prototype.scrollTo=function(t,e){0>t||(this.scrollview.setVelocity(0),this.scrollview.node.index=t,e||(e=0),this.scrollview.setPosition(e))},n.prototype.setupHeaderSurfaces=function(){return _.map(this.a2zString,function(t){var e=new w({content:m.headerItemView(t,0,0),header:t,collection:this.collection});return e.pipe(this.scrollview),e}.bind(this))},n.prototype.refreshContacts=function(t){if($("body").removeClass("editing"),1==this.searchMode){if(this.abcSurface.setContent(""),this.currentSequence=[],void 0==t||""==t)return void this.scrollview.sequenceFrom(this.currentSequence);this.currentCollection=this.collection.searchContact(t.toUpperCase())}else this.currentCollection=this.collection.models,this.currentSequence=_.clone(this.headerSequence),this.abcSurface.setContent(m.abcButtons());this.contactSequence=_.sortBy(this.contactSequence,s),this.currentContactsSequence=_.map(this.currentCollection,function(t){return this.contactSequence[t.collection.indexOf(t)]}.bind(this)),this.currentSequence=this.currentSequence.concat(this.currentContactsSequence),this.sortByLastname(),this.scrollview.sequenceFrom(this.currentSequence)},n.prototype.initContacts=function(){this.headerSequence=this.setupHeaderSurfaces(),this.contactSequence=this.collection.map(function(t){return this.createItem(t)}.bind(this)),this.refreshContacts()},n.prototype.createItem=function(t){var e=new y({model:t});return e.pipe(this._eventOutput),this._eventInput.pipe(e),e},n.prototype.collectionEvents=function(){this.collection.on("all",function(t,e,i,n){switch(console.log(t,e,i,n),t){case"change":this.changeItem(e),this.collection.sort();break;case"remove":this.removeItem(e);break;case"add":1==this.noInit&&this.addItem(e);break;case"sync":this.noInit||(this.noInit=!0,this.initContacts())}}.bind(this))},n.prototype.abcSurfaceEvents=function(){var t=[0,0],e=new h(function(){return t},{syncClasses:[f,d]});this.abcSurface.pipe(e),e.on("start",function(t){this.scrollToContact(t)}.bind(this)),e.on("update",function(t){this.scrollToContact(t)}.bind(this))},n.prototype.scrollToContact=function(t){var e=document.elementFromPoint(t.ap[0],t.ap[1]);if(e&&e.id){for(var i in this.headerSequence)if(this.headerSequence[i].options.header==e.id){var n=this.currentSequence.indexOf(this.headerSequence[i]);break}this.scrollTo(n)}},n.prototype.removeItem=function(t){for(var e in this.contactSequence)if(this.contactSequence[e].model==t){var i=e;break}this.contactSequence.splice(i,1);for(var e in this.currentSequence)if(this.currentSequence[e].model==t){var n=e;break}this.scrollview.removeByIndex(n)},n.prototype.addItem=function(t){var e=this.createItem(t);this.contactSequence.push(e),this.refreshContacts()},n.prototype.changeItem=function(){this.refreshContacts()},n.prototype.searchSurfaceEvents=function(){this.searchSurface.on("click",function(t){"search-contact"==t.target.className?this._eventInput.emit("searchOnFocus"):"cancel"==t.target.className&&(t.currentTarget.children[0].children[1].value="",this._eventInput.emit("searchOnBlur"),this.refreshContacts(""))}.bind(this)),this._eventInput.on("searchOnFocus",this.searchOnFocus.bind(this)),this._eventInput.on("searchOnBlur",this.searchOnBlur.bind(this)),this.searchSurface.on("keyup",function(t){this.refreshContacts(t.target.value)}.bind(this))},n.prototype.getInitialChar=function(t){function e(t){return/^[a-zA-Z]+$/.test(t[0])}return void 0!=t.get("lastname")&&""!=t.get("lastname")?e(t.get("lastname"))?t.get("lastname")[0].toUpperCase():"#":"#"},n.prototype.searchOnFocus=function(){this.searchMode=!0,this._eventInput.emit("backToNoneEditing"),this.scrollview.scrollTo(0,0),this.refreshContacts(),this.LayoutMod.setTransform(g.translate(0,-50,0),this.searhBarTransition),this.searchSurface._currTarget.children[0].children[2].style.opacity=1,this.searchSurface._currTarget.style.paddingRight="100px"},n.prototype.searchOnBlur=function(){this.searchMode=!1,this.LayoutMod.setTransform(g.translate(0,0,0),this.searhBarTransition),this.searchSurface._currTarget.children[0].children[2].style.opacity=0,this.searchSurface._currTarget.style.paddingRight="10px"},n.prototype.sortByLastname=function(){this.currentSequence=_.sortBy(this.currentSequence,s)},n.prototype.sortByFirstname=function(){this.currentSequence=_.sortBy(this.currentSequence,o)},i.exports=n}.bind(this)),require.register("app/views/conversation-item-view.js",function(t,e,i){function n(t){s.call(this),this.model=t.model,this.surface=new o({properties:{maxWidth:300,zIndex:2}}),this.template(),this.event(),this.surface.pipe(this._eventOutput),this._add(this.surface)}var s=e("famous/view"),o=(e("famous/event-handler"),e("famous/modifier"),e("conversation-surface")),r=e("helpers");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.event=function(){this.surface.on("click",function(t){$(t.target).hasClass("conversation-item")||this._eventOutput.emit("toggleMsg")}.bind(this))},n.prototype.template=function(){var t=this.getLink(this.model.get("content"));t=this.model.isLocal()?'<div class="conversation-item triangle-border right">'+t+"</div>":'<div class="conversation-item triangle-border left">'+t+"</div>",this.surface.setContent(t)},n.prototype.getLink=function(t){return r.linkify(t)},i.exports=n}.bind(this)),require.register("app/views/conversation-view.js",function(t,e,i){function n(){s.call(this),this.setupBeepeTone(),this.initHeader(),this.initFooter(),this.initConversation(),this.setupLayout(),this.setupTransition(),this.onResize(),this.buttonsEvents(),this.textingEvents(),this.inputSourceLocal=!0}var s=e("famous/view"),o=e("famous/surface"),r=e("famous/modifier"),a=e("famous/transform"),u=(e("famous/views/scrollview"),e("famous/utilities/utility")),c=e("famous/views/header-footer-layout"),h=e("famous/engine"),l=e("famous/audio/sound-player"),p=e("famous/transitions/transitionable"),d=e("famous/transitions/wall-transition");p.registerMethod("wall",d);var f=e("templates"),m=e("vertical-scroll-view"),g=e("conversation-item-view"),v=e("models").ConversationCollection,y=e("models").ChatCollection,b=e("models").Settings,w=e("helpers"),S=1e-4;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.setupBeepeTone=function(){this.messageTone=new l(["content/audio/beep.mp3"]),this.playBeepe=_.debounce(function(){this.messageTone.playSound(0,.3)}.bind(this),300)},n.prototype.setupcall=function(t,e){this.appSettings=t;var i=function(){this._eventOutput.emit("setVideo")}.bind(this),n=function(){this._eventOutput.emit("setAudio")}.bind(this);if(this.settingsEvents={"change:video":i,"change:audio":n},this.appSettings.on(this.settingsEvents),this.call=e,w.isDev())this.collection=new v,this.call=void 0;else{this.collection&&this.collection.off();var s=t.get("firebaseUrl")+"chats/"+t.get("cid")+"/"+e.get("cid");this.collection=new y([],{firebase:s})}this.synced=!1},n.prototype.initHeader=function(){this.exitSurface=new o({size:[window.innerWidth-225,50],classes:["conversation-exit"],properties:{cursor:"pointer"}}),this.exitSurface.pipe(this._eventOutput),this.exitSurfaceMod=new r({transform:a.translate(0,0,3)}),this.callSurface=new o({size:[225,50],classes:["conversation-call"],content:'<div class="touchable"><i class="fa fa-phone fa-lg"></i> Call</div>',properties:{cursor:"pointer"}}),this.callSurfaceMod=new r({origin:[1,0],transform:a.translate(0,0,4)}),this.endCallSurface=new o({size:[75,50],classes:["conversation-endCall"],content:'<div class="touchable"><i class="fa fa-phone fa-lg"></i></div>',properties:{cursor:"pointer"}}),this.endCallSurface.pipe(this._eventOutput),this.endCallSurfaceMod=new r({origin:[1,0],transform:a.translate(-150,0,3)}),this.audioSurface=new o({size:[75,50],classes:["conversation-audio"],properties:{cursor:"pointer"}}),this.audioSurface.pipe(this._eventOutput),this.audioSurfaceMod=new r({origin:[1,0],transform:a.translate(0,0,3)}),this.cameraSurface=new o({size:[75,50],classes:["conversation-camera"],properties:{cursor:"pointer"}}),this.cameraSurfaceMod=new r({origin:[1,0],transform:a.translate(-75,0,3)})},n.prototype.cameraSurfaceSetContent=function(){this.cameraSurface.setContent(1==this.appSettings.attributes.video?'<button class="fa fa-video-camera fa-lg on touchable"></button>':'<button class="fa fa-video-camera fa-lg off touchable"></button>')},n.prototype.audioSurfaceSetContent=function(){this.audioSurface.setContent(1==this.appSettings.attributes.audio?'<button class="fa fa-microphone fa-lg on touchable"></button>':'<button class="fa fa-microphone fa-lg off touchable"></button>')},n.prototype.initFooter=function(){this.inputSurface=new o({size:[window.innerWidth-100,50],classes:["conversation-input-bar"],content:'<textarea class="input-msg" name="message"></textarea>',properties:{backgroundColor:"black"}}),this.inputSurfaceMod=new r({transform:a.translate(0,0,9)}),this.sendSurface=new o({size:[100,50],classes:["conversation-input-bar"],content:'<div class="touchable"><button class="send-text-button">Send</button></div>',properties:{backgroundColor:"black",cursor:"pointer"}}),this.sendSurfaceMod=new r({origin:[1,0],transform:a.translate(0,0,9)})},n.prototype.initConversation=function(){this.scrollview=new m({startAt:"bottom",direction:u.Direction.Y}),this.pipe(this.scrollview),this.mod=new r({opacity:S})},n.prototype.setupLayout=function(){this.headerFooterLayout=new c({headerSize:50,footerSize:50}),this.headerFooterLayout.id.header.add(this.exitSurfaceMod).add(this.exitSurface),this.headerFooterLayout.id.header.add(this.callSurfaceMod).add(this.callSurface),this.headerFooterLayout.id.header.add(this.endCallSurfaceMod).add(this.endCallSurface),this.headerFooterLayout.id.header.add(this.audioSurfaceMod).add(this.audioSurface),this.headerFooterLayout.id.header.add(this.cameraSurfaceMod).add(this.cameraSurface),this.headerFooterLayout.id.content.add(this.mod).add(this.scrollview),this.headerFooterLayout.id.footer.add(this.inputSurfaceMod).add(this.inputSurface),this.headerFooterLayout.id.footer.add(this.sendSurfaceMod).add(this.sendSurface),this._add(this.headerFooterLayout)},n.prototype.onResize=function(){var t,e=function(){this.scrollview&&this.scrollview.setVelocity(-99)};h.on("resize",function(){this.exitSurface.setSize([window.innerWidth-225,50]),this.inputSurface.setSize([window.innerWidth-100,50]),t&&clearTimeout(t),t=setTimeout(e.bind(this),300)}.bind(this))},n.prototype.setupTransition=function(){this.buttonTransition={method:"wall",period:200,dampingRatio:1},this.chatOpacityTransition={method:"wall",period:300,dampingRatio:1}},n.prototype.start=function(t,e){this.setupcall(t,e),this.cameraSurfaceSetContent(),this.audioSurfaceSetContent(),this.exitSurface.setContent(f.conversationViewHeader(e)),!w.isDev()&&this.call.get("success")?this.hideCallButton():this.showCallButton(),this.scrollview.sequenceFrom([]),this.collectionEvents(),this.collection.size()&&setTimeout(this.loadMsg.bind(this),400),w.isMobile()&&(window._disableResize=!1)},n.prototype.stop=function(t){this.showCallButton(),this.appSettings.save({video:!0}),this.appSettings.save({audio:!0}),t.exit&&(this.collection.off(),this.appSettings.off(this.settingsEvents),w.isMobile()&&setTimeout(function(){window._disableResize=!0},500)),t.exit&&this.mod.setOpacity(S)},n.prototype.collectionEvents=function(){this.collection.on("all",function(t,e){switch(t){case"add":if(!this.synced)break;for(this.addMsg(e),this.playBeepe();this.collection.size()>=100;)this.collection.shift();setTimeout(function(){this.scrollview.scrollToEnd()}.bind(this),400),this.showConversation(),this._eventOutput.emit("chatRead",this.call);break;case"sync":setTimeout(this.loadMsg.bind(this),400),this._eventOutput.emit("chatRead",this.call)}}.bind(this))},n.prototype.showCallButton=function(){this.callSurfaceMod.setTransform(a.translate(0,0,4),this.buttonTransition)},n.prototype.hideCallButton=function(){this.callSurfaceMod.setTransform(a.translate(225,0,4),this.buttonTransition)},n.prototype.buttonsEvents=function(){this.exitSurface.on("click",function(){this.showCallButton(),setTimeout(function(){this._eventOutput.emit("callEnd",{exit:!0,chat:this.call})}.bind(this),600)}.bind(this)),this.callSurface.on("click",function(){this.hideCallButton(),setTimeout(function(){this._eventOutput.emit("outgoingCall",this.call)}.bind(this),600)}.bind(this)),this.endCallSurface.on("click",function(){this.showCallButton(),setTimeout(function(){this._eventOutput.emit("callEnd",{exit:!1})}.bind(this),600)}.bind(this)),this.audioSurface.on("click",function(){this.appSettings.save({audio:!this.appSettings.attributes.audio}),this.audioSurfaceSetContent()}.bind(this)),this.cameraSurface.on("click",function(){this.appSettings.save({video:!this.appSettings.attributes.video}),this.cameraSurfaceSetContent()}.bind(this)),this.sendSurface.on("click",function(){this.addChat()}.bind(this))},n.prototype.textingEvents=function(){this.inputSurface.on("keydown",function(t){13==t.keyCode&&this.addChat()}.bind(this)),this._eventInput.on("incomingChat",function(t){this.addRemote(t.content)}.bind(this)),this._eventOutput.on("toggleMsg",function(){1==this.mod.getOpacity()?this.mod.setOpacity(S,this.chatOpacityTransition):this.mod.setOpacity(1,this.chatOpacityTransition)}.bind(this))},n.prototype.createMsgItem=function(t){var e=new g({model:t});return e.pipe(this._eventOutput),e},n.prototype.addChat=function(){var t=document.getElementsByClassName("input-msg")[0].value;if(t&&""!=t.replace(/[\s\t\r\n]/g,""))if(document.getElementsByClassName("input-msg")[0].value="",this.call){if(w.isDev())return;this._eventOutput.emit("sendChat",{contact:this.call,message:t})}else this.inputSourceLocal=!this.inputSourceLocal,this.inputSourceLocal?this.addLocal(t):this.addRemote(t)},n.prototype.addLocal=function(t){var e=b.getAppSettings(),i=e.get("cid"),n={content:t,source:"local",type:"text",from:i,time:Date.now()};return w.isDev()?void this.collection.create(n):(this.collection.add(n),void this._eventOutput.emit("outgoingChat",n))},n.prototype.addRemote=function(t){var e={content:t,source:"remote",type:"text",time:Date.now()};return w.isDev()?void this.collection.create(e):void this.collection.add(e)},n.prototype.showConversation=function(){this.mod.setOpacity(1,this.chatOpacityTransition)},n.prototype.addMsg=function(t){this.scrollview.push(this.createMsgItem(t))},n.prototype.loadMsg=function(){this.synced=!0;var t=this.collection.map(function(t){return this.createMsgItem(t)}.bind(this));this.scrollview.sequenceFrom(t),setTimeout(function(){this.scrollview.jumpToEnd(),setTimeout(function(){this.mod.setOpacity(1)}.bind(this),400)}.bind(this),400)},i.exports=n}.bind(this)),require.register("app/views/dial-item-view.js",function(t,e,i){function n(t){window.bonI=this,r.call(this,t),s.call(this),o.call(this)}function s(){var t=1==this.options.name.length?p.dialNumber(this.options.name,this.options.abc):this.options.name;this.numberSurface=new a({size:[this.options.buttonSize,this.options.buttonSize],content:t,properties:{borderRadius:"10px"}})," "!=this.options.name&&1==this.options.name.length&&this.numberSurface.addClass("thin-border"),this.mod=new u({origin:[this.options.float,.5]}),this._add(this.mod).add(this.numberSurface);var e;e="*"===this.options.name?"star":"#"===this.options.name?"pound":this.options.name,this.ringtone=new l([["content/audio/dtmf",e,".mp3"].join("")])}function o(){this.pos=new h([0,0]);var t=new c(function(){return this.pos.get()}.bind(this),{syncClasses:[d.deviceSync()]});this.numberSurface.pipe(t),t.on("start",this.pressStart.bind(this)),t.on("end",this.pressEnd.bind(this))}var r=e("famous/view"),a=e("famous/surface"),u=e("famous/modifier"),c=e("famous/input/generic-sync"),h=(e("famous/input/mouse-sync"),e("famous/input/touch-sync"),e("famous/transform"),e("famous/transitions/easing"),e("famous/transitions/transitionable")),l=(e("famous/transitions/wall-transition"),e("famous/transitions/spring-transition"),e("famous/engine"),e("famous/utilities/utility"),e("famous/audio/sound-player")),p=e("templates"),d=e("helpers");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={name:void 0,abc:void 0,buttonSize:75,tone:void 0,"float":.5},n.prototype.pressStart=function(){this.pos.set([0,0]),setTimeout(function(){this.numberSurface.setProperties({backgroundColor:"rgba(255,255,255,0.1)"})}.bind(this),100),this.startRingtone()},n.prototype.pressEnd=function(){this.stopRingtone(),setTimeout(function(){this.numberSurface.setProperties({backgroundColor:"transparent"})}.bind(this),100),this.pressNumber()},n.prototype.press=function(){this.pressStart(),setTimeout(this.pressEnd.bind(this),300)},n.prototype.startRingtone=function(){this.ringtone.playSound(0,1)},n.prototype.stopRingtone=function(){this.ringtone.stopPlaying()},n.prototype.pressNumber=function(){this._eventOutput.emit("pressNumber",this.options.name)},i.exports=n}.bind(this)),require.register("app/views/dial-section-view.js",function(t,e,i){function n(t){c.call(this),this.title=w.dialHeader(),this.navigation={caption:"Dial",icon:'<i class="fa fa-th"></i>'},this.collection=t.collection,s.call(this),o.call(this),r.call(this),a.call(this),u.call(this)}function s(){this.dialOutputView=new c,this.dialOutputViewMod=new d({transform:f.translate(0,-50,3)}),this.outputSurface=new p({size:[void 0,S],classes:["dial-output-view-surface"],content:w.dialOutputView(),properties:{zIndex:"3",fontSize:"50px",backgroundColor:"transparent"}}),this.dialOutputViewButtons=new p({content:w.dialOutputViewButton(),size:[void 0,40],properties:{zIndex:"4"}}),this.dialOutputViewButtonsLightBox=new m({inTransform:f.translate(0,35,0),inTransition:{duration:200},outTransform:f.translate(0,35,0),outTransition:{duration:300},showTransform:f.translate(0,35,0),showOrigin:[.9,.5]}),this.matchContact=new p({size:[void 0,20],properties:{}}),this.matchContactLightBox=new m({inTransform:f.translate(0,S-15,0),inTransition:{duration:200},outTransform:f.translate(0,S-15,0),outTransition:{duration:300},showTransform:f.translate(0,S-15,0)}),this.dialOutputView._add(this.outputSurface),this.dialOutputView._add(this.dialOutputViewButtonsLightBox),this.dialOutputView._add(this.matchContactLightBox)}function o(){this.inputNumbers=[],this.contentLayout=new h({dimensions:[3,5]}),this.numbers=["1","2","3","4","5","6","7","8","9","*","0","#"],this.ABC=["ABC","DEF","GHI","JKL","MNO","PQRS","TUV","WXYZ"],this.numbersSurfaces=[],this.num={};for(var t=0;t<this.numbers.length;t++)" "!=this.numbers[t]?(this.num["key"+this.numbers[t]]=new b({name:this.numbers[t],buttonSize:x,abc:this.ABC[t-1],tone:["content/audio/numberTone",this.numbers[t]].join(""),"float":.75-t%3/4}),this.num["key"+this.numbers[t]].pipe(this._eventOutput),this.numbersSurfaces.push(this.num["key"+this.numbers[t]])):this.numbersSurfaces.push("");this.numbersSurfaces.push(""),this.callButton=new c,this.callSurface=new p({size:[x,x],content:w.phoneButton("dial-call")}),this.callSurface.pipe(this._eventOutput),this.callSurfaceMod=new d({origin:[.5,.5]}),this.callButton._add(this.callSurfaceMod).add(this.callSurface),this.numbersSurfaces.push(this.callButton),this.numbersSurfaces.push(""),this.contentLayout.sequenceFrom(this.numbersSurfaces)}function r(){this.layout=new l({headerSize:S-50,footerSize:0}),this.layout.id.header.add(this.dialOutputViewMod).add(this.dialOutputView),this.layout.id.content.add(this.contentLayout),this._add(this.layout)}function a(){this._eventOutput.on("pressNumber",this.onPressNumber.bind(this)),this.callSurface.on("click",this.onSendCall.bind(this)),this.timeout,this.startDelete=800,this.repeat=function(){this.onDeleteDial(),this.timeout=setTimeout(this.repeat,this.startDelete),0==this.inputNumbers.length&&clearTimeout(this.timeout),this.startDelete=50}.bind(this),this.dialOutputViewButtons.on("mousedown",function(t){$(t.target).hasClass("delete-num-button")&&this.repeat()}.bind(this)),this.dialOutputViewButtons.on("mouseup",function(){clearTimeout(this.timeout),this.startDelete=800}.bind(this)),this.dialOutputViewButtons.on("mouseleave",function(t){$(t.target).hasClass("delete-num-button")&&(clearTimeout(this.timeout),this.startDelete=800)}.bind(this)),this.dialOutputViewButtons.on("click",function(t){$(t.target).hasClass("add-button")&&this.onAddContact()}.bind(this))}function u(){$(document).bind("keydown",function(t){if($(".dial-number").length){var e=this.keycodeToEvent(t);"call"==e?this.onSendCall():"delete"==e?(t.preventDefault(),this.onDeleteDial()):this.num["key"+e].press()}}.bind(this))}var c=e("famous/view"),h=e("famous/views/grid-layout"),l=e("famous/views/header-footer-layout"),p=e("famous/surface"),d=e("famous/modifier"),f=e("famous/transform"),m=e("famous/views/light-box"),g=(e("famous/render-node"),e("famous/engine"),e("helpers")),v=e("models"),y=v.Call,b=e("dial-item-view"),w=e("templates"),S=75,x=75;n.prototype=Object.create(c.prototype),n.prototype.constructor=n,n.prototype.onPressNumber=function(t){this.inputNumbers.unshift(t),this.showDialOutputViewButtons(),this.showOutputNumbers(),this.setTemplateCall()},n.prototype.onDeleteDial=function(){this.inputNumbers.shift(),this.showDialOutputViewButtons(),this.showOutputNumbers(),this.setTemplateCall()},n.prototype.onClearDial=function(){this.inputNumbers=[],this.showDialOutputViewButtons(),this.showOutputNumbers(),this.setTemplateCall(),this.matchContactLightBox.hide()},n.prototype.setTemplateCall=function(){if(0!=this.inputNumbers.length){this.templateCall=new y({firstname:"",lastname:"",phone:_.clone(this.inputNumbers).reverse().join("")});var t=_.chain(this.collection.models).map(function(t){return t.get("phone")}).indexOf(this.templateCall.get("phone")).value();t>=0?(this.templateCall=this.collection.models[t],this.showMatchContact(),this.matchContactLightBox.show(this.matchContact)):this.matchContactLightBox.hide()}},n.prototype.onSendCall=function(){g.isIPhone()?this.templateCall.get("phone")&&window.open("tel:"+this.templateCall.get("phone")):this._eventOutput.emit("outgoingCall",this.templateCall),this.onClearDial()},n.prototype.onAddContact=function(){this._eventOutput.emit("editContact",this.templateCall)},n.prototype.showDialOutputViewButtons=function(){0==this.inputNumbers.length?this.dialOutputViewButtonsLightBox.hide():this.inputNumbers.length>0&&0==this.dialOutputViewButtonsLightBox._showing&&this.dialOutputViewButtonsLightBox.show(this.dialOutputViewButtons)},n.prototype.showOutputNumbers=function(){this.outputSurface.setContent(w.dialOutputView(this.inputNumbers.join(""))),this.setOutputViewFontSize(this.inputNumbers.length)},n.prototype.showMatchContact=function(){this.matchContact.setContent(w.dialOutputViewMatchContact(this.templateCall))},n.prototype.setOutputViewFontSize=function(t){var e=this.outputSurface.getSize(!0)[0],i=50,n=30,s=e/t;s>i&&(s=i),n>s&&(s=n),this.outputSurface.setProperties({fontSize:s+"px"})},n.prototype.keycodeToEvent=function(t){var e=t.keyCode;if(8==e)return"delete";if(13==e)return"call";if(!(e>=48&&57>=e||e>=65&&90>=e))return"";var i=String.fromCharCode(e);switch(i){case"1":return"1";case"2":case"A":case"B":case"C":return"2";case"D":case"E":case"F":return"3";case"4":case"G":case"H":case"I":return"4";case"5":case"J":case"K":case"L":return"5";case"6":case"M":case"N":case"O":return"6";case"7":case"P":case"Q":case"R":case"S":return"7";case"T":case"U":case"V":return"8";case"9":case"W":case"X":case"Y":case"Z":return"9";case"0":return"0";case"3":return t.shiftKey?"#":"3";case"8":return t.shiftKey?"*":"8"}},i.exports=n}.bind(this)),require.register("app/views/favorite-item-view.js",function(t,e,i){function n(t){t.leftButtons=[{content:s.crossButton(),event:"deleteFavorite"}],t.rightButton={content:s.phoneButton(),event:"outgoingCall"},t.itemButton={classes:["contact-item","favorite-item","recent-item","editable"],content:s.favoriteItemView(t.model),event:"editContact"},r.apply(this,arguments),this._eventInput.on("toggleAllFavorite",this.onToggleAll.bind(this)),this._eventInput.on("backToNoneEditing",this.setEditingOff.bind(this))}var s=e("templates"),o=e("row-view"),r=o.ItemView;n.prototype=Object.create(r.prototype),n.prototype.constructor=n,i.exports=n}.bind(this)),require.register("app/views/favorites-section-view.js",function(t,e,i){function n(t){s.call(this),this.title=r.favoriteHeader(),this.navigation={caption:"Favorites",icon:'<i class="fa fa-star"></i>'},this.collection=t.collection,this.scrollview=new o({startAt:"top"}),this.pipe(this.scrollview),this._add(this.scrollview),this.scrollview.sequenceFrom([]),this.collection.on("all",function(t,e){switch(t){case"change:favorite":if(e.changed.favorite)this.addItem(e);else{var i=this.pastCollection.indexOf(e);this.removeItemByIndex(i)}break;case"remove":var i=this.pastCollection.indexOf(e);this.removeItemByIndex(i);break;case"add":this.addItem(e)}}.bind(this))}var s=e("famous/view"),o=(e("famous/utilities/utility"),e("famous/surface"),e("vertical-scroll-view")),r=(e("famous/engine"),e("templates")),a=e("favorite-item-view");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.loadItems=function(){this.pastCollection=this.collection.favorites(),this.sequence=this.collection.favorites().map(function(t){var e=new a({model:t});return e.pipe(this._eventOutput),this._eventInput.pipe(e),e}.bind(this)),this.scrollview.sequenceFrom(this.sequence)},n.prototype.addItem=function(t){this.pastCollection=this.collection.favorites();var e=this.collection.favorites().indexOf(t);if(e>=0){var i=new a({model:t});i.pipe(this._eventOutput),this._eventInput.pipe(i),this.scrollview.addByIndex(e,i)}},n.prototype.removeItemByIndex=function(t){this.pastCollection=this.collection.favorites(),this.scrollview.removeByIndex(t)},i.exports=n}.bind(this)),require.register("app/views/import-contact-view.js",function(t,e,i){function n(t){r.call(this),this.collection=t.collection,this.header=new o({content:'<button class="left back-button touchable">Back</button><div>'+t.title+" Contacts</div>",classes:["header"],size:[void 0,50],properties:{}}),this.content=new a({collection:this.collection}),this.layout=new s({headerSize:50,footerSize:0}),this.layout.id.header.add(this.header),this.layout.id.content.add(this.content),this.header.pipe(this._eventOutput),this.content.pipe(this._eventOutput),this.header.on("click",function(t){var e=$(t.target);e.hasClass(".edit-button")&&this.submitForm()}.bind(this)),this.header.on("click",function(t){$(t.target).hasClass("back-button")&&this._eventOutput.emit("goBack")}.bind(this)),this._add(this.layout)}var s=e("famous/views/header-footer-layout"),o=e("famous/surface"),r=e("famous/view"),a=e("social-scroll-view");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,i.exports=n}.bind(this)),require.register("app/views/incoming-call-view.js",function(t,e,i){function n(t){s.call(this),this.collection=t.collection,this.headerLightBox=new c({inTransition:!1,outTransition:!1,showOrigin:[.5,.1]}),this.footerLightBox=new c({inTransform:o.translate(0,900,0),inTransition:{duration:f,curve:a.inQuad()},inOpacity:0,inOrigin:[.5,.5],outTransform:o.translate(0,900,0),outOpacity:0,outOrigin:[.5,.5],outTransition:{duration:f,curve:a.outQuad()},showTransform:o.identity,showOpacity:1,showOrigin:[.5,.9]}),this.header=new r({classes:["outgoing-call-view"],size:[void 0,300],_origin:[.5,-.5],properties:{backgroundColor:"transparent"}});var e=h.button({classes:["decline-button","big-button"],checked:!0,content:"Decline",size:[160,70]}),i=h.button({classes:["answer-button","big-button"],checked:!0,content:"Answer",size:[160,70]});this.footer=new r({classes:["incoming-call-view-buttons"],size:[void 0,80],properties:{backgroundColor:"transparent"},content:'<div class="box">'+e+i+"</div>"}),this._add(this.headerLightBox),this._add(this.footerLightBox),_.bindAll(this,"template"),this.collection.bind("add",this.template),this.ringtone=new u(["content/audio/ringtone.mp3"]),this.footer.on("click",function(t){var e=$(t.target);
e.hasClass("decline-button")?this.stop(e):e.hasClass("answer-button")&&this.accept()}.bind(this)),this._eventInput.on("incomingCall",function(){}),this._eventInput.on("incomingCallAnswerClick",function(){this.accept()}.bind(this))}var s=e("famous/view"),o=e("famous/transform"),r=e("famous/surface"),a=(e("famous/event-handler"),e("famous/transitions/easing")),u=e("famous/audio/sound-player"),c=e("light-box"),h=e("templates"),l=e("models"),p=l.Contact,d=l.Call,f=500;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.template=function(){this.model=this.collection.models[0]||new d;var t='<div class="box">';if(t+='<div class="caller-name">'+this.model.get("firstname")+" "+this.model.get("lastname")+"</div>",this.model.get("pictureUrl"))t+='<img class="caller-picture" src="'+this.model.get("pictureUrl")+'"></img>';else{var e=this.model.get("firstname")[0]+this.model.get("lastname")[0];t+='<div class="initial">'+e+"</div>"}t+='<div class="caller-info"></div>',this.header.setContent(t)},n.prototype.startRingtone=function(){this.ringtone.playSound(0,1),this.ringtoneRepeat=setInterval(function(){this.ringtone.playSound(0,1)}.bind(this),8e3),this.footerLightBox.show(this.footer),this.headerLightBox.show(this.header)},n.prototype.stopRingtone=function(){clearInterval(this.ringtoneRepeat),this.ringtone.stopPlaying()},n.prototype.start=function(t){this.on=!0;var e;t instanceof p||t instanceof d?e=t.attributes:(this.model=this.collection.models[0]||new d,e=this.model.attributes),this.model.set({roomId:e.roomId}),this.startRingtone(),$(".camera").removeClass("blur")},n.prototype.stop=function(t){this.on&&(this.on=!1,t&&(this.model.set({success:!1}),t.addClass("exiting")),this.stopRingtone(),setTimeout(function(){this.footerLightBox.hide(),this.headerLightBox.hide(),this._eventOutput.emit("showApp",function(){t&&t.removeClass("exiting")})}.bind(this),f))},n.prototype.accept=function(){var t=$(".answer-button");this.on=!1,this.model.set({success:!0}),t&&t.addClass("exiting"),this.stopRingtone(),setTimeout(function(){this.footerLightBox.hide(),this.headerLightBox.hide(),setTimeout(function(){t&&t.removeClass("exiting")},1e3),this._eventOutput.emit("connectedCall",this.model)}.bind(this),f),t&&this._eventOutput.emit("incomingCallAnswer",this.model)},i.exports=n}.bind(this)),require.register("app/views/index.js",function(t,e,i){i.exports={AddContactView:e("add-contact-view"),AlertView:e("alert-view"),CameraView:e("camera-view"),ConnectedCallView:e("connected-call-view"),ContactsScrollView:e("contacts-scroll-view"),ContactsSectionView:e("contacts-section-view"),DialSectionView:e("dial-section-view"),ConversationView:e("conversation-view"),FavoritesSectionView:e("favorites-section-view"),IncomingCallView:e("incoming-call-view"),OutgoingCallView:e("outgoing-call-view"),RecentsSectionView:e("recents-section-view"),ChatsSectionView:e("chats-section-view"),SettingsSectionView:e("settings-section-view"),SocialView:e("social-view"),SocialScrollView:e("social-scroll-view")}}.bind(this)),require.register("app/views/outgoing-call-view.js",function(t,e,i){function n(t){s.call(this),this.collection=t.collection,this.headerLightBox=new c({inTransition:!1,outTransition:!1,showOrigin:[.5,.1],overlap:!0}),this.footerLightBox=new c({inTransform:o.translate(0,900,0),inTransition:{duration:f,curve:a.inQuad()},inOpacity:0,inOrigin:[.5,.5],outTransform:o.translate(0,900,0),outOpacity:0,outOrigin:[.5,.5],outTransition:{duration:f,curve:a.outQuad()},showTransform:o.identity,showOpacity:1,showOrigin:[.5,.9],overlap:!0}),this.header=new r({classes:["outgoing-call-view"],size:[void 0,300],_origin:[.5,-.5],properties:{backgroundColor:"transparent"}}),this.footer=new r({classes:["outgoing-call-view-buttons"],size:[void 0,80],properties:{backgroundColor:"transparent"}}),this._add(this.headerLightBox),this._add(this.footerLightBox),_.bindAll(this,"template"),this.collection.bind("add",this.template),this.calltone=new u(["content/audio/calltone.mp3","content/audio/ringtone.mp3"]),this.footer.on("click",function(t){var e=$(t.target);e.hasClass("end-button")&&this.stop(e)}.bind(this)),this.header.on("click",function(t){var e=$(t.target);e.hasClass("touchable")&&this._eventOutput.emit("outgoingPhoneCall",this.model)}.bind(this))}var s=e("famous/view"),o=e("famous/transform"),r=e("famous/surface"),a=(e("famous/event-handler"),e("famous/transitions/easing")),u=e("famous/audio/sound-player"),c=e("light-box"),h=e("templates"),l=e("models"),p=l.Contact,d=l.Call,f=500;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.setPhoneOnly=function(){$(".caller-info").removeClass("touchable").addClass("phone-only")},n.prototype.template=function(){this.model=this.collection.models[0];var t='<div class="box">';if(t+='<div class="caller-name">'+this.model.get("firstname")+" "+this.model.get("lastname")+"</div>",this.model.get("pictureUrl"))t+='<img class="caller-picture" src="'+this.model.get("pictureUrl")+'"></img>';else{var e=this.model.get("firstname")[0]+this.model.get("lastname")[0];t+='<div class="initial">'+e+"</div>"}if(this.model.get("phone")){var i=this.model.get("phone");t+='<div class="caller-info ',t+="touchable",t+='"><i class="fa fa-phone"></i> '+i[0]+"("+i.slice(1,4)+") "+i.slice(4,7)+"-"+i.slice(7,11)+"</div>"}this.header.setContent(t);var n=h.toggleButton({id:"video",classes:["video-button","big-button"],checked:this.appSettings?this.appSettings.get("video"):!0,onContent:'<i class="fa fa-eye fa-lg on"></i>',offContent:'<i class="fa fa-eye-slash fa-lg off"></i>',onBackgroundColor:"#dadbd9",offBackgroundColor:"#dadbd9",size:[70,70]}),s=h.button({classes:["end-button","big-button"],checked:!0,content:"End",size:[160,70]}),o=h.toggleButton({id:"audio",classes:["audio-button","big-button"],checked:this.appSettings?this.appSettings.get("audio"):!0,onContent:'<i class="fa fa-microphone fa-lg on"></i>',offContent:'<i class="fa fa-microphone-slash fa-lg off"></i>',onBackgroundColor:"#dadbd9",offBackgroundColor:"#dadbd9",size:[70,70]});t='<div class="box">'+n+s+o+"</div>",this.footer.setContent(t)},n.prototype.startCalltone=function(t){t||(this.calltone.playSound(0,1),this.calltoneRepeat=setInterval(function(){this.calltone.playSound(0,1)}.bind(this),2500)),this.footerLightBox.show(this.footer),this.headerLightBox.show(this.header)},n.prototype.stopCalltone=function(){clearInterval(this.calltoneRepeat),this.calltone.stopPlaying()},n.prototype.start=function(t,e){this.appSettings=e,this.on=!0;var i;t instanceof p||t instanceof d?i=t:(this.model=this.collection.models[0]||new d,i=this.model);var n={firstname:i.get("firstname"),lastname:i.get("lastname"),email:i.get("email"),phone:i.get("phone"),pictureUrl:!1,type:"outgoing",time:Date.now(),cid:i.get("cid")};this.collection.create(n),this.startCalltone(),$(".camera").removeClass("blur")},n.prototype.stop=function(t){this.on&&(this.on=!1,t&&(this.model.set({success:!1}),t.addClass("exiting")),this.stopCalltone(),setTimeout(function(){this.footerLightBox.hide(),this.headerLightBox.hide(),this._eventOutput.emit("showApp",function(){t&&t.removeClass("exiting")})}.bind(this),f),t&&this._eventOutput.emit("outgoingCallEnd",this.model))},n.prototype.accept=function(){this.on=!1,this.model.set({success:!0}),this.stopCalltone(),setTimeout(function(){this.footerLightBox.hide(),this.headerLightBox.hide(),this._eventOutput.emit("connectedCall",this.model)}.bind(this),f)},i.exports=n}.bind(this)),require.register("app/views/recent-item-view.js",function(t,e,i){function n(t){t.leftButtons=[{content:s.crossButton(),event:"deleteItem"},{content:s.editButton(),event:"editContact"}],t.rightButton={content:s.phoneButton(),event:"outgoingCall"},t.itemButton={classes:["contact-item","recent-item"],content:s.recentItemView(t.model),event:"chatContact"},r.apply(this,arguments),this._eventInput.on("toggleAllRecent",this.onToggleAll.bind(this)),this._eventInput.on("backToNoneEditing",this.setEditingOff.bind(this))}var s=e("templates"),o=e("row-view"),r=o.ItemView2S;n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.updateItem=function(){this.itemSurface.setContent(s.recentItemView(this.model))},i.exports=n}.bind(this)),require.register("app/views/recents-section-view.js",function(t,e,i){function n(t){s.call(this),window.rec=this,this.title=r.recentsHeader(),this.navigation={caption:"Calls",icon:'<i class="fa fa-phone"></i>'},this.collection=t.collection,this.scrollview=new o({startAt:"top"}),this.pipe(this.scrollview),this._add(this.scrollview),this.collection.once("sync",function(){this.loadItems(),this.collection.on("all",function(t,e,i,n){switch(t){case"remove":this.scrollview.removeByIndex(n.index);break;case"add":for(this.addItem(e);this.collection.size()>u;)this.collection.pop();break;case"change":var s=e.collection.indexOf(e);this.sequence[s].updateItem()}}.bind(this))}.bind(this))}var s=e("famous/view"),o=(e("famous/utilities/utility"),e("famous/surface"),e("vertical-scroll-view")),r=(e("famous/engine"),e("templates")),a=e("recent-item-view"),u=40;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.updateItems=function(){_.each(this.sequence,function(t){t.updateItem&&t.updateItem()})},n.prototype.loadItems=function(){this.scrollview.setPosition(0),this.sequence=this.collection.map(function(t){var e=new a({model:t});return e.pipe(this._eventOutput),this._eventInput.pipe(e),e}.bind(this)),this.scrollview.sequenceFrom(this.sequence)},n.prototype.addItem=function(t){var e=new a({model:t});e.pipe(this._eventOutput),this._eventInput.pipe(e),this.scrollview.addByIndex(0,e)},n.prototype.removeItemByIndex=function(t){this.scrollview.removeByIndex(t)},n.prototype.clearAll=function(){_(this.collection.all()).each(function(t){t.collection.remove(t)})},n.prototype.setMissedOnly=function(t){var e="missed"==t;e?(this.scrollview.detachAgent(),setTimeout(function(){this.scrollview.scrollTo(0,0),this.scrollview.attachAgent()}.bind(this),100),setTimeout(function(){_.each(this.sequence,function(t){t.collapse&&!t.model.isMissed()&&t.collapse()}.bind(this))}.bind(this),200)):_.each(this.sequence,function(t){t.expand&&t.expand()}.bind(this)),setTimeout(function(){this.scrollview.emptySurfaceResize()}.bind(this),300)},i.exports=n}.bind(this)),require.register("app/views/settings-section-view.js",function(t,e,i){function n(t){function e(){p.show()}function i(){this.appSettings.get("notification")&&(alert("Unblock notification for beepe.me:443 in chrome://settings/contentExceptions#notifications"),this.appSettings.set("notification",!1),$("#notification").prop("checked",!1))}function n(){this.template()}function u(){console.log("camera change"),this._eventOutput.emit("setCamera")}function c(){console.log("audio change"),this._eventOutput.emit("setAudio")}function h(){console.log("video change"),this._eventOutput.emit("setVideo")}function l(){console.log("blur change"),this._eventOutput.emit("setBlur")}s.call(this),this.appSettings=t.model,this.title="<div>Settings</div>",this.navigation={caption:"Settings",icon:'<i class="fa fa-gear"></i>'},this.scrollview=new a({direction:o.Direction.Y,margin:1e4}),this.pipe(this.scrollview),this.surface=new r({properties:{padding:"20px"},size:[void 0,700]}),this.template(),this.surface.pipe(this._eventOutput),this.scrollview.sequenceFrom([this.surface]),this._add(this.scrollview);var p=new Notify("Settings",{body:"Notification is on.",tag:"notificationSettings",permissionGranted:e.bind(this),permissionDenied:i.bind(this)});$(document).on("click","#notification",function(){this.appSettings.save({notification:JSON.parse($("#notification").prop("checked"))}),this.appSettings.get("notification")&&(p.needsPermission()?p.requestPermission():p.show())}.bind(this)),this.surface.on("click",function(t){switch(t.target.id){case"camera":this.appSettings.save({camera:JSON.parse($("#camera").prop("checked"))});break;case"video":this.appSettings.save({video:JSON.parse($("#video").prop("checked"))});break;case"audio":this.appSettings.save({audio:JSON.parse($("#audio").prop("checked"))});break;case"blur":this.appSettings.save({blur:JSON.parse($("#blur").prop("checked"))});break;case"facebook":case"google":case"twitter":case"linkedin":JSON.parse($("#"+t.target.id).prop("checked"))?this._eventOutput.emit("onSocialLink",t.target.id):window.location="/disconnect/"+t.target.id;break;case"github":case"yammer":alert("Coming Soon.")}}.bind(this)),this.surface.on("click",function(t){$(t.target).hasClass("logout-button")&&(window.location="/logout")}.bind(this));var d={"change:camera":u.bind(this),"change:audio":c.bind(this),"change:video":h.bind(this),"change:blur":l.bind(this),change:n.bind(this)};this.appSettings.on(d)}var s=e("famous/view"),o=e("famous/utilities/utility"),r=e("famous/surface"),a=e("famous/views/scrollview"),u=e("templates");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.template=function(){this.surface.setContent(u.settingsPage(this.appSettings))},i.exports=n}.bind(this)),require.register("app/views/social-item-view.js",function(t,e,i){function n(t){this.model=t.model,t.paddingRight=40,t.itemButton={classes:["contact-item","editable"],content:r.socialItemView(t.model),event:"goBack"},u.apply(this,arguments)}var s=e("famous/input/generic-sync"),o=(e("famous/input/mouse-sync"),e("famous/input/touch-sync"),e("famous/utilities/utility")),r=e("templates"),a=e("row-view"),u=a.ItemView2S,c=e("helpers");n.prototype=Object.create(u.prototype),n.prototype.constructor=n,n.prototype.setupEvent=function(){var t=new s(function(){return this.pos}.bind(this),{syncClasses:[c.deviceSync()]});this.itemSurface.pipe(t),this.itemSurface.pipe(this._eventOutput),this.pos=[0,0],t.on("start",function(){this.pos=[0,0],this._directionChosen=!1,this.clickTimeout=setTimeout(function(){this.itemSurface.setProperties({backgroundColor:"rgba(255,255,255,0.1)"})}.bind(this),100)}.bind(this)),t.on("update",function(t){if(this.clickTimeout&&(clearTimeout(this.clickTimeout),delete this.clickTimeout),this.itemSurface.setProperties({backgroundColor:"transparent"}),this.pos=t.p,c.isMobile()&&!this._directionChosen){var e=Math.abs(this.pos[0]),i=Math.abs(this.pos[1]);this.direction=e>i?o.Direction.X:o.Direction.Y,this._directionChosen=!0,this.direction==o.Direction.X?this.itemSurface.unpipe(this._eventOutput):this.itemSurface.pipe(this._eventOutput)}}.bind(this)),t.on("end",function(){setTimeout(function(){this.itemSurface.setProperties({backgroundColor:"transparent"})}.bind(this),300)}.bind(this)),c.isMobile()&&this.direction!=o.Direction.X},n.prototype.buttonsClickEvents=function(){this.itemSurface.on("click",function(){this._eventOutput.emit(this.options.itemButton.event,this.model)}.bind(this))},i.exports=n}.bind(this)),require.register("app/views/social-scroll-view.js",function(t,e,i){function n(t){t.itemView=o,r.apply(this,arguments),this._eventOutput.on("goBack",function(t){console.log("onGoBack",t)})}var s=e("famous/surface"),o=e("social-item-view"),r=e("contacts-scroll-view");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.collectionEvents=function(){this.collection.on("all",function(t,e){switch(console.log(t,e),t){case"sync":this.renderHeaders(),this.createSocialContacts(),setTimeout(this.renderScrollView.bind(this),this.scrollview.node?0:1e3)}}.bind(this))},n.prototype.createItem=function(t){var e=new o({model:t});return e.pipe(this._eventOutput),this._eventInput.pipe(e),e},n.prototype.createSocialContacts=function(){this.contactSequence=this.collection.map(function(t){return this.createItem(t)}.bind(this))},n.prototype.renderAddSurface=function(){var t=new s({size:[void 0,void 0]});this.scrollview.sequenceFrom([t])},i.exports=n}.bind(this)),require.register("app/views/social-view.js",function(t,e,i){function n(t){s.call(this),this.searchBarSize=50,this.abcSurfaceWidth=30,this.abcSurfaceHeight=void 0,this.a2zString="ABCDEFGHIJKLMNOPQRSTUVWXYZ#",this.headerFooterLayout=new a({headerSize:this.searchBarSize,footerSize:0}),this.searchSurface=new h({size:[void 0,this.searchBarSize],classes:["import-section-search-bar"],content:'<div><i class="fa fa-search"></i>   <input type="text" class="search-import" placeholder = "Search" ></div></div>',properties:{backgroundColor:"rgba(15,15,15,0.9)",color:"white",zIndex:2}}),this.abcSurface=new h({size:[this.abcSurfaceWidth,this.abcSurfaceHeight],classes:["abcButton"],content:'<button id="A">A</button><button id="B">B</button><button id="C">C</button><button id="D">D</button><button id="E">E</button><button id="F">F</button><button id="G">G</button><button id="H">H</button><button id="I">I</button><button id="J">J</button><button id="K">K</button><button id="L">L</button><button id="M">M</button><button id="N">N</button><button id="O">O</button><button id="P">P</button><button id="Q">Q</button><button id="R">R</button><button id="S">S</button><button id="T">T</button><button id="U">U</button><button id="V">V</button><button id="W">W</button><button id="X">X</button><button id="Y">Y</button><button id="Z">Z</button><button id="#">#</button>',properties:{backgroundColor:"rgba(160,160,160,0.0)",zIndex:2}}),this.abcMod=new u({origin:[1,0]}),this.collection=t.collection,this.scrollview=new r({direction:o.Direction.Y,margin:1e4}),this.headerFooterLayout.id.header.add(this.searchSurface),this.headerFooterLayout.id.content.add(this.scrollview),this.headerFooterLayout.id.content.add(this.abcMod).add(this.abcSurface),this.pipe(this.scrollview),this._add(this.headerFooterLayout),this.loadContacts(),this.searchSurface.on("keyup",function(t){this.loadContacts(t.target.value)}.bind(this));var e=[0,0],i=new c(function(){return e},{syncClasses:[d,p]});this.abcSurface.pipe(i),i.on("update",function(t){var e=document.elementFromPoint(t.ap[0],t.ap[1]);if(void 0!=e.id&&""!=e.id){var i=this.a2zString.indexOf(e.id);i=this.a2zIndexArray[i],void 0!=i&&i!=this.curAbcIndex&&(this.curAbcIndex=i,this.scrollTo(i))}}.bind(this))}var s=e("famous/view"),o=e("famous/utilities/utility"),r=e("famous/views/scrollview"),a=e("famous/views/header-footer-layout"),u=(e("famous/event-handler"),e("famous/modifier")),c=e("famous/input/generic-sync"),h=e("famous/surface"),l=e("custom-input-sync"),p=l.TouchSync,d=l.MouseSync,f=e("social-item-view");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.loadContacts=function(t){this.currentCollection=t?this.collection.searchContact(t.toUpperCase()):this.collection,this.firstChar=void 0,this.a2zIndexArray=[0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],this.currentCollection;for(var e=this.currentCollection.map(function(t){return this.getIndex(t)}.bind(this));-1!=this.a2zIndexArray.indexOf(-1);)this.a2zIndexArray[this.a2zIndexArray.indexOf(-1)]=this.a2zIndexArray[this.a2zIndexArray.indexOf(-1)-1];for(var i=_.last(this.a2zIndexArray),n=this.scrollview.getSize()[1]+40,s=i;s<e.length;s++)n-=e[s].getSize()[1];if(n>0){var o=new h({size:[void 0,n]});o.pipe(this._eventOutput),e.push(o)}this.scrollview.sequenceFrom(e)},n.prototype.onAbcTouch=function(t){this.abcButtons||(this.abcButtons=$(".abcButton button"));var e=this.abcButtons.indexOf(t.target);e=this.a2zIndexArray[e],void 0!=e&&e!=this.curAbcIndex&&(this.curAbcIndex=e,this.scrollTo(e))},n.prototype.getIndex=function(t){var e=!1;/^[a-zA-Z]+$/.test(t.get("lastname")[0])?t.get("lastname")&&this.firstChar!=t.get("lastname")[0].toUpperCase()&&(this.firstChar=t.get("lastname")[0].toUpperCase(),e=this.firstChar,this.getCurrentIndex(t)):"#"!=this.firstChar&&(this.firstChar="#",e="#",this.getCurrentIndex(t));var i=new f({model:t},e);return i.pipe(this._eventOutput),i},n.prototype.getCurrentIndex=function(t){var e=this.currentCollection.indexOf(t);this.a2zIndexArray[this.a2zString.indexOf(this.firstChar)]=e},n.prototype.scrollTo=function(t,e){0>t||(this.scrollview.setVelocity(0),this.scrollview.node.index=t,e||(e=0),this.scrollview.setPosition(e))},i.exports=n}.bind(this)),require.register("app/views/unused-add-favorite-view.js",function(t,e,i){function n(t){s.call(this);var e=new r;void 0===t.inTransform&&(this.options.inTransform=e.options.inTransform),void 0===t.outTransform&&(this.options.outTransform=e.options.outTransform),void 0===t.inTransition&&(this.options.inTransition=e.options.inTransition),void 0===t.outTransition&&(this.options.outTransition=e.options.outTransition),void 0===t.inOpacity&&(this.options.inOpacity=e.options.inOpacity),void 0===t.outOpacity&&(this.options.outOpacity=e.options.outOpacity),this.model=t.model,this.header=new o({classes:["header"],size:[void 0,50],properties:{},content:'<button class="left close-button cancel-favorite">Cancel</button><div>Add to Favor</div><button class="right close-button done-favorite">Done</button>'}),this.content=new o({classes:["surface","add-favorite-view"],size:[void 0,void 0],properties:{backgroundColor:"transparent"}}),this.id.header.add(this.header),this.id.content.add(this.content),this.content.on("click",function(){}.bind(this)),this.template(),this.content.pipe(this._eventOutput),this.header.pipe(this._eventOutput),this.header.on("click",function(){target.hasClass("close-button")&&this._eventOutput.emit("showApp")}.bind(this))}var s=e("famous/views/header-footer-layout"),o=e("famous/surface"),r=(e("famous/event-handler"),e("up-down-transform"));n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.template=function(){var t='<form role="form">';t+='<div class="form-group small">',t+='<input type="text" class="form-control" id="input-first-name" placeholder="First">',t+="</div>",t+='<div class="form-group small">',t+='<input type="text" class="form-control" id="input-last-name" placeholder="Last">',t+="</div>",t+='<div class="form-group">',t+='<input type="email" class="form-control" id="input-email" placeholder="Email">',t+="</div>",t+="</form>",this.content.setContent(t)},i.exports=n}.bind(this)),require.register("app/main/index.js",function(t,e){e("vendor"),e("famous/polyfills");{var i=e("main-controller");new i}}.bind(this)),require.register("app/main/main-controller.js",function(t,e,i){function n(){this._eventInput=new h,h.setInputHandler(this,this._eventInput),this._eventOutput=new h,h.setOutputHandler(this,this._eventOutput),this.loadUser(function(t){function e(t){t.toggleFavorite()}function i(t){t.toggleFavorite()}function n(t){t.collection.remove(t)}function s(){}function o(){}function r(){Y.updateItems()}function a(t){Y.setMissedOnly(t.target.outerText)}function u(){Y.clearAll()}function h(t){var e;t instanceof Function&&(e=t),$(".camera").addClass("blur"),this.myLightbox.show(K,!0,e)}function l(t){this.outgoingCallView.accept(t)}function d(t){var e,i;t instanceof Function?e=t:i=t,this.connectedCallView.start(this.appSettings,i),this.myLightbox.show(this.connectedCallView,!0,e),i.get("success")&&(this.localStream?this._eventOutput.emit("chatOn"):alert("Please allow camera/microphone access for Beepe"))}function b(t){function e(){}function i(){parent.focus()}function n(){parent.focus()}this.appSettings.get("notification")&&!window.colabeoBody&&(this.callNotification=new Notify("Incoming Call From",{icon:"content/ios_icon_x144.png",body:t.get("firstname")+" "+t.get("lastname"),notifyShow:e.bind(this),notifyClose:i.bind(this),notifyClick:n.bind(this)}),this.callNotification.show());var s=this.myLightbox.curRenderable;s instanceof C||(s instanceof k?(this.outgoingCallView.accept(t),this._eventOutput.emit("incomingCallAnswer",t)):(this.incomingCallView.start(t),this.myLightbox.show(this.incomingCallView,!0)))}function R(t){this._eventOutput.emit("chatOff");var e=this.myLightbox.curRenderable;if(e instanceof C?e.stop():e instanceof O&&e.stop(t),this.phono&&this.phono.phone&&this.phono.phone.calls&&_.chain(this.phono.phone.calls).values().invoke("hangup"),this.chatroom){var i="/login?r="+this.chatroom.uuid;this.chatroom.callerName&&(i+="&fn="+this.chatroom.callerName),window.location=i}t.chat&&this._eventOutput.emit("chatRead",t.chat)}function B(t){ee.setContact(t instanceof f||t instanceof m?t:void 0),ee.renderContact(),this.myLightbox.show(ee,!0)}function F(t){function e(t){t=new f(t.omit("success")),this._eventOutput.emit("connectedCall",t)}(t instanceof f||t instanceof m)&&(t.get("cid")?e.bind(this)(t):this.lookup(t,e.bind(this),this.onUserNotFound.bind(this)))}function L(){ie.turnOn()}function z(){ie.turnOff()}function D(t){var e=_(G.collection.models).find(function(e){return e.get("cid")==t.get("cid")});e&&e.set({read:!0})}function H(t){t.get("dcr")||this.lookup(t,null,function(t,e){this.setupChatroom(t,e)}.bind(this))}function q(t){switch(t.target.id){case"clear-button":this._eventOutput.emit("clearRecent");break;case"add-contact":this._eventOutput.emit("editContact");break;case"chats-edit-contact":$("body").toggleClass("editing"),this._eventInput.emit("toggleAllChat");break;case"recent-edit-contact":$("body").toggleClass("editing"),this._eventInput.emit("toggleAllRecent");break;case"favorite-edit-contact":$("body").toggleClass("editing"),this._eventInput.emit("toggleAllFavorite");break;case"contact-edit-contact":$("body").toggleClass("editing"),this._eventInput.emit("toggleAllContact");break;case"recent-toggle":this._eventOutput.emit("loadRecent",t);break;case"close-alert":this._eventOutput.emit("closeAlert")}"INPUT"==t.target.tagName||"TEXTAREA"==t.target.tagName?($(t.target).focus(),this._input=t.target):"send-text-button"==t.target.className?$(this._input).focus():this._input&&($(this._input).blur(),this._input=null)}function U(){this._eventInput.emit("backToNoneEditing")}function V(t,e){var i=new w(t,e);te.show(i,!0)}function J(){te.hide()}t.chatroom&&(this.chatroom=t.chatroom,t.objectId="dcr"+t.chatroom.objectId,t.firstname=t.chatroom.calleeFirstName,t.lastname=t.chatroom.calleeLastName,t.username=t.chatroom.calleeName),this.appSettings=v.getAppSettings(t),this.contactCollection=new y([],{firebase:this.appSettings.get("firebaseUrl")+"users/"+this.appSettings.get("cid")+"/contacts"}),this.recentCalls=new g([],{firebase:this.appSettings.get("firebaseUrl")+"history/"+this.appSettings.get("cid")+"/calls"}),this.recentChats=new g([],{firebase:this.appSettings.get("firebaseUrl")+"history/"+this.appSettings.get("cid")+"/chats"}),this.curCall=new m,localStorage.getItem("preloadfb"+this.appSettings.get("cid"))||this.contactCollection.once("sync",function(){setTimeout(function(){this.loadContact("facebook",this.saveContact.bind(this))}.bind(this),400)}.bind(this));var X=new T({collection:this.contactCollection}),G=new j({collection:this.recentChats}),Y=new E({collection:this.recentCalls}),W=new I({collection:this.contactCollection}),Z=new A({collection:this.contactCollection}),Q=new P({model:this.appSettings});X.pipe(this._eventOutput),this._eventInput.pipe(X),G.pipe(this._eventOutput),this._eventInput.pipe(G),Y.pipe(this._eventOutput),this._eventInput.pipe(Y),W.pipe(this._eventOutput),this._eventInput.pipe(W),Z.pipe(this._eventOutput),this._eventInput.pipe(Z),Q.pipe(this._eventOutput),N.sections=[G,Y,W,Z,Q];var K=new M(N);this.myLightbox=new p({overlap:!0});var te=new p({overlap:!0}),ee=new x({collection:this.contactCollection});K.pipe(this._eventOutput),ee.pipe(this._eventOutput);var ie=new S({}),ne=c.createContext();ne.add(ie),ne.add(this.myLightbox),ne.add(te),this.myLightbox.show(K),c.pipe(K),K.select(K.options.sections[2].title),this.outgoingCallView=new k({collection:this.recentCalls}),this.incomingCallView=new C({collection:this.recentCalls}),this.connectedCallView=new O({collection:this.recentCalls}),this.outgoingCallView.pipe(this._eventOutput),this.incomingCallView.pipe(this._eventOutput),this.connectedCallView.pipe(this._eventOutput),this.pipe(this.connectedCallView._eventInput),this._eventOutput.on("callEnd",R),this._eventOutput.on("incomingCall",b),this._eventOutput.on("connectedCall",d),this._eventOutput.on("outGoingCallAccept",l),this._eventOutput.on("editContact",B),this._eventOutput.on("chatContact",_.debounce(F,300)),this._eventOutput.on("showApp",h),this._eventOutput.on("submitContact",H),this._eventOutput.on("chatOn",L),this._eventOutput.on("chatOff",z),this._eventOutput.on("chatRead",D),this._eventOutput.on("loadRecent",a),this._eventOutput.on("updateRecent",r),this._eventOutput.on("clearRecent",u),this._eventOutput.on("deleteItem",n),this._eventOutput.on("deleteFavorite",e),this._eventOutput.on("toggleFavorite",i),this._eventOutput.on("onEngineClick",q),this._eventOutput.on("closeAlert",J),this._eventOutput.on("editContactDone",s),this._eventOutput.on("addContactDone",o),this._eventOutput.on("triggerBackToNoneEditing",U.bind(this)),this.buttonOnclickRespond(),c.on("click",q.bind(this)),window.alert=V,this.chatroom&&alert("Please allow Beepe to use your camera/microphone for phone calls.",!0),this.init()}.bind(this))}function s(t,e){t=JSON.stringify(t),$.ajax({url:"/findusers",type:"get",dataType:"json",data:{query:t},success:function(t){e(t)},error:function(){console.log("error"),e(new m)}})}function o(t,e){if(!l.isMobile()&&window.colabeoBody){var i=new CustomEvent("FromKoala",{detail:{type:t,data:e}});window.colabeoBody.dispatchEvent(i)}}function r(){this.remoteUrl==this.localUrl?$(".sync-button").removeClass("syncing").addClass("synced"):$(".sync-button").removeClass("synced syncing")}function a(t){if("updateUrl"==t.detail.action&&("remote"==t.detail.source?this.remoteUrl=t.detail.url:this.localUrl=t.detail.url,r.bind(this)()),!this.disableNow)if("incoming"==t.detail.action){var e=new m({firstname:t.detail.firstname,lastname:t.detail.lastname,email:t.detail.email,pictureUrl:null,roomId:t.detail.room});this._eventOutput.emit("incomingCall",e)}else this.conn&&this.conn.send(t.detail)}function u(t){this.disableNow=!0,setTimeout(function(){this.disableNow=!1}.bind(this),1e3);var e=t;"chat"==e.action?this._eventOutput.emit("incomingChat",e):(l.isMobile()&&e.data&&e.data.url&&"urlChange"==e.data.action&&window.open(e.data.url),o("event",e))}var c=e("famous/engine"),h=(e("famous/surface"),e("famous/transitions/easing"),e("famous/event-handler")),l=e("helpers"),p=e("light-box"),d=e("models"),f=d.Contact,m=d.Call,g=d.RecentsCollection,v=d.Settings,y=d.ContactCollection,b=e("views"),w=b.AlertView,S=b.CameraView,x=b.AddContactView,k=b.OutgoingCallView,C=b.IncomingCallView,O=b.ConnectedCallView,T=b.FavoritesSectionView,j=b.ChatsSectionView,E=b.RecentsSectionView,I=b.ContactsSectionView,A=b.DialSectionView,P=b.SettingsSectionView,N=e("config"),M=e("app"),R={iceServers:[{url:"stun:stun.l.google.com:19302"}]};n.prototype.init=function(){this.phono=$.phono({apiKey:"233f5673a7329a4cb7a5a2d0e5b6696e9ec245f8f7410e0631f4938c4395ca3163db86f7a9eda9d42633a308",onReady:function(){}}),this.iceServerConfig=R,this.getXirsys(),this.disableNow=!1;var t=this.appSettings.get("cid"),e=this.appSettings.get("firstname")+" "+this.appSettings.get("lastname");this.listenRef=new Firebase(this.appSettings.get("firebaseUrl")+"calls/"+t),this.listenRef.onDisconnect().remove(),l.isMobile()?(window._disableResize=!0,$("body").addClass("mobile"),void 0==this.appSettings.get("blur")&&this.appSettings.set("blur",!1)):void 0==this.appSettings.get("blur")&&this.appSettings.set("blur",!0),this.setupCallListener(),this.setupVideo(),this.setupSettingsListener(),this.loadConnected(function(t){if(t&&Array.isArray(t)){var e={};t.map(function(t){e[t.provider]=!0}),this.appSettings.save({linkAccounts:e})}}.bind(this)),util.supports.sctp=!1,o("event",{data:{action:"syncID",id:t,name:e}}),window.colabeoBody&&window.colabeoBody.addEventListener("FromExtension",a.bind(this))},n.prototype.setupSettingsListener=function(){this._eventOutput.on("outgoingChat",function(t){this.outgoingChat(t.content,t.type)}.bind(this)),this._eventOutput.on("sendChat",this.sendChat.bind(this)),this._eventOutput.on("setCamera",function(){this.setCamera()}.bind(this)),this._eventOutput.on("setVideo",function(){this.setVideo()}.bind(this)),this._eventOutput.on("setBlur",function(){this.setBlur()}.bind(this)),this._eventOutput.on("setAudio",function(){this.setAudio()
}.bind(this)),this._eventOutput.on("onSocialLink",function(t){var e;e="facebook"==t?"/connect/facebook/email":"google"==t?"/connect/google/profile%20email%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fplus.login%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fplus.me":"/connect/"+t,e&&$.oauthpopup({path:e,callback:function(){setTimeout(function(){$("div.import-contact#"+t+":not(.done)").click().addClass("done")}.bind(this),300)}})}),$("body").on("change","#audio, #video",function(t){this.appSettings.set($(t.target)[0].id,$(t.target).prop("checked"))}.bind(this))},n.prototype.callByPhono=function(t){var e=t.get("phone");if(this.outgoingCallView.stopCalltone(),this.outgoingCallView.setPhoneOnly(),l.isMobile())window.open("tel:"+e);else{var i=5,n=this.contactCollection.filter(function(t){return t.get("cid")}).length;if(i>n)return void alert("To unlock phone number calling feature, please invite "+i+" friends to join Beepe.<br>Current Beepe Friends: "+n);if(!this.localStream)return void alert("Please allow camera/microphone access for Beepe");this.phono.phone.dial("app:9990036398",{headers:[{name:"x-numbertodial",value:e}],onRing:function(){console.log("*******Ringing")}.bind(this),onAnswer:function(){console.log("*******Answered"),t=new f(t.omit("success")),t.set({success:!0}),this._eventOutput.emit("outGoingCallAccept",t),this._eventOutput.emit("connectedCall",t)}.bind(this),onHangup:function(){console.log("*******Hungup"),this._eventOutput.emit("callEnd",{exit:!0})}.bind(this)})}},n.prototype.setupCallListener=function(){function t(t){var e=t.val().firstname||t.val().person.split(" ")[0],i=t.val().lastname||t.val().person.split(" ")[1],n=t.val().email,s=t.val().pictureUrl||!1,o="unknown"==t.val().name?"":t.val().name,r=t.name(),a=new m({firstname:e,lastname:i,email:n,pictureUrl:s,roomId:r,caller:o});this._eventOutput.emit("incomingCall",a)}function e(t){var e=t.val().state;if("answered"==e){var i=this.myLightbox.curRenderable;i instanceof C&&i.stop()}}function i(){this._eventOutput.emit("callEnd",{exit:!1}),this.exitRoom()}function n(){this.callRef&&this.callRef.remove(),this.exitRoom(),this.phono&&this.phono.phone&&this.phono.phone.calls&&_.chain(this.phono.phone.calls).values().invoke("hangup")}function s(){this.listenRef&&this.listenRef.remove(),this.exitRoom(),this.callNotification&&this.callNotification.myNotify&&this.callNotification.myNotify.close()}function o(t){if(t instanceof m){var e=t.get("caller"),i=this.appSettings.get("cid"),n=t.get("roomId");n&&(this.listenRef.child(n).update({state:"answered"}),this.joinRoom(e,i,n))}this.callNotification&&this.callNotification.myNotify&&this.callNotification.myNotify.close()}function r(t){this.callRef&&this.callRef.remove(),this.callByPhono(t)}function a(t){function e(t){function e(t){var e=t.val().state;if("answered"==e){var i=this.appSettings.get("cid"),s=n,o=t.name();this.startRoom(i,s,o),this._eventOutput.emit("outGoingCallAccept",s)}}function i(){this._eventOutput.emit("callEnd",{exit:!1}),this.exitRoom()}if(!this.localStream)return void alert("Please allow camera/microphone access for Beepe");{var n=t.get("cid");t.get("provider")}if(n){var s=new Firebase(this.appSettings.get("firebaseUrl")+"history/"+n+"/calls"),o={firstname:this.appSettings.get("firstname"),lastname:this.appSettings.get("lastname"),email:this.appSettings.get("email"),pictureUrl:!1,type:"incoming",time:Firebase.ServerValue.TIMESTAMP,cid:this.appSettings.get("cid")};s.push(o),this.callRef=new Firebase(this.appSettings.get("firebaseUrl")+"calls/"+n),this.callRef.onDisconnect().remove();var r=this.appSettings.get("firstname")+" "+this.appSettings.get("lastname"),a={name:this.appSettings.get("cid"),person:r,firstname:this.appSettings.get("firstname"),lastname:this.appSettings.get("lastname"),state:"calling"};this.appSettings.get("email")&&(a.email=this.appSettings.get("email")),this.appSettings.get("username")&&(a.username=this.appSettings.get("username")),this.callRef.once("value",function(t){null==t.val()&&(this.callRef.push(a),this.callRef.once("child_changed",e.bind(this)),this.callRef.once("child_removed",i.bind(this)))}.bind(this))}}this.outgoingCallView.start(t,this.appSettings),this.myLightbox.show(this.outgoingCallView,!0),t.get("cid")&&"testcid"!=t.get("cid")?e.bind(this)(t):isNaN(t.get("phone"))?this.lookup(t,e.bind(this),this.onUserNotFound.bind(this)):this.lookup(t,e.bind(this),this.callByPhono.bind(this))}function u(){this.onSyncButton()}this.listenRef.on("child_added",t.bind(this)),this.listenRef.on("child_changed",e.bind(this)),this.listenRef.on("child_removed",i.bind(this)),this._eventOutput.on("outgoingCallEnd",n.bind(this)),this._eventOutput.on("incomingCallEnd",s.bind(this)),this._eventOutput.on("incomingCallAnswer",o.bind(this)),this._eventOutput.on("outgoingCall",a.bind(this)),this._eventOutput.on("outgoingPhoneCall",r.bind(this)),this._eventOutput.on("sync",u.bind(this))},n.prototype.setupVideo=function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia&&this.setCamera()},n.prototype.initLocalMedia=function(t){var t=_.extend({audio:!0,video:!0},t);navigator.getUserMedia(t,function(e){if($(".local-video video").prop("src",URL.createObjectURL(e)),this.localStream=e,this.cleanRoom(),this.setBlur(),this.setAudio(),t.video?$(".camera").removeClass("off"):$(".camera").addClass("off"),this._eventOutput.emit("closeAlert"),this.chatroom){var i=new m({firstname:this.chatroom.callerFirstName||this.chatroom.callerName||"",lastname:this.chatroom.callerLastName||"",email:this.chatroom.callerAccountId||"",cid:this.chatroom.caller||"",provider:this.chatroom.calleeAccountProvider||""});this._eventOutput.emit("outgoingCall",i)}}.bind(this),function(){$(".camera").addClass("off")}.bind(this))},n.prototype.initRemoteMedia=function(t){this.existingCall&&this.existingCall.close(),t.on("stream",function(t){$(".remote-video video").prop("src",URL.createObjectURL(t))}.bind(this)),this.existingCall=t,t.on("close",this.cleanRoom.bind(this))},n.prototype.startRoom=function(t,e,i){i&&(i="A"+i+"Z"),this.peer=new Peer(i,{host:this.appSettings.get("pHost"),port:this.appSettings.get("pPort"),secure:this.appSettings.get("pSecure"),config:this.iceServerConfig}),this.peer.on("open",function(){}.bind(this)),this.peer.on("call",function(t){t.answer(this.localStream),this.initRemoteMedia(t),o("event",{data:{action:"setProperty",roomId:i}})}.bind(this)),this.peer.on("connection",function(t){this.setupPeerConn(t)}.bind(this)),this.peer.on("error",function(){}.bind(this))},n.prototype.joinRoom=function(t,e,i){i&&(i="A"+i+"Z"),this.peer=new Peer({host:this.appSettings.get("pHost"),port:this.appSettings.get("pPort"),secure:this.appSettings.get("pSecure"),config:this.iceServerConfig}),setTimeout(function(){var t=this.peer.call(i,this.localStream);this.initRemoteMedia(t),o("event",{data:{action:"setProperty",roomId:i}});var e=this.peer.connect(i,{label:"chat",reliable:!1});this.setupPeerConn(e)}.bind(this),1e3)},n.prototype.getXirsys=function(t){$.post("https://api.xirsys.com/getIceServers",{domain:"dashboard.colabeo.com",room:"default",application:"default",ident:"chapman",secret:"02f0e22c-764e-4939-8042-4ea028e9b8e0",secure:0},function(e){if(e){var i=JSON.parse(e),n=i.d;n&&(this.iceServerConfig={iceServers:R.iceServers.concat(n.iceServers)})}t&&t(iceServer)}.bind(this))},n.prototype.setupPeerConn=function(t){this.conn=t,this.conn.on("open",function(){this.conn.on("data",u.bind(this))}.bind(this))},n.prototype.exitRoom=function(){this.existingCall&&this.existingCall.close(),o("event",{data:{action:"setProperty",roomId:null}}),o("event",{data:{action:"endCall"}}),this.cleanRoom()},n.prototype.cleanRoom=function(){this.peer&&this.peer.destroy(),this.conn&&this.conn.close()},n.prototype.setCamera=function(){this.initLocalMedia({video:this.appSettings.get("camera"),audio:!0})},n.prototype.setBlur=function(){var t=this.appSettings.get("blur");t?$(".camera").removeClass("fakeblur"):$(".camera").addClass("fakeblur")},n.prototype.setAudio=function(){var t=this.appSettings.get("audio");if(this.localStream)for(var e=this.localStream.getAudioTracks(),i=0,n=e.length;n>i;i++)e[i].enabled=t},n.prototype.setVideo=function(){var t=this.appSettings.get("video"),e=this.appSettings.get("camera");if(this.localStream&&e){for(var i=this.localStream.getVideoTracks(),n=0,s=i.length;s>n;n++)i[n].enabled=t;t?$(".camera").removeClass("off"):$(".camera").addClass("off")}},n.prototype.lookup=function(t,e,i){var n=[];["email","phone","facebook","google","twitter","linkedin","github","yammer"].map(function(e){t.get(e)&&n.push({provider:e,eid:t.get(e).id||t.get(e)})}),n.length?s(n,function(s){if(s.length){var o,r=_.last(s);r.user&&r.user.objectId?o=r.user.objectId:r.objectId&&(o=r.objectId),console.log(t),t.set({cid:o}),e&&e(t),t.get("dcr")||this.setupChatroom(t,n)}else i&&i(t,n)}.bind(this)):alert("This contact is empty.")},n.prototype.sendChat=function(t){var e=t.message,i=t.contact.get("cid");if(i){var n=this.appSettings.get("cid"),s=new Firebase(this.appSettings.get("firebaseUrl")+"chats/"+i+"/"+n),o=new Firebase(this.appSettings.get("firebaseUrl")+"chats/"+n+"/"+i),r={content:e,type:"text",from:n,time:Firebase.ServerValue.TIMESTAMP};s.push(r),o.push(r);var a=new Firebase(this.appSettings.get("firebaseUrl")+"history/"+i+"/chats/"+n),u={firstname:this.appSettings.get("firstname")||"",lastname:this.appSettings.get("lastname")||"",email:this.appSettings.get("email")||"",pictureUrl:!1,time:Firebase.ServerValue.TIMESTAMP,cid:this.appSettings.get("cid"),content:e,type:"text",read:!1};a.set(u);var c=new Firebase(this.appSettings.get("firebaseUrl")+"history/"+n+"/chats/"+i),u={firstname:t.contact.get("firstname")||"",lastname:t.contact.get("lastname")||"",email:t.contact.get("email")||"",pictureUrl:!1,time:Firebase.ServerValue.TIMESTAMP,cid:i,content:e,type:"text",read:!0};c.set(u)}},n.prototype.loadUser=function(t){function e(){var t=(window.location.search||"?").substr(1),e={};return t.replace(/([^&=]+)=?([^&]*)(?:&+|$)/g,function(t,i,n){(e[i]=e[i]||[]).push(n)}),e}if("/call"==location.pathname||location.pathname.match("/dcr/")){var i=e(),n=i.r?i.r[0]:location.pathname.split("/")[2];n&&$.ajax({url:"/chatroom?id="+n,type:"get",dataType:"json",success:function(e){t&&t({chatroom:e})},error:function(){console.log("error"),t&&t({})}})}else $.ajax({url:"/me",type:"get",dataType:"json",success:function(e){t&&t(e)},error:function(){console.log("error"),t&&t({})}})},n.prototype.loadConnected=function(t){$.ajax({url:"/connected",type:"get",dataType:"json",success:function(e){t&&t(e)},error:function(){console.log("error"),t&&t({})}})},n.prototype.loadContact=function(t,e){$.ajax({url:"/contact/"+t,type:"get",dataType:"json",success:function(t){e&&e.bind(this)(t)},error:function(){console.log("error"),e&&e.bind(this)({})}})},n.prototype.saveContact=function(t){_.each(t,function(t){var e={};if(!t.firstname){var i=t.name.split(" ");t.lastname=i.pop(),t.firstname=i.join(" ")}e.firstname=t.firstname,e.lastname=t.lastname,t.provider&&(e[t.provider]=t),this.contactCollection.find(function(e){return e.get(t.provider)&&e.get(t.provider).id==t.id})||this.contactCollection.create(e)}.bind(this)),this.contactCollection.trigger("sync"),t.length&&localStorage.setItem("preloadfb"+this.appSettings.get("cid"),!0)},n.prototype.setupChatroom=function(t,e,i){for(var n=0;n<e.length;n++){var s=e[n];if(s){var o={provider:s.provider,eid:s.eid,name:t.get("firstname")+" "+t.get("lastname"),firstname:t.get("firstname"),lastname:t.get("lastname"),email:t.get("email")};$.ajax({url:"/chatroom",type:"post",data:{callee:JSON.stringify(o),e:1,d:0},success:function(e){t.set({dcr:e.chatid}),i&&i(t)},error:function(){}})}}},n.prototype.onSyncButton=function(){o("event",{data:{action:"sync"}})},n.prototype.outgoingChat=function(t,e){e||(e="text"),this.conn&&this.conn.send({content:t,type:e,action:"chat"})},n.prototype.buttonOnclickRespond=function(){this.activedButton=void 0,this.activedClassList=".touchable",$(document).on("mousedown touchstart",this.activedClassList,function(t){this.activedButton=$(t.currentTarget),this.activedButton.addClass("touchable-active")}.bind(this)),$(document).on("mouseout",this.activedClassList,function(){this.activedButton&&(this.activedButton.removeClass("touchable-active"),this.activedButton.one("mouseover",function(){this.activedButton.addClass("touchable-active")}.bind(this)))}.bind(this)),$(document).on("mouseup touchend",function(){this.activedButton&&setTimeout(function(){this.activedButton.removeClass("touchable-active"),this.activedButton.off(),this.activedButton=void 0}.bind(this),200)}.bind(this))},n.prototype.onUserNotFound=function(t,e){alert("The user you are reaching is not a Beepe user. Please send an invite."),t.get("dcr")?this._eventOutput.emit("editContact",t):this.setupChatroom(t,e,function(){this._eventOutput.emit("editContact",t)}.bind(this)),this.outgoingCallView.stopCalltone()},i.exports=n}.bind(this)),require.register("app/main/app.js",function(t,e,i){function n(t){s.apply(this,arguments),this.layout=new c,this.header=new f(this.options.header),this.navigation=new l(this.options.navigation),this.contentArea=new h(this.options.content),this.layout.id.header.add(this.header),this.layout.id.footer.add(a.transformInFront).add(this.navigation),this.layout.id.content.add(a.transformBehind).add(this.contentArea),this._eventInput.pipe(this.contentArea),o.setOutputHandler(this,this.navigation),this._eventInput=new o,o.setInputHandler(this,this._eventInput),this._eventOutput=new o,o.setOutputHandler(this,this._eventOutput),this._currentSection=void 0,this._sections={},this._sectionTitles={},this.options.sections&&this.initSections(this.options.sections),this.navigation.on("select",function(t){this._eventOutput.emit("triggerBackToNoneEditing"),this._eventOutput.emit("updateRecent"),$("body").removeClass("editing"),this._currentSection=t.id,this.header.show(this._sectionTitles[t.id]),this.contentArea.show(this._sections[t.id].get())}.bind(this));var e=t.sections[0].collection;e.on("all",function(){var t=e.getUnreadCount()||"",i=$(this.navigation.buttons[0].options.content);i.find(".badge").text(t),this.navigation.buttons[0].setOptions({content:i[0].outerHTML})}.bind(this)),this._add(this.layout)}var s=e("famous/view"),o=e("famous/event-handler"),r=e("famous/render-node"),a=e("famous/utilities/utility"),u=e("famous/transform"),c=e("famous/views/header-footer-layout"),h=e("famous/views/edge-swapper"),l=e("famous/widgets/tab-bar"),p=e("templates"),d=e("row-view"),f=d.HeaderBar;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={header:{size:[void 0,50],inTransition:!0,outTransition:!0,look:{size:[void 0,50],classes:["header"]}},navigation:{size:[void 0,50],direction:a.Direction.X,buttons:{onClasses:["navigation","on"],offClasses:["navigation","off"],inTransition:!0,outTransition:!0}},content:{inTransition:!0,outTransition:!0,overlap:!0},inTransform:u.identity,outTransform:u.identity,inOpacity:0,outOpacity:0,inTransition:{duration:500},outTransition:{duration:200}},n.prototype.getState=function(){return this._currentSection},n.prototype.section=function(t){return t in this._sections||(this._sections[t]=new r,this._sections[t].setOptions=function(e){this._sectionTitles[t]=e.title,this.navigation.defineSection(t,{content:p.navigationButton(e.navigation)})}.bind(this)),this._sections[t]},n.prototype.select=function(t){return this._currentSection=t,t in this._sections?(this.navigation.select(t),!0):!1},n.prototype.initSections=function(t){_.each(t,function(t){var e=t.title;this.section(e).setOptions({title:t.title,navigation:t.navigation}),this.section(e).add(t),t.pipe&&t.pipe(this._eventInput)}.bind(this))},n.prototype.onHeaderClick=function(t){this.header._surfaces[t.id].eventHandled=!0,this.header._surfaces[t.id].on("click",function(t){switch(t.target.id){case"clear-button":this._eventOutput.emit("clearRecent");break;case"add-contact":this._eventOutput.emit("editContact");break;case"edit-contact":$("body").toggleClass("editing");break;case"recent-toggle":this._eventOutput.emit("loadRecent",t)}}.bind(this)),this.header._surfaces[t.id].pipe(this._eventOutput)},i.exports=n}.bind(this)),require.register("app/main/config.js",function(t,e,i){var n=e("famous/utilities/utility").Direction.X;i.exports={debug:!1,header:{look:{classes:["header"],size:[void 0,50],side:"top"},feel:{inTransition:{method:"wall",period:300,dampingRatio:0,restitution:.2},outTransition:{method:"spring",period:300,dampingRatio:.5,velocity:0},overlap:!0}},navigation:{look:{side:"bottom",direction:n,size:[void 0,50],onClasses:["navigation","on"],offClasses:["navigation","off"]},feel:{inTransition:{curve:"easeInOut",duration:150},outTransition:{curve:"easeInOut",duration:150}}},content:{feel:{inTransition:{method:"spring",period:1e3,dampingRatio:.5,velocity:0},outTransition:{method:"spring",period:600,dampingRatio:.5,velocity:0},overlap:!0}}}}.bind(this)),require.config({map:{"famous_modules/famous/polyfills/_git_master/index.js":{"./classList.js":"famous_modules/famous/polyfills/_git_master/classList.js","./functionPrototypeBind.js":"famous_modules/famous/polyfills/_git_master/functionPrototypeBind.js","./requestAnimationFrame.js":"famous_modules/famous/polyfills/_git_master/requestAnimationFrame.js"},"famous_modules/famous/polyfills/_git_master/classList.js":{},"famous_modules/famous/polyfills/_git_master/functionPrototypeBind.js":{},"famous_modules/famous/polyfills/_git_master/requestAnimationFrame.js":{},"famous_modules/famous/transitions/easing/_git_master/index.js":{},"famous_modules/famous/event-handler/_git_master/index.js":{},"famous_modules/famous/utilities/utility/_git_master/index.js":{},"famous_modules/famous/options-manager/_git_master/index.js":{"famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js"},"famous_modules/famous/transform/_git_master/index.js":{},"app/models/call-collection.js":{call:"app/models/call.js"},"app/models/call.js":{},"app/models/chat-collection.js":{conversation:"app/models/conversation.js"},"app/models/contact-collection.js":{contact:"app/models/contact.js"},"app/models/contact.js":{},"app/models/conversation-collection.js":{conversation:"app/models/conversation.js"},"app/models/conversation.js":{settings:"app/models/settings.js"},"app/models/index.js":{call:"app/models/call.js","recents-collection":"app/models/recents-collection.js",contact:"app/models/contact.js","contact-collection":"app/models/contact-collection.js",conversation:"app/models/conversation.js","conversation-collection":"app/models/conversation-collection.js","chat-collection":"app/models/chat-collection.js",settings:"app/models/settings.js","social-contact-collection":"app/models/social-contact-collection.js"},"app/models/recents-collection.js":{call:"app/models/call.js"},"app/models/settings.js":{},"app/models/social-contact-collection.js":{contact:"app/models/contact.js"},"app/vendor/index.js":{zepto:"app/vendor/zepto.js",underscore:"app/vendor/underscore.js",backbone:"app/vendor/backbone.js",handlebars:"app/vendor/handlebars.js","backbone.localStorage":"app/vendor/backbone.localStorage.js",firebase:"app/vendor/firebase.js","backbone-firebase":"app/vendor/backbone-firebase.js",peer:"app/vendor/peer.js",notify:"app/vendor/notify.js",phono:"app/vendor/phono.js",oauthpopup:"app/vendor/oauthpopup.js"},"app/vendor/att.js":{},"app/vendor/backbone-firebase.js":{},"app/vendor/backbone.js":{underscore:"app/vendor/underscore.js"},"app/vendor/backbone.localStorage.js":{underscore:"app/vendor/underscore.js",backbone:"app/vendor/backbone.js"},"app/vendor/firebase.js":{},"app/vendor/handlebars.js":{},"app/vendor/notify.js":{},"app/vendor/oauthpopup.js":{},"app/vendor/peer.js":{},"app/vendor/phono.js":{},"app/vendor/underscore.js":{},"app/vendor/zepto.js":{},"famous_modules/famous/entity/_git_master/index.js":{},"famous_modules/famous/surface/_git_master/index.js":{"famous/entity":"famous_modules/famous/entity/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js"},"famous_modules/famous/spec-parser/_git_master/index.js":{"famous/transform":"famous_modules/famous/transform/_git_master/index.js"},"famous_modules/famous/render-node/_git_master/index.js":{"famous/entity":"famous_modules/famous/entity/_git_master/index.js","famous/spec-parser":"famous_modules/famous/spec-parser/_git_master/index.js"},"famous_modules/famous/view/_git_master/index.js":{"famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/options-manager":"famous_modules/famous/options-manager/_git_master/index.js","famous/render-node":"famous_modules/famous/render-node/_git_master/index.js"},"famous_modules/famous/views/header-footer-layout/_git_master/index.js":{"famous/entity":"famous_modules/famous/entity/_git_master/index.js","famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js"},"famous_modules/famous/element-allocator/_git_master/index.js":{},"famous_modules/famous/transitions/multiple-transition/_git_master/index.js":{"famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js"},"famous_modules/famous/transitions/tween-transition/_git_master/index.js":{"famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js"},"famous_modules/famous/transitions/transitionable/_git_master/index.js":{"famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/transitions/multiple-transition":"famous_modules/famous/transitions/multiple-transition/_git_master/index.js","famous/transitions/tween-transition":"famous_modules/famous/transitions/tween-transition/_git_master/index.js"},"famous_modules/famous/context/_git_master/index.js":{"famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/spec-parser":"famous_modules/famous/spec-parser/_git_master/index.js","famous/element-allocator":"famous_modules/famous/element-allocator/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/transitions/transitionable":"famous_modules/famous/transitions/transitionable/_git_master/index.js"},"famous_modules/famous/engine/_git_master/index.js":{"famous/context":"famous_modules/famous/context/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/options-manager":"famous_modules/famous/options-manager/_git_master/index.js"},"famous_modules/famous/modifier/_git_master/index.js":{"famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/transitions/transitionable":"famous_modules/famous/transitions/transitionable/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js"},"app/custom/light-box/light-box.js":{"famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js"},"famous_modules/famous/views/light-box/_git_master/index.js":{"famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js"},"famous_modules/famous/views/edge-swapper/_git_master/index.js":{"famous/entity":"famous_modules/famous/entity/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/views/light-box":"famous_modules/famous/views/light-box/_git_master/index.js"},"famous_modules/famous/widgets/title-bar/_git_master/index.js":{"famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/views/light-box":"famous_modules/famous/views/light-box/_git_master/index.js"},"famous_modules/famous/view-sequence/_git_master/index.js":{},"famous_modules/famous/views/grid-layout/_git_master/index.js":{"famous/entity":"famous_modules/famous/entity/_git_master/index.js","famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/view-sequence":"famous_modules/famous/view-sequence/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/options-manager":"famous_modules/famous/options-manager/_git_master/index.js"},"famous_modules/famous/views/fader/_git_master/index.js":{"famous/transitions/transitionable":"famous_modules/famous/transitions/transitionable/_git_master/index.js"},"famous_modules/famous/views/image-fader/_git_master/index.js":{"famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/views/fader":"famous_modules/famous/views/fader/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js"},"famous_modules/famous/widgets/toggle-button/_git_master/index.js":{"famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/views/image-fader":"famous_modules/famous/views/image-fader/_git_master/index.js"},"famous_modules/famous/widgets/tab-bar/_git_master/index.js":{"famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/view":"famous_modules/famous/view/_git_master/index.js","famous/views/grid-layout":"famous_modules/famous/views/grid-layout/_git_master/index.js","famous/widgets/toggle-button":"famous_modules/famous/widgets/toggle-button/_git_master/index.js"},"famous_modules/famous/group/_git_master/index.js":{"famous/context":"famous_modules/famous/context/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js"},"famous_modules/famous/input/mouse-sync/_git_master/index.js":{"famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js"},"app/custom/up-down-transform/up-down-transform.js":{"famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/transitions/easing":"famous_modules/famous/transitions/easing/_git_master/index.js"},"app/custom/conversation-surface/conversation-surface.js":{"famous/surface":"famous_modules/famous/surface/_git_master/index.js"},"app/custom/sound-player/sound-player.js":{"buffer-loader":"app/custom/sound-player/buffer-loader.js"},"app/custom/sound-player/buffer-loader.js":{},"famous_modules/famous/input/touch-tracker/_git_master/index.js":{"famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js"},"famous_modules/famous/input/touch-sync/_git_master/index.js":{"famous/input/touch-tracker":"famous_modules/famous/input/touch-tracker/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js"},"app/custom/helpers/helpers.js":{"famous/input/mouse-sync":"famous_modules/famous/input/mouse-sync/_git_master/index.js","famous/input/touch-sync":"famous_modules/famous/input/touch-sync/_git_master/index.js"},"app/custom/templates/templates.js":{helpers:"app/custom/helpers/helpers.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js"},"app/custom/custom-input-sync/index.js":{"touch-sync":"app/custom/custom-input-sync/touch-sync.js","mouse-sync":"app/custom/custom-input-sync/mouse-sync.js"},"app/custom/custom-input-sync/mouse-sync.js":{"famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js"},"app/custom/custom-input-sync/touch-sync.js":{"famous/input/touch-tracker":"famous_modules/famous/input/touch-tracker/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js"},"famous_modules/famous/input/scroll-sync/_git_master/index.js":{"famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js"},"famous_modules/famous/input/generic-sync/_git_master/index.js":{"famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/input/touch-sync":"famous_modules/famous/input/touch-sync/_git_master/index.js","famous/input/scroll-sync":"famous_modules/famous/input/scroll-sync/_git_master/index.js"},"famous_modules/famous/math/vector/_git_master/index.js":{},"famous_modules/famous/physics/bodies/particle/_git_master/index.js":{"famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/math/vector":"famous_modules/famous/math/vector/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js"},"famous_modules/famous/physics/forces/force/_git_master/index.js":{"famous/math/vector":"famous_modules/famous/math/vector/_git_master/index.js"},"famous_modules/famous/physics/forces/drag/_git_master/index.js":{"famous/physics/forces/force":"famous_modules/famous/physics/forces/force/_git_master/index.js"},"famous_modules/famous/physics/forces/spring/_git_master/index.js":{"famous/physics/forces/force":"famous_modules/famous/physics/forces/force/_git_master/index.js","famous/math/vector":"famous_modules/famous/math/vector/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js"},"famous_modules/famous/physics/constraints/constraint/_git_master/index.js":{},"famous_modules/famous/physics/integrator/symplectic-euler/_git_master/index.js":{},"famous_modules/famous/math/quaternion/_git_master/index.js":{},"famous_modules/famous/physics/bodies/body/_git_master/index.js":{"famous/physics/bodies/particle":"famous_modules/famous/physics/bodies/particle/_git_master/index.js","famous/math/vector":"famous_modules/famous/math/vector/_git_master/index.js","famous/math/quaternion":"famous_modules/famous/math/quaternion/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js"},"famous_modules/famous/physics/bodies/circle/_git_master/index.js":{"famous/physics/bodies/body":"famous_modules/famous/physics/bodies/body/_git_master/index.js"},"famous_modules/famous/physics/bodies/rectangle/_git_master/index.js":{"famous/physics/bodies/body":"famous_modules/famous/physics/bodies/body/_git_master/index.js"},"famous_modules/famous/physics/engine/_git_master/index.js":{"famous/physics/bodies/particle":"famous_modules/famous/physics/bodies/particle/_git_master/index.js","famous/physics/bodies/body":"famous_modules/famous/physics/bodies/body/_git_master/index.js","famous/physics/bodies/circle":"famous_modules/famous/physics/bodies/circle/_git_master/index.js","famous/physics/bodies/rectangle":"famous_modules/famous/physics/bodies/rectangle/_git_master/index.js","famous/physics/forces/force":"famous_modules/famous/physics/forces/force/_git_master/index.js","famous/physics/constraints/constraint":"famous_modules/famous/physics/constraints/constraint/_git_master/index.js","famous/physics/integrator/symplectic-euler":"famous_modules/famous/physics/integrator/symplectic-euler/_git_master/index.js"},"famous_modules/famous/views/scrollview/_git_master/index.js":{"famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/physics/engine":"famous_modules/famous/physics/engine/_git_master/index.js","famous/physics/bodies/particle":"famous_modules/famous/physics/bodies/particle/_git_master/index.js","famous/physics/forces/drag":"famous_modules/famous/physics/forces/drag/_git_master/index.js","famous/physics/forces/spring":"famous_modules/famous/physics/forces/spring/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/input/generic-sync":"famous_modules/famous/input/generic-sync/_git_master/index.js","famous/view-sequence":"famous_modules/famous/view-sequence/_git_master/index.js","famous/group":"famous_modules/famous/group/_git_master/index.js","famous/entity":"famous_modules/famous/entity/_git_master/index.js"},"famous_modules/famous/transitions/spring-transition/_git_master/index.js":{"famous/physics/engine":"famous_modules/famous/physics/engine/_git_master/index.js","famous/physics/forces/spring":"famous_modules/famous/physics/forces/spring/_git_master/index.js","famous/math/vector":"famous_modules/famous/math/vector/_git_master/index.js"},"app/custom/vertical-scroll-view/vertical-scroll-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/views/scrollview":"famous_modules/famous/views/scrollview/_git_master/index.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js"},"famous_modules/famous/physics/constraints/wall/_git_master/index.js":{"famous/physics/constraints/constraint":"famous_modules/famous/physics/constraints/constraint/_git_master/index.js","famous/math/vector":"famous_modules/famous/math/vector/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js"},"famous_modules/famous/transitions/wall-transition/_git_master/index.js":{"famous/physics/engine":"famous_modules/famous/physics/engine/_git_master/index.js","famous/physics/forces/spring":"famous_modules/famous/physics/forces/spring/_git_master/index.js","famous/physics/constraints/wall":"famous_modules/famous/physics/constraints/wall/_git_master/index.js","famous/math/vector":"famous_modules/famous/math/vector/_git_master/index.js"},"app/custom/row-view/header-bar.js":{"famous/widgets/title-bar":"famous_modules/famous/widgets/title-bar/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js"},"app/custom/row-view/header-view.js":{"famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js",templates:"app/custom/templates/templates.js","row-view":"app/custom/row-view/row-view.js"},"app/custom/row-view/index.js":{"row-view":"app/custom/row-view/row-view.js","item-view":"app/custom/row-view/item-view.js","item-view-2S":"app/custom/row-view/item-view-2S.js","header-view":"app/custom/row-view/header-view.js","header-bar":"app/custom/row-view/header-bar.js"},"app/custom/row-view/item-view-2S.js":{"famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/input/generic-sync":"famous_modules/famous/input/generic-sync/_git_master/index.js","famous/input/mouse-sync":"famous_modules/famous/input/mouse-sync/_git_master/index.js","famous/input/touch-sync":"famous_modules/famous/input/touch-sync/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/transitions/easing":"famous_modules/famous/transitions/easing/_git_master/index.js","famous/transitions/transitionable":"famous_modules/famous/transitions/transitionable/_git_master/index.js","famous/transitions/wall-transition":"famous_modules/famous/transitions/wall-transition/_git_master/index.js","famous/transitions/spring-transition":"famous_modules/famous/transitions/spring-transition/_git_master/index.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js",templates:"app/custom/templates/templates.js","row-view":"app/custom/row-view/row-view.js",helpers:"app/custom/helpers/helpers.js"},"app/custom/row-view/item-view.js":{"famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/input/generic-sync":"famous_modules/famous/input/generic-sync/_git_master/index.js","famous/input/mouse-sync":"famous_modules/famous/input/mouse-sync/_git_master/index.js","famous/input/touch-sync":"famous_modules/famous/input/touch-sync/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/transitions/easing":"famous_modules/famous/transitions/easing/_git_master/index.js","famous/transitions/transitionable":"famous_modules/famous/transitions/transitionable/_git_master/index.js","famous/transitions/wall-transition":"famous_modules/famous/transitions/wall-transition/_git_master/index.js","famous/transitions/spring-transition":"famous_modules/famous/transitions/spring-transition/_git_master/index.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js",templates:"app/custom/templates/templates.js","row-view":"app/custom/row-view/row-view.js",helpers:"app/custom/helpers/helpers.js"},"app/custom/row-view/row-view.js":{"famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/view":"famous_modules/famous/view/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js"},"app/views/add-contact-view.js":{"famous/views/header-footer-layout":"famous_modules/famous/views/header-footer-layout/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/view":"famous_modules/famous/view/_git_master/index.js","famous/views/edge-swapper":"famous_modules/famous/views/edge-swapper/_git_master/index.js","up-down-transform":"app/custom/up-down-transform/up-down-transform.js",templates:"app/custom/templates/templates.js",helpers:"app/custom/helpers/helpers.js",models:"app/models/index.js","import-contact-view":"app/views/import-contact-view.js"},"app/views/alert-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/transitions/easing":"famous_modules/famous/transitions/easing/_git_master/index.js","light-box":"app/custom/light-box/light-box.js"},"app/views/camera-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js"},"app/views/chat-item-view.js":{templates:"app/custom/templates/templates.js","row-view":"app/custom/row-view/index.js"},"app/views/chats-section-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","vertical-scroll-view":"app/custom/vertical-scroll-view/vertical-scroll-view.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js",templates:"app/custom/templates/templates.js","chat-item-view":"app/views/chat-item-view.js"},"app/views/connected-call-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js",templates:"app/custom/templates/templates.js",models:"app/models/index.js","conversation-view":"app/views/conversation-view.js"},"app/views/contact-item-view.js":{templates:"app/custom/templates/templates.js","row-view":"app/custom/row-view/index.js"},"app/views/contacts-scroll-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/views/header-footer-layout":"famous_modules/famous/views/header-footer-layout/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/input/generic-sync":"famous_modules/famous/input/generic-sync/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/transitions/easing":"famous_modules/famous/transitions/easing/_git_master/index.js","custom-input-sync":"app/custom/custom-input-sync/index.js",templates:"app/custom/templates/templates.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","vertical-scroll-view":"app/custom/vertical-scroll-view/vertical-scroll-view.js","contact-item-view":"app/views/contact-item-view.js","row-view":"app/custom/row-view/index.js",helpers:"app/custom/helpers/helpers.js"},"app/views/contacts-section-view.js":{"contacts-scroll-view":"app/views/contacts-scroll-view.js",templates:"app/custom/templates/templates.js"},"app/views/contacts-section-view2.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/views/header-footer-layout":"famous_modules/famous/views/header-footer-layout/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/input/generic-sync":"famous_modules/famous/input/generic-sync/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/transitions/easing":"famous_modules/famous/transitions/easing/_git_master/index.js","custom-input-sync":"app/custom/custom-input-sync/index.js",templates:"app/custom/templates/templates.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","vertical-scroll-view":"app/custom/vertical-scroll-view/vertical-scroll-view.js","contact-item-view":"app/views/contact-item-view.js","row-view":"app/custom/row-view/index.js"},"app/views/conversation-item-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","conversation-surface":"app/custom/conversation-surface/conversation-surface.js",helpers:"app/custom/helpers/helpers.js"},"app/views/conversation-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/views/scrollview":"famous_modules/famous/views/scrollview/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/views/header-footer-layout":"famous_modules/famous/views/header-footer-layout/_git_master/index.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js","famous/audio/sound-player":"app/custom/sound-player/sound-player.js","famous/transitions/transitionable":"famous_modules/famous/transitions/transitionable/_git_master/index.js","famous/transitions/wall-transition":"famous_modules/famous/transitions/wall-transition/_git_master/index.js",templates:"app/custom/templates/templates.js","vertical-scroll-view":"app/custom/vertical-scroll-view/vertical-scroll-view.js","conversation-item-view":"app/views/conversation-item-view.js",models:"app/models/index.js",helpers:"app/custom/helpers/helpers.js"},"app/views/dial-item-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/input/generic-sync":"famous_modules/famous/input/generic-sync/_git_master/index.js","famous/input/mouse-sync":"famous_modules/famous/input/mouse-sync/_git_master/index.js","famous/input/touch-sync":"famous_modules/famous/input/touch-sync/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/transitions/easing":"famous_modules/famous/transitions/easing/_git_master/index.js","famous/transitions/transitionable":"famous_modules/famous/transitions/transitionable/_git_master/index.js","famous/transitions/wall-transition":"famous_modules/famous/transitions/wall-transition/_git_master/index.js","famous/transitions/spring-transition":"famous_modules/famous/transitions/spring-transition/_git_master/index.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/audio/sound-player":"app/custom/sound-player/sound-player.js",templates:"app/custom/templates/templates.js",helpers:"app/custom/helpers/helpers.js"},"app/views/dial-section-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/views/grid-layout":"famous_modules/famous/views/grid-layout/_git_master/index.js","famous/views/header-footer-layout":"famous_modules/famous/views/header-footer-layout/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/views/light-box":"famous_modules/famous/views/light-box/_git_master/index.js","famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js",helpers:"app/custom/helpers/helpers.js",models:"app/models/index.js","dial-item-view":"app/views/dial-item-view.js",templates:"app/custom/templates/templates.js"},"app/views/favorite-item-view.js":{templates:"app/custom/templates/templates.js","row-view":"app/custom/row-view/index.js"},"app/views/favorites-section-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","vertical-scroll-view":"app/custom/vertical-scroll-view/vertical-scroll-view.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js",templates:"app/custom/templates/templates.js","favorite-item-view":"app/views/favorite-item-view.js"},"app/views/import-contact-view.js":{"famous/views/header-footer-layout":"famous_modules/famous/views/header-footer-layout/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/view":"famous_modules/famous/view/_git_master/index.js","social-scroll-view":"app/views/social-scroll-view.js"},"app/views/incoming-call-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/transitions/easing":"famous_modules/famous/transitions/easing/_git_master/index.js","famous/audio/sound-player":"app/custom/sound-player/sound-player.js","light-box":"app/custom/light-box/light-box.js",templates:"app/custom/templates/templates.js",models:"app/models/index.js"},"app/views/index.js":{"add-contact-view":"app/views/add-contact-view.js","alert-view":"app/views/alert-view.js","camera-view":"app/views/camera-view.js","connected-call-view":"app/views/connected-call-view.js","contacts-scroll-view":"app/views/contacts-scroll-view.js","contacts-section-view":"app/views/contacts-section-view.js","dial-section-view":"app/views/dial-section-view.js","conversation-view":"app/views/conversation-view.js","favorites-section-view":"app/views/favorites-section-view.js","incoming-call-view":"app/views/incoming-call-view.js","outgoing-call-view":"app/views/outgoing-call-view.js","recents-section-view":"app/views/recents-section-view.js","chats-section-view":"app/views/chats-section-view.js","settings-section-view":"app/views/settings-section-view.js","social-view":"app/views/social-view.js","social-scroll-view":"app/views/social-scroll-view.js"},"app/views/outgoing-call-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/transitions/easing":"famous_modules/famous/transitions/easing/_git_master/index.js","famous/audio/sound-player":"app/custom/sound-player/sound-player.js","light-box":"app/custom/light-box/light-box.js",templates:"app/custom/templates/templates.js",models:"app/models/index.js"},"app/views/recent-item-view.js":{templates:"app/custom/templates/templates.js","row-view":"app/custom/row-view/index.js"},"app/views/recents-section-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","vertical-scroll-view":"app/custom/vertical-scroll-view/vertical-scroll-view.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js",templates:"app/custom/templates/templates.js","recent-item-view":"app/views/recent-item-view.js"},"app/views/settings-section-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/views/scrollview":"famous_modules/famous/views/scrollview/_git_master/index.js",templates:"app/custom/templates/templates.js"},"app/views/social-item-view.js":{"famous/input/generic-sync":"famous_modules/famous/input/generic-sync/_git_master/index.js","famous/input/mouse-sync":"famous_modules/famous/input/mouse-sync/_git_master/index.js","famous/input/touch-sync":"famous_modules/famous/input/touch-sync/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js",templates:"app/custom/templates/templates.js","row-view":"app/custom/row-view/index.js",helpers:"app/custom/helpers/helpers.js"},"app/views/social-scroll-view.js":{"famous/surface":"famous_modules/famous/surface/_git_master/index.js","social-item-view":"app/views/social-item-view.js","contacts-scroll-view":"app/views/contacts-scroll-view.js"},"app/views/social-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/views/scrollview":"famous_modules/famous/views/scrollview/_git_master/index.js","famous/views/header-footer-layout":"famous_modules/famous/views/header-footer-layout/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/input/generic-sync":"famous_modules/famous/input/generic-sync/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","custom-input-sync":"app/custom/custom-input-sync/index.js","social-item-view":"app/views/social-item-view.js"},"app/views/unused-add-favorite-view.js":{"famous/views/header-footer-layout":"famous_modules/famous/views/header-footer-layout/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","up-down-transform":"app/custom/up-down-transform/up-down-transform.js"},"app/main/index.js":{vendor:"app/vendor/index.js","famous/polyfills":"famous_modules/famous/polyfills/_git_master/index.js","main-controller":"app/main/main-controller.js"},"app/main/main-controller.js":{"famous/engine":"famous_modules/famous/engine/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/transitions/easing":"famous_modules/famous/transitions/easing/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js",helpers:"app/custom/helpers/helpers.js","light-box":"app/custom/light-box/light-box.js",models:"app/models/index.js",views:"app/views/index.js",config:"app/main/config.js",app:"app/main/app.js"},"app/main/app.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/views/header-footer-layout":"famous_modules/famous/views/header-footer-layout/_git_master/index.js","famous/views/edge-swapper":"famous_modules/famous/views/edge-swapper/_git_master/index.js","famous/widgets/tab-bar":"famous_modules/famous/widgets/tab-bar/_git_master/index.js",templates:"app/custom/templates/templates.js","row-view":"app/custom/row-view/index.js"},"app/main/config.js":{"famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js"}}});

//# sourceMappingURL=build.map.js
