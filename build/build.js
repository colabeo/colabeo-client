function require(t,e,i){var n=require.resolve(t);if(null==n){i=i||t,e=e||"root";var s=new Error("Failed to require '"+i+"' from '"+e+"'");throw s.path=i,s.parent=e,s.require=!0,s}var o=require.modules[n];if(!o._resolving&&!o.exports){var r={};r.exports={},r.client=r.component=!0,o._resolving=!0,o.call(this,r.exports,require.relative(n),r),delete o._resolving,o.exports=r.exports}return o.exports}require.modules={},require.aliases={},require.resolve=function(t){return require.modules.hasOwnProperty(t)?t:require.aliases.hasOwnProperty(t)?require.aliases[t]:void 0},require.register=function(t,e){require.modules[t]=e},require.alias=function(t,e){if(!require.modules.hasOwnProperty(t))throw new Error("Failed to alias '"+t+"', it does not exist");require.aliases[e]=t},require.config=function(t){if(t=t||{},t.map){var e=t.map;for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];for(var s in n)if(n.hasOwnProperty(s)){var o=n[s],r=[i,s].join(":");require.alias(o,r)}}}},require.relative=function(t){return function(e){var i=[t,e].join(":");return require(i,t,e)}},require.register("famous_modules/famous/polyfills/_git_master/index.js",function(t,e){e("./classList.js"),e("./functionPrototypeBind.js"),e("./requestAnimationFrame.js")}.bind(this)),require.register("famous_modules/famous/polyfills/_git_master/classList.js",function(){"undefined"==typeof document||"classList"in document.createElement("a")||!function(t){var e="classList",i="prototype",n=(t.HTMLElement||t.Element)[i],s=Object,o=String[i].trim||function(){return this.replace(/^\s+|\s+$/g,"")},r=Array[i].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},c=function(t,e){if(""===e)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return r.call(t,e)},u=function(t){for(var e=o.call(t.className),i=e?e.split(/\s+/):[],n=0,s=i.length;s>n;n++)this.push(i[n]);this._updateClassName=function(){t.className=this.toString()}},h=u[i]=[],l=function(){return new u(this)};if(a[i]=Error[i],h.item=function(t){return this[t]||null},h.contains=function(t){return t+="",-1!==c(this,t)},h.add=function(t){t+="",-1===c(this,t)&&(this.push(t),this._updateClassName())},h.remove=function(t){t+="";var e=c(this,t);-1!==e&&(this.splice(e,1),this._updateClassName())},h.toggle=function(t){t+="",-1===c(this,t)?this.add(t):this.remove(t)},h.toString=function(){return this.join(" ")},s.defineProperty){var p={get:l,enumerable:!0,configurable:!0};try{s.defineProperty(n,e,p)}catch(d){-2146823252===d.number&&(p.enumerable=!1,s.defineProperty(n,e,p))}}else s[i].__defineGetter__&&n.__defineGetter__(e,l)}(self)}.bind(this)),require.register("famous_modules/famous/polyfills/_git_master/functionPrototypeBind.js",function(){Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},s=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,s.prototype=new n,s})}.bind(this)),require.register("famous_modules/famous/polyfills/_git_master/requestAnimationFrame.js",function(){window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(function(){t(+new Date)},1e3/60)})}.bind(this)),require.register("famous_modules/famous/transitions/easing/_git_master/index.js",function(t,e,i){var n={inQuad:function(t){return t*t},outQuad:function(t){return-(t-=1)*t+1},inOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t){return t*t*t*t},outQuart:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return--t*t*t*t*t+1},inOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t){return-1*Math.cos(t*(Math.PI/2))+1},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t){return 0==t?0:Math.pow(2,10*(t-1))},outExpo:function(t){return 1==t?1:-Math.pow(2,-10*t)+1},inOutExpo:function(t){return 0==t?0:1==t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},inCirc:function(t){return-(Math.sqrt(1-t*t)-1)},outCirc:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t){var e=1.70158,i=0,n=1;return 0==t?0:1==t?1:(i||(i=.3),e=i/(2*Math.PI)*Math.asin(1/n),-(n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)))},outElastic:function(t){var e=1.70158,i=0,n=1;return 0==t?0:1==t?1:(i||(i=.3),e=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/i)+1)},inOutElastic:function(t){var e=1.70158,i=0,n=1;return 0==t?0:2==(t/=.5)?1:(i||(i=.3*1.5),e=i/(2*Math.PI)*Math.asin(1/n),1>t?-.5*n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i):n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)*.5+1)},inBack:function(t,e){return void 0==e&&(e=1.70158),t*t*((e+1)*t-e)},outBack:function(t,e){return void 0==e&&(e=1.70158),--t*t*((e+1)*t+e)+1},inOutBack:function(t,e){return void 0==e&&(e=1.70158),(t/=.5)<1?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},inBounce:function(t){return 1-n.outBounce(1-t)},outBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t){return.5>t?.5*n.inBounce(2*t):.5*n.outBounce(2*t-1)+.5}};i.exports=n}.bind(this)),require.register("famous_modules/famous/event-handler/_git_master/index.js",function(t,e,i){function n(){this.listeners={},this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={},this.owner=this}function s(t,e){for(var i=!1,n=0;n<this.downstream.length;n++)i=this.downstream[n].emit(t,e)||i;for(var n=0;n<this.downstreamFn.length;n++)i=this.downstreamFn[n](t,e)||i;return i}n.prototype.emit=function(t,e){e||(e={});var i=this.listeners[t],n=!1;if(i)for(var o=0;o<i.length;o++)i[o].call(this.owner,e)&&(n=!0);return s.call(this,t,e)||n},n.prototype.on=function(t,e){if(!(t in this.listeners)){this.listeners[t]=[];var i=this.emit.bind(this,t);this.upstreamListeners[t]=i;for(var n=0;n<this.upstream.length;n++)this.upstream[n].on(t,i)}var s=this.listeners[t].indexOf(e);return 0>s&&this.listeners[t].push(e),this},n.prototype.unbind=function(t,e){var i=this.listeners[t].indexOf(e);i>=0&&this.listeners[t].splice(i,1)},n.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return 0>i&&e.push(t),t instanceof Function?t("pipe"):t.emit&&t.emit("pipe"),t},n.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return i>=0?(e.splice(i,1),t instanceof Function?t("unpipe"):t.emit&&t.emit("unpipe"),t):!1},n.prototype.subscribe=function(t){var e=this.upstream.indexOf(t);if(0>e){this.upstream.push(t);for(var i in this.upstreamListeners)t.on(i,this.upstreamListeners[i])}return this},n.prototype.unsubscribe=function(t){var e=this.upstream.indexOf(t);if(e>=0){this.upstream.splice(e,1);for(var i in this.upstreamListeners)t.unbind(i,this.upstreamListeners[i])}return this},n.prototype.bindThis=function(t){this.owner=t},n.setInputHandler=function(t,e){t.emit=e.emit.bind(e),e.subscribe&&e.unsubscribe&&(t.subscribe=e.subscribe.bind(e),t.unsubscribe=e.unsubscribe.bind(e))},n.setOutputHandler=function(t,e){e instanceof n&&e.bindThis(t),t.pipe=e.pipe.bind(e),t.unpipe=e.unpipe.bind(e),t.on=e.on.bind(e),t.unbind=e.unbind.bind(e)},i.exports=n}.bind(this)),require.register("famous_modules/famous/utilities/utility/_git_master/index.js",function(t,e,i){var n={};n.Curve={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},n.Direction={X:0,Y:1,Z:2},n.Origin={tl:[0,0],t:[.5,0],tr:[1,0],l:[0,.5],c:[.5,.5],r:[1,.5],bl:[0,1],b:[.5,1],br:[1,1]},n.after=function(t,e){var i=t;return function(){i--,0===i&&e.apply(this,arguments)}},n.loadURL=function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){4==this.readyState&&e&&e(this.responseText)},i.open("GET",t),i.send()},n.transformInFrontMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1],n.transformInFront={modify:function(t){return{transform:n.transformInFrontMatrix,target:t}}},n.transformBehindMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-1,1],n.transformBehind={modify:function(t){return{transform:n.transformBehindMatrix,target:t}}},n.customizeComponent=function(t,e,i){var n=function(n){t.call(this,e),n&&this.setOptions(n),i&&i.call(this)};return n.prototype=Object.create(t.prototype),n},n.createDocumentFragmentFromHTML=function(t){var e=document.createElement("div");e.innerHTML=t;for(var i=document.createDocumentFragment();e.hasChildNodes();)i.appendChild(e.firstChild);return i},n.rad2deg=function(t){return 57.2957795*t},n.deg2rad=function(t){return.0174532925*t},n.distance=function(t,e,i,n){var s=i-t,o=n-e;return Math.sqrt(s*s+o*o)},n.distance3D=function(t,e,i,n,s,o){var r=n-t,a=s-e,c=o-i;return Math.sqrt(r*r+a*a+c*c)},n.map=function(t,e,i,n,s,o){var r=(t-e)/(i-e)*(s-n)+n;return o&&(s>n?r>s?r=s:n>r&&(r=n):s>r?r=s:r>n&&(r=n)),r},n.perspective=function(t,e,i,n){var s=1/Math.tan(t/2),o=1/(i-n);return[s/e,0,0,0,0,s,0,0,0,0,(n+i)*o,-1,0,0,2*n*i*o,0]},n.ortho=function(t,e,i,n,s,o){var r=-(e+t)/(e-t),a=-(n+i)/(n-i),c=-(o+s)/(o-s);return[2/(e-t),0,0,0,0,2/(n-i),0,0,0,0,-2/(o-s),-1,r,a,c,1]},n.normalFromFM=function(t,e){var i=e[0],n=e[1],s=e[2],o=e[3],r=e[4],a=e[5],c=e[6],u=e[7],h=e[8],l=e[9],p=e[10],d=e[11],f=e[12],m=e[13],g=e[14],v=e[15],y=i*a-n*r,b=i*c-s*r,_=i*u-o*r,w=n*c-s*a,x=n*u-o*a,S=s*u-o*c,k=h*m-l*f,j=h*g-p*f,C=h*v-d*f,O=l*g-p*m,T=l*v-d*m,I=p*v-d*g,E=y*I-b*T+_*O+w*C-x*j+S*k;return E?(E=1/E,t[0]=(a*I-c*T+u*O)*E,t[1]=(c*C-r*I-u*j)*E,t[2]=(r*T-a*C+u*k)*E,t[3]=(s*T-n*I-o*O)*E,t[4]=(i*I-s*C+o*j)*E,t[5]=(n*C-i*T-o*k)*E,t[6]=(m*S-g*x+v*w)*E,t[7]=(g*_-f*S-v*b)*E,t[8]=(f*x-m*_+v*y)*E,t):null},n.clamp=function(t,e,i){return Math.max(Math.min(t,i),e)},n.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)},n.extend=function(t,e){for(var i in e)t[i]=e[i];return t},n.getDevicePixelRatio=function(){return window.devicePixelRatio?window.devicePixelRatio:1},n.supportsWebGL=function(){return/Android|Chrome|Mozilla/i.test(navigator.appCodeName)&&!!window.WebGLRenderingContext&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)},n.getSurfacePosition=function(t){function e(t){var n=s(t);if(""!==n&&void 0!==n){var o=i(n);r[0]+=o[0],r[1]+=o[1],r[2]+=o[2]}t.parentElement!==document.body&&e(t.parentNode)}function i(t){var e=[];t=n(t),e[0]=parseInt(t[12].replace(" ","")),e[1]=parseInt(t[13].replace(" ","")),e[2]=parseInt(t[14].replace(" ",""));for(var i=0;i<e.length;i++)"undefined"==typeof e[i]&&(e[i]=0);return e}function n(t){return t=t.replace("matrix3d(",""),t=t.replace(")",""),t.split(",")}function s(t){var e=t.style.webkitTransform||t.style.transform;return e}var o=t._currTarget,r=[0,0,0];return o?(e(o),r):void 0},n.hasUserMedia=function(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)},n.getUserMedia=function(){return navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia},n.isWebkit=function(){return!!window.webkitURL},n.isAndroid=function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("android")>-1},n.hasLocalStorage=function(){return!!window.localStorage},n.timeSince=function(t){var e=Date.now(),i=e-t,n=6e4,s=60*n,o=24*s;if(n>i)return"Just Now";if(s>i){var r=~~(i/n);return r+"m"}if(o>i){var a=~~(i/s);return a+"h"}var c=~~(i/o);return c+"d"},i.exports=n}.bind(this)),require.register("famous_modules/famous/options-manager/_git_master/index.js",function(t,e,i){function n(t){this._value=t,this.eventOutput=null}function s(){this.eventOutput=new o,this.eventOutput.bindThis(this),o.setOutputHandler(this,this.eventOutput)}var o=e("famous/event-handler");n.patch=function(t){for(var e=new n(t),i=1;i<arguments.length;i++)e.patch(arguments[i]);return t},n.prototype.patch=function(){for(var t=this._value,e=0;e<arguments.length;e++){var i=arguments[e];for(var n in i)n in t&&i[n]&&i[n].constructor===Object&&t[n]&&t[n].constructor===Object?(t.hasOwnProperty(n)||(t[n]=Object.create(t[n])),this.key(n).patch(i[n]),this.eventOutput&&this.eventOutput.emit("change",{id:n,value:this.key(n).value()})):this.set(n,i[n])}return this},n.prototype.setOptions=n.prototype.patch,n.prototype.key=function(t){var e=new n(this._value[t]);return(!(e._value instanceof Object)||e._value instanceof Array)&&(e._value={}),e},n.prototype.get=function(t){return this._value[t]},n.prototype.getOptions=n.prototype.get,n.prototype.set=function(t,e){var i=this.get(t);return this._value[t]=e,this.eventOutput&&e!==i&&this.eventOutput.emit("change",{id:t,value:e}),this},n.prototype.value=function(){return this._value},n.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},n.prototype.unbind=function(){return s.call(this),this.unbind.apply(this,arguments)},n.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},i.exports=n}.bind(this)),require.register("famous_modules/famous/transform/_git_master/index.js",function(t,e,i){function n(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function s(t){return Math.sqrt(n(t))}function o(t){return 0>t?-1:1}var r={};r.precision=1e-6,r.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.multiply4x4=function a(t,e){var i=[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]];return arguments.length<=2?i:a.apply(null,[i].concat(Array.prototype.slice.call(arguments,2)))},r.multiply=function c(t,e){if(!t||!e)return t||e;var i=[t[0]*e[0]+t[4]*e[1]+t[8]*e[2],t[1]*e[0]+t[5]*e[1]+t[9]*e[2],t[2]*e[0]+t[6]*e[1]+t[10]*e[2],0,t[0]*e[4]+t[4]*e[5]+t[8]*e[6],t[1]*e[4]+t[5]*e[5]+t[9]*e[6],t[2]*e[4]+t[6]*e[5]+t[10]*e[6],0,t[0]*e[8]+t[4]*e[9]+t[8]*e[10],t[1]*e[8]+t[5]*e[9]+t[9]*e[10],t[2]*e[8]+t[6]*e[9]+t[10]*e[10],0,t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14],1];return arguments.length<=2?i:c.apply(null,[i].concat(Array.prototype.slice.call(arguments,2)))},r.move=function(t,e){return e[2]||(e[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+e[0],t[13]+e[1],t[14]+e[2],1]},r.moveThen=function(t,e){t[2]||(t[2]=0);var i=t[0]*e[0]+t[1]*e[4]+t[2]*e[8],n=t[0]*e[1]+t[1]*e[5]+t[2]*e[9],s=t[0]*e[2]+t[1]*e[6]+t[2]*e[10];return r.move(e,[i,n,s])},r.translate=function(t,e,i){return void 0===i&&(i=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1]},r.scale=function(t,e,i){return void 0===i&&(i=1),[t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1]},r.rotateX=function(t){var e=Math.cos(t),i=Math.sin(t);return[1,0,0,0,0,e,i,0,0,-i,e,0,0,0,0,1]},r.rotateY=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,0,-i,0,0,1,0,0,i,0,e,0,0,0,0,1]},r.rotateZ=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,i,0,0,-i,e,0,0,0,0,1,0,0,0,0,1]},r.rotate=function(t,e,i){var n=Math.cos(t),s=Math.sin(t),o=Math.cos(e),r=Math.sin(e),a=Math.cos(i),c=Math.sin(i),u=[o*a,n*c+s*r*a,s*c-n*r*a,0,-o*c,n*a-s*r*c,s*a+n*r*c,0,r,-s*o,n*o,0,0,0,0,1];return u},r.rotateAxis=function(t,e){var i=Math.sin(e),n=Math.cos(e),s=1-n,o=t[0]*t[0]*s,r=t[0]*t[1]*s,a=t[0]*t[2]*s,c=t[1]*t[1]*s,u=t[1]*t[2]*s,h=t[2]*t[2]*s,l=t[0]*i,p=t[1]*i,d=t[2]*i,f=[o+n,r+d,a-p,0,r-d,c+n,u+l,0,a+p,u-l,h+n,0,0,0,0,1];return f},r.aboutOrigin=function(t,e){var i=t[0]-(t[0]*e[0]+t[1]*e[4]+t[2]*e[8]),n=t[1]-(t[0]*e[1]+t[1]*e[5]+t[2]*e[9]),s=t[2]-(t[0]*e[2]+t[1]*e[6]+t[2]*e[10]);return r.move(e,[i,n,s])},r.formatCSS=function(t){for(var e="matrix3d(",i=0;15>i;i++)e+=t[i]<1e-6&&t[i]>-1e-6?"0,":t[i]+",";return e+=t[15]+")"},r.skew=function(t,e,i){return[1,0,0,0,Math.tan(i),1,0,0,Math.tan(e),Math.tan(t),1,0,0,0,0,1]},r.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},r.getTranslate=function(t){return[t[12],t[13],t[14]]},r.inverse=function(t){var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],i=t[5]*t[10]-t[6]*t[9],n=t[4]*t[10]-t[6]*t[8],s=t[4]*t[9]-t[5]*t[8],o=t[1]*t[10]-t[2]*t[9],r=t[0]*t[10]-t[2]*t[8],a=t[0]*t[9]-t[1]*t[8],c=t[1]*t[6]-t[2]*t[5],u=t[0]*t[6]-t[2]*t[4],h=t[0]*t[5]-t[1]*t[4],l=t[0]*i-t[1]*n+t[2]*s,p=1/l,e=[p*i,-p*o,p*c,0,-p*n,p*r,-p*u,0,p*s,-p*a,p*h,0,0,0,0,1];return e[12]=-t[12]*e[0]-t[13]*e[4]-t[14]*e[8],e[13]=-t[12]*e[1]-t[13]*e[5]-t[14]*e[9],e[14]=-t[12]*e[2]-t[13]*e[6]-t[14]*e[10],e},r.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},r.interpret=function(t){var e=[t[0],t[1],t[2]],i=o(e[0]),a=s(e),c=[e[0]+i*a,e[1],e[2]],u=2/n(c);if(u>=1/0)return{translate:r.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];h[0]=1-u*c[0]*c[0],h[5]=1-u*c[1]*c[1],h[10]=1-u*c[2]*c[2],h[1]=-u*c[0]*c[1],h[2]=-u*c[0]*c[2],h[6]=-u*c[1]*c[2],h[4]=h[1],h[8]=h[2],h[9]=h[6];var l=r.multiply(h,t),p=[l[5],l[6]],d=o(p[0]),f=s(p),m=[p[0]+d*f,p[1]],g=2/n(m),v=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];v[5]=1-g*m[0]*m[0],v[10]=1-g*m[1]*m[1],v[6]=-g*m[0]*m[1],v[9]=v[6];var y=r.multiply(v,h),b=r.multiply(y,t),_=r.scale(b[0]<0?-1:1,b[5]<0?-1:1,b[10]<0?-1:1);b=r.multiply(b,_),y=r.multiply(_,y);var w={};return w.translate=r.getTranslate(t),w.rotate=[Math.atan2(-y[6],y[10]),Math.asin(y[2]),Math.atan2(-y[1],y[0])],w.rotate[0]||(w.rotate[0]=0,w.rotate[2]=Math.atan2(y[4],y[5])),w.scale=[b[0],b[5],b[10]],w.skew=[Math.atan2(b[9],w.scale[2]),Math.atan2(b[8],w.scale[2]),Math.atan2(b[4],w.scale[0])],Math.abs(w.rotate[0])+Math.abs(w.rotate[2])>1.5*Math.PI&&(w.rotate[1]=Math.PI-w.rotate[1],w.rotate[1]>Math.PI&&(w.rotate[1]-=2*Math.PI),w.rotate[1]<-Math.PI&&(w.rotate[1]+=2*Math.PI),w.rotate[0]<0?w.rotate[0]+=Math.PI:w.rotate[0]-=Math.PI,w.rotate[2]<0?w.rotate[2]+=Math.PI:w.rotate[2]-=Math.PI),w},r.average=function(t,e,i){i=void 0===i?.5:i;for(var n=r.interpret(t),s=r.interpret(e),o={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;3>a;a++)o.translate[a]=(1-i)*n.translate[a]+i*s.translate[a],o.rotate[a]=(1-i)*n.rotate[a]+i*s.rotate[a],o.scale[a]=(1-i)*n.scale[a]+i*s.scale[a],o.skew[a]=(1-i)*n.skew[a]+i*s.skew[a];return r.build(o)},r.build=function(t){var e=r.scale(t.scale[0],t.scale[1],t.scale[2]),i=r.skew(t.skew[0],t.skew[1],t.skew[2]),n=r.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return r.move(r.multiply(n,i,e),t.translate)},r.equals=function(t,e){return!r.notEquals(t,e)},r.notEquals=function(t,e){return t===e?!1:t&&e?!(t&&e)||t[12]!==e[12]||t[13]!==e[13]||t[14]!==e[14]||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[8]!==e[8]||t[9]!==e[9]||t[10]!==e[10]:!0},r.normalizeRotation=function(t){var e=t.slice(0);for((e[0]==Math.PI/2||e[0]==-Math.PI/2)&&(e[0]=-e[0],e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]>Math.PI/2&&(e[0]=e[0]-Math.PI,e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]<-Math.PI/2&&(e[0]=e[0]+Math.PI,e[1]=-Math.PI-e[1],e[2]-=Math.PI);e[1]<-Math.PI;)e[1]+=2*Math.PI;for(;e[1]>=Math.PI;)e[1]-=2*Math.PI;for(;e[2]<-Math.PI;)e[2]+=2*Math.PI;for(;e[2]>=Math.PI;)e[2]-=2*Math.PI;return e},i.exports=r}.bind(this)),require.register("app/models/call-collection.js",function(t,e,i){var n=e("call");i.exports=Backbone.Collection.extend({localStorage:new Backbone.LocalStorage("colabeo-call-collection"),model:n,missed:function(){return this.filter(function(t){return t.isMissed()})},all:function(){return this.filter(function(){return!0})},comparator:function(t){return-1*t.get("time")}})}.bind(this)),require.register("app/models/call.js",function(t,e,i){i.exports=Backbone.Model.extend({defaults:{firstname:"John",lastname:"Doe",email:"",pictureUrl:"",cid:"testcid"},isMissed:function(){return!this.get("success")&&"incoming"==this.get("type")}})}.bind(this)),require.register("app/models/chat-collection.js",function(t,e,i){var n=e("conversation");i.exports=Backbone.Firebase.Collection.extend({model:n,comparator:function(t){return 1*t.get("time")}})}.bind(this)),require.register("app/models/contact-collection.js",function(t,e,i){var n=e("contact");i.exports=Backbone.Firebase.Collection.extend({model:n,favorites:function(){return this.filter(function(t){return t.get("favorite")})},searchContact:function(t){return this.filter(function(e){return-1!=e.get("firstname").toUpperCase().indexOf(t)||-1!=e.get("lastname").toUpperCase().indexOf(t)?e.get("firstname"):void 0})},searchContactByEmail:function(t){return this.filter(function(e){return-1!=e.get("email").toUpperCase().indexOf(t)?e.get("email"):void 0})},lastnameInitial:function(t){function e(t){return/^[a-zA-Z]+$/.test(t[0])}return this.filter(function(i){var n;return i.get("lastname")?(n=e(i.get("lastname"))?i.get("lastname")[0].toUpperCase():"#",n==t):i.get("firstname")?(n=e(i.get("firstname"))?i.get("firstname")[0].toUpperCase():"#",n==t):i.get("email")?(n=e(i.get("email"))?i.get("email")[0].toUpperCase():"#",n==t):void 0})},comparator:function(t){var e=t.get("lastname"),i=t.get("firstname");return/^[a-zA-Z]+$/.test(e[0])||(e="zzzz"+e),(e+" "+i).toUpperCase()}})}.bind(this)),require.register("app/models/contact.js",function(t,e,i){i.exports=Backbone.Model.extend({whiteList:["email","firstname","lastname","id","cid","dcr","favorite","phone","facebook","google","linkedin","github","twitter"],toJSON:function(){return _.pick(this.attributes,this.whiteList)},toggleFavorite:function(){this.set({favorite:!this.get("favorite")})}})}.bind(this)),require.register("app/models/conversation-collection.js",function(t,e,i){var n=e("conversation");i.exports=Backbone.Collection.extend({localStorage:new Backbone.LocalStorage("colabeo-chat-colection"),model:n,comparator:function(t){return 1*t.get("time")}})}.bind(this)),require.register("app/models/conversation.js",function(t,e,i){i.exports=Backbone.Model.extend({defaults:{content:"",type:"text",time:"",source:"",from:""},isLocal:function(){return"local"==this.get("source")||this.get("from")==window._cola_g.cid}})}.bind(this)),require.register("app/models/index.js",function(t,e,i){i.exports={Call:e("call"),RecentsCollection:e("recents-collection"),Contact:e("contact"),ContactCollection:e("contact-collection"),Conversation:e("conversation"),ConversationCollection:e("conversation-collection"),ChatCollection:e("chat-collection"),Settings:e("settings"),SocialContactCollection:e("social-contact-collection")}}.bind(this)),require.register("app/models/recents-collection.js",function(t,e,i){var n=e("call");i.exports=Backbone.Firebase.Collection.extend({model:n,missed:function(){return this.filter(function(t){return t.isMissed()})},all:function(){return this.filter(function(){return!0})},comparator:function(t){return-1*t.get("time")},getUnreadCount:function(){return this.filter(function(t){return!t.get("read")}).length}})}.bind(this)),require.register("app/models/settings.js",function(t,e,i){i.exports=Backbone.Model.extend({localStorage:new Backbone.LocalStorage("colabeo-settings-1"),defaults:{cid:"default",email:"default@colabeo.com",linkAccounts:{facebook:!1,google:!1,linkedin:!1,github:!1,yammer:!1},firstname:"John",lastname:"Colabeo",notification:!1,camera:!0,video:!0,audio:!0,blur:void 0,firebaseUrl:"https://colabeo.firebaseio.com/",pHost:"dashboard.colabeo.com",pPort:9e3,pSecure:!0}})}.bind(this)),require.register("app/models/social-contact-collection.js",function(t,e,i){var n=e("contact");i.exports=Backbone.Collection.extend({model:n,parse:function(t){var e=t.map(function(t){if(!t.firstname){var e=t.name.split(" ");t.lastname=e.pop(),t.firstname=e.join(" ")}return t});return e},searchContact:function(t){return this.filter(function(e){return-1!=e.get("firstname").toUpperCase().indexOf(t)||-1!=e.get("lastname").toUpperCase().indexOf(t)?e.get("firstname"):void 0})},comparator:function(t){var e=t.get("lastname"),i=t.get("firstname");return/^[a-zA-Z]+$/.test(e[0])||(e="zzzz"+e),(e+" "+i).toUpperCase()}})}.bind(this)),require.register("app/vendor/index.js",function(t,e){e("zepto"),window.$=Zepto,window._=e("underscore"),window.Backbone=e("backbone"),window.Backbone.$=Zepto,e("handlebars"),e("backbone.localStorage"),e("firebase"),e("backbone-firebase"),e("peer"),e("notify"),e("oauthpopup")}.bind(this)),require.register("app/vendor/att.js",function(t,e,i){(function(){function e(){this.callbacks={}}function n(t){var i=this,n=t||{},s=this.config={apiKey:"",user:c.uuid(),jid:"",log:!0,ringTone:"",ringbackTone:"",dependencyBaseUrl:"//js.att.io"},o={onReady:"ready",onUnReady:"unready",onError:"error",onCallBegin:"callBegin",onCallEnd:"callEnd",onOutgoingCall:"outgoingCall",onCalling:"calling"},r={onError:"error",onCallBegin:"callBegin",onCallEnd:"callEnd"},a=function(){return c.isFunc(t.onIncomingCall)?t.onIncomingCall:t.phone&&c.isFunc(t.phone.onIncomingCall)?t.phone.onIncomingCall:function(){}}();return e.call(this),c.extend(this.config,n),this.config.incomingCallHandler=a,delete this.config.onIncomingCall,this.config.phone&&delete this.config.phone.onIncomingCall,this.phone=this,this.on("incomingCall",a),c.each(o,function(t,e){c.isFunc(i.config[t])&&(i.on(e,i.config[t]),i.config[t]=function(t){i.emit(e,t)})}),n.phone&&c.each(r,function(t,e){c.isFunc(i.config.phone[t])&&(i.on(e,i.config.phone[t]),i.config.phone[t]=function(t){i.emit(e,t)})}),this.config.log&&this.on("*",function(t,e){console.log("att.js event:",t,e)}),c.getMe(this.config.apiKey,function(t){t.version=s.version||c.getQueryParam("version")||t.version,s.version=t.version,s.myNumber=t.number,console.log("using API version:",s.version),i.emit("user",t),"a1"===s.version||"a2"===s.version?$.getScript(s.dependencyBaseUrl+"/js/att."+s.version+".js",function(){i.fetchDependencies(s.version)}):$.getScript(s.dependencyBaseUrl+"/js/phono.06.js",function(){s.token=s.apiKey,s.apiKey="7826110523f1241fcfd001859a67128d",s.connectionUrl="http://gw.att.io:8080/http-bind",i.fetchDependencies()})}),i}function s(t,i){var n=this;return this._att=t,this._call=i,this.id=i.id,e.call(this),this.on("*",function(t){n._att.emit(t,n)}),this._call.bind({onRing:function(){n.emit("ring")},onAnswer:function(){n.emit("callBegin")},onHangup:function(){n.emit("callEnd")},onHold:function(){n.emit("hold")},onRetrieve:function(){n.emit("retrieve")},onWaiting:function(){n.emit("waiting")},onError:function(){n.emit("error")}}),this}var o=this,r={},a={},c=r.util={_uuidCounter:0,uuid:function(){return Math.random().toString(16).substring(2)+(c._uuidCounter++).toString(16)},slice:Array.prototype.slice,isFunc:function(t){return"[object Function]"==Object.prototype.toString.call(t)},extend:function(t){return this.slice.call(arguments,1).forEach(function(e){if(e)for(var i in e)t[i]=e[i]}),t},each:function(t,e){if(t)if(t instanceof Array)t.forEach(e);else for(var i in t)e(i,t[i])},getQueryParam:function(t){var e=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),i="[\\?&]"+e+"=([^&#]*)",n=RegExp(i),s=n.exec(window.location.search);return s?decodeURIComponent(s[1].replace(/\+/g," ")):void 0},h2sSupport:function(){return"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.4 (KHTML, like Gecko) Chrome/19.0.1077.0 Safari/536.4"==window.navigator.userAgent||"Mozilla/5.0 (iPhone; CPU iPhone OS 6_0_1 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Mobile/10A523"==window.navigator.userAgent||window.webkitPeerConnection00&&-1!==window.navigator.userAgent.indexOf("Chrome/24")},getMe:function(t,e){var i="https://auth.tfoundry.com",n={access_token:t};return a.me?e(a.me):(console.log(n),void $.ajax({data:n,dataType:"json",url:i+"/me.json",success:function(t){a.me=t,$.ajax({data:n,dataType:"json",url:i+"/users/"+t.uid+"/api_services/webrtc.json",success:function(i){var n=i&&i.version,s=i&&i.options&&i.options.phone_number;t.version=n?"a"+n:"a1",t.number=s||t.phone_number,e(t)}})}}))}},u={};u.stringify=function(t){var e,i=u.parse(t),n=i.length,s="1"===i.charAt(0),o=i.split("");return n>(s?11:10)?i:!s&&4>n?i:(s&&o.splice(0,1),s?n>1&&(e=4-n,e=e>0?e:0,o.splice(0,0," ("),o.splice(4,0,Array(e+1).join(" ")+") "),n>7&&o.splice(8,0,"-")):n>7?(o.splice(0,0,"("),o.splice(4,0,") "),o.splice(8,0,"-")):n>3&&o.splice(3,0,"-"),(s?"1":"")+o.join(""))},u.parse=function(t){return(t+"").toUpperCase().replace(/[A-Z]/g,function(t){return 0|(t.charCodeAt(0)-65)/3+2-("SVYZ".indexOf(t)>-1)}).replace(/\D/g,"")},u.getCallable=function(t,e){var i=e||"us",n=u.parse(t);return 10!==n.length?"us"==i&&11===n.length&&"1"===n.charAt(0)?n:!1:"us"==i?"1"+n:void 0},r.phoneNumber=u,e.prototype.on=function(t){var e=3===arguments.length,i=e?arguments[1]:void 0,n=e?arguments[2]:arguments[1];return n._groupName=i,(this.callbacks[t]=this.callbacks[t]||[]).push(n),this},e.prototype.once=function(t,e){function i(){n.off(t,i),e.apply(this,arguments)}var n=this;return this.on(t,i),this},e.prototype.releaseGroup=function(t){var e,i,n,s;for(e in this.callbacks)for(s=this.callbacks[e],i=0,n=s.length;n>i;i++)s[i]._groupName===t&&(s.splice(i,1),i--,n--);return this},e.prototype.off=function(t,e){var i,n=this.callbacks[t];return n?1===arguments.length?(delete this.callbacks[t],this):(i=n.indexOf(e),n.splice(i,1),this):this},e.prototype.emit=function(t){var e,i,n=[].slice.call(arguments,1),s=this.callbacks[t],o=this.getWildcardCallbacks(t);if(s)for(e=0,i=s.length;i>e;++e)s[e].apply(this,n);if(o)for(e=0,i=o.length;i>e;++e)o[e].apply(this,[t].concat(n));return this},e.prototype.getWildcardCallbacks=function(t){var e,i,n=[];for(e in this.callbacks)i=e.split("*"),("*"===e||2===i.length&&t.slice(0,i[1].length)===i[1])&&(n=n.concat(this.callbacks[e]));return n},n.prototype=new e,n.prototype.fetchDependencies=function(t){var e=this,i=this.config;"a1"===t?c.h2sSupport()?(console.log("setting up wcgphono"),this.phono=$.wcgphono(c.extend(i,{phone:{onIncomingCall:e._normalizeNonPhonoCallHandlers.bind(e)},onReady:function(){e.emit("ready")}}))):alert("Please use the special Ericsson build of Chromium. It can be downloaded from: http://js.att.io/browsers"):"a2"===t?c.h2sSupport()?(console.log("setting up h2sphono"),this.phono=$.h2sphono(c.extend(i,{phone:{onIncomingCall:e._normalizeNonPhonoCallHandlers.bind(e)},onReady:function(){e.emit("ready")}}))):alert("Please use the special Ericsson build of Chromium. It can be downloaded from: http://js.att.io/browsers"):(console.log("setting up phono"),this.phono=$.phono(c.extend(i,{phone:{onIncomingCall:e._normalizeNonPhonoCallHandlers.bind(e),ringTone:"",ringbackTone:""},onReady:function(){e.sessionId=this.sessionId,c.getMe(i.apiKey,function(t){e.bindNumberToPhonoSession(t.number,e.sessionId,function(){e.emit("ready")
})})}})))},n.prototype.bindNumberToPhonoSession=function(t,e,i){$.ajax({url:"http://binder.api.tfoundry.com/session/"+t+"/"+e,type:"POST",success:function(){i()}})},n.prototype.disconnect=function(){this.phono.disconnect(),this.phono=null},n.prototype.connected=function(){return!!this.phono},n.prototype._normalizeNonPhonoCallHandlers=function(t){var e,i,n=t.call;n&&(e=new s(this,n),i=e.initiator||e._call.recipient||"",i=i.replace("tel:","").replace("sip:",""),i=i.split("@")[0],e.call=e,this.emit("incomingCall",e,r.phoneNumber.parse(i)))},n.prototype.dial=function(t,e){var i,n,o=this,a=r.phoneNumber.getCallable(t);return this.emit("calling",t),i="a3"===this.config.version?this.phono.phone.dial("sip:"+a+"@12.208.176.26",{callerId:o.config.myNumber+"@phono06.tfoundry.com"}):this.phono.phone.dial(a,{}),n=new s(this,i),n.bind(e),n.emit("ring"),this.emit("outgoingCall",n),n},s.prototype=new e,s.prototype.bind=function(t){var e=this,i={onRing:"ring",onAnswer:"callBegin",onHangup:"callEnd",onHold:"hold",onRetrieve:"retrieve",onWaiting:"waiting",onError:"error"},n=t||{};this._att,c.each(i,function(t,i){c.isFunc(n[t])&&e.on(i,n[t])})},s.prototype.answer=function(){return this._call.answer()},s.prototype.hangup=function(){return this._call.hangup()},s.prototype.digit=function(t){return this._call.digit(t)},s.prototype.pushToTalk=function(t){return this._call.pushToTalk(t)},s.prototype.talking=function(t){return this._call.talking(t)},s.prototype.mute=function(t){return this._call.mute(t)},s.prototype.hold=function(t){return this._call.hold(t)},s.prototype.volume=function(t){return this._call.volume(t)},s.prototype.gain=function(t){return this._call.gain(t)},s.prototype.__defineGetter__("initiator",function(){return this._call.initiator}),s.prototype.transferto=function(t){var e=r.phoneNumber.getCallable(t);this._call.transferto(e)},r.Phone=n,o.jQuery&&(o.jQuery.att=function(t){return new n(t)}),"undefined"!=typeof t?i.exports=r:(o.ATT||(o.ATT={}),c.extend(o.ATT,r))}).call(this)}.bind(this)),require.register("app/vendor/backbone-firebase.js",function(){!function(){var t=window._,e=window.Backbone;e.Firebase=function(t){this._fbref=t,this._children=[],"string"==typeof t&&(this._fbref=new Firebase(t)),this._fbref.on("child_added",this._childAdded,this),this._fbref.on("child_moved",this._childMoved,this),this._fbref.on("child_changed",this._childChanged,this),this._fbref.on("child_removed",this._childRemoved,this)},t.extend(e.Firebase.prototype,{_childAdded:function(e,i){var n=e.val();if(n.id=e.name(),i){var s=t.find(this._children,function(t){return t.id==i});this._children.splice(this._children.indexOf(s)+1,0,n)}else this._children.unshift(n)},_childMoved:function(e,i){var n=e.val();this._children=t.reject(this._children,function(t){return t.id==n.id}),this._childAdded(e,i)},_childChanged:function(e){var i=e.val();i.id=e.name();var n=t.find(this._children,function(t){return t.id==i.id});this._children[this._children.indexOf(n)]=i},_childRemoved:function(e){var i=e.val();this._children=t.reject(this._children,function(t){return t.id==i.id})},create:function(e,i){e.id||(e.id=this._fbref.ref().push().name());var n=e.toJSON();this._fbref.ref().child(e.id).set(n,t.bind(function(t){t?i("Could not create model "+e.id):i(null,n)},this))},read:function(e,i){if(!e.id)return void t.defer(i,"Invalid model ID provided to read");var n=t.find(this._children,function(t){return t.id==e.id});t.defer(i,null,this._children[n])},readAll:function(e,i){t.defer(i,null,this._children)},update:function(t,e){var i=t.toJSON();this._fbref.ref().child(t.id).update(i,function(n){n?e("Could not update model "+t.id,null):e(null,i)})},"delete":function(t,e){this._fbref.ref().child(t.id).remove(function(i){i?e("Could not delete model "+t.id):e(null,t)})},ref:function(){return this._fbref}}),e.Firebase.sync=function(t,i,n,s){var o=i.firebase||i.collection.firebase;"function"==typeof n&&(n={success:n,error:s}),"read"==t&&void 0===i.id&&(t="readAll"),o[t].apply(o,[i,function(t,s){t?(i.trigger("error",i,t,n),"0.9.10"===e.VERSION?n.error(i,t,n):n.error(t)):(i.trigger("sync",i,s,n),"0.9.10"===e.VERSION?n.success(i,s,n):n.success(s))}])},e.oldSync=e.sync,e.sync=function(t,i,n,s){var o=e.oldSync;return(i.firebase||i.collection&&i.collection.firebase)&&(o=e.Firebase.sync),o.apply(this,[t,i,n,s])},e.Firebase.Collection=e.Collection.extend({sync:function(){this._log("Sync called on a Firebase collection, ignoring.")},fetch:function(){this._log("Fetch called on a Firebase collection, ignoring.")},constructor:function(i,n){switch(e.Collection.apply(this,arguments),n&&n.firebase&&(this.firebase=n.firebase),typeof this.firebase){case"object":break;case"string":this.firebase=new Firebase(this.firebase);break;case"function":this.firebase=this.firebase();break;default:throw new Error("Invalid firebase reference created")}this.firebase.on("child_added",t.bind(this._childAdded,this)),this.firebase.on("child_moved",t.bind(this._childMoved,this)),this.firebase.on("child_changed",t.bind(this._childChanged,this)),this.firebase.on("child_removed",t.bind(this._childRemoved,this)),this.firebase.once("value",t.bind(function(){this.trigger("sync",this,null,null)},this)),this.listenTo(this,"change",this._updateModel,this),this.listenTo(this,"destroy",this._removeModel,this),this._suppressEvent=!1},comparator:function(t){return t.id},add:function(e,i){var n=this._parseModels(e);i=i?t.clone(i):{},i.success=t.isFunction(i.success)?i.success:function(){};for(var s=0;s<n.length;s++){var o=n[s],r=this.firebase.ref().child(o.id);i.silent===!0&&(this._suppressEvent=!0),r.set(o,t.bind(i.success,o))}return n},remove:function(e,i){var n=this._parseModels(e);i=i?t.clone(i):{},i.success=t.isFunction(i.success)?i.success:function(){};for(var s=0;s<n.length;s++){var o=n[s],r=this.firebase.ref().child(o.id);i.silent===!0&&(this._suppressEvent=!0),r.set(null,t.bind(i.success,o))}return n},create:function(i,n){if(n=n?t.clone(n):{},n.wait&&this._log("Wait option provided to create, ignoring."),i=e.Collection.prototype._prepareModel.apply(this,[i,n]),!i)return!1;var s=this.add([i],n);return s[0]},reset:function(e,i){i=i?t.clone(i):{},this.remove(this.models,{silent:!0});var n=this.add(e,{silent:!0});return i.silent||this.trigger("reset",this,i),n},_log:function(t){console&&console.log&&console.log(t)},_parseModels:function(e){var i=[];e=t.isArray(e)?e.slice():[e];for(var n=0;n<e.length;n++){var s=e[n];s.toJSON&&"function"==typeof s.toJSON&&(s=s.toJSON()),s.id||(s.id=this.firebase.ref().push().name()),i.push(s)}return i},_childAdded:function(i){var n=i.val();n.id||(t.isObject(n)||(n={}),n.id=i.name()),this._suppressEvent===!0?(this._suppressEvent=!1,e.Collection.prototype.add.apply(this,[n],{silent:!0})):e.Collection.prototype.add.apply(this,[n]),this.get(n.id)._remoteAttributes=n},_childMoved:function(t){this._log("_childMoved called with "+t.val())},_childChanged:function(e){var i=e.val();i.id||(i.id=e.name());var n=t.find(this.models,function(t){return t.id==i.id});if(!n)throw new Error("Could not find model with ID "+i.id);this._preventSync(n,!0),n._remoteAttributes=i;var s=t.difference(t.keys(n.attributes),t.keys(i));t.each(s,function(t){n.unset(t)}),n.set(i),this._preventSync(n,!1)},_childRemoved:function(t){var i=t.val();i.id||(i.id=t.name()),this._suppressEvent===!0?(this._suppressEvent=!1,e.Collection.prototype.remove.apply(this,[i],{silent:!0})):e.Collection.prototype.remove.apply(this,[i])},_updateModel:function(e){if(!e._remoteChanging){var i=e._remoteAttributes||{},n=e.toJSON(),s={},o=t.union(t.keys(i),t.keys(n));if(t.each(o,function(e){t.has(n,e)?n[e]!=i[e]&&(s[e]=n[e]):s[e]=null}),t.size(s))if(t.has(s,".priority")){var r=this.firebase.ref().child(e.id),a=n[".priority"];delete n[".priority"],r.setWithPriority(n,a)}else this.firebase.ref().child(e.id).update(s)}},_removeModel:function(e,i,n){n=n?t.clone(n):{},n.success=t.isFunction(n.success)?n.success:function(){};var s=this.firebase.ref().child(e.id);s.set(null,t.bind(n.success,e))},_preventSync:function(t,e){t._remoteChanging=e}}),e.Firebase.Model=e.Model.extend({save:function(){this._log("Save called on a Firebase model, ignoring.")},destroy:function(t){this.firebase.ref().set(null,this._log),this.trigger("destroy",this,this.collection,t),t.success&&t.success(this,null,t)},constructor:function(i,n){var s=t.result(this,"defaults");switch(this.once("sync",function(){this.set(t.defaults(this.toJSON(),s))}),e.Model.apply(this,arguments),n&&n.firebase&&(this.firebase=n.firebase),typeof this.firebase){case"object":break;case"string":this.firebase=new Firebase(this.firebase);break;case"function":this.firebase=this.firebase();break;default:throw new Error("Invalid firebase reference created")}this.firebase.on("value",t.bind(this._modelChanged,this)),this._listenLocalChange(!0)},_listenLocalChange:function(t){t?this.on("change",this._updateModel,this):this.off("change",this._updateModel,this)},_updateModel:function(e){var i=e.changedAttributes();t.each(e.changed,function(t,e){("undefined"==typeof t||null===t)&&("id"==e?delete i[e]:i[e]=null)}),t.size(i)&&this.firebase.ref().update(i,this._log)},_modelChanged:function(e){var i=e.val();if("object"==typeof i&&null!==i){var n=t.difference(t.keys(this.attributes),t.keys(i)),s=this;t.each(n,function(t){s.unset(t)})}this._listenLocalChange(!1),this.set(i),this._listenLocalChange(!0),this.trigger("sync",this,null,null)},_log:function(t){"undefined"!=typeof t&&null!==t&&console&&console.log&&console.log(t)}})}()}.bind(this)),require.register("app/vendor/backbone.js",function(t,e){!function(i,n){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(t,e,s){i.Backbone=n(i,s,t,e)});else if("undefined"!=typeof t){var s,o=e("underscore");n(i,t,o,s)}else i.Backbone=n(i,{},i._,i.jQuery||i.Zepto||i.ender||i.$)}(this,function(t,e,i,n){{var s=t.Backbone,o=[],r=(o.push,o.slice);o.splice}e.VERSION="1.1.1",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,i){if(!u(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,n){if(!u(this,"once",t,[e,n])||!e)return this;var s=this,o=i.once(function(){s.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,n)},off:function(t,e,n){var s,o,r,a,c,h,l,p;if(!this._events||!u(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(a=t?[t]:i.keys(this._events),c=0,h=a.length;h>c;c++)if(t=a[c],r=this._events[t]){if(this._events[t]=s=[],e||n)for(l=0,p=r.length;p>l;l++)o=r[l],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&s.push(o);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!u(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&h(i,e),n&&h(n,arguments),this},stopListening:function(t,e,n){var s=this._listeningTo;if(!s)return this;var o=!e&&!n;n||"object"!=typeof e||(n=this),t&&((s={})[t._listenId]=t);for(var r in s)t=s[r],t.off(e,n,this),(o||i.isEmpty(t._events))&&delete this._listeningTo[r];return this}},c=/\s+/,u=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(n));return!1}if(c.test(i)){for(var o=i.split(c),r=0,a=o.length;a>r;r++)t[e].apply(t,[o[r]].concat(n));return!1}return!0},h=function(t,e){var i,n=-1,s=t.length,o=e[0],r=e[1],a=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o,r);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o,r,a);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}},l={listenTo:"on",listenToOnce:"once"};i.each(l,function(t,e){a[e]=function(e,n,s){var o=this._listeningTo||(this._listeningTo={}),r=e._listenId||(e._listenId=i.uniqueId("l"));return o[r]=e,s||"object"!=typeof n||(s=this),e[t](n,s,this),this}}),a.bind=a.on,a.unbind=a.off,i.extend(e,a);var p=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var s,o,r,a,c,u,h,l;if(null==t)return this;if("object"==typeof t?(o=t,n=e):(o={})[t]=e,n||(n={}),!this._validate(o,n))return!1;r=n.unset,c=n.silent,a=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=i.clone(this.attributes),this.changed={}),l=this.attributes,h=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(s in o)e=o[s],i.isEqual(l[s],e)||a.push(s),i.isEqual(h[s],e)?delete this.changed[s]:this.changed[s]=e,r?delete l[s]:l[s]=e;if(!c){a.length&&(this._pending=n);for(var p=0,d=a.length;d>p;p++)this.trigger("change:"+a[p],this,l[a[p]],n)}if(u)return this;if(!c)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e,n=!1,s=this._changing?this._previousAttributes:this.attributes;for(var o in t)i.isEqual(s[o],e=t[o])||((n||(n={}))[o]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),void e.trigger("sync",e,i,t)):!1},R(this,t),this.sync("read",this,t)},save:function(t,e,n){var s,o,r,a=this.attributes;if(null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0},n),s&&!n.wait){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;s&&n.wait&&(this.attributes=i.extend({},a,s)),void 0===n.parse&&(n.parse=!0);var c=this,u=n.success;return n.success=function(t){c.attributes=a;var e=c.parse(t,n);return n.wait&&(e=i.extend(s||{},e)),i.isObject(e)&&!c.set(e,n)?!1:(u&&u(c,t,n),void c.trigger("sync",c,t,n))},R(this,n),o=this.isNew()?"create":n.patch?"patch":"update","patch"===o&&(n.attrs=s),r=this.sync(o,this,n),s&&n.wait&&(this.attributes=a),r},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&s(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;R(this,t);var o=this.sync("delete",this,t);return t.wait||s(),o},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||B();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var d=["keys","values","pairs","invert","pick","omit"];i.each(d,function(t){p.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};i.extend(f.prototype,a,{model:p,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,g))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var s,o,r,a;for(s=0,o=t.length;o>s;s++)a=t[s]=this.get(t[s]),a&&(delete this._byId[a.id],delete this._byId[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,e.silent||(e.index=r,a.trigger("remove",a,this,e)),this._removeReference(a,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,m),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var s,o,r,a,c,u,h,l=e.at,d=this.model,f=this.comparator&&null==l&&e.sort!==!1,g=i.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},_=e.add,w=e.merge,x=e.remove,S=!f&&_&&x?[]:!1;for(s=0,o=t.length;o>s;s++){if(c=t[s]||{},r=c instanceof p?a=c:c[d.prototype.idAttribute||"id"],u=this.get(r))x&&(b[u.cid]=!0),w&&(c=c===a?a.attributes:c,e.parse&&(c=u.parse(c,e)),u.set(c,e),f&&!h&&u.hasChanged(g)&&(h=!0)),t[s]=u;else if(_){if(a=t[s]=this._prepareModel(c,e),!a)continue;v.push(a),this._addReference(a,e)}a=u||a,!S||!a.isNew()&&b[a.id]||S.push(a),b[a.id]=!0}if(x){for(s=0,o=this.length;o>s;++s)b[(a=this.models[s]).cid]||y.push(a);y.length&&this.remove(y,e)}if(v.length||S&&S.length)if(f&&(h=!0),this.length+=v.length,null!=l)for(s=0,o=v.length;o>s;s++)this.models.splice(l+s,0,v[s]);else{S&&(this.models.length=0);var k=S||v;for(s=0,o=k.length;o>s;s++)this.models.push(k[s])}if(h&&this.sort({silent:!0}),!e.silent){for(s=0,o=v.length;o>s;s++)(a=v[s]).trigger("add",a,this,e);(h||S&&S.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,s=this.models.length;s>n;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return r.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},R(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,s=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),s&&s(t,i,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof p)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(v,function(t){f.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var y=["groupBy","countBy","sortBy","indexBy"];i.each(y,function(t){f.prototype[t]=function(e,n){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,n)}});var b=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];i.extend(b.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var s=e.match(_),o=s[1],r=s[2];n=i.bind(n,this),o+=".delegateEvents"+this.cid,""===r?this.$el.on(o,n):this.$el.on(o,r,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,s){var o=S[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var r={type:o,dataType:"json"};if(s.url||(r.url=i.result(n,"url")||B()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),s.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){r.type="POST",s.emulateJSON&&(r.data._method=o);var a=s.beforeSend;s.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===r.type||s.emulateJSON||(r.processData=!1),"PATCH"===r.type&&x&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var c=s.xhr=e.ajax(i.extend(r,s));return n.trigger("request",n,c,s),c};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),S={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var k=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},j=/\((.*?)\)/g,C=/(\(\?)?:\w+/g,O=/\*\w+/g,T=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(k.prototype,a,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var o=this;return e.history.route(t,function(i){var r=o._extractParameters(t,i);o.execute(s,r),o.trigger.apply(o,["route:"+n].concat(r)),o.trigger("route",n,r),e.history.trigger("route",o,n,r)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(T,"\\$&").replace(j,"(?:$1)?").replace(C,function(t,e){return e?t:"([^/?]+)"}).replace(O,"([^?]*?)"),new RegExp("^"+t+"(?:\\?(.*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var I=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,M=/^\/+|\/+$/g,A=/msie [\w.]+/,z=/\/$/,N=/#.*$/;I.started=!1,i.extend(I.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(z,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(E,"")},start:function(t){if(I.started)throw new Error("Backbone.history has already been started");I.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),s=document.documentMode,o=A.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s);if(this.root=("/"+this.root+"/").replace(M,"/"),o&&this._wantsHashChange){var r=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=r.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),I.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!I.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(N,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new I;var P=function(t,e){var n,s=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e);var o=function(){this.constructor=n};return o.prototype=s.prototype,n.prototype=new o,t&&i.extend(n.prototype,t),n.__super__=s.prototype,n};p.extend=f.extend=k.extend=b.extend=I.extend=P;var B=function(){throw new Error('A "url" property or function must be specified')},R=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e})}.bind(this)),require.register("app/vendor/backbone.localStorage.js",function(t,e,i){!function(n,s){"object"==typeof t&&"function"==typeof e?i.exports=s(e("underscore"),e("backbone")):"function"==typeof define&&define.amd?define(["underscore","backbone"],function(t,e){return s(t||n._,e||n.Backbone)}):s(_,Backbone)}(this,function(t,e){function i(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function n(){return i()+i()+"-"+i()+"-"+i()+"-"+i()+"-"+i()+i()+i()}return e.LocalStorage=window.Store=function(t){if(!this.localStorage)throw"Backbone.localStorage: Environment does not support localStorage.";this.name=t;var e=this.localStorage().getItem(this.name);this.records=e&&e.split(",")||[]},t.extend(e.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(t){return t.id||(t.id=n(),t.set(t.idAttribute,t.id)),this.localStorage().setItem(this.name+"-"+t.id,JSON.stringify(t)),this.records.push(t.id.toString()),this.save(),this.find(t)},update:function(e){return this.localStorage().setItem(this.name+"-"+e.id,JSON.stringify(e)),t.include(this.records,e.id.toString())||this.records.push(e.id.toString()),this.save(),this.find(e)},find:function(t){return this.jsonData(this.localStorage().getItem(this.name+"-"+t.id))},findAll:function(){return(t.chain||t)(this.records).map(function(t){return this.jsonData(this.localStorage().getItem(this.name+"-"+t))},this).compact().value()},destroy:function(e){return e.isNew()?!1:(this.localStorage().removeItem(this.name+"-"+e.id),this.records=t.reject(this.records,function(t){return t===e.id.toString()}),this.save(),e)},localStorage:function(){return localStorage},jsonData:function(t){return t&&JSON.parse(t)},_clear:function(){var e=this.localStorage(),i=new RegExp("^"+this.name+"-");e.removeItem(this.name),(t.chain||t)(e).keys().filter(function(t){return i.test(t)}).each(function(t){e.removeItem(t)}),this.records.length=0},_storageSize:function(){return this.localStorage().length}}),e.LocalStorage.sync=window.Store.sync=e.localSync=function(t,i,n){var s,o,r=i.localStorage||i.collection.localStorage,a=e.$.Deferred&&e.$.Deferred();try{switch(t){case"read":s=void 0!=i.id?r.find(i):r.findAll();break;case"create":s=r.create(i);break;case"update":s=r.update(i);break;case"delete":s=r.destroy(i)}}catch(c){o=22===c.code&&0===r._storageSize()?"Private browsing is unsupported":c.message}return s?(n&&n.success&&("0.9.10"===e.VERSION?n.success(i,s,n):n.success(s)),a&&a.resolve(s)):(o=o?o:"Record Not Found",n&&n.error&&("0.9.10"===e.VERSION?n.error(i,o,n):n.error(o)),a&&a.reject(o)),n&&n.complete&&n.complete(s),a&&a.promise()},e.ajaxSync=e.sync,e.getSyncMethod=function(t){return t.localStorage||t.collection&&t.collection.localStorage?e.localSync:e.ajaxSync},e.sync=function(t,i,n){return e.getSyncMethod(i).apply(this,[t,i,n])},e.LocalStorage})}.bind(this)),require.register("app/vendor/firebase.js",function(exports,require,module){(function(){function g(t){throw t}function ba(t){return function(){return this[t]}}function o(t){return function(){return t}}function da(){}function ea(t){t.mb=function(){return t.ed?t.ed:t.ed=new t}}function fa(t){var e=typeof t;if("object"==e){if(!t)return"null";
if(t instanceof Array)return"array";if(t instanceof Object)return e;var i=Object.prototype.toString.call(t);if("[object Window]"==i)return"object";if("[object Array]"==i||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==i||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function s(t){return t!==aa}function ga(t){var e=fa(t);return"array"==e||"object"==e&&"number"==typeof t.length}function u(t){return"string"==typeof t}function ha(t){return"number"==typeof t}function ia(t){var e=typeof t;return"object"==e&&t!=k||"function"==e}function ja(t){return t.call.apply(t.bind,arguments)}function ka(t,e){if(t||g(Error()),2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function v(){return v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka,v.apply(k,arguments)}function la(t,e){function i(){}i.prototype=e.prototype,t.Yd=e.prototype,t.prototype=new i}function ma(a){if(a=String(a),/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}g(Error("Invalid JSON string: "+a))}function na(){this.gc=aa}function oa(t,e,i){switch(typeof e){case"string":pa(e,i);break;case"number":i.push(isFinite(e)&&!isNaN(e)?e:"null");break;case"boolean":i.push(e);break;case"undefined":i.push("null");break;case"object":if(e==k){i.push("null");break}if("array"==fa(e)){var n=e.length;i.push("[");for(var s="",o=0;n>o;o++)i.push(s),s=e[o],oa(t,t.gc?t.gc.call(e,String(o),s):s,i),s=",";i.push("]");break}i.push("{"),n="";for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(s=e[o],"function"!=typeof s&&(i.push(n),pa(o,i),i.push(":"),oa(t,t.gc?t.gc.call(e,o,s):s,i),n=","));i.push("}");break;case"function":break;default:g(Error("Unknown type: "+typeof e))}}function pa(t,e){e.push('"',t.replace(ra,function(t){if(t in qa)return qa[t];var e=t.charCodeAt(0),i="\\u";return 16>e?i+="000":256>e?i+="00":4096>e&&(i+="0"),qa[t]=i+e.toString(16)}),'"')}function sa(t){return"undefined"!=typeof JSON&&s(JSON.parse)?JSON.parse(t):ma(t)}function w(t){if("undefined"!=typeof JSON&&s(JSON.stringify))t=JSON.stringify(t);else{var e=[];oa(new na,t,e),t=e.join("")}return t}function ta(t){for(var e=[],i=0,n=0;n<t.length;n++){var s=t.charCodeAt(n);s>=55296&&56319>=s&&(s-=55296,n++,y(n<t.length,"Surrogate pair missing trail surrogate."),s=65536+(s<<10)+(t.charCodeAt(n)-56320)),128>s?e[i++]=s:(2048>s?e[i++]=s>>6|192:(65536>s?e[i++]=s>>12|224:(e[i++]=s>>18|240,e[i++]=s>>12&63|128),e[i++]=s>>6&63|128),e[i++]=63&s|128)}return e}function z(t,e,i,n){var s;e>n?s="at least "+e:n>i&&(s=0===i?"none":"no more than "+i),s&&g(Error(t+" failed: Was called with "+n+(1===n?" argument.":" arguments.")+" Expects "+s+"."))}function A(t,e,i){var n="";switch(e){case 1:n=i?"first":"First";break;case 2:n=i?"second":"Second";break;case 3:n=i?"third":"Third";break;case 4:n=i?"fourth":"Fourth";break;default:ua.assert(l,"errorPrefix_ called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+(n+" argument ")}function B(t,e,i,n){(!n||s(i))&&"function"!=fa(i)&&g(Error(A(t,e,n)+"must be a valid function."))}function va(t,e,i){s(i)&&(!ia(i)||i===k)&&g(Error(A(t,e,j)+"must be a valid context object."))}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function wa(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function za(t){return u(t)&&0!==t.length&&!xa.test(t)}function Aa(t,e,i){(!i||s(e))&&Ba(A(t,1,i),e)}function Ba(t,e,i,n){if(i||(i=0),n||(n=[]),s(e)||g(Error(t+"contains undefined"+Ca(n))),"function"==fa(e)&&g(Error(t+"contains a function"+Ca(n)+" with contents: "+e.toString())),Da(e)&&g(Error(t+"contains "+e.toString()+Ca(n))),i>1e3&&g(new TypeError(t+"contains a cyclic object value ("+n.slice(0,100).join(".")+"...)")),u(e)&&e.length>10485760/3&&10485760<ta(e).length&&g(Error(t+"contains a string greater than 10485760 utf8 bytes"+Ca(n)+" ('"+e.substring(0,50)+"...')")),ia(e))for(var o in e)C(e,o)&&(".priority"!==o&&".value"!==o&&".sv"!==o&&!za(o)&&g(Error(t+"contains an invalid key ("+o+")"+Ca(n)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')),n.push(o),Ba(t,e[o],i+1,n),n.pop())}function Ca(t){return 0==t.length?"":" in property '"+t.join(".")+"'"}function Ea(t,e){ia(e)||g(Error(A(t,1,l)+" must be an object containing the children to replace.")),Aa(t,e,l)}function Fa(t,e,i,n){(!n||s(i))&&!(i===k||ha(i)||u(i)||ia(i)&&C(i,".sv")||!g(Error(A(t,e,n)+"must be a valid firebase priority (a string, number, or null).")))}function Ga(t,e,i){if(!i||s(e))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:g(Error(A(t,1,i)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".'))}}function Ha(t,e){s(e)&&!za(e)&&g(Error(A(t,2,j)+'was an invalid key: "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").'))}function Ia(t,e){(!u(e)||0===e.length||ya.test(e))&&g(Error(A(t,1,l)+'was an invalid path: "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"'))}function D(t,e){".info"===E(e)&&g(Error(t+" failed: Can't modify data under /.info/"))}function F(t,e,i,n,o,r,a){this.n=t,this.path=e,this.Da=i,this.da=n,this.va=o,this.Ba=r,this.Ra=a,s(this.da)&&s(this.Ba)&&s(this.Da)&&g("Query: Can't combine startAt(), endAt(), and limit().")}function Ka(t){var e={};return s(t.da)&&(e.sp=t.da),s(t.va)&&(e.sn=t.va),s(t.Ba)&&(e.ep=t.Ba),s(t.Ra)&&(e.en=t.Ra),s(t.Da)&&(e.l=t.Da),s(t.da)&&s(t.va)&&t.da===k&&t.va===k&&(e.vf="l"),e}function Ja(t,e,i){var n={};return e&&i?(n.cancel=e,B(t,3,n.cancel,j),n.T=i,va(t,4,n.T)):e&&("object"==typeof e&&e!==k?n.T=e:"function"==typeof e?n.cancel=e:g(Error(A(t,3,j)+"must either be a cancel callback or a context object."))),n}function J(t){if(t instanceof J)return t;if(1==arguments.length){this.m=t.split("/");for(var e=0,i=0;i<this.m.length;i++)0<this.m[i].length&&(this.m[e]=this.m[i],e++);this.m.length=e,this.Z=0}else this.m=arguments[0],this.Z=arguments[1]}function E(t){return t.Z>=t.m.length?k:t.m[t.Z]}function Ma(t){var e=t.Z;return e<t.m.length&&e++,new J(t.m,e)}function Na(t,e){var i=E(t);return i===k?e:i===E(e)?Na(Ma(t),Ma(e)):void g("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Oa(){this.children={},this.sc=0,this.value=k}function Pa(t,e,i){this.Ea=t?t:"",this.Ab=e?e:k,this.z=i?i:new Oa}function K(t,e){for(var i,n=e instanceof J?e:new J(e),s=t;(i=E(n))!==k;)s=new Pa(i,s,wa(s.z.children,i)||new Oa),n=Ma(n);return s}function Qa(t,e){y("undefined"!=typeof e),t.z.value=e,Ra(t)}function Sa(t,e,i,n){i&&!n&&e(t),t.w(function(t){Sa(t,e,j,n)}),i&&n&&e(t)}function Ta(t,e,i){for(t=i?t:t.parent();t!==k;){if(e(t))return j;t=t.parent()}return l}function Ra(t){if(t.Ab!==k){var e=t.Ab,i=t.Ea,n=t.f(),s=C(e.z.children,i);n&&s?(delete e.z.children[i],e.z.sc--,Ra(e)):!n&&!s&&(e.z.children[i]=t.z,e.z.sc++,Ra(e))}}function Ua(t,e){this.Oa=t?t:Va,this.ca=e?e:Wa}function Va(t,e){return e>t?-1:t>e?1:0}function Xa(t,e){for(var i,n=t.ca,s=k;!n.f();){if(i=t.Oa(e,n.key),0===i){if(n.left.f())return s?s.key:k;for(n=n.left;!n.right.f();)n=n.right;return n.key}0>i?n=n.left:i>0&&(s=n,n=n.right)}g(Error("Attempted to find predecessor key for a nonexistent key.  What gives?"))}function Ya(t,e){for(this.md=e,this.Tb=[];!t.f();)this.Tb.push(t),t=t.left}function Za(t){if(0===t.Tb.length)return k;var e,i=t.Tb.pop();for(e=t.md?t.md(i.key,i.value):{key:i.key,value:i.value},i=i.right;!i.f();)t.Tb.push(i),i=i.left;return e}function $a(t,e,i,n,s){this.key=t,this.value=e,this.color=i!=k?i:j,this.left=n!=k?n:Wa,this.right=s!=k?s:Wa}function ab(t){return t.left.f()?t:ab(t.left)}function eb(t){return t.left.f()?Wa:(!t.left.O()&&!t.left.left.O()&&(t=fb(t)),t=t.copy(k,k,k,eb(t.left),k),db(t))}function db(t){return t.right.O()&&!t.left.O()&&(t=ib(t)),t.left.O()&&t.left.left.O()&&(t=gb(t)),t.left.O()&&t.right.O()&&(t=hb(t)),t}function fb(t){return t=hb(t),t.right.left.O()&&(t=t.copy(k,k,k,k,gb(t.right)),t=ib(t),t=hb(t)),t}function ib(t){var e;return e=t.copy(k,k,j,k,t.right.left),t.right.copy(k,k,t.color,e,k)}function gb(t){var e;return e=t.copy(k,k,j,t.left.right,k),t.left.copy(k,k,t.color,k,e)}function hb(t){var e,i;return e=t.left.copy(k,k,!t.left.color,k,k),i=t.right.copy(k,k,!t.right.color,k,k),t.copy(k,k,!t.color,e,i)}function jb(){}function kb(t){this.Pb=t,this.bc="firebase:"}function lb(){this.ib={}}function mb(t){try{if("undefined"!=typeof window&&"undefined"!=typeof window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new kb(e)}}catch(i){}return new lb}function pb(t,e,i,n){this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.hc=e,this.Sb=i,this.fa=n||nb.get("host:"+t)||this.host}function qb(t,e){e!==t.fa&&(t.fa=e,"s-"===t.fa.substr(0,2)&&nb.set("host:"+t.host,t.fa))}function rb(){}function sb(){this.B=[],this.rc=[],this.ud=[],this.Zb=[],this.Zb[0]=128;for(var t=1;64>t;++t)this.Zb[t]=0;this.reset()}function tb(t,e){var i;i||(i=0);for(var n=t.ud,s=i;i+64>s;s+=4)n[s/4]=e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3];for(s=16;80>s;s++){var o=n[s-3]^n[s-8]^n[s-14]^n[s-16];n[s]=4294967295&(o<<1|o>>>31)}i=t.B[0];for(var r,a=t.B[1],c=t.B[2],u=t.B[3],h=t.B[4],s=0;80>s;s++)40>s?20>s?(o=u^a&(c^u),r=1518500249):(o=a^c^u,r=1859775393):60>s?(o=a&c|u&(a|c),r=2400959708):(o=a^c^u,r=3395469782),o=(i<<5|i>>>27)+o+h+r+n[s]&4294967295,h=u,u=c,c=4294967295&(a<<30|a>>>2),a=i,i=o;t.B[0]=t.B[0]+i&4294967295,t.B[1]=t.B[1]+a&4294967295,t.B[2]=t.B[2]+c&4294967295,t.B[3]=t.B[3]+u&4294967295,t.B[4]=t.B[4]+h&4294967295}function Cb(){return ca.navigator?ca.navigator.userAgent:k}function Mb(t,e){if(ga(t)||g(Error("encodeByteArray takes an array as a parameter")),!Kb){Kb={},Lb={};for(var i=0;65>i;i++)Kb[i]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i),Lb[i]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(i)}for(var i=e?Lb:Kb,n=[],s=0;s<t.length;s+=3){var o=t[s],r=s+1<t.length,a=r?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=o>>2,o=(3&o)<<4|a>>4,a=(15&a)<<2|u>>6,u=63&u;c||(u=64,r||(a=64)),n.push(i[h],i[o],i[a],i[u])}return n.join("")}function y(t,e){t||g(Error("Firebase INTERNAL ASSERT FAILED:"+e))}function Pb(t){var e=ta(t),t=new sb;t.update(e);var e=[],i=8*t.Vc;56>t.ob?t.update(t.Zb,56-t.ob):t.update(t.Zb,64-(t.ob-56));for(var n=63;n>=56;n--)t.rc[n]=255&i,i/=256;for(tb(t,t.rc),n=i=0;5>n;n++)for(var s=24;s>=0;s-=8)e[i++]=t.B[n]>>s&255;return Mb(e)}function Qb(){for(var t="",e=0;e<arguments.length;e++)t=ga(arguments[e])?t+Qb.apply(k,arguments[e]):"object"==typeof arguments[e]?t+w(arguments[e]):t+arguments[e],t+=" ";return t}function L(){if(Sb===j&&(Sb=l,Rb===k&&ob.get("logging_enabled")===j&&Tb(j)),Rb){var t=Qb.apply(k,arguments);Rb(t)}}function Ub(t){return function(){L(t,arguments)}}function Vb(){if("undefined"!=typeof console){var t="FIREBASE INTERNAL ERROR: "+Qb.apply(k,arguments);"undefined"!=typeof console.error?console.error(t):console.log(t)}}function Wb(){var t=Qb.apply(k,arguments);g(Error("FIREBASE FATAL ERROR: "+t))}function M(){if("undefined"!=typeof console){var t="FIREBASE WARNING: "+Qb.apply(k,arguments);"undefined"!=typeof console.warn?console.warn(t):console.log(t)}}function Da(t){return ha(t)&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)}function Xb(t,e){return t!==e?t===k?-1:e===k?1:typeof t!=typeof e?"number"==typeof t?-1:1:t>e?1:-1:0}function Yb(t,e){if(t===e)return 0;var i=Zb(t),n=Zb(e);return i!==k?n!==k?i-n:-1:n!==k?1:e>t?-1:1}function $b(t,e){return e&&t in e?e[t]:void g(Error("Missing required key ("+t+") in object: "+w(e)))}function La(t){if("object"!=typeof t||t===k)return w(t);var e,i=[];for(e in t)i.push(e);i.sort(),e="{";for(var n=0;n<i.length;n++)0!==n&&(e+=","),e+=w(i[n]),e+=":",e+=La(t[i[n]]);return e+"}"}function ac(t,e){if(t.length<=e)return[t];for(var i=[],n=0;n<t.length;n+=e)i.push(n+e>t?t.substring(n,t.length):t.substring(n,n+e));return i}function bc(t,e){if("array"==fa(t))for(var i=0;i<t.length;++i)e(i,t[i]);else cc(t,e)}function dc(t){y(!Da(t));var e,i,n,s;for(0===t?(n=i=0,e=-1/0===1/t?1:0):(e=0>t,t=Math.abs(t),t>=Math.pow(2,-1022)?(n=Math.min(Math.floor(Math.log(t)/Math.LN2),1023),i=n+1023,n=Math.round(t*Math.pow(2,52-n)-Math.pow(2,52))):(i=0,n=Math.round(t/Math.pow(2,-1074)))),s=[],t=52;t;t-=1)s.push(n%2?1:0),n=Math.floor(n/2);for(t=11;t;t-=1)s.push(i%2?1:0),i=Math.floor(i/2);for(s.push(e?1:0),s.reverse(),e=s.join(""),i="",t=0;64>t;t+=8)n=parseInt(e.substr(t,8),2).toString(16),1===n.length&&(n="0"+n),i+=n;return i.toLowerCase()}function Zb(t){return ec.test(t)&&(t=Number(t),t>=-2147483648&&2147483647>=t)?t:k}function fc(t){try{t()}catch(e){setTimeout(function(){g(e)})}}function gc(t,e){this.D=t,y(this.D!==k,"LeafNode shouldn't be created with null value."),this.Ya="undefined"!=typeof e?e:k}function ic(t,e){return Xb(t.ia,e.ia)||Yb(t.name,e.name)}function jc(t,e){return Yb(t.name,e.name)}function kc(t,e){return Yb(t,e)}function O(t,e){this.o=t||new Ua(kc),this.Ya="undefined"!=typeof e?e:k}function lc(t,e,i){O.call(this,t,i),e===k&&(e=new Ua(ic),t.Ca(function(t,i){e=e.oa({name:t,ia:i.j()},i)})),this.ua=e}function Q(t,e){if(t===k)return N;var i=k;if("object"==typeof t&&".priority"in t?i=t[".priority"]:"undefined"!=typeof e&&(i=e),y(i===k||"string"==typeof i||"number"==typeof i||"object"==typeof i&&".sv"in i),"object"==typeof t&&".value"in t&&t[".value"]!==k&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new gc(t,i);if(t instanceof Array){var n=N;return cc(t,function(e,i){if(C(t,i)&&"."!==i.substring(0,1)){var s=Q(e);(s.N()||!s.f())&&(n=n.H(i,s))}}),n.za(i)}var s=[],o={},r=l;bc(t,function(e,i){if("string"!=typeof i||"."!==i.substring(0,1)){var n=Q(t[i]);n.f()||(r=r||n.j()!==k,s.push({name:i,ia:n.j()}),o[i]=n)}});var a=nc(s,o,l);if(r){var c=nc(s,o,j);return new lc(a,c,i)}return new O(a,i)}function qc(t){this.count=parseInt(Math.log(t+1)/oc),this.$c=this.count-1,this.wd=t+1&parseInt(Array(this.count+1).join("1"),2)}function nc(t,e,i){function n(n,o){var r=u-n,h=u;u-=n;var l=t[r].name,r=new $a(i?t[r]:l,e[l],o,k,s(r+1,h));a?a.left=r:c=r,a=r}function s(n,o){var r=o-n;if(0==r)return k;if(1==r){var r=t[n].name,a=i?t[n]:r;return new $a(a,e[r],l,k,k)}var a=parseInt(r/2)+n,c=s(n,a),u=s(a+1,o),r=t[a].name,a=i?t[a]:r;return new $a(a,e[r],l,c,u)}var o=i?ic:jc;t.sort(o);var r,o=new qc(t.length),a=k,c=k,u=t.length;for(r=0;r<o.count;++r){var h=!(o.wd&1<<o.$c);o.$c--;var p=Math.pow(2,o.count-(r+1));h?n(p,l):(n(p,l),n(p,j))}return r=c,o=i?ic:kc,r!==k?new Ua(o,r):new Ua(o)}function hc(t){return"number"==typeof t?"number:"+dc(t):"string:"+t}function R(t,e){this.z=t,this.ec=e}function rc(t){y("array"==fa(t)&&0<t.length),this.vd=t,this.sb={}}function sc(t,e){var i,n=t.vd;t:{i=function(t){return t===e};for(var s=n.length,o=u(n)?n.split(""):n,r=0;s>r;r++)if(r in o&&i.call(aa,o[r])){i=r;break t}i=-1}y(0>i?k:u(n)?n.charAt(i):n[i],"Unknown event: "+e)}function tc(){rc.call(this,["visible"]);var t,e;if("undefined"!=typeof document&&"undefined"!=typeof document.addEventListener&&("undefined"!=typeof document.hidden?(e="visibilitychange",t="hidden"):"undefined"!=typeof document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):"undefined"!=typeof document.msHidden?(e="msvisibilitychange",t="msHidden"):"undefined"!=typeof document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.gb=j,e){var i=this;document.addEventListener(e,function(){var e=!document[t];e!==i.gb&&(i.gb=e,i.Xc("visible",e))},l)}}function uc(t){this.Jc=t,this.ac=[],this.Qa=0,this.tc=-1,this.Ka=k}function cc(t,e){for(var i in t)e.call(aa,t[i],i,t)}function vc(t){var e,i={};for(e in t)i[e]=t[e];return i}function wc(){this.jb={}}function xc(t,e,i){s(i)||(i=1),C(t.jb,e)||(t.jb[e]=0),t.jb[e]+=i}function yc(t){this.xd=t,this.Qb=k}function zc(t,e){this.Sc={},this.kc=new yc(t),this.u=e,setTimeout(v(this.kd,this),10+6e4*Math.random())}function Cc(t){return t=t.toString(),Ac[t]||(Ac[t]=new wc),Ac[t]}function Dc(){this.set={}}function Ec(t,e){for(var i in t.set)C(t.set,i)&&e(i,t.set[i])}function Hc(t,e,i){this.uc=t,this.e=Ub(t),this.Xd=e,this.$=Cc(e),this.jc=i,this.kb=l,this.Lb=function(t){e.host!==e.fa&&(t.ns=e.Sb);var i,n=[];for(i in t)t.hasOwnProperty(i)&&n.push(i+"="+t[i]);return(e.hc?"https://":"http://")+e.fa+"/.lp?"+n.join("&")}}function Kc(t,e,i,n){if(this.Lb=n,this.ha=i,this.Lc=new Dc,this.Cb=[],this.vc=Math.floor(1e8*Math.random()),this.ic=j,this.mc=Nb(),window[Fc+this.mc]=t,window[Gc+this.mc]=e,t=document.createElement("iframe"),t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||L("No IE domain setting required")}catch(s){t.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())"}}else g("Document body has not initialized. Wait to initialize Firebase until after the document is ready.");t.contentDocument?t.Aa=t.contentDocument:t.contentWindow?t.Aa=t.contentWindow.document:t.document&&(t.Aa=t.document),this.Y=t,t="",this.Y.src&&"javascript:"===this.Y.src.substr(0,11)&&(t='<script>document.domain="'+document.domain+'";</script>'),t="<html><body>"+t+"</body></html>";try{this.Y.Aa.open(),this.Y.Aa.write(t),this.Y.Aa.close()}catch(o){L("frame writing exception"),o.stack&&L(o.stack),L(o)}}function Mc(t){if(t.pc&&t.ic&&t.Lc.count()<(0<t.Cb.length?2:1)){t.vc++;var e={};e.id=t.Gd,e.pw=t.Hd,e.ser=t.vc;for(var e=t.Lb(e),i="",n=0;0<t.Cb.length&&1870>=t.Cb[0].ad.length+30+i.length;){var s=t.Cb.shift(),i=i+"&seg"+n+"="+s.Qd+"&ts"+n+"="+s.Vd+"&d"+n+"="+s.ad;n++}var e=e+i,o=t.vc;t.Lc.add(o);var r=function(){t.Lc.remove(o),Mc(t)},a=setTimeout(r,25e3);return Lc(t,e,function(){clearTimeout(a),r()}),j}return l}function Lc(t,e,i){setTimeout(function(){try{if(t.ic){var n=t.Y.Aa.createElement("script");n.type="text/javascript",n.async=j,n.src=e,n.onload=n.onreadystatechange=function(){var t=n.readyState;t&&"loaded"!==t&&"complete"!==t||(n.onload=n.onreadystatechange=k,n.parentNode&&n.parentNode.removeChild(n),i())},n.onerror=function(){L("Long-poll script failed to load: "+e),t.ic=l,t.close()},t.Y.Aa.body.appendChild(n)}}catch(s){}},1)}function S(t,e,i){this.uc=t,this.e=Ub(this.uc),this.frames=this.qb=k,this.Uc=0,this.$=Cc(e),this.Pa=(e.hc?"wss://":"ws://")+e.fa+"/.ws?v=5",e.host!==e.fa&&(this.Pa=this.Pa+"&ns="+e.Sb),i&&(this.Pa=this.Pa+"&s="+i)}function Rc(t,e){if(t.frames.push(e),t.frames.length==t.Uc){var i=t.frames.join("");t.frames=k,i=sa(i),t.Id(i)}}function Qc(t){clearInterval(t.qb),t.qb=setInterval(function(){t.W&&t.W.send("0"),Qc(t)},45e3)}function Pc(t){t.ba&&(clearTimeout(t.ba),t.ba=k)}function Sc(){var t=[];S&&S.isAvailable()&&!nb.get("previous_websocket_failure")?t.push(S):bc(Tc,function(e,i){i&&i.isAvailable()&&t.push(i)}),this.lc=t}function Uc(t,e,i,n,s,o){this.id=t,this.e=Ub("c:"+this.id+":"),this.Jc=i,this.xb=n,this.R=s,this.Ic=o,this.K=e,this.$b=[],this.Yc=0,this.Wc=new Sc,this.wa=0,this.e("Connection created"),Vc(this)}function Vc(t){var e,i=t.Wc;0<i.lc.length?e=i.lc[0]:g(Error("No transports available")),t.L=new e("c:"+t.id+":"+t.Yc++,t.K);var n=Wc(t,t.L),s=Xc(t,t.L);t.Jb=t.L,t.Hb=t.L,t.A=k,setTimeout(function(){t.L&&t.L.open(n,s)},0)}function Xc(t,e){return function(i){e===t.L?(t.L=k,i||0!==t.wa?1===t.wa&&t.e("Realtime connection lost."):(t.e("Realtime connection failed."),"s-"===t.K.fa.substr(0,2)&&(nb.remove("host:"+t.K.host),t.K.fa=t.K.host)),t.close()):e===t.A?(i=t.A,t.A=k,(t.Jb===i||t.Hb===i)&&t.close()):t.e("closing an old connection")}}function Wc(t,e){return function(i){if(2!=t.wa)if(e===t.Hb){var n=$b("t",i),i=$b("d",i);if("c"==n){if(n=$b("t",i),"d"in i)if(i=i.d,"h"===n){var n=i.ts,s=i.v,o=i.h;t.jc=i.s,qb(t.K,o),0==t.wa&&(t.L.start(),i=t.L,t.e("Realtime connection established."),t.L=i,t.wa=1,t.xb&&(t.xb(n),t.xb=k),"5"!==s&&M("Protocol version mismatch detected"),i=1<t.Wc.lc.length?t.Wc.lc[1]:k)&&(t.A=new i("c:"+t.id+":"+t.Yc++,t.K,t.jc),t.A.open(Wc(t,t.A),Xc(t,t.A)))}else if("n"===n){for(t.e("recvd end transmission on primary"),t.Hb=t.A,i=0;i<t.$b.length;++i)t.Xb(t.$b[i]);t.$b=[],Yc(t)}else"s"===n?(t.e("Connection shutdown command received. Shutting down..."),t.Ic&&(t.Ic(i),t.Ic=k),t.R=k,t.close()):"r"===n?(t.e("Reset packet received.  New host: "+i),qb(t.K,i),1===t.wa?t.close():($c(t),Vc(t))):Vb("e"===n?"Server Error: "+i:"Unknown control packet command: "+n)}else"d"==n&&t.Xb(i)}else e===t.A?(n=$b("t",i),i=$b("d",i),"c"==n?"t"in i&&(i=i.t,"a"===i?(t.A.start(),t.e("sending client ack on secondary"),t.A.send({t:"c",d:{t:"a",d:{}}}),t.e("Ending transmission on primary"),t.L.send({t:"c",d:{t:"n",d:{}}}),t.Jb=t.A,Yc(t)):"r"===i&&(t.e("Got a reset on secondary, closing it"),t.A.close(),(t.Jb===t.A||t.Hb===t.A)&&t.close())):"d"==n?t.$b.push(i):g(Error("Unknown protocol layer: "+n))):t.e("message on old connection")}}function Yc(t){t.Jb===t.A&&t.Hb===t.A&&(t.e("cleaning up and promoting a connection: "+t.A.uc),t.L=t.A,t.A=k)}function $c(t){t.e("Shutting down all connections"),t.L&&(t.L.close(),t.L=k),t.A&&(t.A.close(),t.A=k)}function ad(){if(rc.call(this,["online"]),this.yb=j,"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener){var t=this;window.addEventListener("online",function(){t.yb||t.Xc("online",j),t.yb=j},l),window.addEventListener("offline",function(){t.yb&&t.Xc("online",l),t.yb=l},l)}}function bd(t,e,i,n,s,o){this.id=cd++,this.e=Ub("p:"+this.id+":"),this.Na=j,this.ga={},this.U=[],this.zb=0,this.wb=[],this.P=l,this.qa=1e3,this.Rb=3e5,this.Yb=e||da,this.Wb=i||da,this.vb=n||da,this.Kc=s||da,this.Bc=o||da,this.K=t,this.Oc=k,this.Gb={},this.Pd=0,this.rb=this.Fc=k,dd(this,0),tc.mb().Xa("visible",this.Kd,this),-1===t.host.indexOf("fblocal")&&ad.mb().Xa("online",this.Jd,this)}function fd(t,e,i,n,s){t.e("Listen on "+e+" for "+i);var o={p:e},n=wb(n,function(t){return Ka(t)});"{}"!==i&&(o.q=n),o.h=t.Bc(e),t.Ga("l",o,function(n){t.e("listen response",n),n=n.s,"ok"!==n&&gd(t,e,i),s&&s(n)})}function hd(t){var e=t.Ha;t.P&&e&&t.Ga("auth",{cred:e.yd},function(i){var n=i.s,i=i.d||"error";"ok"!==n&&t.Ha===e&&delete t.Ha,t.vb("ok"===n),e.bd?"ok"!==n&&e.Nb&&e.Nb(n,i):(e.bd=j,e.X&&e.X(n,i))})}function id(t,e,i,n){e=e.toString(),gd(t,e,i)&&t.P&&(t.e("Unlisten on "+e+" for "+i),e={p:e},n=wb(n,function(t){return Ka(t)}),"{}"!==i&&(e.q=n),t.Ga("u",e))}function jd(t,e,i,n){t.P?kd(t,"o",e,i,n):t.wb.push({Mc:e,action:"o",data:i,C:n})}function kd(t,e,i,n,s){i={p:i,d:n},t.e("onDisconnect "+e,i),t.Ga(e,i,function(t){s&&setTimeout(function(){s(t.s)},0)})}function ld(t,e,i,n,o,r){i={p:i,d:n},s(r)&&(i.h=r),t.U.push({action:e,ld:i,C:o}),t.zb++,e=t.U.length-1,t.P&&md(t,e)}function md(t,e){var i=t.U[e].action,n=t.U[e].ld,s=t.U[e].C;t.U[e].Md=t.P,t.Ga(i,n,function(n){t.e(i+" response",n),delete t.U[e],t.zb--,0===t.zb&&(t.U=[]),s&&s(n.s)})}function dd(t,e){y(!t.ja,"Scheduling a connect when we're already connected/ing?"),t.Sa&&clearTimeout(t.Sa),t.Sa=setTimeout(function(){if(t.Sa=k,t.Na){t.e("Making a connection attempt"),t.Fc=(new Date).getTime(),t.rb=k;var e=v(t.Xb,t),i=v(t.xb,t),n=v(t.gd,t),s=t.id+":"+ed++;t.ja=new Uc(s,t.K,e,i,n,function(e){M(e+" ("+t.K.toString()+")"),t.Na=l})}},e)}function gd(t,e,i){e=new J(e).toString(),i||(i="{}");var n=t.ga[e][i];return delete t.ga[e][i],n}function nd(){this.o=this.D=k}function od(t,e,i){if(e.f())t.D=i,t.o=k;else if(t.D!==k)t.D=t.D.ya(e,i);else{t.o==k&&(t.o=new Dc);var n=E(e);t.o.contains(n)||t.o.add(n,new nd),t=t.o.get(n),e=Ma(e),od(t,e,i)}}function pd(t,e){if(e.f())return t.D=k,t.o=k,j;if(t.D!==k){if(t.D.N())return l;var i=t.D;return t.D=k,i.w(function(e,i){od(t,new J(e),i)}),pd(t,e)}return t.o!==k?(i=E(e),e=Ma(e),t.o.contains(i)&&pd(t.o.get(i),e)&&t.o.remove(i),t.o.f()?(t.o=k,j):l):j}function qd(t,e,i){t.D!==k?i(e,t.D):t.w(function(t,n){var s=new J(e.toString()+"/"+t);qd(n,s,i)})}function rd(){this.ra=N}function T(t,e){return t.ra.Q(e)}function U(t,e,i){t.ra=t.ra.ya(e,i)}function sd(){this.sa=new rd,this.I=new rd,this.ma=new rd,this.Bb=new Pa}function td(t,e){for(var i=T(t.sa,e),n=T(t.I,e),s=K(t.Bb,e),o=l,r=s;r!==k;){if(r.k()!==k){o=j;break}r=r.parent()}return o?l:(i=ud(i,n,s),i!==n?(U(t.I,e,i),j):l)}function ud(t,e,i){return i.f()?t:i.k()!==k?e:(t=t||N,i.w(function(n){var n=n.name(),s=t.M(n),o=e.M(n),r=K(i,n),s=ud(s,o,r);t=t.H(n,s)}),t)}function vd(t,e){vb(e,function(e){var i=e.Rd,e=K(t.Bb,e.path),n=e.k();y(n!==k,"pendingPut should not be null."),n===i&&Qa(e,k)})}function wd(){this.Ta=[]}function xd(t,e){if(0!==e.length)for(var i=0;i<e.length;i++)t.Ta.push(e[i])}function yd(t){var e=t.X,i=t.pd,n=t.Db;fc(function(){e(i,n)})}function V(t,e,i,n){this.type=t,this.ta=e,this.aa=i,this.Db=n}function zd(t){this.J=t,this.na=[],this.xc=new wd}function Ad(t,e,i,n,s){t.na.push({type:e,X:i,cancel:n,T:s});var n=[],o=Bd(t.i);t.pb&&o.push(new V("value",t.i));for(var r=0;r<o.length;r++)if(o[r].type===e){var a=new H(t.J.n,t.J.path);o[r].aa&&(a=a.F(o[r].aa)),n.push({X:s?v(i,s):i,pd:new R(o[r].ta,a),Db:o[r].Db})}xd(t.xc,n)}function Cd(t,e){for(var i=[],n=0;n<e.length;n++){var s=e[n],o=s.type,r=new H(t.J.n,t.J.path);for(e[n].aa&&(r=r.F(e[n].aa)),r=new R(e[n].ta,r),"value"!==s.type||r.nb()?"value"!==s.type&&(o+=" "+r.name()):o+="("+r.V()+")",L(t.J.n.u.id+": event:"+t.J.path+":"+t.J.La()+":"+o),o=0;o<t.na.length;o++){var a=t.na[o];e[n].type===a.type&&i.push({X:a.T?v(a.X,a.T):a.X,pd:r,Db:s.Db})}}xd(t.xc,i)}function Bd(t){var e=[];if(!t.N()){var i=k;t.w(function(t,n){e.push(new V("child_added",n,t,i)),i=t})}return e}function Ed(t){t.pb||(t.pb=j,Cd(t,[new V("value",t.i)]))}function Fd(t,e){zd.call(this,t),this.i=e}function Gd(t,e){this.Ob=t,this.Gc=e}function Hd(t,e,i,n,s){var o=t.Q(i),r=e.Q(i),n=new Gd(n,s),s=Id(n,i,o,r),r=!o.f()&&!r.f()&&o.j()!==r.j();if(s||r)for(o=i,i=s;o.parent()!==k;){var a=t.Q(o),s=e.Q(o),c=o.parent();if(!n.Ob||K(n.Ob,c).k()){var u=e.Q(c),h=[],o=o.Z<o.m.length?o.m[o.m.length-1]:k;a.f()?(a=u.ea(o,s),h.push(new V("child_added",s,o,a))):s.f()?h.push(new V("child_removed",a,o)):(a=u.ea(o,s),r&&h.push(new V("child_moved",s,o,a)),i&&h.push(new V("child_changed",s,o,a))),n.Gc(c,u,h)}r&&(r=l,i=j),o=c}}function Id(t,e,i,n){var s,o=[];return i===n?s=l:i.N()&&n.N()?s=i.k()!==n.k():i.N()?(Jd(t,e,N,n,o),s=j):n.N()?(Jd(t,e,i,N,o),s=j):s=Jd(t,e,i,n,o),s?t.Gc(e,n,o):i.j()!==n.j()&&t.Gc(e,n,k),s}function Jd(t,e,i,n,o){var r,a,c,u,h=l,p=!t.Ob||!K(t.Ob,e).f(),d=[],f=[],m=[],g=[],v={},y={};for(r=i.Ua(),c=Za(r),a=n.Ua(),u=Za(a);c!==k||u!==k;)if(i=c===k?1:u===k?-1:c.key===u.key?0:ic({name:c.key,ia:c.value.j()},{name:u.key,ia:u.value.j()}),0>i?(h=wa(v,c.key),s(h)?(m.push({zc:c,Tc:d[h]}),d[h]=k):(y[c.key]=f.length,f.push(c)),h=j,c=Za(r)):(i>0?(h=wa(y,u.key),s(h)?(m.push({zc:f[h],Tc:u}),f[h]=k):(v[u.key]=d.length,d.push(u)),h=j):(i=e.F(u.key),(i=Id(t,i,c.value,u.value))&&(g.push(u),h=j),c.value.j()!==u.value.j()&&(m.push({zc:c,Tc:u}),h=j),c=Za(r)),u=Za(a)),!p&&h)return j;for(p=0;p<f.length;p++)(v=f[p])&&(i=e.F(v.key),Id(t,i,v.value,N),o.push(new V("child_removed",v.value,v.key)));for(p=0;p<d.length;p++)(v=d[p])&&(i=e.F(v.key),f=n.ea(v.key,v.value),Id(t,i,N,v.value),o.push(new V("child_added",v.value,v.key,f)));for(p=0;p<m.length;p++)v=m[p].zc,d=m[p].Tc,i=e.F(d.key),f=n.ea(d.key,d.value),o.push(new V("child_moved",d.value,d.key,f)),(i=Id(t,i,v.value,d.value))&&g.push(d);for(p=0;p<g.length;p++)t=g[p],f=n.ea(t.key,t.value),o.push(new V("child_changed",t.value,t.key,f));return h}function Kd(){this.S=this.xa=k,this.set={}}function Ld(t){return t.contains("default")}function Md(t){return t.xa!=k&&Ld(t)}function Nd(t,e){zd.call(this,t),this.i=N,this.dc(e,Bd(e))}function Od(t,e,i,n){if(t.N())return k;var s=k;return(n?t.yc:t.w).call(t,function(t,n){return Pd(e,t,n)&&(s=t,i--,0===i)?j:void 0}),s}function Pd(t,e,i){for(var n=0;n<t.length;n++)if(!t[n](e,i.j()))return l;return j}function Qd(t,e){this.u=t,this.g=e,this.Vb=e.ra,this.la=new Pa}function Td(t,e,i,n,s){var o,r=t.get(e);if(o=r){o=l;for(var a=r.na.length-1;a>=0;a--){var c=r.na[a];if(!(i&&c.type!==i||n&&c.X!==n||s&&c.T!==s)&&(r.na.splice(a,1),o=j,i&&n))break}o=o&&!(0<r.na.length)}return(i=o)&&t.remove(e),i}function Ud(t,e,i,n,s,o){var r=e.path(),r=K(t.la,r),i=i?i.La():k,a=[];if(i&&"default"!==i?Td(e,i,n,s,o)&&a.push(i):vb(e.keys(),function(t){Td(e,t,n,s,o)&&a.push(t)}),e.f()&&Qa(r,k),i=Rd(r),0<a.length&&!i){for(var c=r,u=r.parent(),i=l;!i&&u;){var h=u.k();if(h){y(!Md(h));var p=c.name(),d=l;Ec(h,function(t,e){d=e.Cc(p)||d}),d&&(i=j)}c=u,u=u.parent()}if(c=k,!Md(e)){u=e.xa,e.xa=k;var f=[],m=function(e){var i=e.k();if(i&&Ld(i))f.push(i.path()),i.xa==k&&i.setActive(Sd(t,i));else{if(i){i.xa!=k||i.setActive(Sd(t,i));var n={};Ec(i,function(t,e){e.i.w(function(t){C(n,t)||(n[t]=j,t=i.path().F(t),f.push(t))})})}e.w(m)}};m(r),c=f,u&&u()}return i?k:c}return k}function Vd(t,e,i){Sa(K(t.la,e),function(t){(t=t.k())&&Ec(t,function(t,e){Ed(e)})},i,j)}function W(t,e,i){function n(t){do{if(r[t.toString()])return j;t=t.parent()}while(t!==k);return l}var s=t.Vb,o=t.g.ra;t.Vb=o;for(var r={},a=0;a<i.length;a++)r[i[a].toString()]=j;Hd(s,o,e,t.la,function(i,s,o){if(e.contains(i)){var r=n(i);r&&Vd(t,i,l),t.cc(i,s,o),r&&Vd(t,i,j)}else t.cc(i,s,o)}),n(e)&&Vd(t,e,j),Wd(t,e)}function Wd(t,e){var i=K(t.la,e);Sa(i,function(t){(t=t.k())&&Ec(t,function(t,e){e.Eb()})},j,j),Ta(i,function(t){(t=t.k())&&Ec(t,function(t,e){e.Eb()})},l)}function Rd(t){return Ta(t,function(t){return t.k()&&Md(t.k())})}function Sd(t,e){if(t.u){var i,n=t.u,s=e.path(),o=e.toString(),r=e.Za(),a=e.keys(),c=Ld(e),u=t.u,h=function(n){if("ok"!==n){var s="Unknown Error";"too_big"===n?s="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==n?s="Client doesn't have permission to access the desired data.":"unavailable"==n&&(s="The service is unavailable");var o=Error(n+": "+s);o.code=n.toUpperCase(),M("on() or once() for "+e.path().toString()+" failed: "+o.toString()),e&&(Ec(e,function(t,e){for(var i=0;i<e.na.length;i++){var n=e.na[i];n.cancel&&(n.T?v(n.cancel,n.T):n.cancel)(o)}}),Ud(t,e))}else i||(c?Vd(t,e.path(),j):vb(a,function(t){(t=e.get(t))&&Ed(t)}),Wd(t,e.path()))},l=e.toString(),p=e.path().toString();return u.ga[p]=u.ga[p]||{},y(!u.ga[p][l],"listen() called twice for same path/queryId."),u.ga[p][l]={Za:e.Za(),C:h},u.P&&fd(u,p,l,e.Za(),h),function(){i=j,id(n,s,o,r)}}return da}function Xd(t,e,i,n,s){var o=e.path(),e=t.lb(o,e,n,s),r=N,a=[];return cc(e,function(e,c){var u=new J(c);3===e||1===e?r=r.H(c,n.Q(u)):(2===e&&a.push({path:o.F(c),pa:N}),a=a.concat(Yd(t,n.Q(u),K(i,u),s)))}),[{path:o,pa:r}].concat(a)}function Zd(t,e,i,n){var s;t:{var o=K(t.la,e);s=o.parent();for(var r=[];s!==k;){var a=s.k();if(a!==k){if(Ld(a)){s=[{path:e,pa:i}];break t}if(a=t.lb(e,a,i,n),o=wa(a,o.name()),3===o||1===o){s=[{path:e,pa:i}];break t}2===o&&r.push({path:e,pa:N})}o=s,s=s.parent()}s=r}return 1!=s.length||s[0].pa.f()&&!i.f()?(r=K(t.la,e),o=r.k(),o!==k?Ld(o)?s.push({path:e,pa:i}):s=s.concat(Xd(t,o,r,i,n)):s=s.concat(Yd(t,i,r,n)),s):s}function Yd(t,e,i,n){var s=i.k();if(s!==k)return Ld(s)?[{path:i.path(),pa:e}]:Xd(t,s,i,e,n);var o=[];return i.w(function(i){var s=e.N()?N:e.M(i.name()),i=Yd(t,s,i,n);o=o.concat(i)}),o}function $d(t,e){return t&&"object"==typeof t?(y(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t}function ae(t,e){var i,n=$d(t.j(),e);if(t.N()){var s=$d(t.k(),e);return s!==t.k()||n!==t.j()?new gc(s,n):t}return i=t,n!==t.j()&&(i=i.za(n)),t.w(function(t,n){var s=ae(n,e);s!==n&&(i=i.H(t,s))}),i}function be(t){this.K=t,this.$=Cc(t),this.u=new bd(this.K,v(this.Yb,this),v(this.Wb,this),v(this.vb,this),v(this.Kc,this),v(this.Bc,this));
var e=v(function(){return new zc(this.$,this.u)},this),t=t.toString();Bc[t]||(Bc[t]=e()),this.qd=Bc[t],this.eb=new Pa,this.fb=new rd,this.g=new sd,this.G=new Qd(this.u,this.g.ma),this.Dc=new rd,this.Ec=new Qd(k,this.Dc),ce(this,"connected",l),ce(this,"authenticated",l),this.R=new nd,this.wc=0}function de(t){return t=T(t.Dc,new J(".info/serverTimeOffset")).V()||0,(new Date).getTime()+t}function ee(t){return t=t={timestamp:de(t)},t.timestamp=t.timestamp||(new Date).getTime(),t}function ce(t,e,i){e=new J("/.info/"+e),U(t.Dc,e,Q(i)),W(t.Ec,e,[e])}function he(t,e,i,n){var s=Q(i);jd(t.u,e.toString(),s.V(j),function(i){"ok"===i&&od(t.R,e,s),X(n,i)})}function ie(t){xc(t.$,"deprecated_on_disconnect"),t.qd.Sc.deprecated_on_disconnect=j}function X(t,e,i){t&&fc(function(){if("ok"==e)t(k,i);else{var n=(e||"error").toUpperCase(),s=n;i&&(s+=": "+i),s=Error(s),s.code=n,t(s)}})}function je(t,e){var i=e||t.eb;if(e||ke(t,i),i.k()!==k){var n=le(t,i);if(y(0<n.length),xb(n,function(t){return 1===t.status})){for(var s=i.path(),o=0;o<n.length;o++)y(1===n[o].status,"tryToSendTransactionQueue_: items in queue should all be run."),n[o].status=2,n[o].nd++;i=T(t.g.I,s).hash(),U(t.g.I,s,T(t.g.ma,s));for(var r=T(t.fb,s).V(j),a=Nb(),c={},u=0;u<n.length;u++)n[u].qc&&(c[n[u].path.toString()]=n[u].path);var h,l=[];for(h in c)l.push(c[h]);for(o=0;o<l.length;o++)Qa(K(t.g.Bb,l[o]),a);t.u.put(s.toString(),r,function(e){for(t.e("transaction put response",{path:s.toString(),status:e}),o=0;o<l.length;o++){var i=K(t.g.Bb,l[o]),r=i.k();y(r!==k,"sendTransactionQueue_: pendingPut should not be null."),r===a&&(Qa(i,k),U(t.g.I,l[o],T(t.g.sa,l[o])))}if("ok"===e){for(e=[],o=0;o<n.length;o++)n[o].status=3,n[o].C&&(i=me(t,n[o].path),e.push(v(n[o].C,k,k,j,i))),n[o].nc();for(ke(t,K(t.eb,s)),je(t),o=0;o<e.length;o++)fc(e[o])}else{if("datastale"===e)for(o=0;o<n.length;o++)n[o].status=4===n[o].status?5:1;else for(M("transaction at "+s+" failed: "+e),o=0;o<n.length;o++)n[o].status=5,n[o].oc=e;e=fe(t,s),W(t.G,e,[s])}},i)}}else i.nb()&&i.w(function(e){je(t,e)})}function fe(t,e){var i=ne(t,e),n=i.path(),o=le(t,i);if(U(t.g.ma,n,T(t.g.I,n)),U(t.fb,n,T(t.g.I,n)),0!==o.length){for(var r=i=T(t.g.ma,n),a=[],c=0;c<o.length;c++){var u,h=Na(n,o[c].path),p=l;if(y(h!==k,"rerunTransactionsUnderNode_: relativePath should not be null."),5===o[c].status)p=j,u=o[c].oc;else if(1===o[c].status)if(25<=o[c].nd)p=j,u="maxretry";else{var d=o[c].update(i.Q(h).V());s(d)?(Ba("transaction failed: Data returned ",d),d=Q(d),i=i.ya(h,d),o[c].qc&&(r=r.ya(h,d))):(p=j,u="nodata")}p&&(o[c].status=3,setTimeout(o[c].nc,0),o[c].C&&(p=new H(t,o[c].path),h=new R(i.Q(h),p),a.push("nodata"===u?v(o[c].C,k,k,l,h):v(o[c].C,k,Error(u),l,h))))}for(u=T(t.g.I,n).j(),i=i.za(u),r=r.za(u),U(t.fb,n,i),U(t.g.ma,n,r),ke(t,t.eb),c=0;c<a.length;c++)fc(a[c]);je(t)}return n}function ne(t,e){for(var i,n=t.eb;(i=E(e))!==k&&n.k()===k;)n=K(n,i),e=Ma(e);return n}function le(t,e){var i=[];return oe(t,e,i),i.sort(function(t,e){return t.hd-e.hd}),i}function oe(t,e,i){var n=e.k();if(n!==k)for(var s=0;s<n.length;s++)i.push(n[s]);e.w(function(e){oe(t,e,i)})}function ke(t,e){var i=e.k();if(i){for(var n=0,s=0;s<i.length;s++)3!==i[s].status&&(i[n]=i[s],n++);i.length=n,Qa(e,0<i.length?i:k)}e.w(function(e){ke(t,e)})}function ge(t,e){var i=ne(t,e).path(),n=K(t.eb,e);return Ta(n,function(t){pe(t)}),pe(n),Sa(n,function(t){pe(t)}),i}function pe(t){var e=t.k();if(e!==k){for(var i=[],n=-1,s=0;s<e.length;s++)4!==e[s].status&&(2===e[s].status?(y(n===s-1,"All SENT items should be at beginning of queue."),n=s,e[s].status=4,e[s].oc="set"):(y(1===e[s].status),e[s].nc(),e[s].C&&i.push(v(e[s].C,k,Error("set"),l,k))));for(-1===n?Qa(t,k):e.length=n+1,s=0;s<i.length;s++)fc(i[s])}}function me(t,e){var i=new H(t,e);return new R(T(t.fb,e),i)}function Y(){this.$a={}}function $(t,e,i){this.Fb=t,this.S=e,this.Ea=i}function H(){var t,e,i;if(arguments[0]instanceof be)i=arguments[0],t=arguments[1];else{z("new Firebase",1,2,arguments.length);var n=arguments[0];e=t="";var s=j,o="";if(u(n)){var r=n.indexOf("//");if(r>=0)var a=n.substring(0,r-1),n=n.substring(r+2);r=n.indexOf("/"),-1===r&&(r=n.length),t=n.substring(0,r);var n=n.substring(r+1),c=t.split(".");if(3==c.length){if(r=c[2].indexOf(":"),s=r>=0?"https"===a:j,"firebase"===c[1])Wb(t+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead");else for(e=c[0],o="",n=("/"+n).split("/"),a=0;a<n.length;a++)if(0<n[a].length){r=n[a];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(h){}o+="/"+r}e=e.toLowerCase()}else e=k}s||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&M("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),t=new pb(t,s,e),e=new J(o),s=e.toString(),(n=!u(t.host))||(n=0===t.host.length)||(n=!za(t.Sb))||(n=0!==s.length)&&(s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),n=!(u(s)&&0!==s.length&&!ya.test(s))),n&&g(Error(A("new Firebase",1,l)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')),arguments[1]?arguments[1]instanceof Y?i=arguments[1]:g(Error("Expected a valid Firebase.Context for second argument to new Firebase()")):i=Y.mb(),s=t.toString(),n=wa(i.$a,s),n||(n=new be(t),i.$a[s]=n),i=n,t=e}F.call(this,i,t)}function Tb(t,e){y(!e||t===j||t===l,"Can't turn on custom loggers persistently."),t===j?("undefined"!=typeof console&&("function"==typeof console.log?Rb=v(console.log,console):"object"==typeof console.log&&(Rb=function(t){console.log(t)})),e&&ob.set("logging_enabled",j)):t?Rb=t:(Rb=k,ob.remove("logging_enabled"))}var aa=void 0,j=!0,k=null,l=!1,r,ca=this;Math.floor(2147483648*Math.random()).toString(36);var qa={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},ra=/\uffff/.test("")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,ua={},xa=/[\[\].#$\/]/,ya=/[\[\].#$]/;F.prototype.Nc=function(){return z("Query.ref",0,0,arguments.length),new H(this.n,this.path)},F.prototype.ref=F.prototype.Nc,F.prototype.Xa=function(t,e){z("Query.on",2,4,arguments.length),Ga("Query.on",t,l),B("Query.on",2,e,l);var i=Ja("Query.on",arguments[2],arguments[3]);return this.n.Mb(this,t,e,i.cancel,i.T),e},F.prototype.on=F.prototype.Xa,F.prototype.ub=function(t,e,i){z("Query.off",0,3,arguments.length),Ga("Query.off",t,j),B("Query.off",2,e,j),va("Query.off",3,i),this.n.fc(this,t,e,i)},F.prototype.off=F.prototype.ub,F.prototype.Ld=function(t,e){function i(r){o&&(o=l,s.ub(t,i),e.call(n.T,r))}z("Query.once",2,4,arguments.length),Ga("Query.once",t,l),B("Query.once",2,e,l);var n=Ja("Query.once",arguments[2],arguments[3]),s=this,o=j;this.Xa(t,i,function(e){s.ub(t,i),n.cancel&&n.cancel.call(n.T,e)})},F.prototype.once=F.prototype.Ld,F.prototype.Ed=function(t){return z("Query.limit",1,1,arguments.length),(!ha(t)||Math.floor(t)!==t||0>=t)&&g("Query.limit: First argument must be a positive integer."),new F(this.n,this.path,t,this.da,this.va,this.Ba,this.Ra)},F.prototype.limit=F.prototype.Ed,F.prototype.Ud=function(t,e){return z("Query.startAt",0,2,arguments.length),Fa("Query.startAt",1,t,j),Ha("Query.startAt",e),s(t)||(e=t=k),new F(this.n,this.path,this.Da,t,e,this.Ba,this.Ra)},F.prototype.startAt=F.prototype.Ud,F.prototype.zd=function(t,e){return z("Query.endAt",0,2,arguments.length),Fa("Query.endAt",1,t,j),Ha("Query.endAt",e),new F(this.n,this.path,this.Da,this.da,this.va,t,e)},F.prototype.endAt=F.prototype.zd,F.prototype.La=function(){var t=La(Ka(this));return"{}"===t?"default":t},r=J.prototype,r.toString=function(){for(var t="",e=this.Z;e<this.m.length;e++)""!==this.m[e]&&(t+="/"+this.m[e]);return t||"/"},r.parent=function(){if(this.Z>=this.m.length)return k;for(var t=[],e=this.Z;e<this.m.length-1;e++)t.push(this.m[e]);return new J(t,0)},r.F=function(t){for(var e=[],i=this.Z;i<this.m.length;i++)e.push(this.m[i]);if(t instanceof J)for(i=t.Z;i<t.m.length;i++)e.push(t.m[i]);else for(t=t.split("/"),i=0;i<t.length;i++)0<t[i].length&&e.push(t[i]);return new J(e,0)},r.f=function(){return this.Z>=this.m.length},r.contains=function(t){var e=0;if(this.m.length>t.m.length)return l;for(;e<this.m.length;){if(this.m[e]!==t.m[e])return l;++e}return j},r=Pa.prototype,r.k=function(){return this.z.value},r.nb=function(){return 0<this.z.sc},r.f=function(){return this.k()===k&&!this.nb()},r.w=function(t){for(var e in this.z.children)t(new Pa(e,this,this.z.children[e]))},r.path=function(){return new J(this.Ab===k?this.Ea:this.Ab.path()+"/"+this.Ea)},r.name=ba("Ea"),r.parent=ba("Ab"),r=Ua.prototype,r.oa=function(t,e){return new Ua(this.Oa,this.ca.oa(t,e,this.Oa).copy(k,k,l,k,k))},r.remove=function(t){return new Ua(this.Oa,this.ca.remove(t,this.Oa).copy(k,k,l,k,k))},r.get=function(t){for(var e,i=this.ca;!i.f();){if(e=this.Oa(t,i.key),0===e)return i.value;0>e?i=i.left:e>0&&(i=i.right)}return k},r.f=function(){return this.ca.f()},r.count=function(){return this.ca.count()},r.tb=function(){return this.ca.tb()},r.Va=function(){return this.ca.Va()},r.Ca=function(t){return this.ca.Ca(t)},r.Ma=function(t){return this.ca.Ma(t)},r.Ua=function(t){return new Ya(this.ca,t)},r=$a.prototype,r.copy=function(t,e,i,n,s){return new $a(t!=k?t:this.key,e!=k?e:this.value,i!=k?i:this.color,n!=k?n:this.left,s!=k?s:this.right)},r.count=function(){return this.left.count()+1+this.right.count()},r.f=o(l),r.Ca=function(t){return this.left.Ca(t)||t(this.key,this.value)||this.right.Ca(t)},r.Ma=function(t){return this.right.Ma(t)||t(this.key,this.value)||this.left.Ma(t)},r.tb=function(){return ab(this).key},r.Va=function(){return this.right.f()?this.key:this.right.Va()},r.oa=function(t,e,i){var n,s;return s=this,n=i(t,s.key),s=0>n?s.copy(k,k,k,s.left.oa(t,e,i),k):0===n?s.copy(k,e,k,k,k):s.copy(k,k,k,k,s.right.oa(t,e,i)),db(s)},r.remove=function(t,e){var i,n;if(i=this,0>e(t,i.key))!i.left.f()&&!i.left.O()&&!i.left.left.O()&&(i=fb(i)),i=i.copy(k,k,k,i.left.remove(t,e),k);else{if(i.left.O()&&(i=gb(i)),!i.right.f()&&!i.right.O()&&!i.right.left.O()&&(i=hb(i),i.left.left.O()&&(i=gb(i),i=hb(i))),0===e(t,i.key)){if(i.right.f())return Wa;n=ab(i.right),i=i.copy(n.key,n.value,k,k,eb(i.right))}i=i.copy(k,k,k,k,i.right.remove(t,e))}return db(i)},r.O=ba("color"),r=jb.prototype,r.copy=function(){return this},r.oa=function(t,e){return new $a(t,e,aa,aa,aa)},r.remove=function(){return this},r.count=o(0),r.f=o(j),r.Ca=o(l),r.Ma=o(l),r.tb=o(k),r.Va=o(k),r.O=o(l);var Wa=new jb;kb.prototype.set=function(t,e){e==k?this.Pb.removeItem(this.bc+t):this.Pb.setItem(this.bc+t,w(e))},kb.prototype.get=function(t){return t=this.Pb.getItem(this.bc+t),t==k?k:sa(t)},kb.prototype.remove=function(t){this.Pb.removeItem(this.bc+t)},lb.prototype.set=function(t,e){e==k?delete this.ib[t]:this.ib[t]=e},lb.prototype.get=function(t){return C(this.ib,t)?this.ib[t]:k},lb.prototype.remove=function(t){delete this.ib[t]};var nb=mb("localStorage"),ob=mb("sessionStorage");pb.prototype.toString=function(){return(this.hc?"https://":"http://")+this.host},la(sb,rb),sb.prototype.reset=function(){this.B[0]=1732584193,this.B[1]=4023233417,this.B[2]=2562383102,this.B[3]=271733878,this.B[4]=3285377520,this.Vc=this.ob=0},sb.prototype.update=function(t,e){s(e)||(e=t.length);var i=this.rc,n=this.ob,o=0;if(u(t))for(;e>o;)i[n++]=t.charCodeAt(o++),64==n&&(tb(this,i),n=0);else for(;e>o;)i[n++]=t[o++],64==n&&(tb(this,i),n=0);this.ob=n,this.Vc+=e};var ub=Array.prototype,vb=ub.forEach?function(t,e,i){ub.forEach.call(t,e,i)}:function(t,e,i){for(var n=t.length,s=u(t)?t.split(""):t,o=0;n>o;o++)o in s&&e.call(i,s[o],o,t)},wb=ub.map?function(t,e,i){return ub.map.call(t,e,i)}:function(t,e,i){for(var n=t.length,s=Array(n),o=u(t)?t.split(""):t,r=0;n>r;r++)r in o&&(s[r]=e.call(i,o[r],r,t));return s},xb=ub.every?function(t,e,i){return ub.every.call(t,e,i)}:function(t,e,i){for(var n=t.length,s=u(t)?t.split(""):t,o=0;n>o;o++)if(o in s&&!e.call(i,s[o],o,t))return l;return j},yb,zb,Ab,Bb;Bb=Ab=zb=yb=l;var Db;if(Db=Cb()){var Eb=ca.navigator;yb=0==Db.indexOf("Opera"),zb=!yb&&-1!=Db.indexOf("MSIE"),Ab=!yb&&-1!=Db.indexOf("WebKit"),Bb=!yb&&!Ab&&"Gecko"==Eb.product}var Fb=zb,Gb=Bb,Hb=Ab,Ib;if(yb&&ca.opera){var Jb=ca.opera.version;"function"==typeof Jb&&Jb()}else Gb?Ib=/rv\:([^\);]+)(\)|;)/:Fb?Ib=/MSIE\s+([^\);]+)(\)|;)/:Hb&&(Ib=/WebKit\/(\S+)/),Ib&&Ib.exec(Cb());var Kb=k,Lb=k,Nb,Ob=1;Nb=function(){return Ob++};var Rb=k,Sb=j,ec=/^-?\d{1,10}$/;r=gc.prototype,r.N=o(j),r.j=ba("Ya"),r.za=function(t){return new gc(this.D,t)},r.M=function(){return N},r.Q=function(t){return E(t)===k?this:N},r.ea=o(k),r.H=function(t,e){return(new O).H(t,e).za(this.Ya)},r.ya=function(t,e){var i=E(t);return i===k?e:this.H(i,N.ya(Ma(t),e))},r.f=o(l),r.Ub=o(0),r.V=function(t){return t&&this.j()!==k?{".value":this.k(),".priority":this.j()}:this.k()},r.hash=function(){var t="";this.j()!==k&&(t+="priority:"+hc(this.j())+":");var e=typeof this.D,t=t+(e+":"),t="number"===e?t+dc(this.D):t+this.D;return Pb(t)},r.k=ba("D"),r.toString=function(){return"string"==typeof this.D?'"'+this.D+'"':this.D},r=O.prototype,r.N=o(l),r.j=ba("Ya"),r.za=function(t){return new O(this.o,t)},r.H=function(t,e){var i=this.o.remove(t);return e&&e.f()&&(e=k),e!==k&&(i=i.oa(t,e)),e&&e.j()!==k?new lc(i,k,this.Ya):new O(i,this.Ya)},r.ya=function(t,e){var i=E(t);if(i===k)return e;var n=this.M(i).ya(Ma(t),e);return this.H(i,n)},r.f=function(){return this.o.f()},r.Ub=function(){return this.o.count()};var mc=/^\d+$/;r=O.prototype,r.V=function(t){if(this.f())return k;var e={},i=0,n=0,s=j;if(this.w(function(o,r){e[o]=r.V(t),i++,s&&mc.test(o)?n=Math.max(n,Number(o)):s=l}),!t&&s&&2*i>n){var o,r=[];for(o in e)r[o]=e[o];return r}return t&&this.j()!==k&&(e[".priority"]=this.j()),e},r.hash=function(){var t="";return this.j()!==k&&(t+="priority:"+hc(this.j())+":"),this.w(function(e,i){var n=i.hash();""!==n&&(t+=":"+e+":"+n)}),""===t?"":Pb(t)},r.M=function(t){return t=this.o.get(t),t===k?N:t},r.Q=function(t){var e=E(t);return e===k?this:this.M(e).Q(Ma(t))},r.ea=function(t){return Xa(this.o,t)},r.cd=function(){return this.o.tb()},r.dd=function(){return this.o.Va()},r.w=function(t){return this.o.Ca(t)},r.yc=function(t){return this.o.Ma(t)},r.Ua=function(){return this.o.Ua()},r.toString=function(){var t="{",e=j;return this.w(function(i,n){e?e=l:t+=", ",t+='"'+i+'" : '+n.toString()}),t+="}"};var N=new O;la(lc,O),r=lc.prototype,r.H=function(t,e){var i=this.M(t),n=this.o,s=this.ua;return i!==k&&(n=n.remove(t),s=s.remove({name:t,ia:i.j()})),e&&e.f()&&(e=k),e!==k&&(n=n.oa(t,e),s=s.oa({name:t,ia:e.j()},e)),new lc(n,s,this.j())},r.ea=function(t,e){var i=Xa(this.ua,{name:t,ia:e.j()});return i?i.name:k},r.w=function(t){return this.ua.Ca(function(e,i){return t(e.name,i)})},r.yc=function(t){return this.ua.Ma(function(e,i){return t(e.name,i)})},r.Ua=function(){return this.ua.Ua(function(t,e){return{key:t.name,value:e}})},r.cd=function(){return this.ua.f()?k:this.ua.tb().name},r.dd=function(){return this.ua.f()?k:this.ua.Va().name};var oc=Math.log(2);R.prototype.V=function(){return z("Firebase.DataSnapshot.val",0,0,arguments.length),this.z.V()},R.prototype.val=R.prototype.V,R.prototype.Ad=function(){return z("Firebase.DataSnapshot.exportVal",0,0,arguments.length),this.z.V(j)},R.prototype.exportVal=R.prototype.Ad,R.prototype.F=function(t){z("Firebase.DataSnapshot.child",0,1,arguments.length),ha(t)&&(t=String(t)),Ia("Firebase.DataSnapshot.child",t);var e=new J(t),i=this.ec.F(e);return new R(this.z.Q(e),i)},R.prototype.child=R.prototype.F,R.prototype.Cc=function(t){z("Firebase.DataSnapshot.hasChild",1,1,arguments.length),Ia("Firebase.DataSnapshot.hasChild",t);var e=new J(t);return!this.z.Q(e).f()},R.prototype.hasChild=R.prototype.Cc,R.prototype.j=function(){return z("Firebase.DataSnapshot.getPriority",0,0,arguments.length),this.z.j()},R.prototype.getPriority=R.prototype.j,R.prototype.forEach=function(t){if(z("Firebase.DataSnapshot.forEach",1,1,arguments.length),B("Firebase.DataSnapshot.forEach",1,t,l),this.z.N())return l;var e=this;return this.z.w(function(i,n){return t(new R(n,e.ec.F(i)))})},R.prototype.forEach=R.prototype.forEach,R.prototype.nb=function(){return z("Firebase.DataSnapshot.hasChildren",0,0,arguments.length),this.z.N()?l:!this.z.f()},R.prototype.hasChildren=R.prototype.nb,R.prototype.name=function(){return z("Firebase.DataSnapshot.name",0,0,arguments.length),this.ec.name()},R.prototype.name=R.prototype.name,R.prototype.Ub=function(){return z("Firebase.DataSnapshot.numChildren",0,0,arguments.length),this.z.Ub()},R.prototype.numChildren=R.prototype.Ub,R.prototype.Nc=function(){return z("Firebase.DataSnapshot.ref",0,0,arguments.length),this.ec},R.prototype.ref=R.prototype.Nc,rc.prototype.Ac=function(){},rc.prototype.Xc=function(t){for(var e=this.sb[t]||[],i=0;i<e.length;i++)e[i].X.apply(e[i].T,Array.prototype.slice.call(arguments,1))},rc.prototype.Xa=function(t,e,i){sc(this,t),this.sb[t]=this.sb[t]||[],this.sb[t].push({X:e,T:i}),(t=this.Ac(t))&&e.apply(i,t)},rc.prototype.ub=function(t,e,i){sc(this,t);for(var t=this.sb[t]||[],n=0;n<t.length;n++)if(t[n].X===e&&(!i||i===t[n].T)){t.splice(n,1);break}},la(tc,rc),ea(tc),tc.prototype.Ac=function(t){return y("visible"===t),[this.gb]},wc.prototype.get=function(){return vc(this.jb)},yc.prototype.get=function(){var t=this.xd.get(),e=vc(t);if(this.Qb)for(var i in this.Qb)e[i]-=this.Qb[i];return this.Qb=t,e},zc.prototype.kd=function(){var t,e=this.kc.get(),i={},n=l;for(t in e)0<e[t]&&C(this.Sc,t)&&(i[t]=e[t],n=j);n&&(e=this.u,e.P&&(i={c:i},e.e("reportStats",i),e.Ga("s",i))),setTimeout(v(this.kd,this),6e5*Math.random())};var Ac={},Bc={};r=Dc.prototype,r.add=function(t,e){this.set[t]=e!==k?e:j},r.contains=function(t){return C(this.set,t)},r.get=function(t){return this.contains(t)?this.set[t]:aa},r.remove=function(t){delete this.set[t]},r.f=function(){var t;t:{for(t in this.set){t=l;break t}t=j}return t},r.count=function(){var t,e=0;for(t in this.set)e++;return e},r.keys=function(){var t,e=[];for(t in this.set)C(this.set,t)&&e.push(t);return e};var Fc="pLPCommand",Gc="pRTLPCB",Ic,Jc;Hc.prototype.open=function(t,e){function i(){if(!n.Ja){n.ka=new Kc(function(t,e,i){if(xc(n.$,"bytes_received",w(arguments).length),n.ka)if(n.ba&&(clearTimeout(n.ba),n.ba=k),n.kb=j,"start"==t)n.id=e,n.jd=i;else if("close"===t)if(e){n.ka.ic=l;var s=n.fd;s.tc=e,s.Ka=function(){n.Fa()},s.tc<s.Qa&&(s.Ka(),s.Ka=k)}else n.Fa();else g(Error("Unrecognized command received: "+t))},function(t,e){xc(n.$,"bytes_received",w(arguments).length);var i=n.fd;for(i.ac[t]=e;i.ac[i.Qa];){var s=i.ac[i.Qa];delete i.ac[i.Qa];for(var o=0;o<s.length;++o)if(s[o]){var r=i;fc(function(){r.Jc(s[o])})}if(i.Qa===i.tc){i.Ka&&(clearTimeout(i.Ka),i.Ka(),i.Ka=k);break}i.Qa++}},function(){n.Fa()},n.Lb);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.ka.mc&&(t.cb=n.ka.mc),t.v="5",n.jc&&(t.s=n.jc),t=n.Lb(t),n.e("Connecting via long-poll to "+t),Lc(n.ka,t,function(){})}}this.Zc=0,this.R=e,this.fd=new uc(t),this.Ja=l;var n=this;if(this.ba=setTimeout(function(){n.e("Timed out trying to connect."),n.Fa(),n.ba=k},3e4),"complete"===document.readyState)i();else{var s=l,o=function(){document.body?s||(s=j,i()):setTimeout(o,10)};document.addEventListener?(document.addEventListener("DOMContentLoaded",o,l),window.addEventListener("load",o,l)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&o()},l),window.attachEvent("onload",o,l))}},Hc.prototype.start=function(){var t=this.ka,e=this.jd;for(t.Gd=this.id,t.Hd=e,t.pc=j;Mc(t););t=this.id,e=this.jd,this.Wa=document.createElement("iframe");var i={dframe:"t"};i.id=t,i.pw=e,t=this.Lb(i),this.Wa.src=t,this.Wa.style.display="none",document.body.appendChild(this.Wa)},Hc.isAvailable=function(){return!(Jc||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.Wd||!Ic&&!j)},Hc.prototype.Ib=function(){this.Ja=j,this.ka&&(this.ka.close(),this.ka=k),this.Wa&&(document.body.removeChild(this.Wa),this.Wa=k),this.ba&&(clearTimeout(this.ba),this.ba=k)},Hc.prototype.Fa=function(){this.Ja||(this.e("Longpoll is closing itself"),this.Ib(),this.R&&(this.R(this.kb),this.R=k))},Hc.prototype.close=function(){this.Ja||(this.e("Longpoll is being closed."),this.Ib())},Hc.prototype.send=function(t){t=w(t),xc(this.$,"bytes_sent",t.length);for(var t=ta(t),t=Mb(t,j),t=ac(t,1840),e=0;e<t.length;e++){var i=this.ka;i.Cb.push({Qd:this.Zc,Vd:t.length,ad:t[e]}),i.pc&&Mc(i),this.Zc++}},Kc.prototype.close=function(){if(this.pc=l,this.Y){this.Y.Aa.body.innerHTML="";var t=this;setTimeout(function(){t.Y!==k&&(document.body.removeChild(t.Y),t.Y=k)},0)}var e=this.ha;e&&(this.ha=k,e())};var Nc=k;"undefined"!=typeof MozWebSocket?Nc=MozWebSocket:"undefined"!=typeof WebSocket&&(Nc=WebSocket);var Oc;S.prototype.open=function(t,e){this.ha=e,this.Id=t,this.e("Websocket connecting to "+this.Pa),this.W=new Nc(this.Pa),this.kb=l,nb.set("previous_websocket_failure",j);var i=this;this.ba=setTimeout(function(){i.e("Websocket timed out trying to connect."),Pc(i),i.Fa()},3e4),this.W.onopen=function(){i.e("Websocket connected."),i.kb=j,Pc(i),nb.remove("previous_websocket_failure")},this.W.onclose=function(){i.e("Websocket connection was disconnected."),i.W=k,i.Fa()},this.W.onmessage=function(t){if(i.W!==k)if(t=t.data,xc(i.$,"bytes_received",t.length),Qc(i),i.frames!==k)Rc(i,t);else{t:{if(y(i.frames===k,"We already have a frame buffer"),6>=t.length){var e=Number(t);if(!isNaN(e)){i.Uc=e,i.frames=[],t=k;break t}}i.Uc=1,i.frames=[]}t!==k&&Rc(i,t)}},this.W.onerror=function(t){i.e("WebSocket error.  Closing connection."),t.data&&i.e(t.data),i.Fa()}},S.prototype.start=function(){},S.isAvailable=function(){var t=l;if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&1<e.length&&4.4>parseFloat(e[1])&&(t=j)}return!t&&Nc!==k&&!Oc},S.prototype.send=function(t){Qc(this),t=w(t),xc(this.$,"bytes_sent",t.length),t=ac(t,16384),1<t.length&&this.W.send(String(t.length));for(var e=0;e<t.length;e++)this.W.send(t[e])},S.prototype.Ib=function(){this.Ja=j,Pc(this),this.qb&&(clearInterval(this.qb),this.qb=k),this.W&&(this.W.close(),this.W=k)},S.prototype.Fa=function(){this.Ja||(this.e("WebSocket is closing itself"),this.Ib(),this.ha&&(this.ha(this.kb),this.ha=k))},S.prototype.close=function(){this.Ja||(this.e("WebSocket is being closed"),this.Ib())};var Tc=[Hc,{isAvailable:o(l)},S];Uc.prototype.od=function(t){t={t:"d",d:t},1!==this.wa&&g("Connection is not connected"),this.Jb.send(t)},Uc.prototype.Xb=function(t){this.Jc(t)},Uc.prototype.close=function(){2!==this.wa&&(this.e("Closing realtime connection."),this.wa=2,$c(this),this.R&&(this.R(),this.R=k))},la(ad,rc),ea(ad),ad.prototype.Ac=function(t){return y("online"===t),[this.yb]};var cd=0,ed=0;r=bd.prototype,r.Ga=function(t,e,i){var n=++this.Pd,t={r:n,a:t,b:e};this.e(w(t)),y(this.P,"sendRequest_ call when we're not connected not allowed."),this.ja.od(t),i&&(this.Gb[n]=i)},r.hb=function(t,e,i){if(this.Ha={yd:t,bd:l,X:e,Nb:i},this.e("Authenticating using credential: "+this.Ha),hd(this),!(e=40==t.length))t:{var n;try{var s=t.split(".");if(3!==s.length){e=l;break t}var o;e:{try{if("undefined"!=typeof atob){o=atob(s[1]);break e}}catch(r){L("base64DecodeIfNativeSupport failed: ",r)}o=k}o!==k&&(n=sa(o))}catch(a){L("isAdminAuthToken_ failed",a)}e="object"==typeof n&&wa(n,"admin")===j}e&&(this.e("Admin auth credential detected.  Reducing max reconnect time."),this.Rb=3e4)},r.Kb=function(t){delete this.Ha,this.vb(l),this.P&&this.Ga("unauth",{},function(e){t(e.s)})},r.Hc=function(t,e){this.P?kd(this,"oc",t,k,e):this.wb.push({Mc:t,action:"oc",data:k,C:e})},r.put=function(t,e,i,n){ld(this,"p",t,e,i,n)},r.Xb=function(t){if("r"in t){this.e("from server: "+w(t));var e=t.r,i=this.Gb[e];i&&(delete this.Gb[e],i(t.b))}else"error"in t&&g("A server-side error has occurred: "+t.error),"a"in t&&(e=t.a,t=t.b,this.e("handleServerMessage",e,t),"d"===e?this.Yb(t.p,t.d):"m"===e?this.Yb(t.p,t.d,j):"c"===e?(e=t.p,t=(t=t.q)?wb(t,function(t){return La(t)}).join("$"):"{}",(t=gd(this,e,t))&&t.C&&t.C("permission_denied")):"ac"===e?(e=t.s,t=t.d,i=this.Ha,delete this.Ha,i&&i.Nb&&i.Nb(e,t),this.vb(l)):"sd"===e?this.Oc?this.Oc(t):"msg"in t&&"undefined"!=typeof console&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: ")):Vb("Unrecognized action received from server: "+w(e)+"\nAre you using the latest client?"))},r.xb=function(t){this.e("connection ready"),this.P=j,this.rb=(new Date).getTime(),this.Kc({serverTimeOffset:t-(new Date).getTime()}),hd(this);for(var e in this.ga)for(var i in this.ga[e])t=this.ga[e][i],fd(this,e,i,t.Za,t.C);for(e=0;e<this.U.length;e++)this.U[e]&&md(this,e);for(;this.wb.length;)e=this.wb.shift(),kd(this,e.action,e.Mc,e.data,e.C);this.Wb(j)},r.Kd=function(t){t&&!this.gb&&this.qa===this.Rb&&(this.e("Window became visible.  Reducing delay."),this.qa=1e3,this.ja||dd(this,0)),this.gb=t},r.Jd=function(t){t?(this.e("Browser went online.  Reconnecting."),this.qa=1e3,this.Na=j,this.ja||dd(this,0)):(this.e("Browser went offline.  Killing connection; don't reconnect."),this.Na=l,this.ja&&this.ja.close())},r.gd=function(){this.e("data client disconnected"),this.P=l,this.ja=k;for(var t=0;t<this.U.length;t++){var e=this.U[t];e&&"h"in e.ld&&e.Md&&(e.C&&e.C("disconnect"),delete this.U[t],this.zb--)}if(0===this.zb&&(this.U=[]),this.Na)this.gb?this.rb&&(3e4<(new Date).getTime()-this.rb&&(this.qa=1e3),this.rb=k):(this.e("Window isn't visible.  Delaying reconnect."),this.qa=this.Rb,this.Fc=(new Date).getTime()),t=Math.max(0,this.qa-((new Date).getTime()-this.Fc)),t*=Math.random(),this.e("Trying to reconnect in "+t+"ms"),dd(this,t),this.qa=Math.min(this.Rb,1.3*this.qa);else for(var i in this.Gb)delete this.Gb[i];this.Wb(l)},r.Ia=function(){this.Na=l,this.ja?this.ja.close():(this.Sa&&(clearTimeout(this.Sa),this.Sa=k),this.P&&this.gd())},r.ab=function(){this.Na=j,this.qa=1e3,this.P||dd(this,0)},nd.prototype.w=function(t){this.o!==k&&Ec(this.o,function(e,i){t(e,i)})},rd.prototype.toString=function(){return this.ra.toString()},sd.prototype.set=function(t,e){var i=this,n=[];return vb(e,function(t){var e=t.path,t=t.pa,s=Nb();Qa(K(i.Bb,e),s),U(i.I,e,t),n.push({path:e,Rd:s})}),n},wd.prototype.Eb=function(){for(var t=0;t<this.Ta.length;t++)if(this.Ta[t]){var e=this.Ta[t];this.Ta[t]=k,yd(e)}this.Ta=[]},zd.prototype.cc=function(t,e){e=this.dc(t,e),e!=k&&Cd(this,e)},zd.prototype.Eb=function(){this.xc.Eb()},la(Fd,zd),Fd.prototype.dc=function(t,e){return this.i=t,this.pb&&e!=k&&e.push(new V("value",this.i)),e},Fd.prototype.lb=function(){return{}},la(Kd,Dc),r=Kd.prototype,r.setActive=function(t){this.xa=t},r.defaultView=function(){return Ld(this)?this.get("default"):k},r.path=ba("S"),r.toString=function(){return wb(this.keys(),function(t){return"default"===t?"{}":t}).join("$")},r.Za=function(){var t=[];return Ec(this,function(e,i){t.push(i.J)}),t},la(Nd,zd),Nd.prototype.dc=function(t,e){if(e===k)return e;var i=[],n=this.J;s(n.da)&&i.push(s(n.va)&&n.va!=k?function(t,e){var i=Xb(e,n.da);return i>0||0===i&&0<=Yb(t,n.va)}:function(t,e){return 0<=Xb(e,n.da)}),s(n.Ba)&&i.push(s(n.Ra)?function(t,e){var i=Xb(e,n.Ba);return 0>i||0===i&&0>=Yb(t,n.Ra)}:function(t,e){return 0>=Xb(e,n.Ba)});var o=k,r=k;if(s(this.J.Da))if(s(this.J.da)){if(o=Od(t,i,this.J.Da,l)){var a=t.M(o).j();i.push(function(t,e){var i=Xb(e,a);return 0>i||0===i&&0>=Yb(t,o)})}}else if(r=Od(t,i,this.J.Da,j)){var c=t.M(r).j();i.push(function(t,e){var i=Xb(e,c);return i>0||0===i&&0<=Yb(t,r)})}for(var u=[],h=[],p=[],d=[],f=0;f<e.length;f++){var m=e[f].aa,g=e[f].ta;switch(e[f].type){case"child_added":Pd(i,m,g)&&(this.i=this.i.H(m,g),h.push(e[f]));break;case"child_removed":this.i.M(m).f()||(this.i=this.i.H(m,k),u.push(e[f]));break;case"child_changed":!this.i.M(m).f()&&Pd(i,m,g)&&(this.i=this.i.H(m,g),d.push(e[f]));break;case"child_moved":var v=!this.i.M(m).f(),y=Pd(i,m,g);v?y?(this.i=this.i.H(m,g),p.push(e[f])):(u.push(new V("child_removed",this.i.M(m),m)),this.i=this.i.H(m,k)):y&&(this.i=this.i.H(m,g),h.push(e[f]))}}var b=o||r;if(b){var _=(f=r!==k)?this.i.cd():this.i.dd(),w=l,x=l,S=this;(f?t.yc:t.w).call(t,function(t,e){return!x&&_===k&&(x=j),x&&w?j:(w?(u.push(new V("child_removed",S.i.M(t),t)),S.i=S.i.H(t,k)):x&&(h.push(new V("child_added",e,t)),S.i=S.i.H(t,e)),_===t&&(x=j),void(t===b&&(w=j)))})}for(f=0;f<h.length;f++)i=h[f],m=this.i.ea(i.aa,i.ta),u.push(new V("child_added",i.ta,i.aa,m));for(f=0;f<p.length;f++)i=p[f],m=this.i.ea(i.aa,i.ta),u.push(new V("child_moved",i.ta,i.aa,m));for(f=0;f<d.length;f++)i=d[f],m=this.i.ea(i.aa,i.ta),u.push(new V("child_changed",i.ta,i.aa,m));return this.pb&&0<u.length&&u.push(new V("value",this.i)),u},Nd.prototype.Cc=function(t){return this.i.M(t)!==N},Nd.prototype.lb=function(t,e,i){var n={};this.i.N()||this.i.w(function(t){n[t]=3});var s=this.i,i=T(i,new J("")),o=new Pa;Qa(K(o,this.J.path),j);var e=N.ya(t,e),r=this;return Hd(i,e,t,o,function(t,e,i){i!==k&&t.toString()===r.J.path.toString()&&r.dc(e,i)}),this.i.N()?cc(n,function(t,e){n[e]=2}):(this.i.w(function(t){C(n,t)||(n[t]=1)}),cc(n,function(t,e){r.i.M(e).f()&&(n[e]=2)})),this.i=s,n},Qd.prototype.Mb=function(t,e,i,n,s){var o=t.path,r=K(this.la,o),a=r.k();a===k?(a=new Kd,Qa(r,a)):y(!a.f(),"We shouldn't be storing empty QueryMaps");var c=t.La();if(a.contains(c))t=a.get(c),Ad(t,e,i,n,s);else{var u=this.g.ra.Q(o),u=t="default"===t.La()?new Fd(t,u):new Nd(t,u);if(Md(a)||Rd(r))a.add(c,u),a.S||(a.S=u.J.path);else{var h,l;a.f()||(h=a.toString(),l=a.Za()),a.add(c,u),a.S||(a.S=u.J.path),a.setActive(Sd(this,a)),h&&l&&id(this.u,a.path(),h,l)}Md(a)&&Sa(r,function(t){(t=t.k())&&(t.xa&&t.xa(),t.xa=k)}),Ad(t,e,i,n,s),(e=(e=Ta(K(this.la,o),function(t){var e;return(e=t.k())&&(e=t.k().defaultView())&&(e=t.k().defaultView().pb),e?j:void 0},j))||this.u===k&&!T(this.g,o).f())&&Ed(t)}t.Eb()},Qd.prototype.fc=function(t,e,i,n){var s=K(this.la,t.path).k();return s===k?k:Ud(this,s,t,e,i,n)},Qd.prototype.cc=function(t,e,i){t=K(this.la,t).k(),t!==k&&Ec(t,function(t,n){n.cc(e,i)})},Qd.prototype.lb=function(t,e,i,n){var s={};return Ec(e,function(e,o){var r=o.lb(t,i,n);cc(r,function(t,e){s[e]=3===t?3:(wa(s,e)||t)===t?t:3})}),i.N()||i.w(function(t){C(s,t)||(s[t]=4)}),s},r=be.prototype,r.toString=function(){return(this.K.hc?"https://":"http://")+this.K.host},r.name=function(){return this.K.Sb},r.Yb=function(t,e,i){this.wc++;var n,s,o=[];for(9<=t.length&&t.lastIndexOf(".priority")===t.length-9?(n=new J(t.substring(0,t.length-9)),s=T(this.g.sa,n).za(e),o.push(n)):i?(n=new J(t),s=T(this.g.sa,n),cc(e,function(t,e){var i=new J(e);".priority"===e?s=s.za(t):(s=s.ya(i,Q(t)),o.push(n.F(e)))})):(n=new J(t),s=Q(e),o.push(n)),t=Zd(this.G,n,s,this.g.I),e=l,i=0;i<t.length;++i){var r=t[i],a=this.g,c=r.path;U(a.sa,c,r.pa),e=td(a,c)||e}e&&(n=fe(this,n)),W(this.G,n,o)},r.Wb=function(t){if(ce(this,"connected",t),t===l){this.e("onDisconnectEvents");var e=this,i=[],n=ee(this),t=qd,s=new nd;qd(this.R,new J(""),function(t,e){od(s,t,ae(e,n))}),t(s,new J(""),function(t,n){var s=Zd(e.G,t,n,e.g.I);i.push.apply(i,e.g.set(t,s)),s=ge(e,t),fe(e,s),W(e.G,s,[t])}),vd(this.g,i),this.R=new nd}},r.Kc=function(t){var e=this;bc(t,function(t,i){ce(e,i,t)})},r.Bc=function(t){return t=new J(t),T(this.g.sa,t).hash()},r.vb=function(t){ce(this,"authenticated",t)},r.hb=function(t,e,i){"firebaseio-demo.com"===this.K.domain&&M("FirebaseRef.auth() not supported on demo (*.firebaseio-demo.com) Firebases. Please use on production (*.firebaseio.com) Firebases only."),this.u.hb(t,function(t,i){X(e,t,i)},function(t,e){if(M("auth() was canceled: "+e),i){var n=Error(e);n.code=t.toUpperCase(),i(n)}})},r.Kb=function(t){this.u.Kb(function(e){X(t,e)})},r.bb=function(t,e,i,n){this.e("set",{path:t.toString(),value:e,ia:i});var s=ee(this),e=Q(e,i),s=ae(e,s),s=Zd(this.G,t,s,this.g.I),o=this.g.set(t,s),r=this;this.u.put(t.toString(),e.V(j),function(e){"ok"!==e&&M("set at "+t+" failed: "+e),vd(r.g,o),td(r.g,t);var i=fe(r,t);W(r.G,i,[]),X(n,e)}),s=ge(this,t),fe(this,s),W(this.G,s,[t])},r.update=function(t,e,i){this.e("update",{path:t.toString(),value:e});var n,s=T(this.g.ma,t),o=j,r=[],a=ee(this),c=[];for(n in e){var o=l,u=Q(e[n]),u=ae(u,a),s=s.H(n,u),h=t.F(n);
r.push(h),u=Zd(this.G,h,u,this.g.I),c=c.concat(this.g.set(t,u))}if(o)L("update() called with empty data.  Don't do anything."),X(i,"ok");else{var p=this;ld(this.u,"m",t.toString(),e,function(e){y("ok"===e||"permission_denied"===e,"merge at "+t+" failed."),"ok"!==e&&M("update at "+t+" failed: "+e),vd(p.g,c),td(p.g,t);var n=fe(p,t);W(p.G,n,[]),X(i,e)},aa),e=ge(this,t),fe(this,e),W(p.G,e,r)}},r.Pc=function(t,e,i){this.e("setPriority",{path:t.toString(),ia:e});var n=ee(this),n=$d(e,n),n=T(this.g.I,t).za(n),n=Zd(this.G,t,n,this.g.I),s=this.g.set(t,n),o=this;this.u.put(t.toString()+"/.priority",e,function(e){"permission_denied"===e&&M("setPriority at "+t+" failed: "+e),vd(o.g,s),td(o.g,t);var n=fe(o,t);W(o.G,n,[]),X(i,e)}),e=fe(this,t),W(o.G,e,[])},r.Hc=function(t,e){var i=this;this.u.Hc(t.toString(),function(n){"ok"===n&&pd(i.R,t),X(e,n)})},r.Mb=function(t,e,i,n,s){".info"===E(t.path)?this.Ec.Mb(t,e,i,n,s):this.G.Mb(t,e,i,n,s)},r.fc=function(t,e,i,n){if(".info"===E(t.path))this.Ec.fc(t,e,i,n);else{if(e=this.G.fc(t,e,i,n),i=e!==k){for(var i=this.g,n=t.path,s=[],o=0;o<e.length;++o)s[o]=T(i.sa,e[o]);for(U(i.sa,n,N),o=0;o<e.length;++o)U(i.sa,e[o],s[o]);i=td(i,n)}i&&(y(this.g.ma.ra===this.G.Vb,"We should have raised any outstanding events by now.  Else, we'll blow them away."),U(this.g.ma,t.path,T(this.g.I,t.path)),this.G.Vb=this.g.ma.ra)}},r.Ia=function(){this.u.Ia()},r.ab=function(){this.u.ab()},r.Qc=function(t){if("undefined"!=typeof console){t?(this.kc||(this.kc=new yc(this.$)),t=this.kc.get()):t=this.$.get();var e,i=t,n=[],s=0;for(e in i)n[s++]=e;var o=function(t,e){return Math.max(e.length,t)};if(n.reduce)e=n.reduce(o,0);else{var r=0;vb(n,function(t){r=o.call(aa,r,t)}),e=r}for(var a in t){for(i=t[a],n=a.length;e+2>n;n++)a+=" ";console.log(a+i)}}},r.Rc=function(t){xc(this.$,t),this.qd.Sc[t]=j},r.e=function(){L("r:"+this.u.id+":",arguments)},ea(Y),Y.prototype.Ia=function(){for(var t in this.$a)this.$a[t].Ia()},Y.prototype.interrupt=Y.prototype.Ia,Y.prototype.ab=function(){for(var t in this.$a)this.$a[t].ab()},Y.prototype.resume=Y.prototype.ab;var Z={Dd:function(t){var e=O.prototype.hash;O.prototype.hash=t;var i=gc.prototype.hash;return gc.prototype.hash=t,function(){O.prototype.hash=e,gc.prototype.hash=i}}};Z.hijackHash=Z.Dd,Z.La=function(t){return t.La()},Z.queryIdentifier=Z.La,Z.Fd=function(t){return t.n.u.ga},Z.listens=Z.Fd,Z.Nd=function(t){return t.n.u.ja},Z.refConnection=Z.Nd,Z.sd=bd,Z.DataConnection=Z.sd,bd.prototype.sendRequest=bd.prototype.Ga,bd.prototype.interrupt=bd.prototype.Ia,Z.td=Uc,Z.RealTimeConnection=Z.td,Uc.prototype.sendRequest=Uc.prototype.od,Uc.prototype.close=Uc.prototype.close,Z.rd=pb,Z.ConnectionTarget=Z.rd,Z.Bd=function(){Ic=Oc=j},Z.forceLongPolling=Z.Bd,Z.Cd=function(){Jc=j},Z.forceWebSockets=Z.Cd,Z.Td=function(t,e){t.n.u.Oc=e},Z.setSecurityDebugCallback=Z.Td,Z.Qc=function(t,e){t.n.Qc(e)},Z.stats=Z.Qc,Z.Rc=function(t,e){t.n.Rc(e)},Z.statsIncrementCounter=Z.Rc,Z.wc=function(t){return t.n.wc},$.prototype.cancel=function(t){z("Firebase.onDisconnect().cancel",0,1,arguments.length),B("Firebase.onDisconnect().cancel",1,t,j),this.Fb.Hc(this.S,t)},$.prototype.cancel=$.prototype.cancel,$.prototype.remove=function(t){z("Firebase.onDisconnect().remove",0,1,arguments.length),D("Firebase.onDisconnect().remove",this.S),B("Firebase.onDisconnect().remove",1,t,j),he(this.Fb,this.S,k,t)},$.prototype.remove=$.prototype.remove,$.prototype.set=function(t,e){z("Firebase.onDisconnect().set",1,2,arguments.length),D("Firebase.onDisconnect().set",this.S),Aa("Firebase.onDisconnect().set",t,l),B("Firebase.onDisconnect().set",2,e,j),he(this.Fb,this.S,t,e)},$.prototype.set=$.prototype.set,$.prototype.bb=function(t,e,i){z("Firebase.onDisconnect().setWithPriority",2,3,arguments.length),D("Firebase.onDisconnect().setWithPriority",this.S),Aa("Firebase.onDisconnect().setWithPriority",t,l),Fa("Firebase.onDisconnect().setWithPriority",2,e,l),B("Firebase.onDisconnect().setWithPriority",3,i,j),(".length"===this.Ea||".keys"===this.Ea)&&g("Firebase.onDisconnect().setWithPriority failed: "+this.Ea+" is a read-only object.");var n=this.Fb,s=this.S,o=Q(t,e);jd(n.u,s.toString(),o.V(j),function(t){"ok"===t&&od(n.R,s,o),X(i,t)})},$.prototype.setWithPriority=$.prototype.bb,$.prototype.update=function(t,e){z("Firebase.onDisconnect().update",1,2,arguments.length),D("Firebase.onDisconnect().update",this.S),Ea("Firebase.onDisconnect().update",t),B("Firebase.onDisconnect().update",2,e,j);var i,n=this.Fb,s=this.S,o=j;for(i in t)o=l;if(o)L("onDisconnect().update() called with empty data.  Don't do anything."),X(e,j);else{o=n.u,i=s.toString();var r=function(i){if("ok"===i)for(var o in t){var r=Q(t[o]);od(n.R,s.F(o),r)}X(e,i)};o.P?kd(o,"om",i,t,r):o.wb.push({Mc:i,action:"om",data:t,C:r})}},$.prototype.update=$.prototype.update;var qe,re=0,se=[];qe=function(t){var e=t===re;re=t;for(var i=Array(8),n=7;n>=0;n--)i[n]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(t%64),t=Math.floor(t/64);if(y(0===t),t=i.join(""),e){for(n=11;n>=0&&63===se[n];n--)se[n]=0;se[n]++}else for(n=0;12>n;n++)se[n]=Math.floor(64*Math.random());for(n=0;12>n;n++)t+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(se[n]);return y(20===t.length,"NextPushId: Length should be 20."),t},la(H,F);var te=H,ue=["Firebase"],ve=ca;!(ue[0]in ve)&&ve.execScript&&ve.execScript("var "+ue[0]);for(var we;ue.length&&(we=ue.shift());)!ue.length&&s(te)?ve[we]=te:ve=ve[we]?ve[we]:ve[we]={};H.prototype.name=function(){return z("Firebase.name",0,0,arguments.length),this.path.f()?k:this.path.Z<this.path.m.length?this.path.m[this.path.m.length-1]:k},H.prototype.name=H.prototype.name,H.prototype.F=function(t){if(z("Firebase.child",1,1,arguments.length),ha(t))t=String(t);else if(!(t instanceof J))if(E(this.path)===k){var e=t;e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Ia("Firebase.child",e)}else Ia("Firebase.child",t);return new H(this.n,this.path.F(t))},H.prototype.child=H.prototype.F,H.prototype.parent=function(){z("Firebase.parent",0,0,arguments.length);var t=this.path.parent();return t===k?k:new H(this.n,t)},H.prototype.parent=H.prototype.parent,H.prototype.root=function(){z("Firebase.ref",0,0,arguments.length);for(var t=this;t.parent()!==k;)t=t.parent();return t},H.prototype.root=H.prototype.root,H.prototype.toString=function(){z("Firebase.toString",0,0,arguments.length);var t;if(this.parent()===k)t=this.n.toString();else{t=this.parent().toString()+"/";var e=this.name();t+=encodeURIComponent(String(e))}return t},H.prototype.toString=H.prototype.toString,H.prototype.set=function(t,e){return z("Firebase.set",1,2,arguments.length),D("Firebase.set",this.path),Aa("Firebase.set",t,l),B("Firebase.set",2,e,j),this.n.bb(this.path,t,k,e)},H.prototype.set=H.prototype.set,H.prototype.update=function(t,e){return z("Firebase.update",1,2,arguments.length),D("Firebase.update",this.path),Ea("Firebase.update",t),B("Firebase.update",2,e,j),C(t,".priority")&&g(Error("update() does not currently support updating .priority.")),this.n.update(this.path,t,e)},H.prototype.update=H.prototype.update,H.prototype.bb=function(t,e,i){return z("Firebase.setWithPriority",2,3,arguments.length),D("Firebase.setWithPriority",this.path),Aa("Firebase.setWithPriority",t,l),Fa("Firebase.setWithPriority",2,e,l),B("Firebase.setWithPriority",3,i,j),(".length"===this.name()||".keys"===this.name())&&g("Firebase.setWithPriority failed: "+this.name()+" is a read-only object."),this.n.bb(this.path,t,e,i)},H.prototype.setWithPriority=H.prototype.bb,H.prototype.remove=function(t){z("Firebase.remove",0,1,arguments.length),D("Firebase.remove",this.path),B("Firebase.remove",1,t,j),this.set(k,t)},H.prototype.remove=H.prototype.remove,H.prototype.transaction=function(t,e,i){function n(){}z("Firebase.transaction",1,3,arguments.length),D("Firebase.transaction",this.path),B("Firebase.transaction",1,t,l),B("Firebase.transaction",2,e,j),s(i)&&"boolean"!=typeof i&&g(Error(A("Firebase.transaction",3,j)+"must be a boolean.")),(".length"===this.name()||".keys"===this.name())&&g("Firebase.transaction failed: "+this.name()+" is a read-only object."),"undefined"==typeof i&&(i=j);var o=this.n,r=this.path,a=i;o.e("transaction on "+r);var c=new H(o,r);c.Xa("value",n);var a={path:r,update:t,C:e,status:k,hd:Nb(),qc:a,nd:0,nc:function(){c.ub("value",n)},oc:k},u=a.update(T(o.fb,r).V());if(s(u)){Ba("transaction failed: Data returned ",u),a.status=1;var h=K(o.eb,r),p=h.k()||[];p.push(a),Qa(h,p),p="object"==typeof u&&u!==k&&C(u,".priority")?u[".priority"]:T(o.g.I,r).j(),h=ee(o),u=Q(u,p),u=ae(u,h),U(o.fb,r,u),a.qc&&(U(o.g.ma,r,u),W(o.G,r,[r])),je(o)}else a.nc(),a.C&&(o=me(o,r),a.C(k,l,o))},H.prototype.transaction=H.prototype.transaction,H.prototype.Pc=function(t,e){z("Firebase.setPriority",1,2,arguments.length),D("Firebase.setPriority",this.path),Fa("Firebase.setPriority",1,t,l),B("Firebase.setPriority",2,e,j),this.n.Pc(this.path,t,e)},H.prototype.setPriority=H.prototype.Pc,H.prototype.push=function(t,e){z("Firebase.push",0,2,arguments.length),D("Firebase.push",this.path),Aa("Firebase.push",t,j),B("Firebase.push",2,e,j);var i=de(this.n),i=qe(i),i=this.F(i);return"undefined"!=typeof t&&t!==k&&i.set(t,e),i},H.prototype.push=H.prototype.push,H.prototype.ha=function(){return new $(this.n,this.path,this.name())},H.prototype.onDisconnect=H.prototype.ha,H.prototype.Od=function(){M("FirebaseRef.removeOnDisconnect() being deprecated. Please use FirebaseRef.onDisconnect().remove() instead."),this.ha().remove(),ie(this.n)},H.prototype.removeOnDisconnect=H.prototype.Od,H.prototype.Sd=function(t){M("FirebaseRef.setOnDisconnect(value) being deprecated. Please use FirebaseRef.onDisconnect().set(value) instead."),this.ha().set(t),ie(this.n)},H.prototype.setOnDisconnect=H.prototype.Sd,H.prototype.hb=function(t,e,i){z("Firebase.auth",1,3,arguments.length),u(t)||g(Error(A("Firebase.auth",1,l)+"must be a valid credential (a string).")),B("Firebase.auth",2,e,j),B("Firebase.auth",3,e,j),this.n.hb(t,e,i)},H.prototype.auth=H.prototype.hb,H.prototype.Kb=function(t){z("Firebase.unauth",0,1,arguments.length),B("Firebase.unauth",1,t,j),this.n.Kb(t)},H.prototype.unauth=H.prototype.Kb,H.goOffline=function(){z("Firebase.goOffline",0,0,arguments.length),Y.mb().Ia()},H.goOnline=function(){z("Firebase.goOnline",0,0,arguments.length),Y.mb().ab()},H.enableLogging=Tb,H.ServerValue={TIMESTAMP:{".sv":"timestamp"}},H.INTERNAL=Z,H.Context=Y}).bind(this)()}.bind(this)),require.register("app/vendor/handlebars.js",function(){!function(){var t=function(){function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){function e(t){return a[t]||"&amp;"}function i(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}function n(t){return t instanceof r?t.toString():t||0===t?(t=""+t,u.test(t)?t.replace(c,e):t):""}function s(t){return t||0===t?p(t)&&0===t.length?!0:!1:!0}var o={},r=t,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,u=/[&<>"'`]/;o.extend=i;var h=Object.prototype.toString;o.toString=h;var l=function(t){return"function"==typeof t};l(/x/)&&(l=function(t){return"function"==typeof t&&"[object Function]"===h.call(t)});var l;o.isFunction=l;var p=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===h.call(t):!1};return o.isArray=p,o.escapeExpression=n,o.isEmpty=s,o}(t),i=function(){function t(t,e){var n;e&&e.firstLine&&(n=e.firstLine,t+=" - "+n+":"+e.firstColumn);for(var s=Error.prototype.constructor.call(this,t),o=0;o<i.length;o++)this[i[o]]=s[i[o]];n&&(this.lineNumber=n,this.column=e.firstColumn)}var e,i=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,e=t}(),n=function(t,e){function i(t,e){this.helpers=t||{},this.partials=e||{},n(this)}function n(t){t.registerHelper("helperMissing",function(t){if(2===arguments.length)return void 0;throw new a("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,i){var n=i.inverse||function(){},s=i.fn;return p(e)&&(e=e.call(this)),e===!0?s(this):e===!1||null==e?n(this):l(e)?e.length>0?t.helpers.each(e,i):n(this):s(e)}),t.registerHelper("each",function(t,e){var i,n=e.fn,s=e.inverse,o=0,r="";if(p(t)&&(t=t.call(this)),e.data&&(i=g(e.data)),t&&"object"==typeof t)if(l(t))for(var a=t.length;a>o;o++)i&&(i.index=o,i.first=0===o,i.last=o===t.length-1),r+=n(t[o],{data:i});else for(var c in t)t.hasOwnProperty(c)&&(i&&(i.key=c,i.index=o,i.first=0===o),r+=n(t[c],{data:i}),o++);return 0===o&&(r=s(this)),r}),t.registerHelper("if",function(t,e){return p(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||r.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,i){return t.helpers["if"].call(this,e,{fn:i.inverse,inverse:i.fn,hash:i.hash})}),t.registerHelper("with",function(t,e){return p(t)&&(t=t.call(this)),r.isEmpty(t)?void 0:e.fn(t)}),t.registerHelper("log",function(e,i){var n=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;t.log(n,e)})}function s(t,e){m.log(t,e)}var o={},r=t,a=e,c="1.3.0";o.VERSION=c;var u=4;o.COMPILER_REVISION=u;var h={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};o.REVISION_CHANGES=h;var l=r.isArray,p=r.isFunction,d=r.toString,f="[object Object]";o.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:m,log:s,registerHelper:function(t,e,i){if(d.call(t)===f){if(i||e)throw new a("Arg not supported with multiple helpers");r.extend(this.helpers,t)}else i&&(e.not=i),this.helpers[t]=e},registerPartial:function(t,e){d.call(t)===f?r.extend(this.partials,t):this.partials[t]=e}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(m.level<=t){var i=m.methodMap[t];"undefined"!=typeof console&&console[i]&&console[i].call(console,e)}}};o.logger=m,o.log=s;var g=function(t){var e={};return r.extend(e,t),e};return o.createFrame=g,o}(e,i),s=function(t,e,i){function n(t){var e=t&&t[0]||1,i=p;if(e!==i){if(i>e){var n=d[i],s=d[e];throw new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+s+").")}throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function s(t,e){if(!e)throw new l("No environment passed to template");var i=function(t,i,n,s,o,r){var a=e.VM.invokePartial.apply(this,arguments);if(null!=a)return a;if(e.compile){var c={helpers:s,partials:o,data:r};return o[i]=e.compile(t,{data:void 0!==r},e),o[i](n,c)}throw new l("The partial "+i+" could not be compiled when running in runtime-only mode")},n={escapeExpression:h.escapeExpression,invokePartial:i,programs:[],program:function(t,e,i){var n=this.programs[t];return i?n=r(t,e,i):n||(n=this.programs[t]=r(t,e)),n},merge:function(t,e){var i=t||e;return t&&e&&t!==e&&(i={},h.extend(i,e),h.extend(i,t)),i},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(i,s){s=s||{};var o,r,a=s.partial?s:e;s.partial||(o=s.helpers,r=s.partials);var c=t.call(n,a,i,o,r,s.data);return s.partial||e.VM.checkRevision(n.compilerInfo),c}}function o(t,e,i){var n=Array.prototype.slice.call(arguments,3),s=function(t,s){return s=s||{},e.apply(this,[t,s.data||i].concat(n))};return s.program=t,s.depth=n.length,s}function r(t,e,i){var n=function(t,n){return n=n||{},e(t,n.data||i)};return n.program=t,n.depth=0,n}function a(t,e,i,n,s,o){var r={partial:!0,helpers:n,partials:s,data:o};if(void 0===t)throw new l("The partial "+e+" could not be found");return t instanceof Function?t(i,r):void 0}function c(){return""}var u={},h=t,l=e,p=i.COMPILER_REVISION,d=i.REVISION_CHANGES;return u.checkRevision=n,u.template=s,u.programWithDepth=o,u.program=r,u.invokePartial=a,u.noop=c,u}(e,i,n),o=function(t,e,i,n,s){var o,r=t,a=e,c=i,u=n,h=s,l=function(){var t=new r.HandlebarsEnvironment;return u.extend(t,r),t.SafeString=a,t.Exception=c,t.Utils=u,t.VM=h,t.template=function(e){return h.template(e,t)},t},p=l();return p.create=l,o=p}(n,t,i,e,s),r=function(t){function e(t){t=t||{},this.firstLine=t.first_line,this.firstColumn=t.first_column,this.lastColumn=t.last_column,this.lastLine=t.last_line}var i,n=t,s={ProgramNode:function(t,i,n,o){var r,a;3===arguments.length?(o=n,n=null):2===arguments.length&&(o=i,i=null),e.call(this,o),this.type="program",this.statements=t,this.strip={},n?(a=n[0],a?(r={first_line:a.firstLine,last_line:a.lastLine,last_column:a.lastColumn,first_column:a.firstColumn},this.inverse=new s.ProgramNode(n,i,r)):this.inverse=new s.ProgramNode(n,i),this.strip.right=i.left):i&&(this.strip.left=i.right)},MustacheNode:function(t,i,n,o,r){if(e.call(this,r),this.type="mustache",this.strip=o,null!=n&&n.charAt){var a=n.charAt(3)||n.charAt(2);this.escaped="{"!==a&&"&"!==a}else this.escaped=!!n;this.sexpr=t instanceof s.SexprNode?t:new s.SexprNode(t,i),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(t,i,n){e.call(this,n),this.type="sexpr",this.hash=i;var s=this.id=t[0],o=this.params=t.slice(1),r=this.eligibleHelper=s.isSimple;this.isHelper=r&&(o.length||i)},PartialNode:function(t,i,n,s){e.call(this,s),this.type="partial",this.partialName=t,this.context=i,this.strip=n},BlockNode:function(t,i,s,o,r){if(e.call(this,r),t.sexpr.id.original!==o.path.original)throw new n(t.sexpr.id.original+" doesn't match "+o.path.original,this);this.type="block",this.mustache=t,this.program=i,this.inverse=s,this.strip={left:t.strip.left,right:o.strip.right},(i||s).strip.left=t.strip.right,(s||i).strip.right=o.strip.left,s&&!i&&(this.isInverse=!0)},ContentNode:function(t,i){e.call(this,i),this.type="content",this.string=t},HashNode:function(t,i){e.call(this,i),this.type="hash",this.pairs=t},IdNode:function(t,i){e.call(this,i),this.type="ID";for(var s="",o=[],r=0,a=0,c=t.length;c>a;a++){var u=t[a].part;if(s+=(t[a].separator||"")+u,".."===u||"."===u||"this"===u){if(o.length>0)throw new n("Invalid path: "+s,this);".."===u?r++:this.isScoped=!0}else o.push(u)}this.original=s,this.parts=o,this.string=o.join("."),this.depth=r,this.isSimple=1===t.length&&!this.isScoped&&0===r,this.stringModeValue=this.string},PartialNameNode:function(t,i){e.call(this,i),this.type="PARTIAL_NAME",this.name=t.original},DataNode:function(t,i){e.call(this,i),this.type="DATA",this.id=t},StringNode:function(t,i){e.call(this,i),this.type="STRING",this.original=this.string=this.stringModeValue=t},IntegerNode:function(t,i){e.call(this,i),this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)},BooleanNode:function(t,i){e.call(this,i),this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},CommentNode:function(t,i){e.call(this,i),this.type="comment",this.comment=t}};return i=s}(i),a=function(){var t,e=function(){function t(t,e){return{left:"~"===t.charAt(2),right:"~"===e.charAt(0)||"~"===e.charAt(1)}}function e(){this.yy={}}var i={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(e,i,n,s,o,r){var a=r.length-1;switch(o){case 1:return new s.ProgramNode(r[a-1],this._$);case 2:return new s.ProgramNode([],this._$);case 3:this.$=new s.ProgramNode([],r[a-1],r[a],this._$);break;case 4:this.$=new s.ProgramNode(r[a-2],r[a-1],r[a],this._$);break;case 5:this.$=new s.ProgramNode(r[a-1],r[a],[],this._$);break;case 6:this.$=new s.ProgramNode(r[a],this._$);break;case 7:this.$=new s.ProgramNode([],this._$);break;case 8:this.$=new s.ProgramNode([],this._$);break;case 9:this.$=[r[a]];break;case 10:r[a-1].push(r[a]),this.$=r[a-1];break;case 11:this.$=new s.BlockNode(r[a-2],r[a-1].inverse,r[a-1],r[a],this._$);break;case 12:this.$=new s.BlockNode(r[a-2],r[a-1],r[a-1].inverse,r[a],this._$);break;case 13:this.$=r[a];break;case 14:this.$=r[a];break;case 15:this.$=new s.ContentNode(r[a],this._$);break;case 16:this.$=new s.CommentNode(r[a],this._$);break;case 17:this.$=new s.MustacheNode(r[a-1],null,r[a-2],t(r[a-2],r[a]),this._$);break;case 18:this.$=new s.MustacheNode(r[a-1],null,r[a-2],t(r[a-2],r[a]),this._$);break;case 19:this.$={path:r[a-1],strip:t(r[a-2],r[a])};break;case 20:this.$=new s.MustacheNode(r[a-1],null,r[a-2],t(r[a-2],r[a]),this._$);break;case 21:this.$=new s.MustacheNode(r[a-1],null,r[a-2],t(r[a-2],r[a]),this._$);break;case 22:this.$=new s.PartialNode(r[a-2],r[a-1],t(r[a-3],r[a]),this._$);break;case 23:this.$=t(r[a-1],r[a]);break;case 24:this.$=new s.SexprNode([r[a-2]].concat(r[a-1]),r[a],this._$);break;case 25:this.$=new s.SexprNode([r[a]],null,this._$);break;case 26:this.$=r[a];break;case 27:this.$=new s.StringNode(r[a],this._$);break;case 28:this.$=new s.IntegerNode(r[a],this._$);break;case 29:this.$=new s.BooleanNode(r[a],this._$);break;case 30:this.$=r[a];break;case 31:r[a-1].isHelper=!0,this.$=r[a-1];break;case 32:this.$=new s.HashNode(r[a],this._$);break;case 33:this.$=[r[a-2],r[a]];break;case 34:this.$=new s.PartialNameNode(r[a],this._$);break;case 35:this.$=new s.PartialNameNode(new s.StringNode(r[a],this._$),this._$);break;case 36:this.$=new s.PartialNameNode(new s.IntegerNode(r[a],this._$));break;case 37:this.$=new s.DataNode(r[a],this._$);break;case 38:this.$=new s.IdNode(r[a],this._$);break;case 39:r[a-2].push({part:r[a],separator:r[a-1]}),this.$=r[a-2];break;case 40:this.$=[{part:r[a]}];break;case 43:this.$=[];break;case 44:r[a-1].push(r[a]);break;case 47:this.$=[r[a]];break;case 48:r[a-1].push(r[a])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(t){throw new Error(t)},parse:function(t){function e(){var t;return t=i.lexer.lex()||1,"number"!=typeof t&&(t=i.symbols_[t]||t),t}var i=this,n=[0],s=[null],o=[],r=this.table,a="",c=0,u=0,h=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;o.push(l);var p=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,f,m,g,v,y,b,_,w,x={};;){if(m=n[n.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===d||"undefined"==typeof d)&&(d=e()),g=r[m]&&r[m][d]),"undefined"==typeof g||!g.length||!g[0]){var S="";if(!h){w=[];for(y in r[m])this.terminals_[y]&&y>2&&w.push("'"+this.terminals_[y]+"'");S=this.lexer.showPosition?"Parse error on line "+(c+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(c+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:l,expected:w})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+d);switch(g[0]){case 1:n.push(d),s.push(this.lexer.yytext),o.push(this.lexer.yylloc),n.push(g[1]),d=null,f?(d=f,f=null):(u=this.lexer.yyleng,a=this.lexer.yytext,c=this.lexer.yylineno,l=this.lexer.yylloc,h>0&&h--);break;case 2:if(b=this.productions_[g[1]][1],x.$=s[s.length-b],x._$={first_line:o[o.length-(b||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(b||1)].first_column,last_column:o[o.length-1].last_column},p&&(x._$.range=[o[o.length-(b||1)].range[0],o[o.length-1].range[1]]),v=this.performAction.call(x,a,u,c,this.yy,g[1],s,o),"undefined"!=typeof v)return v;b&&(n=n.slice(0,-1*b*2),s=s.slice(0,-1*b),o=o.slice(0,-1*b)),n.push(this.productions_[g[1]][0]),s.push(x.$),o.push(x._$),_=r[n[n.length-2]][n[n.length-1]],n.push(_);break;case 3:return!0}}return!0}},n=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,i,n,s;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),r=0;r<o.length&&(i=this._input.match(this.rules[o[r]]),!i||e&&!(i[0].length>e[0].length)||(e=i,n=r,this.options.flex));r++);return e?(s=e[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})
},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,i,n){function s(t,i){return e.yytext=e.yytext.substr(t,e.yyleng-i)}switch(i){case 0:if("\\\\"===e.yytext.slice(-2)?(s(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(s(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return s(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return s(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return e.yytext=s(1,2).replace(/\\"/g,'"'),32;case 24:return e.yytext=s(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return e.yytext=s(1,2),40;case 31:return"INVALID";case 32:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},t}();return i.lexer=n,e.prototype=i,i.Parser=e,new e}();return t=e}(),c=function(t,e){function i(t){return t.constructor===o.ProgramNode?t:(s.yy=o,s.parse(t))}var n={},s=t,o=e;return n.parser=s,n.parse=i,n}(a,r),u=function(t){function e(){}function i(t,e,i){if(null==t||"string"!=typeof t&&t.constructor!==i.AST.ProgramNode)throw new o("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var n=i.parse(t),s=(new i.Compiler).compile(n,e);return(new i.JavaScriptCompiler).compile(s,e)}function n(t,e,i){function n(){var n=i.parse(t),s=(new i.Compiler).compile(n,e),o=(new i.JavaScriptCompiler).compile(s,e,void 0,!0);return i.template(o)}if(null==t||"string"!=typeof t&&t.constructor!==i.AST.ProgramNode)throw new o("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var s;return function(t,e){return s||(s=n()),s.call(this,t,e)}}var s={},o=t;return s.Compiler=e,e.prototype={compiler:e,disassemble:function(){for(var t,e,i,n=this.opcodes,s=[],o=0,r=n.length;r>o;o++)if(t=n[o],"DECLARE"===t.opcode)s.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var a=0;a<t.args.length;a++)i=t.args[a],"string"==typeof i&&(i='"'+i.replace("\n","\\n")+'"'),e.push(i);s.push(t.opcode+" "+e.join(" "))}return s.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var i=0;e>i;i++){var n=this.opcodes[i],s=t.opcodes[i];if(n.opcode!==s.opcode||n.args.length!==s.args.length)return!1;for(var o=0;o<n.args.length;o++)if(n.args[o]!==s.args[o])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(i=0;e>i;i++)if(!this.children[i].equals(t.children[i]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e;var i=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},i)for(var n in i)this.options.knownHelpers[n]=i[n];return this.accept(t)},accept:function(t){var e,i=t.strip||{};return i.left&&this.opcode("strip"),e=this[t.type](t),i.right&&this.opcode("strip"),e},program:function(t){for(var e=t.statements,i=0,n=e.length;n>i;i++)this.accept(e[i]);return this.isSimple=1===n,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,i=(new this.compiler).compile(t,this.options),n=this.guid++;this.usePartial=this.usePartial||i.usePartial,this.children[n]=i;for(var s=0,o=i.depths.list.length;o>s;s++)e=i.depths.list[s],2>e||this.addDepth(e-1);return n},block:function(t){var e=t.mustache,i=t.program,n=t.inverse;i&&(i=this.compileProgram(i)),n&&(n=this.compileProgram(n));var s=e.sexpr,o=this.classifySexpr(s);"helper"===o?this.helperSexpr(s,i,n):"simple"===o?(this.simpleSexpr(s),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(s,i,n),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,i,n=t.pairs;this.opcode("pushHash");for(var s=0,o=n.length;o>s;s++)e=n[s],i=e[1],this.options.stringParams?(i.depth&&this.addDepth(i.depth),this.opcode("getContext",i.depth||0),this.opcode("pushStringParam",i.stringModeValue,i.type),"sexpr"===i.type&&this.sexpr(i)):this.accept(i),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){this.sexpr(t.sexpr),this.opcode(t.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(t,e,i){var n=t.id,s=n.parts[0],o=null!=e||null!=i;this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.opcode("invokeAmbiguous",s,o)},simpleSexpr:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,i){var n=this.setupFullMustacheParams(t,e,i),s=t.id.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",n.length,s);else{if(this.options.knownHelpersOnly)throw new o("You specified knownHelpersOnly, but used the unknown helper "+s,t);this.opcode("invokeHelper",n.length,s,t.isRoot)}},sexpr:function(t){var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var i=1,n=t.parts.length;n>i;i++)this.opcode("lookup",t.parts[i])},DATA:function(t){if(this.options.data=!0,t.id.isScoped||t.id.depth)throw new o("Scoped data references are not supported: "+t.original,t);this.opcode("lookupData");for(var e=t.id.parts,i=0,n=e.length;n>i;i++)this.opcode("lookup",e[i])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifySexpr:function(t){var e=t.isHelper,i=t.eligibleHelper,n=this.options;if(i&&!e){var s=t.id.parts[0];n.knownHelpers[s]?e=!0:n.knownHelpersOnly&&(i=!1)}return e?"helper":i?"ambiguous":"simple"},pushParams:function(t){for(var e,i=t.length;i--;)e=t[i],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type),"sexpr"===e.type&&this.sexpr(e)):this[e.type](e)},setupFullMustacheParams:function(t,e,i){var n=t.params;return this.pushParams(n),this.opcode("pushProgram",e),this.opcode("pushProgram",i),t.hash?this.hash(t.hash):this.opcode("emptyHash"),n}},s.precompile=i,s.compile=n,s}(i),h=function(t,e){function i(t){this.value=t}function n(){}var s,o=t.COMPILER_REVISION,r=t.REVISION_CHANGES,a=t.log,c=e;n.prototype={nameLookup:function(t,e){var i,s;return 0===t.indexOf("depth")&&(i=!0),s=/^[0-9]+$/.test(e)?t+"["+e+"]":n.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']",i?"("+t+" && "+s+")":s},compilerInfo:function(){var t=o,e=r[t];return"this.compilerInfo = ["+t+",'"+e+"'];\n"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,i,n){this.environment=t,this.options=e||{},a("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e);var s,o=t.opcodes;this.i=0;for(var r=o.length;this.i<r;this.i++)s=o[this.i],"DECLARE"===s.opcode?this[s.name]=s.value:this[s.opcode].apply(this,s.args),s.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new c("Compile completed with content left on stack");return this.createFunctionContext(n)},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,i="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(i=i+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(i+=" data = data || {};"),t.push(i)}t.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(t){var e=this.stackVars.concat(this.registers.list);if(e.length>0&&(this.source[1]=this.source[1]+", "+e.join(", ")),!this.isChild)for(var i in this.context.aliases)this.context.aliases.hasOwnProperty(i)&&(this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var n=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],s=0,o=this.environment.depths.list.length;o>s;s++)n.push("depth"+this.environment.depths.list[s]);var r=this.mergeSource();if(this.isChild||(r=this.compilerInfo()+r),t)return n.push(r),Function.apply(this,n);var c="function "+(this.name||"")+"("+n.join(",")+") {\n  "+r+"}";return a("debug",c+"\n\n"),c},mergeSource:function(){for(var t,e="",i=0,n=this.source.length;n>i;i++){var s=this.source[i];s.appendToBuffer?t=t?t+"\n    + "+s.content:s.content:(t&&(e+="buffer += "+t+";\n  ",t=void 0),e+=s+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.stripNext&&(t=t.replace(/^\s+/,"")),this.pendingContent=t},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"sexpr"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+t.contexts.join(",")+"}"),this.push("{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){this.pushStackLiteral(null!=t?this.programExpression(t):null)},invokeHelper:function(t,e,i){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var n=this.lastHelper=this.setupHelper(t,e,!0),s=this.nameLookup("depth"+this.lastContext,e,"context"),o="helper = "+n.name+" || "+s;n.paramsInit&&(o+=","+n.paramsInit),this.push("("+o+",helper ? helper.call("+n.callParams+") : helperMissing.call("+n.helperMissingParams+"))"),i||this.flushInline()},invokeKnownHelper:function(t,e){var i=this.setupHelper(t,e);this.push(i.name+".call("+i.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var i=this.setupHelper(0,t,e),n=this.lastHelper=this.nameLookup("helpers",t,"helper"),s=this.nameLookup("depth"+this.lastContext,t,"context"),o=this.nextStack();i.paramsInit&&this.pushSource(i.paramsInit),this.pushSource("if (helper = "+n+") { "+o+" = helper.call("+i.callParams+"); }"),this.pushSource("else { helper = "+s+"; "+o+" = typeof helper === functionType ? helper.call("+i.callParams+") : helper; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,i,n=this.popStack();this.options.stringParams&&(i=this.popStack(),e=this.popStack());var s=this.hash;e&&s.contexts.push("'"+t+"': "+e),i&&s.types.push("'"+t+"': "+i),s.values.push("'"+t+"': ("+n+")")},compiler:n,compileChildren:function(t,e){for(var i,n,s=t.children,o=0,r=s.length;r>o;o++){i=s[o],n=new this.compiler;var a=this.matchExistingProgram(i);null==a?(this.context.programs.push(""),a=this.context.programs.length,i.index=a,i.name="program"+a,this.context.programs[a]=n.compile(i,e,this.context),this.context.environments[a]=i):(i.index=a,i.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,i=this.context.environments.length;i>e;e++){var n=this.context.environments[e];if(n&&n.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,i=this.environment.children[t],n=i.depths.list,s=[i.index,i.name,"data"],o=0,r=n.length;r>o;o++)e=n[o],s.push(1===e?"depth0":"depth"+(e-1));return(0===n.length?"self.program(":"self.programWithDepth(")+s.join(", ")+")"},register:function(t,e){this.useRegister(t),this.pushSource(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new i(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,n,s,o="",r=this.isInline();if(r){var a=this.popStack(!0);if(a instanceof i)e=a.value,s=!0;else{n=!this.stackSlot;var c=n?this.incrStack():this.topStackName();o="("+this.push(c)+" = "+a+"),",e=this.topStack()}}else e=this.topStack();var u=t.call(this,e);return r?(s||this.popStack(),n&&this.stackSlot--,this.push("("+o+u+")")):(/^stack/.test(e)||(e=this.nextStack()),this.pushSource(e+" = ("+o+u+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,n=t.length;n>e;e++){var s=t[e];s instanceof i?this.compileStack.push(s):this.pushStack(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),n=(e?this.inlineStack:this.compileStack).pop();if(!t&&n instanceof i)return n.value;if(!e){if(!this.stackSlot)throw new c("Invalid stack pop");this.stackSlot--}return n},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,n=e[e.length-1];return!t&&n instanceof i?n.value:n},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,i){var n=[],s=this.setupParams(t,n,i),o=this.nameLookup("helpers",e,"helper");return{params:n,paramsInit:s,name:o,callParams:["depth0"].concat(n).join(", "),helperMissingParams:i&&["depth0",this.quotedString(e)].concat(n).join(", ")}},setupOptions:function(t,e){var i,n,s,o=[],r=[],a=[];o.push("hash:"+this.popStack()),this.options.stringParams&&(o.push("hashTypes:"+this.popStack()),o.push("hashContexts:"+this.popStack())),n=this.popStack(),s=this.popStack(),(s||n)&&(s||(this.context.aliases.self="this",s="self.noop"),n||(this.context.aliases.self="this",n="self.noop"),o.push("inverse:"+n),o.push("fn:"+s));for(var c=0;t>c;c++)i=this.popStack(),e.push(i),this.options.stringParams&&(a.push(this.popStack()),r.push(this.popStack()));return this.options.stringParams&&(o.push("contexts:["+r.join(",")+"]"),o.push("types:["+a.join(",")+"]")),this.options.data&&o.push("data:data"),o},setupParams:function(t,e,i){var n="{"+this.setupOptions(t,e).join(",")+"}";return i?(this.useRegister("options"),e.push("options"),"options="+n):(e.push(n),"")}};for(var u="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),h=n.RESERVED_WORDS={},l=0,p=u.length;p>l;l++)h[u[l]]=!0;return n.isValidJavaScriptVariableName=function(t){return!n.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)?!0:!1},s=n}(n,i),l=function(t,e,i,n,s){var o,r=t,a=e,c=i.parser,u=i.parse,h=n.Compiler,l=n.compile,p=n.precompile,d=s,f=r.create,m=function(){var t=f();return t.compile=function(e,i){return l(e,i,t)},t.precompile=function(e,i){return p(e,i,t)},t.AST=a,t.Compiler=h,t.JavaScriptCompiler=d,t.Parser=c,t.parse=u,t};return r=m(),r.create=m,o=r}(o,r,c,u,h);return l}()}.bind(this)),require.register("app/vendor/notify.js",function(){!function(t,e){"function"==typeof define&&define.amd?define("notify",[],function(){return e(t,document)}):t.Notify=e(t,document)}(this,function(t){function e(t,e){if(this.title="string"==typeof t?t:null,this.options={icon:"",body:"",tag:"",notifyShow:null,notifyClose:null,notifyClick:null,notifyError:null,permissionGranted:null,permissionDenied:null},this.permission=null,this.isSupported()){if(!this.title)throw new Error("Notify(): first arg (title) must be a string.");if("object"==typeof e){for(var i in e)e.hasOwnProperty(i)&&(this.options[i]=e[i]);"function"==typeof this.options.notifyShow&&(this.onShowCallback=this.options.notifyShow),"function"==typeof this.options.notifyClose&&(this.onCloseCallback=this.options.notifyClose),"function"==typeof this.options.notifyClick&&(this.onClickCallback=this.options.notifyClick),"function"==typeof this.options.notifyError&&(this.onErrorCallback=this.options.notifyError),"function"==typeof this.options.permissionGranted&&(this.onPermissionGrantedCallback=this.options.permissionGranted),"function"==typeof this.options.permissionDenied&&(this.onPermissionDeniedCallback=this.options.permissionDenied)}}}return e.prototype.needsPermission=function(){return"Notification"in t&&"granted"===Notification.permission?!1:"mozNotification"in navigator?!1:!0},e.prototype.requestPermission=function(){var e=this;t.Notification.requestPermission(function(t){switch(e.permission=t,e.permission){case"granted":e.onPermissionGranted();break;case"denied":e.onPermissionDenied()}})},e.prototype.show=function(){this.isSupported()&&("Notification"in t?(this.myNotify=new Notification(this.title,{body:this.options.body,tag:this.options.tag,icon:this.options.icon}),this.myNotify.addEventListener("show",this,!1),this.myNotify.addEventListener("error",this,!1)):(this.myNotify=navigator.mozNotification.createNotification(this.title,this.options.body),this.myNotify.show()),this.myNotify.addEventListener("close",this,!1),this.myNotify.addEventListener("click",this,!1))},e.prototype.onShowNotification=function(){this.onShowCallback&&this.onShowCallback()},e.prototype.onCloseNotification=function(){this.onCloseCallback&&this.onCloseCallback(),this.destroy()},e.prototype.onClickNotification=function(){this.onClickCallback&&this.onClickCallback()},e.prototype.onErrorNotification=function(){this.onErrorCallback&&this.onErrorCallback(),this.destroy()},e.prototype.onPermissionGranted=function(){this.onPermissionGrantedCallback&&this.onPermissionGrantedCallback()},e.prototype.onPermissionDenied=function(){this.onPermissionDeniedCallback&&this.onPermissionDeniedCallback()},e.prototype.destroy=function(){"Notification"in t&&(this.myNotify.removeEventListener("show",this,!1),this.myNotify.removeEventListener("error",this,!1)),this.myNotify.removeEventListener("close",this,!1),this.myNotify.removeEventListener("click",this,!1)},e.prototype.isSupported=function(){return"Notification"in t||"mozNotification"in navigator?!0:!1},e.prototype.handleEvent=function(t){switch(t.type){case"show":this.onShowNotification(t);break;case"close":this.onCloseNotification(t);break;case"click":this.onClickNotification(t);break;case"error":this.onErrorNotification(t)}},e})}.bind(this)),require.register("app/vendor/oauthpopup.js",function(){!function(t){t.oauthpopup=function(e){if(!e||!e.path)throw new Error("options.path must not be empty");e=t.extend({windowName:"ConnectWithOAuth",windowOptions:"location=0,status=0,width=800,height=400",callback:function(){window.location.reload()}},e);var i=window.open(e.path,e.windowName,e.windowOptions),n=window.setInterval(function(){i.closed&&(window.clearInterval(n),e.callback())},1e3)},t.fn.oauthpopup=function(e){$this=t(this),$this.click(t.oauthpopup.bind(this,e))}}(Zepto)}.bind(this)),require.register("app/vendor/peer.js",function(){(function(t){function e(){this._pieces=[],this._parts=[]}function i(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function n(){this.bufferBuilder=new e}function s(t){var e=t.charCodeAt(0);return 2047>=e?"00":65535>=e?"000":2097151>=e?"0000":67108863>=e?"00000":"000000"}function o(t){return t.length>600?new Blob([t]).size:t.replace(/[^\u0000-\u007F]/g,s).length}function r(){this._events={}}function a(t,e){return this instanceof a?(this._dc=t,g.debug=e,this._outgoing={},this._incoming={},this._received={},this._window=1e3,this._mtu=500,this._interval=0,this._count=0,this._queue=[],void this._setupDC()):new a(t)}function c(t,e){if(!(this instanceof c))return new c(t,e);if(r.call(this),t&&t.constructor==Object?(e=t,t=void 0):t&&(t=t.toString()),e=g.extend({debug:0,host:g.CLOUD_HOST,port:g.CLOUD_PORT,key:"peerjs",config:g.defaultConfig},e),this.options=e,"/"===e.host&&(e.host=window.location.hostname),void 0===e.secure&&e.host!==g.CLOUD_HOST&&(e.secure=g.isSecure()),e.logFunction&&g.setLogFunction(e.logFunction),g.setLogLevel(e.debug),!g.supports.audioVideo&&!g.supports.data)return void this._delayedAbort("browser-incompatible","The current browser does not support WebRTC");if(!g.validateId(t))return void this._delayedAbort("invalid-id",'ID "'+t+'" is invalid');if(!g.validateKey(e.key))return void this._delayedAbort("invalid-key",'API KEY "'+e.key+'" is invalid');if(e.secure&&"0.peerjs.com"===e.host)return void this._delayedAbort("ssl-unavailable","The cloud server currently does not support HTTPS. Please run your own PeerServer to use HTTPS.");this.destroyed=!1,this.disconnected=!1,this.open=!1,this.connections={},this._lostMessages={};var i=this;this.socket=new l(this.options.secure,this.options.host,this.options.port,this.options.key),this.socket.on("message",function(t){i._handleMessage(t)}),this.socket.on("error",function(t){i._abort("socket-error",t)}),this.socket.on("close",function(){i.disconnected||i._abort("socket-closed","Underlying socket is already closed.")}),t?this._initialize(t):this._retrieveId()}function u(t,e,i){return this instanceof u?(r.call(this),this.options=g.extend({serialization:"binary",reliable:!1},i),this.open=!1,this.type="data",this.peer=t,this.provider=e,this.id=this.options.connectionId||u._idPrefix+g.randomToken(),this.label=this.options.label||this.id,this.metadata=this.options.metadata,this.serialization=this.options.serialization,this.reliable=this.options.reliable,this._buffer=[],this._buffering=!1,this.bufferSize=0,this._chunkedData={},this.options._payload&&(this._peerBrowser=this.options._payload.browser),void v.startConnection(this,this.options._payload||{originator:!0})):new u(t,e,i)}function h(t,e,i){return this instanceof h?(r.call(this),this.options=g.extend({},i),this.open=!1,this.type="media",this.peer=t,this.provider=e,this.metadata=this.options.metadata,this.localStream=this.options._stream,this.id=this.options.connectionId||h._idPrefix+g.randomToken(),void(this.localStream&&v.startConnection(this,{_stream:this.localStream,originator:!0}))):new h(t,e,i)}function l(t,e,i,n){if(!(this instanceof l))return new l(t,e,i,n);r.call(this),this.disconnected=!1,this._queue=[];var s=t?"https://":"http://",o=t?"wss://":"ws://";this._httpUrl=s+e+":"+i+"/"+n,this._wsUrl=o+e+":"+i+"/peerjs?key="+n}var p={};p.useBlobBuilder=function(){try{return new Blob([]),!1}catch(t){return!0}}(),p.useArrayBufferView=!p.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(t){return!0}}(),t.binaryFeatures=p,t.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder,e.prototype.append=function(t){"number"==typeof t?this._pieces.push(t):(this.flush(),this._parts.push(t))},e.prototype.flush=function(){if(this._pieces.length>0){var t=new Uint8Array(this._pieces);p.useArrayBufferView||(t=t.buffer),this._parts.push(t),this._pieces=[]}},e.prototype.getBuffer=function(){if(this.flush(),p.useBlobBuilder){for(var t=new BlobBuilder,e=0,i=this._parts.length;i>e;e++)t.append(this._parts[e]);return t.getBlob()}return new Blob(this._parts)},t.BinaryPack={unpack:function(t){var e=new i(t);return e.unpack()},pack:function(t){var e=new n;e.pack(t);var i=e.getBuffer();return i}},i.prototype.unpack=function(){var t=this.unpack_uint8();if(128>t){var e=t;return e}if(32>(224^t)){var i=(224^t)-32;return i}var n;if((n=160^t)<=15)return this.unpack_raw(n);if((n=176^t)<=15)return this.unpack_string(n);if((n=144^t)<=15)return this.unpack_array(n);if((n=128^t)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return void 0;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return void 0;case 213:return void 0;case 214:return void 0;case 215:return void 0;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}},i.prototype.unpack_uint8=function(){var t=255&this.dataView[this.index];return this.index++,t},i.prototype.unpack_uint16=function(){var t=this.read(2),e=256*(255&t[0])+(255&t[1]);return this.index+=2,e},i.prototype.unpack_uint32=function(){var t=this.read(4),e=256*(256*(256*t[0]+t[1])+t[2])+t[3];return this.index+=4,e},i.prototype.unpack_uint64=function(){var t=this.read(8),e=256*(256*(256*(256*(256*(256*(256*t[0]+t[1])+t[2])+t[3])+t[4])+t[5])+t[6])+t[7];return this.index+=8,e},i.prototype.unpack_int8=function(){var t=this.unpack_uint8();return 128>t?t:t-256},i.prototype.unpack_int16=function(){var t=this.unpack_uint16();return 32768>t?t:t-65536},i.prototype.unpack_int32=function(){var t=this.unpack_uint32();return t<Math.pow(2,31)?t:t-Math.pow(2,32)},i.prototype.unpack_int64=function(){var t=this.unpack_uint64();return t<Math.pow(2,63)?t:t-Math.pow(2,64)},i.prototype.unpack_raw=function(t){if(this.length<this.index+t)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+t+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,e},i.prototype.unpack_string=function(t){for(var e,i,n=this.read(t),s=0,o="";t>s;)e=n[s],128>e?(o+=String.fromCharCode(e),s++):32>(192^e)?(i=(192^e)<<6|63&n[s+1],o+=String.fromCharCode(i),s+=2):(i=(15&e)<<12|(63&n[s+1])<<6|63&n[s+2],o+=String.fromCharCode(i),s+=3);return this.index+=t,o},i.prototype.unpack_array=function(t){for(var e=new Array(t),i=0;t>i;i++)e[i]=this.unpack();return e},i.prototype.unpack_map=function(t){for(var e={},i=0;t>i;i++){var n=this.unpack(),s=this.unpack();e[n]=s}return e},i.prototype.unpack_float=function(){var t=this.unpack_uint32(),e=t>>31,i=(t>>23&255)-127,n=8388607&t|8388608;return(0==e?1:-1)*n*Math.pow(2,i-23)},i.prototype.unpack_double=function(){var t=this.unpack_uint32(),e=this.unpack_uint32(),i=t>>31,n=(t>>20&2047)-1023,s=1048575&t|1048576,o=s*Math.pow(2,n-20)+e*Math.pow(2,n-52);return(0==i?1:-1)*o
},i.prototype.read=function(t){var e=this.index;if(e+t<=this.length)return this.dataView.subarray(e,e+t);throw new Error("BinaryPackFailure: read index out of range")},n.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},n.prototype.pack=function(t){var e=typeof t;if("string"==e)this.pack_string(t);else if("number"==e)Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if("boolean"==e)t===!0?this.bufferBuilder.append(195):t===!1&&this.bufferBuilder.append(194);else if("undefined"==e)this.bufferBuilder.append(192);else{if("object"!=e)throw new Error('Type "'+e+'" not yet supported');if(null===t)this.bufferBuilder.append(192);else{var i=t.constructor;if(i==Array)this.pack_array(t);else if(i==Blob||i==File)this.pack_bin(t);else if(i==ArrayBuffer)this.pack_bin(p.useArrayBufferView?new Uint8Array(t):t);else if("BYTES_PER_ELEMENT"in t)this.pack_bin(p.useArrayBufferView?new Uint8Array(t.buffer):t.buffer);else if(i==Object)this.pack_object(t);else if(i==Date)this.pack_string(t.toString());else{if("function"!=typeof t.toBinaryPack)throw new Error('Type "'+i.toString()+'" not yet supported');this.bufferBuilder.append(t.toBinaryPack())}}}this.bufferBuilder.flush()},n.prototype.pack_bin=function(t){var e=t.length||t.byteLength||t.size;if(15>=e)this.pack_uint8(160+e);else if(65535>=e)this.bufferBuilder.append(218),this.pack_uint16(e);else{if(!(4294967295>=e))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(e)}this.bufferBuilder.append(t)},n.prototype.pack_string=function(t){var e=o(t);if(15>=e)this.pack_uint8(176+e);else if(65535>=e)this.bufferBuilder.append(216),this.pack_uint16(e);else{if(!(4294967295>=e))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(e)}this.bufferBuilder.append(t)},n.prototype.pack_array=function(t){var e=t.length;if(15>=e)this.pack_uint8(144+e);else if(65535>=e)this.bufferBuilder.append(220),this.pack_uint16(e);else{if(!(4294967295>=e))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(e)}for(var i=0;e>i;i++)this.pack(t[i])},n.prototype.pack_integer=function(t){if(t>=-32&&127>=t)this.bufferBuilder.append(255&t);else if(t>=0&&255>=t)this.bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&127>=t)this.bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&65535>=t)this.bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&32767>=t)this.bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&4294967295>=t)this.bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&2147483647>=t)this.bufferBuilder.append(210),this.pack_int32(t);else if(t>=-0x8000000000000000&&0x8000000000000000>=t)this.bufferBuilder.append(211),this.pack_int64(t);else{if(!(t>=0&&0x10000000000000000>=t))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(t)}},n.prototype.pack_double=function(t){var e=0;0>t&&(e=1,t=-t);var i=Math.floor(Math.log(t)/Math.LN2),n=t/Math.pow(2,i)-1,s=Math.floor(n*Math.pow(2,52)),o=Math.pow(2,32),r=e<<31|i+1023<<20|s/o&1048575,a=s%o;this.bufferBuilder.append(203),this.pack_int32(r),this.pack_int32(a)},n.prototype.pack_object=function(t){var e=Object.keys(t),i=e.length;if(15>=i)this.pack_uint8(128+i);else if(65535>=i)this.bufferBuilder.append(222),this.pack_uint16(i);else{if(!(4294967295>=i))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(i)}for(var n in t)t.hasOwnProperty(n)&&(this.pack(n),this.pack(t[n]))},n.prototype.pack_uint8=function(t){this.bufferBuilder.append(t)},n.prototype.pack_uint16=function(t){this.bufferBuilder.append(t>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_uint32=function(t){var e=4294967295&t;this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},n.prototype.pack_uint64=function(t){var e=t/Math.pow(2,32),i=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&i)>>>24),this.bufferBuilder.append((16711680&i)>>>16),this.bufferBuilder.append((65280&i)>>>8),this.bufferBuilder.append(255&i)},n.prototype.pack_int8=function(t){this.bufferBuilder.append(255&t)},n.prototype.pack_int16=function(t){this.bufferBuilder.append((65280&t)>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_int32=function(t){this.bufferBuilder.append(t>>>24&255),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_int64=function(t){var e=Math.floor(t/Math.pow(2,32)),i=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&i)>>>24),this.bufferBuilder.append((16711680&i)>>>16),this.bufferBuilder.append((65280&i)>>>8),this.bufferBuilder.append(255&i)};var d=Array.isArray;r.prototype.addListener=function(t,e){if("function"!=typeof e)throw new Error("addListener only takes instances of Function");return this.emit("newListener",t,"function"==typeof e.listener?e.listener:e),this._events[t]?d(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function i(){n.removeListener(t,i),e.apply(this,arguments)}if("function"!=typeof e)throw new Error(".once only takes instances of Function");var n=this;return i.listener=e,n.on(t,i),this},r.prototype.removeListener=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");if(!this._events[t])return this;var i=this._events[t];if(d(i)){for(var n=-1,s=0,o=i.length;o>s;s++)if(i[s]===e||i[s].listener&&i[s].listener===e){n=s;break}if(0>n)return this;i.splice(n,1),0==i.length&&delete this._events[t]}else(i===e||i.listener&&i.listener===e)&&delete this._events[t];return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},r.prototype.listeners=function(t){return this._events[t]||(this._events[t]=[]),d(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},r.prototype.emit=function(t){var t=arguments[0],e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:for(var i=arguments.length,n=new Array(i-1),s=1;i>s;s++)n[s-1]=arguments[s];e.apply(this,n)}return!0}if(d(e)){for(var i=arguments.length,n=new Array(i-1),s=1;i>s;s++)n[s-1]=arguments[s];for(var o=e.slice(),s=0,i=o.length;i>s;s++)o[s].apply(this,n);return!0}return!1},a.prototype.send=function(t){var e=g.pack(t);return e.size<this._mtu?void this._handleSend(["no",e]):(this._outgoing[this._count]={ack:0,chunks:this._chunk(e)},g.debug&&(this._outgoing[this._count].timer=new Date),this._sendWindowedChunks(this._count),void(this._count+=1))},a.prototype._setupInterval=function(){var t=this;this._timeout=setInterval(function(){var e=t._queue.shift();if(e._multiple)for(var i=0,n=e.length;n>i;i+=1)t._intervalSend(e[i]);else t._intervalSend(e)},this._interval)},a.prototype._intervalSend=function(t){var e=this;t=g.pack(t),g.blobToBinaryString(t,function(t){e._dc.send(t)}),0===e._queue.length&&(clearTimeout(e._timeout),e._timeout=null)},a.prototype._processAcks=function(){for(var t in this._outgoing)this._outgoing.hasOwnProperty(t)&&this._sendWindowedChunks(t)},a.prototype._handleSend=function(t){for(var e=!0,i=0,n=this._queue.length;n>i;i+=1){var s=this._queue[i];s===t?e=!1:s._multiple&&-1!==s.indexOf(t)&&(e=!1)}e&&(this._queue.push(t),this._timeout||this._setupInterval())},a.prototype._setupDC=function(){var t=this;this._dc.onmessage=function(e){var i=e.data,n=i.constructor;if(n===String){var s=g.binaryStringToArrayBuffer(i);i=g.unpack(s),t._handleMessage(i)}}},a.prototype._handleMessage=function(t){var e,i=t[1],n=this._incoming[i],s=this._outgoing[i];switch(t[0]){case"no":var o=i;o&&this.onmessage(g.unpack(o));break;case"end":if(e=n,this._received[i]=t[2],!e)break;this._ack(i);break;case"ack":if(e=s){var r=t[2];e.ack=Math.max(r,e.ack),e.ack>=e.chunks.length?(g.log("Time: ",new Date-e.timer),delete this._outgoing[i]):this._processAcks()}break;case"chunk":if(e=n,!e){var a=this._received[i];if(a===!0)break;e={ack:["ack",i,0],chunks:[]},this._incoming[i]=e}var c=t[2],u=t[3];e.chunks[c]=new Uint8Array(u),c===e.ack[2]&&this._calculateNextAck(i),this._ack(i);break;default:this._handleSend(t)}},a.prototype._chunk=function(t){for(var e=[],i=t.size,n=0;i>n;){var s=Math.min(i,n+this._mtu),o=t.slice(n,s),r={payload:o};e.push(r),n=s}return g.log("Created",e.length,"chunks."),e},a.prototype._ack=function(t){var e=this._incoming[t].ack;this._received[t]===e[2]&&(this._complete(t),this._received[t]=!0),this._handleSend(e)},a.prototype._calculateNextAck=function(t){for(var e=this._incoming[t],i=e.chunks,n=0,s=i.length;s>n;n+=1)if(void 0===i[n])return void(e.ack[2]=n);e.ack[2]=i.length},a.prototype._sendWindowedChunks=function(t){g.log("sendWindowedChunks for: ",t);for(var e=this._outgoing[t],i=e.chunks,n=[],s=Math.min(e.ack+this._window,i.length),o=e.ack;s>o;o+=1)i[o].sent&&o!==e.ack||(i[o].sent=!0,n.push(["chunk",t,o,i[o].payload]));e.ack+this._window>=i.length&&n.push(["end",t,i.length]),n._multiple=!0,this._handleSend(n)},a.prototype._complete=function(t){g.log("Completed called for",t);var e=this,i=this._incoming[t].chunks,n=new Blob(i);g.blobToArrayBuffer(n,function(t){e.onmessage(g.unpack(t))}),delete this._incoming[t]},a.higherBandwidthSDP=function(t){var e=navigator.appVersion.match(/Chrome\/(.*?) /);if(e&&(e=parseInt(e[1].split(".").shift()),31>e)){var i=t.split("b=AS:30"),n="b=AS:102400";if(i.length>1)return i[0]+n+i[1]}return t},a.prototype.onmessage=function(){},t.Reliable=a,t.RTCSessionDescription=window.mozRTCSessionDescription||window.RTCSessionDescription,t.RTCPeerConnection=window.mozRTCPeerConnection||window.webkitRTCPeerConnection||window.RTCPeerConnection,t.RTCIceCandidate=window.mozRTCIceCandidate||window.RTCIceCandidate;var f={iceServers:[{url:"stun:stun.l.google.com:19302"}]},m=1,g={noop:function(){},CLOUD_HOST:"0.peerjs.com",CLOUD_PORT:9e3,chunkedBrowsers:{Chrome:1},chunkedMTU:16300,logLevel:0,setLogLevel:function(t){var e=parseInt(t,10);g.logLevel=isNaN(parseInt(t,10))?t?3:0:e,g.log=g.warn=g.error=g.noop,g.logLevel>0&&(g.error=g._printWith("ERROR")),g.logLevel>1&&(g.warn=g._printWith("WARNING")),g.logLevel>2&&(g.log=g._print)},setLogFunction:function(t){t.constructor!==Function?g.warn("The log function you passed in is not a function. Defaulting to regular logs."):g._print=t},_printWith:function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t),g._print.apply(g,e)}},_print:function(){var t=!1,e=Array.prototype.slice.call(arguments);e.unshift("PeerJS: ");for(var i=0,n=e.length;n>i;i++)e[i]instanceof Error&&(e[i]="("+e[i].name+") "+e[i].message,t=!0);t?console.error.apply(console,e):console.log.apply(console,e)},defaultConfig:f,browser:function(){return window.mozRTCPeerConnection?"Firefox":window.webkitRTCPeerConnection?"Chrome":window.RTCPeerConnection?"Supported":"Unsupported"}(),supports:function(){if("undefined"==typeof RTCPeerConnection)return{};var t,e,i=!0,n=!0,s=!1,o=!1,r=!!window.webkitRTCPeerConnection;try{t=new RTCPeerConnection(f,{optional:[{RtpDataChannels:!0}]})}catch(a){i=!1,n=!1}if(i)try{e=t.createDataChannel("_PEERJSTEST")}catch(a){i=!1}if(i){try{e.binaryType="blob",s=!0}catch(a){}var c=new RTCPeerConnection(f,{});try{var u=c.createDataChannel("_PEERJSRELIABLETEST",{});o=u.reliable}catch(a){}c.close()}if(n&&(n=!!t.addStream),!r&&i){var h=new RTCPeerConnection(f,{optional:[{RtpDataChannels:!0}]});h.onnegotiationneeded=function(){r=!0,g&&g.supports&&(g.supports.onnegotiationneeded=!0)};{h.createDataChannel("_PEERJSNEGOTIATIONTEST")}setTimeout(function(){h.close()},1e3)}return t&&t.close(),{audioVideo:n,data:i,binaryBlob:s,binary:o,reliable:o,sctp:o,onnegotiationneeded:r}}(),validateId:function(t){return!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.exec(t)},validateKey:function(t){return!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.exec(t)},debug:!1,inherits:function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})},extend:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},pack:BinaryPack.pack,unpack:BinaryPack.unpack,log:function(){if(g.debug){var t=!1,e=Array.prototype.slice.call(arguments);e.unshift("PeerJS: ");for(var i=0,n=e.length;n>i;i++)e[i]instanceof Error&&(e[i]="("+e[i].name+") "+e[i].message,t=!0);t?console.error.apply(console,e):console.log.apply(console,e)}},setZeroTimeout:function(t){function e(e){n.push(e),t.postMessage(s,"*")}function i(e){e.source==t&&e.data==s&&(e.stopPropagation&&e.stopPropagation(),n.length&&n.shift()())}var n=[],s="zero-timeout-message";return t.addEventListener?t.addEventListener("message",i,!0):t.attachEvent&&t.attachEvent("onmessage",i),e}(this),chunk:function(t){for(var e=[],i=t.size,n=index=0,s=Math.ceil(i/g.chunkedMTU);i>n;){var o=Math.min(i,n+g.chunkedMTU),r=t.slice(n,o),a={__peerData:m,n:index,data:r,total:s};e.push(a),n=o,index+=1}return m+=1,e},blobToArrayBuffer:function(t,e){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.readAsArrayBuffer(t)},blobToBinaryString:function(t,e){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.readAsBinaryString(t)},binaryStringToArrayBuffer:function(t){for(var e=new Uint8Array(t.length),i=0;i<t.length;i++)e[i]=255&t.charCodeAt(i);return e.buffer},randomToken:function(){return Math.random().toString(36).substr(2)},isSecure:function(){return"https:"===location.protocol}};t.util=g,g.inherits(c,r),c.prototype._retrieveId=function(){var t=this,e=new XMLHttpRequest,i=this.options.secure?"https://":"http://",n=i+this.options.host+":"+this.options.port+"/"+this.options.key+"/id",s="?ts="+(new Date).getTime()+Math.random();n+=s,e.open("get",n,!0),e.onerror=function(e){g.error("Error retrieving ID",e),t._abort("server-error","Could not get an ID from the server")},e.onreadystatechange=function(){return 4===e.readyState?200!==e.status?void e.onerror():void t._initialize(e.responseText):void 0},e.send(null)},c.prototype._initialize=function(t){this.id=t,this.socket.start(this.id)},c.prototype._handleMessage=function(t){var e=t.type,i=t.payload,n=t.src;switch(e){case"OPEN":this.emit("open",this.id),this.open=!0;break;case"ERROR":this._abort("server-error",i.msg);break;case"ID-TAKEN":this._abort("unavailable-id","ID `"+this.id+"` is taken");break;case"INVALID-KEY":this._abort("invalid-key",'API KEY "'+this.options.key+'" is invalid');break;case"LEAVE":g.log("Received leave message from",n),this._cleanupPeer(n);break;case"EXPIRE":this.emit("error",new Error("Could not connect to peer "+n));break;case"OFFER":var s=i.connectionId,o=this.getConnection(n,s);if(o)g.warn("Offer received for existing Connection ID:",s);else{if("media"===i.type){var o=new h(n,this,{connectionId:s,_payload:i,metadata:i.metadata});this._addConnection(n,o),this.emit("call",o)}else{if("data"!==i.type)return void g.warn("Received malformed connection type:",i.type);o=new u(n,this,{connectionId:s,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable}),this._addConnection(n,o),this.emit("connection",o)}for(var r=this._getMessages(s),a=0,c=r.length;c>a;a+=1)o.handleMessage(r[a])}break;default:if(!i)return void g.warn("You received a malformed message from "+n+" of type "+e);var l=i.connectionId,o=this.getConnection(n,l);o&&o.pc?o.handleMessage(t):l?this._storeMessage(l,t):g.warn("You received an unrecognized message:",t)}},c.prototype._storeMessage=function(t,e){this._lostMessages[t]||(this._lostMessages[t]=[]),this._lostMessages[t].push(e)},c.prototype._getMessages=function(t){var e=this._lostMessages[t];return e?(delete this._lostMessages[t],e):[]},c.prototype.connect=function(t,e){if(this.disconnected)return g.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emit("error",new Error("Cannot connect to new Peer after disconnecting from server."));var i=new u(t,this,e);return this._addConnection(t,i),i},c.prototype.call=function(t,e,i){if(this.disconnected)return g.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emit("error",new Error("Cannot connect to new Peer after disconnecting from server."));if(!e)return void g.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");i=i||{},i._stream=e;var n=new h(t,this,i);return this._addConnection(t,n),n},c.prototype._addConnection=function(t,e){this.connections[t]||(this.connections[t]=[]),this.connections[t].push(e)},c.prototype.getConnection=function(t,e){var i=this.connections[t];if(!i)return null;for(var n=0,s=i.length;s>n;n++)if(i[n].id===e)return i[n];return null},c.prototype._delayedAbort=function(t,e){var i=this;g.setZeroTimeout(function(){i._abort(t,e)})},c.prototype._abort=function(t,e){g.error("Aborting. Error:",e);var i=new Error(e);i.type=t,this.destroy(),this.emit("error",i)},c.prototype.destroy=function(){this.destroyed||(this._cleanup(),this.disconnect(),this.destroyed=!0)},c.prototype._cleanup=function(){if(this.connections)for(var t=Object.keys(this.connections),e=0,i=t.length;i>e;e++)this._cleanupPeer(t[e]);this.emit("close")},c.prototype._cleanupPeer=function(t){for(var e=this.connections[t],i=0,n=e.length;n>i;i+=1)e[i].close()},c.prototype.disconnect=function(){var t=this;g.setZeroTimeout(function(){t.disconnected||(t.disconnected=!0,t.open=!1,t.socket&&t.socket.close(),t.id=null)})},t.Peer=c,g.inherits(u,r),u._idPrefix="dc_",u.prototype.initialize=function(t){this._dc=this.dataChannel=t,this._configureDataChannel()},u.prototype._configureDataChannel=function(){var t=this;g.supports.sctp&&(this._dc.binaryType="arraybuffer"),this._dc.onopen=function(){g.log("Data channel connection success"),t.open=!0,t.emit("open")},!g.supports.sctp&&this.reliable&&(this._reliable=new a(this._dc,g.debug)),this._reliable?this._reliable.onmessage=function(e){t.emit("data",e)}:this._dc.onmessage=function(e){t._handleDataMessage(e)},this._dc.onclose=function(){g.log("DataChannel closed for:",t.peer),t.close()}},u.prototype._handleDataMessage=function(t){var e=this,i=t.data,n=i.constructor;if("binary"===this.serialization||"binary-utf8"===this.serialization){if(n===Blob)return void g.blobToArrayBuffer(i,function(t){i=g.unpack(t),e.emit("data",i)});if(n===ArrayBuffer)i=g.unpack(i);else if(n===String){var s=g.binaryStringToArrayBuffer(i);i=g.unpack(s)}}else"json"===this.serialization&&(i=JSON.parse(i));if(i.__peerData){var o=i.__peerData,r=this._chunkedData[o]||{data:[],count:0,total:i.total};return r.data[i.n]=i.data,r.count+=1,r.total===r.count&&(i=new Blob(r.data),this._handleDataMessage({data:i}),delete this._chunkedData[o]),void(this._chunkedData[o]=r)}this.emit("data",i)},u.prototype.close=function(){this.open&&(this.open=!1,v.cleanup(this),this.emit("close"))},u.prototype.send=function(t,e){if(!this.open)return void this.emit("error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));if(this._reliable)return void this._reliable.send(t);var i=this;if("json"===this.serialization)this._bufferedSend(JSON.stringify(t));else if("binary"===this.serialization||"binary-utf8"===this.serialization){var n=g.pack(t),s=g.chunkedBrowsers[this._peerBrowser]||g.chunkedBrowsers[g.browser];if(s&&!e&&n.size>g.chunkedMTU)return void this._sendChunks(n);g.supports.sctp?g.supports.binaryBlob?this._bufferedSend(n):g.blobToArrayBuffer(n,function(t){i._bufferedSend(t)}):g.blobToBinaryString(n,function(t){i._bufferedSend(t)})}else this._bufferedSend(t)},u.prototype._bufferedSend=function(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this.bufferSize=this._buffer.length)},u.prototype._trySend=function(t){try{this._dc.send(t)}catch(e){this._buffering=!0;var i=this;return setTimeout(function(){i._buffering=!1,i._tryBuffer()},100),!1}return!0},u.prototype._tryBuffer=function(){if(0!==this._buffer.length){var t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this.bufferSize=this._buffer.length,this._tryBuffer())}},u.prototype._sendChunks=function(t){for(var e=g.chunk(t),i=0,n=e.length;n>i;i+=1){var t=e[i];this.send(t,!0)}},u.prototype.handleMessage=function(t){var e=t.payload;switch(t.type){case"ANSWER":this._peerBrowser=e.browser,v.handleSDP(t.type,this,e.sdp);break;case"CANDIDATE":v.handleCandidate(this,e.candidate);break;default:g.warn("Unrecognized message type:",t.type,"from peer:",this.peer)}},g.inherits(h,r),h._idPrefix="mc_",h.prototype.addStream=function(t){g.log("Receiving stream",t),this.remoteStream=t,this.emit("stream",t)},h.prototype.handleMessage=function(t){var e=t.payload;switch(t.type){case"ANSWER":v.handleSDP(t.type,this,e.sdp),this.open=!0;break;case"CANDIDATE":v.handleCandidate(this,e.candidate);break;default:g.warn("Unrecognized message type:",t.type,"from peer:",this.peer)}},h.prototype.answer=function(t){if(this.localStream)return void g.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");this.options._payload._stream=t,this.localStream=t,v.startConnection(this,this.options._payload);for(var e=this.provider._getMessages(this.id),i=0,n=e.length;n>i;i+=1)this.handleMessage(e[i]);this.open=!0},h.prototype.close=function(){this.open&&(this.open=!1,v.cleanup(this),this.emit("close"))};var v={pcs:{data:{},media:{}},queue:[]};v._idPrefix="pc_",v.startConnection=function(t,e){var i=v._getPeerConnection(t,e);if("media"===t.type&&e._stream&&i.addStream(e._stream),t.pc=i,e.originator){if("data"===t.type){var n={};g.supports.sctp||(n={reliable:e.reliable});var s=i.createDataChannel(t.label,n);t.initialize(s)}g.supports.onnegotiationneeded||v._makeOffer(t)}else v.handleSDP("OFFER",t,e.sdp)},v._getPeerConnection=function(t,e){v.pcs[t.type]||g.error(t.type+" is not a valid connection type. Maybe you overrode the `type` property somewhere."),v.pcs[t.type][t.peer]||(v.pcs[t.type][t.peer]={});{var i;v.pcs[t.type][t.peer]}return e.pc&&(i=v.pcs[t.type][t.peer][e.pc]),i&&"stable"===i.signalingState||(i=v._startPeerConnection(t)),i},v._startPeerConnection=function(t){g.log("Creating RTCPeerConnection.");var e=v._idPrefix+g.randomToken(),i={};"data"!==t.type||g.supports.sctp?"media"===t.type&&(i={optional:[{DtlsSrtpKeyAgreement:!0}]}):i={optional:[{RtpDataChannels:!0}]};var n=new RTCPeerConnection(t.provider.options.config,i);return v.pcs[t.type][t.peer][e]=n,v._setupListeners(t,n,e),n},v._setupListeners=function(t,e){var i=t.peer,n=t.id,s=t.provider;g.log("Listening for ICE candidates."),e.onicecandidate=function(e){e.candidate&&(g.log("Received ICE candidates for:",t.peer),s.socket.send({type:"CANDIDATE",payload:{candidate:e.candidate,type:t.type,connectionId:t.id},dst:i}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"disconnected":case"failed":g.log("iceConnectionState is disconnected, closing connections to "+i),t.close();break;case"completed":e.onicecandidate=g.noop}},e.onicechange=e.oniceconnectionstatechange,g.log("Listening for `negotiationneeded`"),e.onnegotiationneeded=function(){g.log("`negotiationneeded` triggered"),"stable"==e.signalingState?v._makeOffer(t):g.log("onnegotiationneeded triggered when not stable. Is another connection being established?")},g.log("Listening for data channel"),e.ondatachannel=function(t){g.log("Received data channel");var e=t.channel,o=s.getConnection(i,n);o.initialize(e)},g.log("Listening for remote stream"),e.onaddstream=function(t){g.log("Received remote stream");var e=t.stream;s.getConnection(i,n).addStream(e)}},v.cleanup=function(t){g.log("Cleaning up PeerConnection to "+t.peer);var e=t.pc;!e||"closed"===e.readyState&&"closed"===e.signalingState||(e.close(),t.pc=null)},v._makeOffer=function(t){var e=t.pc;e.createOffer(function(i){g.log("Created offer."),!g.supports.sctp&&"data"===t.type&&t.reliable&&(i.sdp=a.higherBandwidthSDP(i.sdp)),e.setLocalDescription(i,function(){g.log("Set localDescription: offer","for:",t.peer),t.provider.socket.send({type:"OFFER",payload:{sdp:i,type:t.type,label:t.label,connectionId:t.id,reliable:t.reliable,serialization:t.serialization,metadata:t.metadata,browser:g.browser},dst:t.peer})},function(e){t.provider.emit("error",e),g.log("Failed to setLocalDescription, ",e)})},function(e){t.provider.emit("error",e),g.log("Failed to createOffer, ",e)},t.options.constraints)},v._makeAnswer=function(t){var e=t.pc;e.createAnswer(function(i){g.log("Created answer."),!g.supports.sctp&&"data"===t.type&&t.reliable&&(i.sdp=a.higherBandwidthSDP(i.sdp)),e.setLocalDescription(i,function(){g.log("Set localDescription: answer","for:",t.peer),t.provider.socket.send({type:"ANSWER",payload:{sdp:i,type:t.type,connectionId:t.id,browser:g.browser},dst:t.peer})},function(e){t.provider.emit("error",e),g.log("Failed to setLocalDescription, ",e)})},function(e){t.provider.emit("error",e),g.log("Failed to create answer, ",e)})},v.handleSDP=function(t,e,i){i=new RTCSessionDescription(i);var n=e.pc;g.log("Setting remote description",i),n.setRemoteDescription(i,function(){g.log("Set remoteDescription:",t,"for:",e.peer),"OFFER"===t&&v._makeAnswer(e)},function(t){e.provider.emit("error",t),g.log("Failed to setRemoteDescription, ",t)})},v.handleCandidate=function(t,e){var i=e.candidate,n=e.sdpMLineIndex;t.pc.addIceCandidate(new RTCIceCandidate({sdpMLineIndex:n,candidate:i})),g.log("Added ICE candidate for:",t.peer)},g.inherits(l,r),l.prototype.start=function(t){this.id=t;var e=g.randomToken();this._httpUrl+="/"+t+"/"+e,this._wsUrl+="&id="+t+"&token="+e,this._startXhrStream(),this._startWebSocket()},l.prototype._startWebSocket=function(){var t=this;this._socket||(this._socket=new WebSocket(this._wsUrl),this._socket.onmessage=function(e){var i;try{i=JSON.parse(e.data)}catch(n){return void g.log("Invalid server message",e.data)}t.emit("message",i)},this._socket.onopen=function(){t._timeout&&(clearTimeout(t._timeout),setTimeout(function(){t._http.abort(),t._http=null},5e3)),t._sendQueuedMessages(),g.log("Socket open")})},l.prototype._startXhrStream=function(t){try{var e=this;this._http=new XMLHttpRequest,this._http._index=1,this._http._streamIndex=t||0,this._http.open("post",this._httpUrl+"/id?i="+this._http._streamIndex,!0),this._http.onreadystatechange=function(){2==this.readyState&&this.old&&(this.old.abort(),delete this.old),this.readyState>2&&200==this.status&&this.responseText&&e._handleStream(this)},this._http.send(null),this._setHTTPTimeout()}catch(i){g.log("XMLHttpRequest not available; defaulting to WebSockets")}},l.prototype._handleStream=function(t){var e=t.responseText.split("\n");if(t._buffer)for(;t._buffer.length>0;){var i=t._buffer.shift(),n=e[i];try{n=JSON.parse(n)}catch(s){t._buffer.shift(i);break}this.emit("message",n)}var o=e[t._index];if(o)if(t._index+=1,t._index===e.length)t._buffer||(t._buffer=[]),t._buffer.push(t._index-1);else{try{o=JSON.parse(o)}catch(s){return void g.log("Invalid server message",o)}this.emit("message",o)}},l.prototype._setHTTPTimeout=function(){var t=this;this._timeout=setTimeout(function(){var e=t._http;t._wsOpen()?e.abort():(t._startXhrStream(e._streamIndex+1),t._http.old=e)},25e3)},l.prototype._wsOpen=function(){return this._socket&&1==this._socket.readyState},l.prototype._sendQueuedMessages=function(){for(var t=0,e=this._queue.length;e>t;t+=1)this.send(this._queue[t])},l.prototype.send=function(t){if(!this.disconnected){if(!this.id)return void this._queue.push(t);if(!t.type)return void this.emit("error","Invalid message");var e=JSON.stringify(t);if(this._wsOpen())this._socket.send(e);else{var i=new XMLHttpRequest,n=this._httpUrl+"/"+t.type.toLowerCase();i.open("post",n,!0),i.setRequestHeader("Content-Type","application/json"),i.send(e)}}},l.prototype.close=function(){!this.disconnected&&this._wsOpen()&&(this._socket.close(),this.disconnected=!0)}}).bind(this)(this)}.bind(this)),require.register("app/vendor/underscore.js",function(t,e,i){(function(){var e=this,n=e._,s={},o=Array.prototype,r=Object.prototype,a=Function.prototype,c=o.push,u=o.slice,h=o.concat,l=r.toString,p=r.hasOwnProperty,d=o.forEach,f=o.map,m=o.reduce,g=o.reduceRight,v=o.filter,y=o.every,b=o.some,_=o.indexOf,w=o.lastIndexOf,x=Array.isArray,S=Object.keys,k=a.bind,j=function(t){return t instanceof j?t:this instanceof j?void(this._wrapped=t):new j(t)};"undefined"!=typeof t?("undefined"!=typeof i&&i.exports&&(t=i.exports=j),t._=j):e._=j,j.VERSION="1.6.0";var C=j.each=j.forEach=function(t,e,i){if(null==t)return t;if(d&&t.forEach===d)t.forEach(e,i);else if(t.length===+t.length){for(var n=0,o=t.length;o>n;n++)if(e.call(i,t[n],n,t)===s)return}else for(var r=j.keys(t),n=0,o=r.length;o>n;n++)if(e.call(i,t[r[n]],r[n],t)===s)return;return t};j.map=j.collect=function(t,e,i){var n=[];return null==t?n:f&&t.map===f?t.map(e,i):(C(t,function(t,s,o){n.push(e.call(i,t,s,o))}),n)};var O="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(t,e,i,n){var s=arguments.length>2;if(null==t&&(t=[]),m&&t.reduce===m)return n&&(e=j.bind(e,n)),s?t.reduce(e,i):t.reduce(e);if(C(t,function(t,o,r){s?i=e.call(n,i,t,o,r):(i=t,s=!0)}),!s)throw new TypeError(O);return i},j.reduceRight=j.foldr=function(t,e,i,n){var s=arguments.length>2;if(null==t&&(t=[]),g&&t.reduceRight===g)return n&&(e=j.bind(e,n)),s?t.reduceRight(e,i):t.reduceRight(e);var o=t.length;if(o!==+o){var r=j.keys(t);o=r.length}if(C(t,function(a,c,u){c=r?r[--o]:--o,s?i=e.call(n,i,t[c],c,u):(i=t[c],s=!0)}),!s)throw new TypeError(O);return i},j.find=j.detect=function(t,e,i){var n;return T(t,function(t,s,o){return e.call(i,t,s,o)?(n=t,!0):void 0}),n},j.filter=j.select=function(t,e,i){var n=[];return null==t?n:v&&t.filter===v?t.filter(e,i):(C(t,function(t,s,o){e.call(i,t,s,o)&&n.push(t)}),n)},j.reject=function(t,e,i){return j.filter(t,function(t,n,s){return!e.call(i,t,n,s)},i)},j.every=j.all=function(t,e,i){e||(e=j.identity);var n=!0;return null==t?n:y&&t.every===y?t.every(e,i):(C(t,function(t,o,r){return(n=n&&e.call(i,t,o,r))?void 0:s}),!!n)};var T=j.some=j.any=function(t,e,i){e||(e=j.identity);var n=!1;return null==t?n:b&&t.some===b?t.some(e,i):(C(t,function(t,o,r){return n||(n=e.call(i,t,o,r))?s:void 0}),!!n)};j.contains=j.include=function(t,e){return null==t?!1:_&&t.indexOf===_?-1!=t.indexOf(e):T(t,function(t){return t===e})},j.invoke=function(t,e){var i=u.call(arguments,2),n=j.isFunction(e);return j.map(t,function(t){return(n?e:t[e]).apply(t,i)})},j.pluck=function(t,e){return j.map(t,j.property(e))},j.where=function(t,e){return j.filter(t,j.matches(e))},j.findWhere=function(t,e){return j.find(t,j.matches(e))},j.max=function(t,e,i){if(!e&&j.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var n=-1/0,s=-1/0;return C(t,function(t,o,r){var a=e?e.call(i,t,o,r):t;a>s&&(n=t,s=a)}),n},j.min=function(t,e,i){if(!e&&j.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var n=1/0,s=1/0;return C(t,function(t,o,r){var a=e?e.call(i,t,o,r):t;s>a&&(n=t,s=a)}),n},j.shuffle=function(t){var e,i=0,n=[];return C(t,function(t){e=j.random(i++),n[i-1]=n[e],n[e]=t}),n},j.sample=function(t,e,i){return null==e||i?(t.length!==+t.length&&(t=j.values(t)),t[j.random(t.length-1)]):j.shuffle(t).slice(0,Math.max(0,e))};var I=function(t){return null==t?j.identity:j.isFunction(t)?t:j.property(t)};j.sortBy=function(t,e,i){return e=I(e),j.pluck(j.map(t,function(t,n,s){return{value:t,index:n,criteria:e.call(i,t,n,s)}
}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var E=function(t){return function(e,i,n){var s={};return i=I(i),C(e,function(o,r){var a=i.call(n,o,r,e);t(s,a,o)}),s}};j.groupBy=E(function(t,e,i){j.has(t,e)?t[e].push(i):t[e]=[i]}),j.indexBy=E(function(t,e,i){t[e]=i}),j.countBy=E(function(t,e){j.has(t,e)?t[e]++:t[e]=1}),j.sortedIndex=function(t,e,i,n){i=I(i);for(var s=i.call(n,e),o=0,r=t.length;r>o;){var a=o+r>>>1;i.call(n,t[a])<s?o=a+1:r=a}return o},j.toArray=function(t){return t?j.isArray(t)?u.call(t):t.length===+t.length?j.map(t,j.identity):j.values(t):[]},j.size=function(t){return null==t?0:t.length===+t.length?t.length:j.keys(t).length},j.first=j.head=j.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:0>e?[]:u.call(t,0,e)},j.initial=function(t,e,i){return u.call(t,0,t.length-(null==e||i?1:e))},j.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:u.call(t,Math.max(t.length-e,0))},j.rest=j.tail=j.drop=function(t,e,i){return u.call(t,null==e||i?1:e)},j.compact=function(t){return j.filter(t,j.identity)};var M=function(t,e,i){return e&&j.every(t,j.isArray)?h.apply(i,t):(C(t,function(t){j.isArray(t)||j.isArguments(t)?e?c.apply(i,t):M(t,e,i):i.push(t)}),i)};j.flatten=function(t,e){return M(t,e,[])},j.without=function(t){return j.difference(t,u.call(arguments,1))},j.partition=function(t,e){var i=[],n=[];return C(t,function(t){(e(t)?i:n).push(t)}),[i,n]},j.uniq=j.unique=function(t,e,i,n){j.isFunction(e)&&(n=i,i=e,e=!1);var s=i?j.map(t,i,n):t,o=[],r=[];return C(s,function(i,n){(e?n&&r[r.length-1]===i:j.contains(r,i))||(r.push(i),o.push(t[n]))}),o},j.union=function(){return j.uniq(j.flatten(arguments,!0))},j.intersection=function(t){var e=u.call(arguments,1);return j.filter(j.uniq(t),function(t){return j.every(e,function(e){return j.contains(e,t)})})},j.difference=function(t){var e=h.apply(o,u.call(arguments,1));return j.filter(t,function(t){return!j.contains(e,t)})},j.zip=function(){for(var t=j.max(j.pluck(arguments,"length").concat(0)),e=new Array(t),i=0;t>i;i++)e[i]=j.pluck(arguments,""+i);return e},j.object=function(t,e){if(null==t)return{};for(var i={},n=0,s=t.length;s>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},j.indexOf=function(t,e,i){if(null==t)return-1;var n=0,s=t.length;if(i){if("number"!=typeof i)return n=j.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,s+i):i}if(_&&t.indexOf===_)return t.indexOf(e,i);for(;s>n;n++)if(t[n]===e)return n;return-1},j.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=null!=i;if(w&&t.lastIndexOf===w)return n?t.lastIndexOf(e,i):t.lastIndexOf(e);for(var s=n?i:t.length;s--;)if(t[s]===e)return s;return-1},j.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),s=0,o=new Array(n);n>s;)o[s++]=t,t+=i;return o};var A=function(){};j.bind=function(t,e){var i,n;if(k&&t.bind===k)return k.apply(t,u.call(arguments,1));if(!j.isFunction(t))throw new TypeError;return i=u.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(u.call(arguments)));A.prototype=t.prototype;var s=new A;A.prototype=null;var o=t.apply(s,i.concat(u.call(arguments)));return Object(o)===o?o:s}},j.partial=function(t){var e=u.call(arguments,1);return function(){for(var i=0,n=e.slice(),s=0,o=n.length;o>s;s++)n[s]===j&&(n[s]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return t.apply(this,n)}},j.bindAll=function(t){var e=u.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return C(e,function(e){t[e]=j.bind(t[e],t)}),t},j.memoize=function(t,e){var i={};return e||(e=j.identity),function(){var n=e.apply(this,arguments);return j.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}},j.delay=function(t,e){var i=u.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},j.defer=function(t){return j.delay.apply(j,[t,1].concat(u.call(arguments,1)))},j.throttle=function(t,e,i){var n,s,o,r=null,a=0;i||(i={});var c=function(){a=i.leading===!1?0:j.now(),r=null,o=t.apply(n,s),n=s=null};return function(){var u=j.now();a||i.leading!==!1||(a=u);var h=e-(u-a);return n=this,s=arguments,0>=h?(clearTimeout(r),r=null,a=u,o=t.apply(n,s),n=s=null):r||i.trailing===!1||(r=setTimeout(c,h)),o}},j.debounce=function(t,e,i){var n,s,o,r,a,c=function(){var u=j.now()-r;e>u?n=setTimeout(c,e-u):(n=null,i||(a=t.apply(o,s),o=s=null))};return function(){o=this,s=arguments,r=j.now();var u=i&&!n;return n||(n=setTimeout(c,e)),u&&(a=t.apply(o,s),o=s=null),a}},j.once=function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments),t=null,e)}},j.wrap=function(t,e){return j.partial(e,t)},j.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},j.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},j.keys=function(t){if(!j.isObject(t))return[];if(S)return S(t);var e=[];for(var i in t)j.has(t,i)&&e.push(i);return e},j.values=function(t){for(var e=j.keys(t),i=e.length,n=new Array(i),s=0;i>s;s++)n[s]=t[e[s]];return n},j.pairs=function(t){for(var e=j.keys(t),i=e.length,n=new Array(i),s=0;i>s;s++)n[s]=[e[s],t[e[s]]];return n},j.invert=function(t){for(var e={},i=j.keys(t),n=0,s=i.length;s>n;n++)e[t[i[n]]]=i[n];return e},j.functions=j.methods=function(t){var e=[];for(var i in t)j.isFunction(t[i])&&e.push(i);return e.sort()},j.extend=function(t){return C(u.call(arguments,1),function(e){if(e)for(var i in e)t[i]=e[i]}),t},j.pick=function(t){var e={},i=h.apply(o,u.call(arguments,1));return C(i,function(i){i in t&&(e[i]=t[i])}),e},j.omit=function(t){var e={},i=h.apply(o,u.call(arguments,1));for(var n in t)j.contains(i,n)||(e[n]=t[n]);return e},j.defaults=function(t){return C(u.call(arguments,1),function(e){if(e)for(var i in e)void 0===t[i]&&(t[i]=e[i])}),t},j.clone=function(t){return j.isObject(t)?j.isArray(t)?t.slice():j.extend({},t):t},j.tap=function(t,e){return e(t),t};var z=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof j&&(t=t._wrapped),e instanceof j&&(e=e._wrapped);var s=l.call(t);if(s!=l.call(e))return!1;switch(s){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=i.length;o--;)if(i[o]==t)return n[o]==e;var r=t.constructor,a=e.constructor;if(r!==a&&!(j.isFunction(r)&&r instanceof r&&j.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1;i.push(t),n.push(e);var c=0,u=!0;if("[object Array]"==s){if(c=t.length,u=c==e.length)for(;c--&&(u=z(t[c],e[c],i,n)););}else{for(var h in t)if(j.has(t,h)&&(c++,!(u=j.has(e,h)&&z(t[h],e[h],i,n))))break;if(u){for(h in e)if(j.has(e,h)&&!c--)break;u=!c}}return i.pop(),n.pop(),u};j.isEqual=function(t,e){return z(t,e,[],[])},j.isEmpty=function(t){if(null==t)return!0;if(j.isArray(t)||j.isString(t))return 0===t.length;for(var e in t)if(j.has(t,e))return!1;return!0},j.isElement=function(t){return!(!t||1!==t.nodeType)},j.isArray=x||function(t){return"[object Array]"==l.call(t)},j.isObject=function(t){return t===Object(t)},C(["Arguments","Function","String","Number","Date","RegExp"],function(t){j["is"+t]=function(e){return l.call(e)=="[object "+t+"]"}}),j.isArguments(arguments)||(j.isArguments=function(t){return!(!t||!j.has(t,"callee"))}),"function"!=typeof/./&&(j.isFunction=function(t){return"function"==typeof t}),j.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},j.isNaN=function(t){return j.isNumber(t)&&t!=+t},j.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==l.call(t)},j.isNull=function(t){return null===t},j.isUndefined=function(t){return void 0===t},j.has=function(t,e){return p.call(t,e)},j.noConflict=function(){return e._=n,this},j.identity=function(t){return t},j.constant=function(t){return function(){return t}},j.property=function(t){return function(e){return e[t]}},j.matches=function(t){return function(e){if(e===t)return!0;for(var i in t)if(t[i]!==e[i])return!1;return!0}},j.times=function(t,e,i){for(var n=Array(Math.max(0,t)),s=0;t>s;s++)n[s]=e.call(i,s);return n},j.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},j.now=Date.now||function(){return(new Date).getTime()};var N={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};N.unescape=j.invert(N.escape);var P={escape:new RegExp("["+j.keys(N.escape).join("")+"]","g"),unescape:new RegExp("("+j.keys(N.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(t){j[t]=function(e){return null==e?"":(""+e).replace(P[t],function(e){return N[t][e]})}}),j.result=function(t,e){if(null==t)return void 0;var i=t[e];return j.isFunction(i)?i.call(t):i},j.mixin=function(t){C(j.functions(t),function(e){var i=j[e]=t[e];j.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),D.call(this,i.apply(j,t))}})};var B=0;j.uniqueId=function(t){var e=++B+"";return t?t+e:e},j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;j.template=function(t,e,i){var n;i=j.defaults({},i,j.templateSettings);var s=new RegExp([(i.escape||R).source,(i.interpolate||R).source,(i.evaluate||R).source].join("|")+"|$","g"),o=0,r="__p+='";t.replace(s,function(e,i,n,s,a){return r+=t.slice(o,a).replace(L,function(t){return"\\"+F[t]}),i&&(r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(r+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),s&&(r+="';\n"+s+"\n__p+='"),o=a+e.length,e}),r+="';\n",i.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{n=new Function(i.variable||"obj","_",r)}catch(a){throw a.source=r,a}if(e)return n(e,j);var c=function(t){return n.call(this,t,j)};return c.source="function("+(i.variable||"obj")+"){\n"+r+"}",c},j.chain=function(t){return j(t).chain()};var D=function(t){return this._chain?j(t).chain():t};j.mixin(j),C(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];j.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!=t&&"splice"!=t||0!==i.length||delete i[0],D.call(this,i)}}),C(["concat","join","slice"],function(t){var e=o[t];j.prototype[t]=function(){return D.call(this,e.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return j})}).call(this)}.bind(this)),require.register("app/vendor/zepto.js",function(){var t=function(){function t(t){return null==t?String(t):W[Y.call(t)]||"object"}function e(e){return"function"==t(e)}function i(t){return null!=t&&t==t.window}function n(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function s(e){return"object"==t(e)}function o(t){return s(t)&&!i(t)&&Object.getPrototypeOf(t)==Object.prototype}function r(t){return t instanceof Array}function a(t){return"number"==typeof t.length}function c(t){return E.call(t,function(t){return null!=t})}function u(t){return t.length>0?k.fn.concat.apply([],t):t}function h(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(t){return t in z?z[t]:z[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function p(t,e){return"number"!=typeof e||N[h(t)]?e:e+"px"}function d(t){var e,i;return A[t]||(e=M.createElement(t),M.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),A[t]=i),A[t]}function f(t){return"children"in t?I.call(t.children):k.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function m(t,e,i){for(S in e)i&&(o(e[S])||r(e[S]))?(o(e[S])&&!o(t[S])&&(t[S]={}),r(e[S])&&!r(t[S])&&(t[S]=[]),m(t[S],e[S],i)):e[S]!==x&&(t[S]=e[S])}function g(t,e){return null==e?k(t):k(t).filter(e)}function v(t,i,n,s){return e(i)?i.call(t,n,s):i}function y(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function b(t,e){var i=t.className,n=i&&i.baseVal!==x;return e===x?n?i.baseVal:i:void(n?i.baseVal=e:t.className=e)}function _(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\[\{]/.test(t)?k.parseJSON(t):t:e):t}catch(i){return t}}function w(t,e){e(t);for(var i in t.childNodes)w(t.childNodes[i],e)}var x,S,k,j,C,O,T=[],I=T.slice,E=T.filter,M=window.document,A={},z={},N={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},P=/^\s*<(\w+|!)[^>]*>/,B=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,R=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,F=/^(?:body|html)$/i,L=/([A-Z])/g,D=["val","css","html","text","data","width","height","offset"],H=["after","prepend","before","append"],q=M.createElement("table"),U=M.createElement("tr"),V={tr:M.createElement("tbody"),tbody:q,thead:q,tfoot:q,td:U,th:U,"*":M.createElement("div")},$=/complete|loaded|interactive/,X=/^[\w-]*$/,W={},Y=W.toString,Z={},J=M.createElement("div"),G={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"};return Z.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n,s=t.parentNode,o=!s;return o&&(s=J).appendChild(t),n=~Z.qsa(s,e).indexOf(t),o&&J.removeChild(t),n},C=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},O=function(t){return E.call(t,function(e,i){return t.indexOf(e)==i})},Z.fragment=function(t,e,i){var n,s,r;return B.test(t)&&(n=k(M.createElement(RegExp.$1))),n||(t.replace&&(t=t.replace(R,"<$1></$2>")),e===x&&(e=P.test(t)&&RegExp.$1),e in V||(e="*"),r=V[e],r.innerHTML=""+t,n=k.each(I.call(r.childNodes),function(){r.removeChild(this)})),o(i)&&(s=k(n),k.each(i,function(t,e){D.indexOf(t)>-1?s[t](e):s.attr(t,e)})),n},Z.Z=function(t,e){return t=t||[],t.__proto__=k.fn,t.selector=e||"",t},Z.isZ=function(t){return t instanceof Z.Z},Z.init=function(t,i){var n;if(!t)return Z.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&P.test(t))n=Z.fragment(t,RegExp.$1,i),t=null;else{if(i!==x)return k(i).find(t);n=Z.qsa(M,t)}else{if(e(t))return k(M).ready(t);if(Z.isZ(t))return t;if(r(t))n=c(t);else if(s(t))n=[t],t=null;else if(P.test(t))n=Z.fragment(t.trim(),RegExp.$1,i),t=null;else{if(i!==x)return k(i).find(t);n=Z.qsa(M,t)}}return Z.Z(n,t)},k=function(t,e){return Z.init(t,e)},k.extend=function(t){var e,i=I.call(arguments,1);return"boolean"==typeof t&&(e=t,t=i.shift()),i.forEach(function(i){m(t,i,e)}),t},Z.qsa=function(t,e){var i,s="#"==e[0],o=!s&&"."==e[0],r=s||o?e.slice(1):e,a=X.test(r);return n(t)&&a&&s?(i=t.getElementById(r))?[i]:[]:1!==t.nodeType&&9!==t.nodeType?[]:I.call(a&&!s?o?t.getElementsByClassName(r):t.getElementsByTagName(e):t.querySelectorAll(e))},k.contains=function(t,e){return t!==e&&t.contains(e)},k.type=t,k.isFunction=e,k.isWindow=i,k.isArray=r,k.isPlainObject=o,k.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},k.inArray=function(t,e,i){return T.indexOf.call(e,t,i)},k.camelCase=C,k.trim=function(t){return null==t?"":String.prototype.trim.call(t)},k.uuid=0,k.support={},k.expr={},k.map=function(t,e){var i,n,s,o=[];if(a(t))for(n=0;n<t.length;n++)i=e(t[n],n),null!=i&&o.push(i);else for(s in t)i=e(t[s],s),null!=i&&o.push(i);return u(o)},k.each=function(t,e){var i,n;if(a(t)){for(i=0;i<t.length;i++)if(e.call(t[i],i,t[i])===!1)return t}else for(n in t)if(e.call(t[n],n,t[n])===!1)return t;return t},k.grep=function(t,e){return E.call(t,e)},window.JSON&&(k.parseJSON=JSON.parse),k.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){W["[object "+e+"]"]=e.toLowerCase()}),k.fn={forEach:T.forEach,reduce:T.reduce,push:T.push,sort:T.sort,indexOf:T.indexOf,concat:T.concat,map:function(t){return k(k.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return k(I.apply(this,arguments))},ready:function(t){return $.test(M.readyState)&&M.body?t(k):M.addEventListener("DOMContentLoaded",function(){t(k)},!1),this},get:function(t){return t===x?I.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return T.every.call(this,function(e,i){return t.call(e,i,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):k(E.call(this,function(e){return Z.matches(e,t)}))},add:function(t,e){return k(O(this.concat(k(t,e))))},is:function(t){return this.length>0&&Z.matches(this[0],t)},not:function(t){var i=[];if(e(t)&&t.call!==x)this.each(function(e){t.call(this,e)||i.push(this)});else{var n="string"==typeof t?this.filter(t):a(t)&&e(t.item)?I.call(t):k(t);this.forEach(function(t){n.indexOf(t)<0&&i.push(t)})}return k(i)},has:function(t){return this.filter(function(){return s(t)?k.contains(this,t):k(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!s(t)?t:k(t)},last:function(){var t=this[this.length-1];return t&&!s(t)?t:k(t)},find:function(t){var e,i=this;return e="object"==typeof t?k(t).filter(function(){var t=this;return T.some.call(i,function(e){return k.contains(e,t)})}):1==this.length?k(Z.qsa(this[0],t)):this.map(function(){return Z.qsa(this,t)})},closest:function(t,e){var i=this[0],s=!1;for("object"==typeof t&&(s=k(t));i&&!(s?s.indexOf(i)>=0:Z.matches(i,t));)i=i!==e&&!n(i)&&i.parentNode;return k(i)},parents:function(t){for(var e=[],i=this;i.length>0;)i=k.map(i,function(t){return(t=t.parentNode)&&!n(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return g(e,t)},parent:function(t){return g(O(this.pluck("parentNode")),t)},children:function(t){return g(this.map(function(){return f(this)}),t)},contents:function(){return this.map(function(){return I.call(this.childNodes)})},siblings:function(t){return g(this.map(function(t,e){return E.call(f(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return k.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=d(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var i=e(t);if(this[0]&&!i)var n=k(t).get(0),s=n.parentNode||this.length>1;return this.each(function(e){k(this).wrapAll(i?t.call(this,e):s?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){k(this[0]).before(t=k(t));for(var e;(e=t.children()).length;)t=e.first();k(t).append(this)}return this},wrapInner:function(t){var i=e(t);return this.each(function(e){var n=k(this),s=n.contents(),o=i?t.call(this,e):t;s.length?s.wrapAll(o):n.append(o)})},unwrap:function(){return this.parent().each(function(){k(this).replaceWith(k(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=k(this);(t===x?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return k(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return k(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(e){var i=this.innerHTML;k(this).empty().append(v(this,t,e,i))})},text:function(t){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t===x?"":""+t})},attr:function(t,e){var i;return"string"==typeof t&&e===x?0==this.length||1!==this[0].nodeType?x:"value"==t&&"INPUT"==this[0].nodeName?this.val():!(i=this[0].getAttribute(t))&&t in this[0]?this[0][t]:i:this.each(function(i){if(1===this.nodeType)if(s(t))for(S in t)y(this,S,t[S]);else y(this,t,v(this,e,i,this.getAttribute(t)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&y(this,t)})},prop:function(t,e){return t=G[t]||t,e===x?this[0]&&this[0][t]:this.each(function(i){this[t]=v(this,e,i,this[t])})},data:function(t,e){var i=this.attr("data-"+t.replace(L,"-$1").toLowerCase(),e);return null!==i?_(i):x},val:function(t){return 0===arguments.length?this[0]&&(this[0].multiple?k(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(e){this.value=v(this,t,e,this.value)})},offset:function(t){if(t)return this.each(function(e){var i=k(this),n=v(this,t,e,i.offset()),s=i.offsetParent().offset(),o={top:n.top-s.top,left:n.left-s.left};"static"==i.css("position")&&(o.position="relative"),i.css(o)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,i){if(arguments.length<2){var n=this[0],s=getComputedStyle(n,"");if(!n)return;if("string"==typeof e)return n.style[C(e)]||s.getPropertyValue(e);if(r(e)){var o={};return k.each(r(e)?e:[e],function(t,e){o[e]=n.style[C(e)]||s.getPropertyValue(e)}),o}}var a="";if("string"==t(e))i||0===i?a=h(e)+":"+p(e,i):this.each(function(){this.style.removeProperty(h(e))});else for(S in e)e[S]||0===e[S]?a+=h(S)+":"+p(S,e[S])+";":this.each(function(){this.style.removeProperty(h(S))});return this.each(function(){this.style.cssText+=";"+a})},index:function(t){return t?this.indexOf(k(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?T.some.call(this,function(t){return this.test(b(t))},l(t)):!1},addClass:function(t){return t?this.each(function(e){j=[];var i=b(this),n=v(this,t,e,i);n.split(/\s+/g).forEach(function(t){k(this).hasClass(t)||j.push(t)},this),j.length&&b(this,i+(i?" ":"")+j.join(" "))}):this},removeClass:function(t){return this.each(function(e){return t===x?b(this,""):(j=b(this),v(this,t,e,j).split(/\s+/g).forEach(function(t){j=j.replace(l(t)," ")}),void b(this,j.trim()))})},toggleClass:function(t,e){return t?this.each(function(i){var n=k(this),s=v(this,t,i,b(this));s.split(/\s+/g).forEach(function(t){(e===x?!n.hasClass(t):e)?n.addClass(t):n.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===x?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===x?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),n=F.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(k(t).css("margin-top"))||0,i.left-=parseFloat(k(t).css("margin-left"))||0,n.top+=parseFloat(k(e[0]).css("border-top-width"))||0,n.left+=parseFloat(k(e[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||M.body;t&&!F.test(t.nodeName)&&"static"==k(t).css("position");)t=t.offsetParent;return t})}},k.fn.detach=k.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});k.fn[t]=function(s){var o,r=this[0];return s===x?i(r)?r["inner"+e]:n(r)?r.documentElement["scroll"+e]:(o=this.offset())&&o[t]:this.each(function(e){r=k(this),r.css(t,v(this,s,e,r[t]()))})}}),H.forEach(function(e,i){var n=i%2;k.fn[e]=function(){var e,s,o=k.map(arguments,function(i){return e=t(i),"object"==e||"array"==e||null==i?i:Z.fragment(i)}),r=this.length>1;return o.length<1?this:this.each(function(t,e){s=n?e:e.parentNode,e=0==i?e.nextSibling:1==i?e.firstChild:2==i?e:null,o.forEach(function(t){if(r)t=t.cloneNode(!0);else if(!s)return k(t).remove();w(s.insertBefore(t,e),function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},k.fn[n?e+"To":"insert"+(i?"Before":"After")]=function(t){return k(t)[e](this),this}}),Z.Z.prototype=k.fn,Z.uniq=O,Z.deserializeValue=_,k.zepto=Z,k}();window.Zepto=t,void 0===window.$&&(window.$=t),function(t){function e(t){return t._zid||(t._zid=p++)}function i(t,i,o,r){if(i=n(i),i.ns)var a=s(i.ns);return(g[e(t)]||[]).filter(function(t){return!(!t||i.e&&t.e!=i.e||i.ns&&!a.test(t.ns)||o&&e(t.fn)!==e(o)||r&&t.sel!=r)})}function n(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function s(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function o(t,e){return t.del&&!y&&t.e in b||!!e}function r(t){return _[t]||y&&b[t]||t}function a(i,s,a,c,h,p,d){var f=e(i),m=g[f]||(g[f]=[]);s.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(a);var s=n(e);s.fn=a,s.sel=h,s.e in _&&(a=function(e){var i=e.relatedTarget;return!i||i!==this&&!t.contains(this,i)?s.fn.apply(this,arguments):void 0}),s.del=p;var f=p||a;s.proxy=function(t){if(t=u(t),!t.isImmediatePropagationStopped()){t.data=c;var e=f.apply(i,t._args==l?[t]:[t].concat(t._args));return e===!1&&(t.preventDefault(),t.stopPropagation()),e}},s.i=m.length,m.push(s),"addEventListener"in i&&i.addEventListener(r(s.e),s.proxy,o(s,d))})}function c(t,n,s,a,c){var u=e(t);(n||"").split(/\s/).forEach(function(e){i(t,e,s,a).forEach(function(e){delete g[u][e.i],"removeEventListener"in t&&t.removeEventListener(r(e.e),e.proxy,o(e,c))})})}function u(e,i){return(i||!e.isDefaultPrevented)&&(i||(i=e),t.each(k,function(t,n){var s=i[t];e[t]=function(){return this[n]=w,s&&s.apply(i,arguments)},e[n]=x}),(i.defaultPrevented!==l?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=w)),e}function h(t){var e,i={originalEvent:t};for(e in t)S.test(e)||t[e]===l||(i[e]=t[e]);return u(i,t)}var l,p=(t.zepto.qsa,1),d=Array.prototype.slice,f=t.isFunction,m=function(t){return"string"==typeof t},g={},v={},y="onfocusin"in window,b={focus:"focusin",blur:"focusout"},_={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",t.event={add:a,remove:c},t.proxy=function(i,n){if(f(i)){var s=function(){return i.apply(n,arguments)};return s._zid=e(i),s}if(m(n))return t.proxy(i[n],i);throw new TypeError("expected function")},t.fn.bind=function(t,e,i){return this.on(t,e,i)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var w=function(){return!0},x=function(){return!1},S=/^([A-Z]|returnValue$|layer[XY]$)/,k={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,i){return this.on(e,t,i)},t.fn.undelegate=function(t,e,i){return this.off(e,t,i)},t.fn.live=function(e,i){return t(document.body).delegate(this.selector,e,i),this},t.fn.die=function(e,i){return t(document.body).undelegate(this.selector,e,i),this},t.fn.on=function(e,i,n,s,o){var r,u,p=this;return e&&!m(e)?(t.each(e,function(t,e){p.on(t,i,n,e,o)}),p):(m(i)||f(s)||s===!1||(s=n,n=i,i=l),(f(n)||n===!1)&&(s=n,n=l),s===!1&&(s=x),p.each(function(l,p){o&&(r=function(t){return c(p,t.type,s),s.apply(this,arguments)}),i&&(u=function(e){var n,o=t(e.target).closest(i,p).get(0);return o&&o!==p?(n=t.extend(h(e),{currentTarget:o,liveFired:p}),(r||s).apply(o,[n].concat(d.call(arguments,1)))):void 0}),a(p,e,s,n,i,u||r)}))},t.fn.off=function(e,i,n){var s=this;return e&&!m(e)?(t.each(e,function(t,e){s.off(t,i,e)}),s):(m(i)||f(n)||n===!1||(n=i,i=l),n===!1&&(n=x),s.each(function(){c(this,e,n,i)}))},t.fn.trigger=function(e,i){return e=m(e)||t.isPlainObject(e)?t.Event(e):u(e),e._args=i,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,i)})},t.fn.triggerHandler=function(e,n){var s,o;return this.each(function(r,a){s=h(m(e)?t.Event(e):e),s._args=n,s.target=a,t.each(i(a,e.type||e),function(t,e){return o=e.proxy(s),s.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.Event=function(t,e){m(t)||(e=t,t=e.type);var i=document.createEvent(v[t]||"Events"),n=!0;if(e)for(var s in e)"bubbles"==s?n=!!e[s]:i[s]=e[s];return i.initEvent(t,n,!0),u(i)}}(t),function(t){function e(e,i,n){var s=t.Event(i);return t(e).trigger(s,n),!s.isDefaultPrevented()}function i(t,i,n,s){return t.global?e(i||y,n,s):void 0}function n(e){e.global&&0===t.active++&&i(e,null,"ajaxStart")}function s(e){e.global&&!--t.active&&i(e,null,"ajaxStop")}function o(t,e){var n=e.context;return e.beforeSend.call(n,t,e)===!1||i(e,n,"ajaxBeforeSend",[t,e])===!1?!1:void i(e,n,"ajaxSend",[t,e])}function r(t,e,n,s){var o=n.context,r="success";n.success.call(o,t,r,e),s&&s.resolveWith(o,[t,r,e]),i(n,o,"ajaxSuccess",[e,n,t]),c(r,e,n)}function a(t,e,n,s,o){var r=s.context;s.error.call(r,n,e,t),o&&o.rejectWith(r,[n,e,t]),i(s,r,"ajaxError",[n,s,t||e]),c(e,n,s)}function c(t,e,n){var o=n.context;n.complete.call(o,e,t),i(n,o,"ajaxComplete",[e,n]),s(n)}function u(){}function h(t){return t&&(t=t.split(";",2)[0]),t&&(t==S?"html":t==x?"json":_.test(t)?"script":w.test(t)&&"xml")||"text"}function l(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function p(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=l(e.url,e.data),e.data=void 0)}function d(e,i,n,s){var o=!t.isFunction(i);return{url:e,data:o?i:void 0,success:o?t.isFunction(n)?n:void 0:i,dataType:o?s||n:n}}function f(e,i,n,s){var o,r=t.isArray(i),a=t.isPlainObject(i);t.each(i,function(i,c){o=t.type(c),s&&(i=n?s:s+"["+(a||"object"==o||"array"==o?i:"")+"]"),!s&&r?e.add(c.name,c.value):"array"==o||!n&&"object"==o?f(e,c,n,i):e.add(i,c)})}var m,g,v=0,y=window.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,_=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,x="application/json",S="text/html",k=/^\s*$/;t.active=0,t.ajaxJSONP=function(e,i){if(!("type"in e))return t.ajax(e);var n,s,c=e.jsonpCallback,u=(t.isFunction(c)?c():c)||"jsonp"+ ++v,h=y.createElement("script"),l=window[u],p=function(e){t(h).triggerHandler("error",e||"abort")},d={abort:p};return i&&i.promise(d),t(h).on("load error",function(o,c){clearTimeout(s),t(h).off().remove(),"error"!=o.type&&n?r(n[0],d,e,i):a(null,c||"error",d,e,i),window[u]=l,n&&t.isFunction(l)&&l(n[0]),l=n=void 0}),o(d,e)===!1?(p("abort"),d):(window[u]=function(){n=arguments},h.src=e.url.replace(/=\?/,"="+u),y.head.appendChild(h),e.timeout>0&&(s=setTimeout(function(){p("timeout")},e.timeout)),d)},t.ajaxSettings={type:"GET",beforeSend:u,success:u,error:u,complete:u,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:x,xml:"application/xml, text/xml",html:S,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var i=t.extend({},e||{}),s=t.Deferred&&t.Deferred();
for(m in t.ajaxSettings)void 0===i[m]&&(i[m]=t.ajaxSettings[m]);n(i),i.crossDomain||(i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!=window.location.host),i.url||(i.url=window.location.toString()),p(i),i.cache===!1&&(i.url=l(i.url,"_="+Date.now()));var c=i.dataType,d=/=\?/.test(i.url);if("jsonp"==c||d)return d||(i.url=l(i.url,i.jsonp?i.jsonp+"=?":i.jsonp===!1?"":"callback=?")),t.ajaxJSONP(i,s);var f,v=i.accepts[c],y={},b=function(t,e){y[t.toLowerCase()]=[t,e]},_=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,w=i.xhr(),x=w.setRequestHeader;if(s&&s.promise(w),i.crossDomain||b("X-Requested-With","XMLHttpRequest"),b("Accept",v||"*/*"),(v=i.mimeType||v)&&(v.indexOf(",")>-1&&(v=v.split(",",2)[0]),w.overrideMimeType&&w.overrideMimeType(v)),(i.contentType||i.contentType!==!1&&i.data&&"GET"!=i.type.toUpperCase())&&b("Content-Type",i.contentType||"application/x-www-form-urlencoded"),i.headers)for(g in i.headers)b(g,i.headers[g]);if(w.setRequestHeader=b,w.onreadystatechange=function(){if(4==w.readyState){w.onreadystatechange=u,clearTimeout(f);var e,n=!1;if(w.status>=200&&w.status<300||304==w.status||0==w.status&&"file:"==_){c=c||h(i.mimeType||w.getResponseHeader("content-type")),e=w.responseText;try{"script"==c?(1,eval)(e):"xml"==c?e=w.responseXML:"json"==c&&(e=k.test(e)?null:t.parseJSON(e))}catch(o){n=o}n?a(n,"parsererror",w,i,s):r(e,w,i,s)}else a(w.statusText||null,w.status?"error":"abort",w,i,s)}},o(w,i)===!1)return w.abort(),a(null,"abort",w,i,s),w;if(i.xhrFields)for(g in i.xhrFields)w[g]=i.xhrFields[g];var S="async"in i?i.async:!0;w.open(i.type,i.url,S,i.username,i.password);for(g in y)x.apply(w,y[g]);return i.timeout>0&&(f=setTimeout(function(){w.onreadystatechange=u,w.abort(),a(null,"timeout",w,i,s)},i.timeout)),w.send(i.data?i.data:null),w},t.get=function(){return t.ajax(d.apply(null,arguments))},t.post=function(){var e=d.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=d.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,i,n){if(!this.length)return this;var s,o=this,r=e.split(/\s/),a=d(e,i,n),c=a.success;return r.length>1&&(a.url=r[0],s=r[1]),a.success=function(e){o.html(s?t("<div>").html(e.replace(b,"")).find(s):e),c&&c.apply(o,arguments)},t.ajax(a),this};var j=encodeURIComponent;t.param=function(t,e){var i=[];return i.add=function(t,e){this.push(j(t)+"="+j(e))},f(i,t,e),i.join("&").replace(/%20/g,"+")}}(t),function(t){t.fn.serializeArray=function(){var e,i=[];return t([].slice.call(this.get(0).elements)).each(function(){e=t(this);var n=e.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&("radio"!=n&&"checkbox"!=n||this.checked)&&i.push({name:e.attr("name"),value:e.val()})}),i},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var i=t.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(t),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,i){return e=e||[],t.extend(e,t.fn),e.selector=i||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(e){var i=getComputedStyle;window.getComputedStyle=function(t){try{return i(t)}catch(e){return null}}}}(t)}.bind(this)),require.register("app/custom/helpers/helpers.js",function(t,e,i){i.exports={timeAgo:function(t){var e=Date.now(),i=e-t,n=6e4,s=60*n,o=24*s;if(n>i)return"Just Now";if(s>i){var r=~~(i/n);return r+"m ago"}if(o>i){var a=~~(i/s);return a+"h ago"}var c=~~(i/o);return c+"d ago"},timeSince:function(t){var e=Date.now(),i=new Date(t),n=e-e%864e5;return t>=n?i.toTimeString().split(" ")[0].substring(0,5):t>=n-864e5&&n>t?"yesterday":t>=n-6048e5&&n-864e5>t?i.toDateString().split(" ")[0]:i.toLocaleDateString()},capitalize:function(t){return t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()},isDev:_.memoize(function(){return 0==window.location.host.indexOf("localhost:3")}),isMobile:_.memoize(function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)}),linkify:function(t){var e=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;return t.replace(e,function(t){return'<a href="'+t+'">'+t+"</a>"})}}}.bind(this)),require.register("app/custom/templates/templates.js",function(t,e,i){var n=e("helpers"),s=e("famous/utilities/utility");i.exports={toggleSwitch:function(t,e,i){var n=['<div class="onoffswitch">','<input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="',t,'" '];return e&&n.push("checked "),i&&n.push("disabled "),n.push('><label class="onoffswitch-label'),i&&n.push(" disabled"),n=n.concat(['" for="',t,'">','<div class="onoffswitch-inner"></div>','<div class="onoffswitch-switch"></div>',"</label>","</div>"]),n.join("")},toggleButton:function(t){t.id||(t.id="toggleButton"+Math.floor(1e5*Math.random())),t.classes||(t.classes=[]);var e=['<div class="onoffbutton '+t.classes.join(" ")+'">','<input type="checkbox" name="onoffbutton" class="onoffbutton-checkbox"'];return t.id&&e.push(' id="'+t.id+'" '),t.checked&&e.push("checked"),e.push('><label class="onoffbutton-label" for="'+t.id+'"'),t.size&&(e=e.concat(['style="width:'+t.size[0]+"px;","line-height:"+t.size[1]+'px;"'])),e.push('><div class="onoffbutton-on"'),t.onBackgroundColor&&e.push('style="background-color:'+t.onBackgroundColor+';"'),e.push(">"+t.onContent+"</div>"),e.push('<div class="onoffbutton-off"'),t.offBackgroundColor&&e.push('style="background-color:'+t.offBackgroundColor+';"'),e=e.concat([">"+t.offContent+"</div>","</label>","</div>"]),e.join("")},deleteButton:function(){return'<button class="delete-button fa fa-trash-o fa-lg"></button>'},addButton:function(t){return'<i class="fa fa-plus add-button" id="'+t+'"></i>'},plusButton:function(t){return['<span class="fa-stack fa-lg delete-button2" id="',t,'"><i class="fa fa-circle fa-stack"></i>','<i class="fa fa-plus fa-stack"></i>',"</span>"].join("")},phoneButton:function(t){return['<span class="fa-stack fa-lg phone-button" id="',t,'"><i class="fa fa-square fa-stack-2x fa-background"></i>','<i class="fa fa-phone fa-stack-1x fa-frontground"></i>',"</span>"].join("")},removeButton:function(t){return'<i class="fa fa-times remove-button" id="'+t+'"></i>'},editButton:function(t){return['<span class="fa-stack edit-button2" id="',t,'"><i class="fa fa-circle-o fa-stack-2x fa-background"></i>','<i class="fa fa-info fa-stack-1x fa-frontground"></i>',"</span>"].join("")},crossButton:function(t){return['<span class="fa-stack delete-button2" id="',t,'"><i class="fa fa-circle-o fa-stack-2x fa-background"></i>','<i class="fa fa-times fa-stack-1x fa-frontground"></i>',"</span>"].join("")},favoriteButton2:function(t,e){var i=['<span class="fa-stack favorite-button2" id="',e,'"><i class="fa fa-circle fa-stack-2x fa-background"></i>','<i class="fa fa-star fa-stack-1x fa-frontground'];return t&&i.push(" active"),i.push('"></i></span>'),i.join("")},nextButton:function(t){return'<i class="arrow fa fa-angle-right fa-lg import-contact" id="'+t+'"></i>'},favoriteButton:function(t){var e=['<i class="favorite-button fa fa-star fa-2x'];return t&&e.push(" active"),e.push('"></i>'),e.join("")},button:function(t){t.id||(t.id="button"+Math.floor(1e5*Math.random())),t.classes||(t.classes=[]);var e=['<button class="button '+t.classes.join(" ")+'" style="'];return t.size&&(e=e.concat(["width:"+t.size[0]+"px;","height:"+t.size[1]+"px;","line-height:"+t.size[1]+"px;"])),e.push('">'+t.content+"</button>"),e.join("")},itemFrame:function(t,e){var i=window.innerWidth-t-e;return['<div class="item-frame" style="width: ',i,"px; margin-left: ",t,"px; margin-right: ",e,'px"></div>'].join("")},itemFrame2:function(t,e,i,n){var s=window.innerWidth-i-n,o=t?_(t).map(function(t){return t.content}).join(""):"",r=e?e.content:"";return['<div class="item-frame item-view-2S" style="width: ',s,"px; margin-left: ",i,"px; margin-right: ",n,'px">',o,r,"</div>"].join("")},recentItemView:function(t){var e;e=t.get("firstname")||t.get("lastname")?t.get("firstname")+" <b>"+t.get("lastname")+"</b>":t.get("email");var i="",s="";return"outgoing"==t.get("type")?i='<i class="fa fa-sign-out"></i>':t.get("success")||(s="missed"),['<div style = " width: ',window.innerWidth,'px"><div class="source ',s,'"><div class="call-type">',i,"</div>",e,'<div class="call-time">',n.timeSince(t.get("time")),"</div></div></div>"].join("")},chatItemView:function(t){var e,i="";return t.get("firstname")||t.get("lastname")?(e=t.get("firstname")+" <b>"+t.get("lastname")+"</b>",t.get("firstname")&&(i=t.get("firstname")[0]),t.get("lastname")&&(i+=t.get("lastname")[0])):(e=t.get("email"),e&&(i=e[0])),['<div style = " width: ',window.innerWidth,'px"><div class="source"><div class="initial ',t.get("read")?"":"unread",'">',i,"</div>",e,'<div class="call-time">',n.timeSince(t.get("time")),"</div>",'<div class="message">',t.get("content"),"</div></div>"].join("")},contactItemView:function(t){var e;e=t.get("firstname")||t.get("lastname")?[t.get("firstname")," <b>",t.get("lastname"),"</b>"].join(""):t.get("email");var i=['<div style = " width: ',window.innerWidth,'px"><div class="source">',e].join("");return t.attributes.phone&&(i=[i,'<i class="fa fa-phone contact-icon"></i>'].join("")),t.attributes.email&&(i=[i,'<i class="fa fa-envelope contact-icon"></i>'].join("")),t.attributes.facebook&&(i=[i,'<i class="fa fa-facebook-square contact-icon"></i>'].join("")),t.attributes.google&&(i=[i,'<i class="fa fa-google-plus-square contact-icon"></i>'].join("")),i=[i,"</div></div>"].join("")},favoriteItemView:function(t){var e,i="";return t.get("firstname")||t.get("lastname")?(e=t.get("firstname")+" <b>"+t.get("lastname")+"</b>",t.get("firstname")&&(i=t.get("firstname")[0]),t.get("lastname")&&(i+=t.get("lastname")[0])):(e=t.get("email"),e&&(i=e[0])),['<div style = " width: ',window.innerWidth,'px"><div class="source"><div class="initial">',i,"</div>",e,"</div></div>"].join("")},headerItemView:function(t,e,i){var n=window.innerWidth-e-i;return['<div class="header-view" style="width: ',n,"px; margin-left: ",e,"px; margin-right: ",i,'px">',t,"</div>"].join("")},fateHeaderItemView:function(t,e){var i=window.innerWidth-t-e;return['<div class="header-view" style="width: ',i,"px; margin-left: ",t,"px; margin-right: ",e,'px"></div>'].join("")},socialItemView:function(t){var e;e=t.get("firstname")||t.get("lastname")?[t.get("firstname")," <b>",t.get("lastname"),"</b>"].join(""):t.get("email");var i=['<div style = " width: ',window.innerWidth,'px"><div class="source">',e].join("");return i=[i,"</div></div>"].join("")},editContactHeader:function(t){return['<button class="left close-button cancel-contact touchable" id="close-button">Cancel</button><div>',t,'</div><button class="right close-button done-contact touchable">Done</button>'].join("")},recentsHeader:function(){var t=['<div class="recent-toggle"><input type="radio" id="all" name="recents-toggle" value="all" checked>','<label for="all" class="first" id="recent-toggle">all</label>','<input type="radio" id="missed" name="recents-toggle" value="missed">','<label for="missed" class="last" id="recent-toggle">missed</label></div>','<button class="right clear-button" id="clear-button"></button>'];return n.isMobile()||(t=['<button class="left edit-button touchable" id="recent-edit-contact"></button>'].concat(t)),t.join("")},chatsHeader:function(){var t=["<div>Messages</div>"];return n.isMobile()||(t=['<button class="left edit-button touchable" id="chats-edit-contact"></button>'].concat(t)),t.join("")},favoriteHeader:function(){return n.isMobile()?"<div>Favorites</div>":'<button class="left edit-button touchable" id="favorite-edit-contact"></button><div>Favorites</div>'},contactHeader:function(){var t=["<div>All Contacts</div>",'<button class="right add-contact touchable" id="add-contact">','<i class="fa fa-plus" id="add-contact"></i>',"</button>"];return n.isMobile()||(t=['<button class="left edit-button touchable" id="contact-edit-contact"></button>'].concat(t)),t.join("")},conversationViewHeader:function(t){var e;return e=t?t.get("firstname")||t.get("lastname")?[t.get("firstname")," <b>",t.get("lastname"),"</b>"].join(""):t.get("email"):"Shana <b> Ho </b>",['<div class="touchable"><i class="fa fa-chevron-left fa-lg"></i><span class="conversation-callee">',e,"</span></div>"].join("")},conversationInputBar:function(){return['<div><button class="fa fa-comments-o menu-toggle-button fade"></button>','<button class="fa fa-phone menu-end-button"></button>','<textarea class="input-msg" name="message"></textarea>','<button class="send-text-button">Send</button></div>'].join("")},settingsPage:function(t){var e=['<div class="box">','<div class="info">'+t.get("firstname")+" "+t.get("lastname"),'<button class="logout-button">Log Out</button></div>','<div class="desc"></div>','<div class="info">ID: '+t.get("username")+"</div>",'<div class="desc"></div>','<div class="info">Camera ',this.toggleSwitch("camera",t.get("camera"))+"</div>",'<div class="info">Blur ',this.toggleSwitch("blur",t.get("blur"))+"</div>"];return s.isMobile()||(e.push('<div class="info">Notification '),e.push(this.toggleSwitch("notification",t.get("notification"))+"</div>")),e=e.concat(['<div class="desc">YOU CAN BE REACHED AT</div>','<div class="info">Facebook ',this.toggleSwitch("facebook",t.get("linkAccounts").facebook)+"</div>",'<div class="info">Google ',this.toggleSwitch("google",t.get("linkAccounts").google)+"</div>",'<div class="info">Linkedin ',this.toggleSwitch("linkedin",t.get("linkAccounts").linkedin)+"</div>",'<div class="info">Github ',this.toggleSwitch("github",t.get("linkAccounts").github)+"</div>",'<div class="info">Yammer ',this.toggleSwitch("yammer",t.get("linkAccounts").yammer)+"</div>"]),n.isDev()&&(e=e.concat(['<div class="desc">Testing</div>','<div class="info"><button class="call-button">Call</button>','<button class="incoming-button">Incoming</button>','<button class="connected-button">Connected</button>','<button class="conversations-button">Message</button></div>',"</div>"])),e.join("")},abcButtons:function(){return'<button id="A">A</button><button id="B">B</button><button id="C">C</button><button id="D">D</button><button id="E">E</button><button id="F">F</button><button id="G">G</button><button id="H">H</button><button id="I">I</button><button id="J">J</button><button id="K">K</button><button id="L">L</button><button id="M">M</button><button id="N">N</button><button id="O">O</button><button id="P">P</button><button id="Q">Q</button><button id="R">R</button><button id="S">S</button><button id="T">T</button><button id="U">U</button><button id="V">V</button><button id="W">W</button><button id="X">X</button><button id="Y">Y</button><button id="Z">Z</button><button id="#">#</button>'},navigationButton:function(t,e){return['<div><span class="icon ',t.caption.toLowerCase(),'"><div class="badge">',e,"</div>",t.icon,"</span><br />",t.caption,"</div>"].join("")},getFacebookInvite:function(t){return t.facebook&&t.dcr&&!t.cid?['<a class="touchable button invite-button" target="_self" href="',"https://www.facebook.com/dialog/send?","app_id=648143008577417","&link=",encodeURI("https://beepe.me/welcome?r="),t.dcr,"&to=",t.facebook.id,"&display=popup","&redirect_uri=",encodeURI("https://beepe.me"),'">Invite</a>'].join(""):""},getSMSInvite:function(t){return n.isMobile()&&t.phone&&t.dcr&&!t.cid?['<a class="touchable button invite-button" target="_blank" href="',"sms:",encodeURI(t.phone),encodeURI("?body=Hey, call me back on "),encodeURI("https://beepe.me/welcome?r="),t.dcr,'">Invite</a>'].join(""):""},getEmailInvite:function(t){return t.email&&t.dcr&&!t.cid?['<a class="touchable button invite-button" target="_blank" href="',"mailto:",encodeURI(t.email),encodeURI("?subject=I just added you on my Beepe contact list"),encodeURI("&body=Now you can call me back on \n\n"),encodeURI("https://beepe.me/welcome?r="),t.dcr,'">Invite</a>'].join(""):""}}}.bind(this)),require.register("famous_modules/famous/entity/_git_master/index.js",function(t,e,i){function n(t){var e=r.length;return o(e,t),e}function s(t){return r[t]}function o(t,e){r[t]=e}var r=[];i.exports={register:n,get:s,set:o}}.bind(this)),require.register("famous_modules/famous/surface/_git_master/index.js",function(t,e,i){function n(t){this.options={},this.properties={},this.content="",this.classList=[],this.size=void 0,this._classesDirty=!0,this._stylesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._dirtyClasses=[],this._matrix=void 0,this._opacity=1,this._origin=void 0,this._size=void 0,this.eventForwarder=function(t){this.emit(t.type,t)}.bind(this),this.eventHandler=new p,this.eventHandler.bindThis(this),this.id=l.register(this),t&&this.setOptions(t),this._currTarget=void 0}function s(t){for(var e in this.eventHandler.listeners)t.addEventListener(e,this.eventForwarder)}function o(t){for(var e in this.eventHandler.listeners)t.removeEventListener(e,this.eventForwarder)}function r(t){for(var e=0;e<this._dirtyClasses.length;e++)t.classList.remove(this._dirtyClasses[e]);this._dirtyClasses=[]}function a(t){for(var e in this.properties)t.style[e]=this.properties[e]}function c(t){for(var e in this.properties)t.style[e]=""}function u(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]:t!==e}function h(t){return(100*t[0]).toFixed(6)+"% "+(100*t[1]).toFixed(6)+"%"}var l=e("famous/entity"),p=e("famous/event-handler"),d=e("famous/transform"),f=void 0!==document.body.style.webkitTransform;n.prototype.elementType="div",n.prototype.elementClass="famous-surface",n.prototype.on=function(t,e){this._currTarget&&this._currTarget.addEventListener(t,this.eventForwarder),this.eventHandler.on(t,e)},n.prototype.unbind=function(t,e){this.eventHandler.unbind(t,e)},n.prototype.emit=function(t,e){e&&!e.origin&&(e.origin=this);var i=this.eventHandler.emit(t,e);return i&&e.stopPropagation&&e.stopPropagation(),i},n.prototype.pipe=function(t){return this.eventHandler.pipe(t)},n.prototype.unpipe=function(t){return this.eventHandler.unpipe(t)},n.prototype.render=function(){return this.id},n.prototype.setProperties=function(t){for(var e in t)this.properties[e]=t[e];this._stylesDirty=!0},n.prototype.getProperties=function(){return this.properties},n.prototype.addClass=function(t){this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0)},n.prototype.removeClass=function(t){var e=this.classList.indexOf(t);e>=0&&(this._dirtyClasses.push(this.classList.splice(e,1)[0]),this._classesDirty=!0)},n.prototype.setClasses=function(t){for(var e=[],i=0;i<this.classList.length;i++)t.indexOf(this.classList[i])<0&&e.push(this.classList[i]);for(var i=0;i<e.length;i++)this.removeClass(e[i]);for(var i=0;i<t.length;i++)this.addClass(t[i])},n.prototype.getClassList=function(){return this.classList},n.prototype.setContent=function(t){this.content!=t&&(this.content=t,this._contentDirty=!0)},n.prototype.getContent=function(){return this.content},n.prototype.setOptions=function(t){t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.content&&this.setContent(t.content)};var m,g,v;m=f?function(t,e){t.style.webkitTransform=d.formatCSS(e)}:function(t,e){t.style.transform=d.formatCSS(e)},g=f?function(t,e){t.style.webkitTransformOrigin=h(e)}:function(t,e){t.style.transformOrigin=h(e)},v=f?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,1)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,1)",t.style.opacity=0},n.prototype.setup=function(t){var e=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var i=0;i<this.elementClass.length;i++)e.classList.add(this.elementClass[i]);else e.classList.add(this.elementClass);s.call(this,e),g(e,[0,0]),this._currTarget=e,this._stylesDirty=!0,this._classesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._matrix=void 0,this._opacity=void 0,this._origin=void 0,this._size=void 0},n.prototype.commit=function(t){this._currTarget||this.setup(t.allocator);var e=this._currTarget,i=t.transform,n=t.opacity,s=t.origin,o=t.size;if(this.size){var c=o;o=[this.size[0],this.size[1]],void 0===o[0]&&c[0]&&(o[0]=c[0]),void 0===o[1]&&c[1]&&(o[1]=c[1])}if(u(this._size,o)&&(this._size=[o[0],o[1]],this._sizeDirty=!0),!i&&this._matrix)return this._matrix=void 0,this._opacity=0,void v(e);if(this._opacity!==n&&(this._opacity=n,e.style.opacity=Math.min(n,.999999)),u(this._origin,s)||d.notEquals(this._matrix,i)){i||(i=d.identity),s||(s=[0,0]),this._origin=[s[0],s[1]],this._matrix=i;var h=i;s&&(h=d.moveThen([-this._size[0]*s[0],-this._size[1]*s[1]],i)),m(e,h)}if(this._classesDirty||this._stylesDirty||this._sizeDirty||this._contentDirty){if(this._classesDirty){r.call(this,e);for(var l=this.getClassList(),p=0;p<l.length;p++)e.classList.add(l[p]);this._classesDirty=!1}this._stylesDirty&&(a.call(this,e),this._stylesDirty=!1),this._sizeDirty&&(this._size&&(e.style.width=this._size[0]!==!0?this._size[0]+"px":"",e.style.height=this._size[1]!==!0?this._size[1]+"px":""),this._sizeDirty=!1),this._contentDirty&&(this.deploy(e),this.eventHandler.emit("deploy"),this._contentDirty=!1)}},n.prototype.cleanup=function(t){var e=this._currTarget;this.eventHandler.emit("recall"),this.recall(e),e.style.width="",e.style.height="",this._size=void 0,c.call(this,e);var i=this.getClassList();r.call(this,e);for(var n=0;n<i.length;n++)e.classList.remove(i[n]);if(this.elementClass)if(this.elementClass instanceof Array)for(var n=0;n<this.elementClass.length;n++)e.classList.remove(this.elementClass[n]);else e.classList.remove(this.elementClass);o.call(this,e),this._currTarget=void 0,t.deallocate(e),v(e)},n.prototype.deploy=function(t){var e=this.getContent();if(e instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}else t.innerHTML=e},n.prototype.recall=function(t){for(var e=document.createDocumentFragment();t.hasChildNodes();)e.appendChild(t.firstChild);this.setContent(e)},n.prototype.getSize=function(t){return t?this._size:this.size||this._size},n.prototype.setSize=function(t){this.size=t?[t[0],t[1]]:void 0,this._sizeDirty=!0},i.exports=n}.bind(this)),require.register("famous_modules/famous/spec-parser/_git_master/index.js",function(t,e,i){function n(){this.reset()}function s(t,e){return[t[0]*e[0]+t[1]*e[4]+t[2]*e[8],t[0]*e[1]+t[1]*e[5]+t[2]*e[9],t[0]*e[2]+t[1]*e[6]+t[2]*e[10]]}var o=e("famous/transform");n.parse=function(t,e,i){var s=new n,r=s.parse(t,e,o.identity);return i?void i(r):r},n.prototype.parse=function(t,e){return this.reset(),this._parseSpec(t,e,o.identity),this.result},n.prototype.reset=function(){this.result={}};var r=[0,0];n.prototype._parseSpec=function(t,e,i){if(void 0===t);else if("number"==typeof t){var n=t,a=e.transform;if(e.size&&e.origin&&(e.origin[0]||e.origin[1])){var c=[e.origin[0]*e.size[0],e.origin[1]*e.size[1],0];a=o.move(a,s(c,i))}this.result[n]={transform:a,opacity:e.opacity,origin:e.origin||r,size:e.size}}else if(t instanceof Array)for(var u=0;u<t.length;u++)this._parseSpec(t[u],e,i);else if(void 0!==t.target){var h=t.target,a=e.transform,l=e.opacity,p=e.origin,d=e.size;if(void 0!==t.opacity&&(l=e.opacity*t.opacity),t.transform&&(a=o.multiply(e.transform,t.transform)),t.origin&&(p=t.origin),t.size){d=t.size;var f=e.size;f&&p&&(p[0]||p[1])&&(d=[t.size[0]||f[0],t.size[1]||f[1]],a=o.move(a,s([p[0]*f[0],p[1]*f[1],0],i)),a=o.moveThen([-p[0]*d[0],-p[1]*d[1],0],a)),p=null}this._parseSpec(h,{transform:a,opacity:l,origin:p,size:d},e.transform)}},i.exports=n}.bind(this)),require.register("famous_modules/famous/render-node/_git_master/index.js",function(t,e,i){function n(t){this._object=t?t:null,this._child=null,this._hasCached=!1,this._resultCache={},this._prevResults={},this._childResult=null}function s(t,e,i){var n=r.parse(t,e);for(var a in n){var c=o.get(a),u=n[a];u.allocator=e.allocator;var h=c.commit(u);h?s(h,e,i):i[a]=u}}var o=e("famous/entity"),r=e("famous/spec-parser");n.prototype.add=function(t){var e=t instanceof n?t:new n(t);return this._child instanceof Array?this._child.push(e):this._child?(this._child=[this._child,e],this._childResult=[]):this._child=e,e},n.prototype.get=function(){return this._object||this._child.get()},n.prototype.getSize=function(){var t=this.get();return t&&t.getSize?t.getSize():this._child&&this._child.getSize?this._child.getSize():null},n.prototype.commit=function(t){var e=this.render(void 0,this._hasCached);if(e!==!0){for(var i in this._prevResults)if(!(i in this._resultCache)){var n=o.get(i);n.cleanup&&n.cleanup(t.allocator)}this._prevResults=this._resultCache,this._resultCache={},s(e,t,this._resultCache),this._hasCached=!0}},n.prototype.render=function(){if(this._object&&this._object.render)return this._object.render();var t={};if(this._child instanceof Array){t=this._childResult;for(var e=this._child,i=0;i<e.length;i++)t[i]=e[i].render()}else this._child&&(t=this._child.render());return this._object&&this._object.modify&&(t=this._object.modify(t)),t},i.exports=n}.bind(this)),require.register("famous_modules/famous/view/_git_master/index.js",function(t,e,i){function n(t){this._node=new r,this._eventInput=new s,this._eventOutput=new s,s.setInputHandler(this,this._eventInput),s.setOutputHandler(this,this._eventOutput),this.options=Object.create(this.constructor.DEFAULT_OPTIONS||n.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t)}var s=e("famous/event-handler"),o=e("famous/options-manager"),r=e("famous/render-node");n.DEFAULT_OPTIONS={},n.prototype.getOptions=function(){return this._optionsManager.value()},n.prototype.setOptions=function(t){this._optionsManager.patch(t)},n.prototype._add=function(){return this._node.add.apply(this._node,arguments)},n.prototype.render=function(){return this._node.render.apply(this._node,arguments)},n.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},i.exports=n}.bind(this)),require.register("famous_modules/famous/views/header-footer-layout/_git_master/index.js",function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._entityId=a.register(this),this._header=new c,this._footer=new c,this._content=new c,this.id={header:this._header,footer:this._footer,content:this._content}}function s(t,e){var i=t.getSize();return i?i[this.options.direction]:e}function o(t){return this.options.direction==n.DIRECTION_X?u.translate(t,0,0):u.translate(0,t,0)}function r(t,e){return this.options.direction==n.DIRECTION_X?[t,e[1]]:[e[0],t]}var a=e("famous/entity"),c=e("famous/render-node"),u=e("famous/transform");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.DEFAULT_OPTIONS={direction:n.DIRECTION_Y,headerSize:void 0,footerSize:void 0,defaultHeaderSize:0,defaultFooterSize:0},n.prototype.render=function(){return this._entityId},n.prototype.setOptions=function(t){for(var e in n.DEFAULT_OPTIONS)void 0!==t[e]&&(this.options[e]=t[e])},n.prototype.commit=function(t){var e=t.transform,i=t.opacity,n=t.origin,a=t.size,c=void 0!==this.options.headerSize?this.options.headerSize:s.call(this,this._header,this.options.defaultHeaderSize),h=void 0!==this.options.footerSize?this.options.footerSize:s.call(this,this._footer,this.options.defaultFooterSize),l=a[this.options.direction]-c-h,p=[.5,.5],d=[.5,.5];p[this.options.direction]=0,d[this.options.direction]=1;var f=[{origin:p,size:r.call(this,c,a),target:this._header.render()},{transform:o.call(this,c),origin:p,size:r.call(this,l,a),target:this._content.render()},{origin:d,size:r.call(this,h,a),target:this._footer.render()}];e=u.moveThen([-a[0]*n[0],-a[1]*n[1],0],e);var m={transform:e,opacity:i,origin:n,size:a,target:f};return m},i.exports=n}.bind(this)),require.register("famous_modules/famous/element-allocator/_git_master/index.js",function(t,e,i){function n(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}n.prototype.migrate=function(t){var e=this.container;if(t!==e){if(e instanceof DocumentFragment)t.appendChild(e);else for(;e.hasChildNodes();)t.appendChild(e.removeChild(e.firstChild));this.container=t}},n.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var e,i=this.detachedNodes[t];return i.length>0?e=i.pop():(e=document.createElement(t),this.container.appendChild(e)),this.nodeCount++,e},n.prototype.deallocate=function(t){var e=t.nodeName.toLowerCase(),i=this.detachedNodes[e];i.push(t),this.nodeCount--},n.prototype.getNodeCount=function(){return this.nodeCount},i.exports=n}.bind(this)),require.register("famous_modules/famous/transitions/multiple-transition/_git_master/index.js",function(t,e,i){function n(t){this.method=t,this._instances=[],this.state=[]}var s=e("famous/utilities/utility");n.SUPPORTS_MULTIPLE=!0,n.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},n.prototype.set=function(t,e,i){for(var n=s.after(t.length,i),o=0;o<t.length;o++)this._instances[o]||(this._instances[o]=new this.method),this._instances[o].set(t[o],e,n)},n.prototype.reset=function(t){for(var e=0;e<t.length;e++)this._instances[e]||(this._instances[e]=new this.method),this._instances[e].reset(t[e])},i.exports=n}.bind(this)),require.register("famous_modules/famous/transitions/tween-transition/_git_master/index.js",function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function s(t,e,i){return(1-i)*t+i*e}function o(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function r(t,e){var i={curve:e.curve};return e.duration&&(i.duration=e.duration),e.speed&&(i.speed=e.speed),t instanceof Object&&(void 0!==t.duration&&(i.duration=t.duration),t.curve&&(i.curve=t.curve),t.speed&&(i.speed=t.speed)),"string"==typeof i.curve&&(i.curve=n.getCurve(i.curve)),i}function a(t,e,i,n,s){var o,r=1e-7,a=(i(s)-i(s-r))/r;if(t instanceof Array){o=[];for(var c=0;c<t.length;c++)o[c]=a*(t[c]-e[c])/n}else o=a*(t-e)/n;return o}function c(t,e,i){var n;if(t instanceof Array){n=[];for(var o=0;o<t.length;o++)n[o]=s(t[o],e[o],i)}else n=s(t,e,i);return n}var u=e("famous/utilities/utility");n.SUPPORTS_MULTIPLE=!0,n.DEFAULT_OPTIONS={curve:u.Curve.linear,duration:500,speed:0};var h={};n.registerCurve=function(t,e){return h[t]?!1:(h[t]=e,!0)},n.unregisterCurve=function(t){return h[t]?(delete h[t],!0):!1},n.getCurve=function(t){return h[t]},n.getCurves=function(){return h},n.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},n.prototype.set=function(t,e,i){if(!e)return this.reset(t),void(i&&i());if(this._startValue=o(this.get()),e=r(e,this.options),e.speed){var n=this._startValue;if(n instanceof Object){var s=0;for(var a in n)s+=(t[a]-n[a])*(t[a]-n[a]);e.duration=Math.sqrt(s)/e.speed}else e.duration=Math.abs(t-n)/e.speed}this._startTime=Date.now(),this._endValue=o(t),this._startVelocity=o(e.velocity),this._duration=e.duration,this._curve=e.curve,this._active=!0,this._callback=i},n.prototype.reset=function(t,e){if(this._callback){var i=this._callback;this._callback=void 0,i()}this.state=o(t),this.velocity=o(e),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},n.prototype.getVelocity=function(){return this.velocity},n.prototype.get=function(t){return this.update(t),this.state},n.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var e=t-this._startTime;if(e>=this._duration)this.state=this._endValue,this.velocity=a(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;
else if(0>e)this.state=this._startValue,this.velocity=this._startVelocity;else{var i=e/this._duration;this.state=c(this._startValue,this._endValue,this._curve(i)),this.velocity=a(this.state,this._startValue,this._curve,this._duration,i)}}}else if(this._callback){var n=this._callback;this._callback=void 0,n()}},n.prototype.isActive=function(){return this._active},n.prototype.halt=function(){this.reset(this.get())},n.registerCurve("linear",u.Curve.linear),n.registerCurve("easeIn",u.Curve.easeIn),n.registerCurve("easeOut",u.Curve.easeOut),n.registerCurve("easeInOut",u.Curve.easeInOut),n.registerCurve("easeOutBounce",u.Curve.easeOutBounce),n.registerCurve("spring",u.Curve.spring),n.customCurve=function(t,e){return t=t||0,e=e||0,function(i){return t*i+(-2*t-e+3)*i*i+(t+e-2)*i*i*i}},i.exports=n}.bind(this)),require.register("famous_modules/famous/transitions/transitionable/_git_master/index.js",function(t,e,i){function n(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function s(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var e=null,i=this.currentAction[0],n=this.currentAction[1];n instanceof Object&&n.method?(e=n.method,"string"==typeof e&&(e=a[e])):e=r,this._currentMethod!==e&&(this._engineInstance=!(i instanceof Object)||e.SUPPORTS_MULTIPLE===!0||i.length<=e.SUPPORTS_MULTIPLE?new e:new o(e),this._currentMethod=e),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(n.velocity=this.velocity),this._engineInstance.set(i,n,s.bind(this))}var o=(e("famous/utilities/utility"),e("famous/transitions/multiple-transition")),r=e("famous/transitions/tween-transition"),a={};n.registerMethod=function(t,e){return t in a?!1:(a[t]=e,!0)},n.unregisterMethod=function(t){return t in a?(delete a[t],!0):!1},n.prototype.set=function(t,e,i){if(!e)return this.reset(t),i&&i(),this;var n=[t,e];return this.actionQueue.push(n),this.callbackQueue.push(i),this.currentAction||s.call(this),this},n.prototype.reset=function(t,e){this._currentMethod=null,this._engineInstance=null,this.state=t,this.velocity=e,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},n.prototype.delay=function(t,e){this.set(this._engineInstance.get(),{duration:t,curve:function(){return 0}},e)},n.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},n.prototype.isActive=function(){return!!this.currentAction},n.prototype.halt=function(){this.set(this.get())},i.exports=n}.bind(this)),require.register("famous_modules/famous/context/_git_master/index.js",function(t,e,i){function n(t){this.container=t,this.allocator=new a(t),this.srcNode=new o,this.eventHandler=new r,this._size=s(this.container),this.perspectiveState=new u(0),this._perspective=void 0,this.eventHandler.on("resize",function(){this._size=s(this.container)}.bind(this))}function s(t){return[t.clientWidth,t.clientHeight]}var o=e("famous/render-node"),r=e("famous/event-handler"),a=(e("famous/spec-parser"),e("famous/element-allocator")),c=e("famous/transform"),u=e("famous/transitions/transitionable");n.prototype.getAllocator=function(){return this.allocator},n.prototype.add=function(t){return this.srcNode.add(t)},n.prototype.migrate=function(t){t!==this.container&&(this.container=t,this.allocator.migrate(t))},n.prototype.getSize=function(){return this._size},n.prototype.setSize=function(t){t||(t=s(this.container)),this._size=t},n.prototype.update=function(){var t=this.perspectiveState.get();t!==this._perspective&&(this.container.style.perspective=t?t.toFixed()+"px":"",this.container.style.webkitPerspective=t?t.toFixed():"",this._perspective=t),this.srcNode&&this.srcNode.commit({allocator:this.getAllocator(),transform:c.identity,opacity:1,origin:[0,0],size:this._size})},n.prototype.getPerspective=function(){return this.perspectiveState.get()},n.prototype.setPerspective=function(t,e,i){return this.perspectiveState.set(t,e,i)},n.prototype.emit=function(t,e){return this.eventHandler.emit(t,e)},n.prototype.on=function(t,e){return this.eventHandler.on(t,e)},n.prototype.unbind=function(t,e){return this.eventHandler.unbind(t,e)},n.prototype.pipe=function(t){return this.eventHandler.pipe(t)},n.prototype.unpipe=function(t){return this.eventHandler.unpipe(t)},i.exports=n}.bind(this)),require.register("famous_modules/famous/engine/_git_master/index.js",function(t,e,i){function n(){y.runLoop?(c.step(),requestAnimationFrame(n)):m=!1}function s(t){if(!window._disableResize){if(document.activeElement&&"INPUT"==document.activeElement.nodeName)return void document.activeElement.addEventListener("blur",function i(){this.removeEventListener("blur",i),s(t)});window.scrollTo(0,0);for(var e=0;e<u.length;e++)u[e].emit("resize");v.emit("resize")}}var o=e("famous/context"),r=e("famous/event-handler"),a=e("famous/options-manager"),c={},u=[],h=[],l=[],p=Date.now(),d=void 0,f=void 0,m=!0,g={},v=new r,y={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0},b=new a(y);b.on("change",function(t){"fpsCap"===t.id?setFPSCap(t.value):"runLoop"===t.id&&!m&&t.value&&(m=!0,requestAnimationFrame(n))});var _=10;c.step=function(){var t=Date.now();if(!(f&&f>t-p)){d=t-p,p=t,v.emit("prerender");for(var e=0;e<h.length;e++)h[e].call(this);for(h.splice(0);l.length&&Date.now()-t<_;)l.shift().call(this);for(var e=0;e<u.length;e++)u[e].update();v.emit("postrender")}},requestAnimationFrame(n),window.addEventListener("resize",s,!1),s(),window.addEventListener("touchmove",function(t){t.preventDefault()},!1),c.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(c):v.pipe(t)},c.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(c):v.unpipe(t)},c.on=function(t,e){return t in g||(g[t]=v.emit.bind(v,t),document.body.addEventListener(t,g[t])),v.on(t,e)},c.emit=function(t,e){return v.emit(t,e)},c.unbind=function(t,e){return v.unbind(t,e)},c.getFPS=function(){return 1e3/d},c.setFPSCap=function(t){f=Math.floor(1e3/t)},c.getOptions=function(){return b.getOptions.apply(b,arguments)},c.setOptions=function(){return b.setOptions.apply(b,arguments)},c.createContext=function(t){void 0===t?(t=document.createElement(y.containerType),t.classList.add(y.containerClass),document.body.appendChild(t)):t instanceof Element||(t=document.createElement(y.containerType),console.warn("Tried to create context on non-existent element"));var e=new o(t);return c.registerContext(e),e},c.registerContext=function(t){return u.push(t),t},c.nextTick=function(t){h.push(t)},c.defer=function(t){l.push(t)},i.exports=c}.bind(this)),require.register("famous_modules/famous/modifier/_git_master/index.js",function(t,e,i){function n(t){var e=s.identity,i=1,n=void 0,r=void 0;arguments.length>1||arguments[0]instanceof Array?(void 0!==arguments[0]&&(e=arguments[0]),void 0!==arguments[1]&&(i=arguments[1]),n=arguments[2],r=arguments[3]):t&&(t.transform&&(e=t.transform),void 0!==t.opacity&&(i=t.opacity),t.origin&&(n=t.origin),t.size&&(r=t.size)),this.transformTranslateState=new o([0,0,0]),this.transformRotateState=new o([0,0,0]),this.transformSkewState=new o([0,0,0]),this.transformScaleState=new o([1,1,1]),this.opacityState=new o(i),this.originState=new o([0,0]),this.sizeState=new o([0,0]),this._originEnabled=!1,this._sizeEnabled=!1,this.setTransform(e),this.setOpacity(i),this.setOrigin(n),this.setSize(r)}var s=e("famous/transform"),o=e("famous/transitions/transitionable"),r=e("famous/utilities/utility");n.prototype.getTransform=function(){return this.isActive()?s.build({translate:this.transformTranslateState.get(),rotate:this.transformRotateState.get(),skew:this.transformSkewState.get(),scale:this.transformScaleState.get()}):this.getFinalTransform()},n.prototype.getFinalTransform=function(){return this._finalTransform},n.prototype.setTransform=function(t,e,i){var n=i?r.after(4,i):void 0;if(e){if(this._transformDirty){var o=s.interpret(this.getFinalTransform());this.transformTranslateState.set(o.translate),this.transformRotateState.set(o.rotate),this.transformSkewState.set(o.skew),this.transformScaleState.set(o.scale),this._transformDirty=!1}var a=s.interpret(t);this.transformTranslateState.set(a.translate,e,n),this.transformRotateState.set(a.rotate,e,n),this.transformSkewState.set(a.skew,e,n),this.transformScaleState.set(a.scale,e,n)}else this.transformTranslateState.halt(),this.transformRotateState.halt(),this.transformSkewState.halt(),this.transformScaleState.halt(),this._transformDirty=!0;this._finalTransform=t},n.prototype.getOpacity=function(){return this.opacityState.get()},n.prototype.setOpacity=function(t,e,i){this.opacityState.set(t,e,i)},n.prototype.getOrigin=function(){return this._originEnabled?this.originState.get():void 0},n.prototype.setOrigin=function(t,e,i){this._originEnabled=!!t,t||(t=[0,0]),t instanceof Array||(t=r.origins[t]),this.originState.set(t,e,i)},n.prototype.getSize=function(){return this._sizeEnabled?this.sizeState.get():void 0},n.prototype.setSize=function(t,e,i){this._sizeEnabled=!!t,t||(t=[0,0]),this.sizeState.set(t,e,i)},n.prototype.setDefaultTransition=function(t){this.transformTranslateState.setDefault(t),this.transformRotateState.setDefault(t),this.transformSkewState.setDefault(t),this.transformScaleState.setDefault(t),this.opacityState.setDefault(t),this.originState.setDefault(t),this.sizeState.setDefault(t)},n.prototype.halt=function(){this.transformTranslateState.halt(),this.transformRotateState.halt(),this.transformSkewState.halt(),this.transformScaleState.halt(),this.opacityState.halt(),this.originState.halt(),this.sizeState.halt()},n.prototype.isActive=function(){return this.transformTranslateState.isActive()||this.transformRotateState.isActive()||this.transformSkewState.isActive()||this.transformScaleState.isActive()},n.prototype.modify=function(t){return{transform:this.getTransform(),opacity:this.getOpacity(),origin:this.getOrigin(),size:this.getSize(),target:t}},i.exports=n}.bind(this)),require.register("app/custom/light-box/light-box.js",function(t,e,i){function n(t){this.options={inTransform:s.scale(.001,.001,.001),inOpacity:0,inOrigin:[.5,.5],outTransform:s.scale(.001,.001,.001),outOpacity:0,outOrigin:[.5,.5],showTransform:s.identity,showOpacity:1,showOrigin:[.5,.5],inTransition:!0,outTransition:!0,overlap:!1},t&&this.setOptions(t),this._showing=!1,this.nodes=[],this.transforms=[]}var s=e("famous/transform"),o=e("famous/modifier"),r=e("famous/render-node"),a=e("famous/utilities/utility");n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.inTransform&&(this.options.inTransform=t.inTransform),void 0!==t.inOpacity&&(this.options.inOpacity=t.inOpacity),void 0!==t.inOrigin&&(this.options.inOrigin=t.inOrigin),void 0!==t.outTransform&&(this.options.outTransform=t.outTransform),void 0!==t.outOpacity&&(this.options.outOpacity=t.outOpacity),void 0!==t.outOrigin&&(this.options.outOrigin=t.outOrigin),void 0!==t.showTransform&&(this.options.showTransform=t.showTransform),void 0!==t.showOpacity&&(this.options.showOpacity=t.showOpacity),void 0!==t.showOrigin&&(this.options.showOrigin=t.showOrigin),void 0!==t.inTransition&&(this.options.inTransition=t.inTransition),void 0!==t.outTransition&&(this.options.outTransition=t.outTransition),void 0!==t.overlap&&(this.options.overlap=t.overlap)},n.prototype.show=function(t,e,i){if(this.curRenderable=t,!t)return this.hide(i);if(e instanceof Function&&(i=e,e=void 0),this._showing){if(!this.options.overlap)return void this.hide(this.show.bind(this,t,i));this.hide()}this._showing=!0,t.options&&this.setOptions(t.options);var n=new o({transform:this.options.inTransform,opacity:this.options.inOpacity,origin:this.options.inOrigin}),s=new r;s.add(n).add(t),this.nodes.push(s),this.transforms.push(n);var c=i?a.after(3,i):void 0;e||(e=this.options.inTransition),n.setTransform(this.options.showTransform,e,c),n.setOpacity(this.options.showOpacity,e,c),n.setOrigin(this.options.showOrigin,e,c)},n.prototype.hide=function(t,e){if(this._showing){this._showing=!1,t instanceof Function&&(e=t,t=void 0);var i=this.nodes[this.nodes.length-1],n=this.transforms[this.transforms.length-1],s=a.after(3,function(){this.nodes.splice(this.nodes.indexOf(i),1),this.transforms.splice(this.transforms.indexOf(n),1),e&&e.call(this)}.bind(this));t||(t=this.options.outTransition),n.setTransform(this.options.outTransform,t,s),n.setOpacity(this.options.outOpacity,t,s),n.setOrigin(this.options.outOrigin,t,s)}},n.prototype.render=function(){for(var t=[],e=0;e<this.nodes.length;e++)t.push(this.nodes[e].render());return t},i.exports=n}.bind(this)),require.register("famous_modules/famous/views/light-box/_git_master/index.js",function(t,e,i){function n(t){this.options={inTransform:s.scale(.001,.001,.001),inOpacity:0,inOrigin:[.5,.5],outTransform:s.scale(.001,.001,.001),outOpacity:0,outOrigin:[.5,.5],showTransform:s.identity,showOpacity:1,showOrigin:[.5,.5],inTransition:!0,outTransition:!0,overlap:!1},t&&this.setOptions(t),this._showing=!1,this.nodes=[],this.transforms=[]}var s=e("famous/transform"),o=e("famous/modifier"),r=e("famous/render-node"),a=e("famous/utilities/utility");n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.inTransform&&(this.options.inTransform=t.inTransform),void 0!==t.inOpacity&&(this.options.inOpacity=t.inOpacity),void 0!==t.inOrigin&&(this.options.inOrigin=t.inOrigin),void 0!==t.outTransform&&(this.options.outTransform=t.outTransform),void 0!==t.outOpacity&&(this.options.outOpacity=t.outOpacity),void 0!==t.outOrigin&&(this.options.outOrigin=t.outOrigin),void 0!==t.showTransform&&(this.options.showTransform=t.showTransform),void 0!==t.showOpacity&&(this.options.showOpacity=t.showOpacity),void 0!==t.showOrigin&&(this.options.showOrigin=t.showOrigin),void 0!==t.inTransition&&(this.options.inTransition=t.inTransition),void 0!==t.outTransition&&(this.options.outTransition=t.outTransition),void 0!==t.overlap&&(this.options.overlap=t.overlap)},n.prototype.show=function(t,e,i){if(!t)return this.hide(i);if(e instanceof Function&&(i=e,e=void 0),this._showing){if(!this.options.overlap)return void this.hide(this.show.bind(this,t,i));this.hide()}this._showing=!0;var n=new o({transform:this.options.inTransform,opacity:this.options.inOpacity,origin:this.options.inOrigin}),s=new r;s.add(n).add(t),this.nodes.push(s),this.transforms.push(n);var c=i?a.after(3,i):void 0;e||(e=this.options.inTransition),n.setTransform(this.options.showTransform,e,c),n.setOpacity(this.options.showOpacity,e,c),n.setOrigin(this.options.showOrigin,e,c)},n.prototype.hide=function(t,e){if(this._showing){this._showing=!1,t instanceof Function&&(e=t,t=void 0);var i=this.nodes[this.nodes.length-1],n=this.transforms[this.transforms.length-1],s=a.after(3,function(){this.nodes.splice(this.nodes.indexOf(i),1),this.transforms.splice(this.transforms.indexOf(n),1),e&&e.call(this)}.bind(this));t||(t=this.options.outTransition),n.setTransform(this.options.outTransform,t,s),n.setOpacity(this.options.outOpacity,t,s),n.setOrigin(this.options.outOrigin,t,s)}},n.prototype.render=function(){for(var t=[],e=0;e<this.nodes.length;e++)t.push(this.nodes[e].render());return t},i.exports=n}.bind(this)),require.register("famous_modules/famous/views/edge-swapper/_git_master/index.js",function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._currTarget=void 0,this._size=[window.innerWidth,window.innerHeight],this.lightbox=new a(this.options),this.eventInput=new o,o.setInputHandler(this,this.eventInput),this.id=s.register(this),t&&this.setOptions(t)}var s=e("famous/entity"),o=e("famous/event-handler"),r=e("famous/transform"),a=e("famous/views/light-box");n.DEFAULT_OPTIONS={inOrigin:[0,0],outOrigin:[0,0],showOrigin:[0,0],inTransform:r.translate(window.innerWidth,0,0),outTransform:r.translate(window.innerWidth,0,.01)},n.prototype.show=function(t){this._currTarget&&this.eventInput.unpipe(this._currTarget),this._currTarget=t,this._currTarget&&(this._currTarget.setSize&&this._currTarget.setSize(this._size),this._currTarget.emit&&this.eventInput.pipe(this._currTarget)),this.lightbox.show.apply(this.lightbox,arguments)},n.prototype.setOptions=function(t){this.lightbox.setOptions(t)},n.prototype.render=function(){return this.id},n.prototype.commit=function(t){var e=t.transform,i=t.opacity,n=t.origin,s=t.size;return(s[0]!=this._size[0]||s[1]!=this._size[1])&&(this._size=s,this.lightbox.setOptions({inTransform:r.translate(this._size[0],0,0),outTransform:r.translate(this._size[0],0,.01)}),this._currTarget&&this._currTarget.setSize&&this._currTarget.setSize(s)),{transform:e,opacity:i,origin:n,size:s,target:this.lightbox.render()}},i.exports=n}.bind(this)),require.register("famous_modules/famous/widgets/title-bar/_git_master/index.js",function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this.lightbox=new r,this._surfaces={},t&&this.setOptions(t)}var s=e("famous/transform"),o=e("famous/surface"),r=e("famous/views/light-box");n.DEFAULT_OPTIONS={widget:o,inOrigin:[.5,0],outOrigin:[.5,0],showOrigin:[.5,0],inTransition:!0,outTransition:!0,size:[void 0,50],look:void 0},n.prototype.show=function(t){var e=this.options.widget;if(!(t in this._surfaces)){var i=new e({size:this.options.size});i.setOptions(this.options.look),i.setContent(t),this._surfaces[t]=i}this.lightbox.show(this._surfaces[t])},n.prototype.getSize=function(){return this.options.size},n.prototype.setOptions=function(t){if(this.lightbox.setOptions(t),t.widget&&(this.options.widget=t.widget,this._surfaces={}),t.look&&(this.options.look=t.look),t.size){this.options.size=t.size;var e=s.translate(0,-this.options.size[1]);this.lightbox.setOptions({inTransform:e,outTransform:e})}},n.prototype.render=function(){return this.lightbox.render()},i.exports=n}.bind(this)),require.register("famous_modules/famous/view-sequence/_git_master/index.js",function(t,e,i){function n(t,e,i){this.array=t||[],this.index=e||0,this.loop=i||!1,this._prev=null,this._prevIndex=void 0,this._next=null,this._nextIndex=void 0}function s(t){for(var e=this.index,i=this;i&&e<this.array.length;)i.index+=t,void 0!==i._prevIndex&&(i._prevIndex+=t),void 0!==i._nextIndex&&(i._nextIndex+=t),i=i._next}n.prototype._createPrevious=function(){var t=new this.constructor(this.array,this._prevIndex,this.loop);return t._next=this,t._nextIndex=this.index,t},n.prototype._createNext=function(){var t=new this.constructor(this.array,this._nextIndex,this.loop);return t._prev=this,t._prevIndex=this.index,t},n.prototype.getPrevious=function(){var t=this.index-1;if(0==this.index){if(!this.loop)return null;t=this.array.length-1}return this._prev&&this._prevIndex==t||(this._prevIndex=t,this._prev=this._createPrevious()),this._prev},n.prototype.getNext=function(){var t=this.index+1;if(t>=this.array.length){if(!this.loop)return null;t=0}return this._next&&this._nextIndex==t||(this._nextIndex=t,this._next=this._createNext()),this._next},n.prototype.toString=function(){return this.index},n.prototype.unshift=function(){if(this._prev&&0!==this.index)this._prev.unshift.apply(this._prev,arguments);else{var t=arguments.length;this.array.unshift.apply(this.array,arguments),s.call(this,t)}},n.prototype.push=function(){this.array.push.apply(this.array,arguments)},n.prototype.splice=function(t,e){if(this._prev&&this.index!==t)this._prev.splice.apply(this._prev,arguments);else{var i=this.index>=t?arguments.length-2-e:0;this.array.splice.apply(this.array,arguments),i&&s.call(this,i)}},n.prototype.get=function(){return this.array[this.index]},n.prototype.getSize=function(){var t=this.get();if(t)return t.getSize?t.getSize.apply(t,arguments):null},n.prototype.render=function(){var t=this.get();if(t)return t.render.apply(t,arguments)},i.exports=n}.bind(this)),require.register("famous_modules/famous/views/grid-layout/_git_master/index.js",function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this.optionsManager=new c(this.options),t&&this.setOptions(t),this.id=s.register(this),this._modifiers=[],this._contextSizeCache=[0,0],this._dimensionsCache=[0,0],this._activeCount=0}var s=e("famous/entity"),o=(e("famous/render-node"),e("famous/transform")),r=e("famous/view-sequence"),a=e("famous/modifier"),c=e("famous/options-manager");n.DEFAULT_OPTIONS={dimensions:[1,1],cellSize:[250,250],transition:!1},n.prototype.render=function(){return this.id},n.prototype.setOptions=function(t){return this.optionsManager.setOptions(t)},n.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new r(t)),this.sequence=t},n.prototype.commit=function(t){var e=t.transform,i=t.opacity,n=t.origin,s=t.size,r=this.options.dimensions[0],c=this.options.dimensions[1];if(s[0]!==this._contextSizeCache[0]||s[1]!==this._contextSizeCache[1]||r!==this._dimensionsCache[0]||c!==this._dimensionsCache[1]){c||(c=Math.floor(s[1]/this.options.cellSize[1])),r||(r=Math.floor(s[0]/this.options.cellSize[0]));for(var u=s[1]/c,h=s[0]/r,l=0;c>l;l++)for(var p=Math.round(u*l),d=0;r>d;d++){var f=Math.round(h*d),m=l*r+d;m in this._modifiers||(this._modifiers[m]=new a({opacity:0}));var g=this._modifiers[m];g.halt(),g.setTransform(o.translate(f,p),this.options.transition),g.setSize([Math.round(h*(d+1))-f,Math.round(u*(l+1))-p],this.options.transition),g.setOpacity(1,this.options.transition)}this._dimensionsCache=[this.options.dimensions[0],this.options.dimensions[1]],this._contextSizeCache=[s[0],s[1]],this._activeCount=c*r;for(var l=this._activeCount;l<this._modifiers.length;l++){var g=this._modifiers[l];g.halt(),g.setTransform(o.identity,this.options.transition),g.setSize([Math.round(h),Math.round(u)],this.options.transition),g.setOpacity(0,this.options.transition)}}for(var v=this.sequence,y=[],m=0;v&&m<this._modifiers.length;){var b=v.get(),_=this._modifiers[m];m>=this._activeCount&&!_.isActive()&&this._modifiers.splice(m),b&&(y[m]=_.modify({origin:n,target:b.render()})),v=v.getNext(),m++}s&&(e=o.moveThen([-s[0]*n[0],-s[1]*n[1],0],e));var w={transform:e,opacity:i,size:s,target:y};return w},i.exports=n}.bind(this)),require.register("famous_modules/famous/views/fader/_git_master/index.js",function(t,e,i){function n(t,e){this.options={cull:!1,transition:!0,pulseInTransition:!0,pulseOutTransition:!0,visibilityThreshold:0},t&&this.setOptions(t),e||(e=0),this.transitionHelper=new s(e)}var s=e("famous/transitions/transitionable");n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.cull&&(this.options.cull=t.cull),void 0!==t.transition&&(this.options.transition=t.transition),void 0!==t.pulseInTransition&&(this.options.pulseInTransition=t.pulseInTransition),void 0!==t.pulseOutTransition&&(this.options.pulseOutTransition=t.pulseOutTransition),void 0!==t.visibilityThreshold&&(this.options.visibilityThreshold=t.visibilityThreshold)},n.prototype.show=function(t){this.set(1,this.options.transition,t)},n.prototype.hide=function(t){this.set(0,this.options.transition,t)},n.prototype.pulse=function(t,e){void 0===t&&(t=1);var i=this.transitionHelper.get();this.transitionHelper.set(t,this.options.pulseInTransition),this.transitionHelper.set(i,this.options.pulseOutTransition,e)},n.prototype.set=function(t,e,i){this.transitionHelper.halt(),this.transitionHelper.set(t,e,i)},n.prototype.render=function(t){var e=this.transitionHelper.get();return this.options.cull&&!e?void 0:{opacity:e,target:t}},n.prototype.isVisible=function(){var t=this.options.visibilityThreshold;return t>=1?1==this.transitionHelper.get():this.transitionHelper.get()>t},i.exports=n}.bind(this)),require.register("famous_modules/famous/views/image-fader/_git_master/index.js",function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._nodes=[],this._faders=[],this._mode=-1,t&&this.setOptions(t),this._output=[]}var s=e("famous/render-node"),o=e("famous/views/fader"),r=e("famous/transform");n.DEFAULT_OPTIONS={crossfade:!1},n.prototype.getMode=function(){return this._mode},n.prototype.setMode=function(t,e,i){if(this._mode=t,this.options.crossfade){for(var n=0;n<this._faders.length;n++)this._faders[n].set(0,e);this._faders[t].set(1,e,i)}else this._faders[t].set(1,e,function(){if(this._mode==t){for(var e=0;e<this._faders.length;e++)e!=t&&this._faders[e].set(0);i&&i()}}.bind(this))},n.prototype.forMode=function(t){return this._nodes[t]||(this._nodes[t]=new s,this._faders[t]=new o(this.options)),this._nodes[t]},n.prototype.setOptions=function(t){void 0!==t.crossfade&&(this.options.crossfade=t.crossfade)},n.behindMatrix=r.translate(0,0,-.01),n.prototype.render=function(){this._nodes.length>this._output.length&&this._output.splice(this._nodes.length);for(var t=0;t<this._nodes.length;t++){var e=this._faders[t].render(this._nodes[t].render());t!==this._mode&&(e={transform:n.behindMatrix,target:e}),this._output[t]=e}return this._output},i.exports=n}.bind(this)),require.register("famous_modules/famous/widgets/toggle-button/_git_master/index.js",function(t,e,i){function n(t){this.options={content:"",offClasses:["off"],onClasses:["on"],size:void 0,outTransition:{curve:"easeInOut",duration:300},inTransition:{curve:"easeInOut",duration:300},toggleMode:n.TOGGLE,crossfade:!1},this.eventOutput=new o,o.setOutputHandler(this,this.eventOutput),this.offSurface=new s,this.offSurface.on("click",function(){this.options.toggleMode!==n.OFF&&this.select()}.bind(this)),this.offSurface.pipe(this.eventOutput),this.onSurface=new s,this.onSurface.on("click",function(){this.options.toggleMode!==n.ON&&this.deselect()}.bind(this)),this.onSurface.pipe(this.eventOutput),this.arbiter=new r({crossfade:this.options.crossfade}),this.arbiter.forMode(n.OFF).add(this.offSurface),this.arbiter.forMode(n.ON).add(this.onSurface),this.arbiter.setMode(n.OFF),this.selected=!1,t&&this.setOptions(t)}var s=e("famous/surface"),o=e("famous/event-handler"),r=e("famous/views/image-fader");n.OFF=0,n.ON=1,n.TOGGLE=2,n.prototype.select=function(){this.selected=!0,this.arbiter.setMode(n.ON,this.options.inTransition),this.eventOutput.emit("select")},n.prototype.deselect=function(){this.selected=!1,this.arbiter.setMode(n.OFF,this.options.outTransition),this.eventOutput.emit("deselect")},n.prototype.isSelected=function(){return this.selected},n.prototype.setOptions=function(t){void 0!==t.content&&(this.options.content=t.content,this.offSurface.setContent(this.options.content),this.onSurface.setContent(this.options.content)),t.offClasses&&(this.options.offClasses=t.offClasses,this.offSurface.setClasses(this.options.offClasses)),t.onClasses&&(this.options.onClasses=t.onClasses,this.onSurface.setClasses(this.options.onClasses)),void 0!==t.size&&(this.options.size=t.size,this.onSurface.setSize(this.options.size),this.offSurface.setSize(this.options.size)),void 0!==t.toggleMode&&(this.options.toggleMode=t.toggleMode),void 0!==t.outTransition&&(this.options.outTransition=t.outTransition),void 0!==t.inTransition&&(this.options.inTransition=t.inTransition),void 0!==t.crossfade&&(this.options.crossfade=t.crossfade,this.arbiter.setOptions({crossfade:this.options.crossfade}))},n.prototype.getSize=function(){return this.options.size},n.prototype.render=function(){return this.arbiter.render()},i.exports=n}.bind(this)),require.register("famous_modules/famous/widgets/tab-bar/_git_master/index.js",function(t,e,i){function n(){a.apply(this,arguments),this.layout=new c,this.buttons=[],this._buttonIds={},this._buttonCallbacks={},this.layout.sequenceFrom(this.buttons),this._add(this.layout),this._optionsManager.on("change",s.bind(this))}function s(t){var e=t.id,i=t.value;if("direction"===e)this.layout.setOptions({dimensions:o.call(this.buttons.length,this.options.direction)});else if("buttons"===e)for(var n in this.buttons)this.buttons[n].setOptions(i);else if("sections"===e)for(var e in this.options.sections)this.defineSection(e,this.options.sections[e])}function o(t,e){return e===r.Direction.X?[t,1]:[1,t]}var r=(e("famous/event-handler"),e("famous/utilities/utility")),a=e("famous/view"),c=e("famous/views/grid-layout"),u=e("famous/widgets/toggle-button");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={sections:[],widget:u,size:[void 0,50],direction:r.Direction.X,buttons:{toggleMode:u.ON}},n.prototype.defineSection=function(t,e){var i,n=this._buttonIds[t];if(void 0===n){n=this.buttons.length,this._buttonIds[t]=n;var s=this.options.widget;i=new s,this.buttons[n]=i,this.layout.setOptions({dimensions:o(this.buttons.length,this.options.direction)})}else i=this.buttons[n],i.unbind("select",this._buttonCallbacks[t]);this.options.buttons&&i.setOptions(this.options.buttons),i.setOptions(e),this._buttonCallbacks[t]=this.select.bind(this,t),i.on("select",this._buttonCallbacks[t])},n.prototype.select=function(t){var e=this._buttonIds[t];this.buttons[e]&&this.buttons[e].isSelected()?this._eventOutput.emit("select",{id:t}):this.buttons[e]&&this.buttons[e].select();for(var i=0;i<this.buttons.length;i++)i!=e&&this.buttons[i].deselect()},i.exports=n}.bind(this)),require.register("famous_modules/famous/group/_git_master/index.js",function(t,e,i){function n(t){r.call(this,t),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new s(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0],this._origin=void 0,this._originTransfer={render:function(t){return{origin:this._origin,target:t}}.bind(this)}}var s=e("famous/context"),o=e("famous/transform"),r=e("famous/surface");n.SIZE_ZERO=[0,0],n.prototype=Object.create(r.prototype),n.prototype.elementType="div",n.prototype.elementClass="famous-group",n.prototype.add=function(){var t=this.context.add(this._originTransfer);return t.add.apply(t,arguments)},n.prototype.add=function(){return this.context.add.apply(this.context,arguments)},n.prototype.render=function(){return r.prototype.render.call(this)},n.prototype.deploy=function(t){this.context.migrate(t)},n.prototype.recall=function(){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},n.prototype.commit=function(t){var e=t.transform,i=t.opacity,s=t.origin,a=t.size;e=o.moveThen([-s[0]*a[0],-s[1]*a[1],0],e);var c=r.prototype.commit.call(this,t,e,i,s,n.SIZE_ZERO);return this._origin=s,(a[0]!=this._groupSize[0]||a[1]!=this._groupSize[1])&&(this.context.setSize(a),this._groupSize[0]=a[0],this._groupSize[1]=a[1]),this.context.update(),c},i.exports=n}.bind(this)),require.register("famous_modules/famous/input/mouse-sync/_git_master/index.js",function(t,e,i){function n(t,e){this.targetGet=t,this.options={direction:void 0,rails:!1,scale:1,stallTime:50,propogate:!0},this.setOptions(e?e:this.options),this.input=new c,this.output=new c,c.setInputHandler(this,this.input),c.setOutputHandler(this,this.output),this._prevCoord=void 0,this._prevTime=void 0,this._prevVel=void 0,this.input.on("mousedown",s.bind(this)),this.input.on("mousemove",o.bind(this)),this.input.on("mouseup",r.bind(this)),this.options.propogate?this.input.on("mouseleave",a.bind(this)):this.input.on("mouseleave",r.bind(this))}function s(t){t.preventDefault(),this._prevCoord=[t.clientX,t.clientY],this._prevTime=Date.now(),this._prevVel=void 0!==this.options.direction?0:[0,0],this.output.emit("start")}function o(t){if(this._prevCoord){var e=this._prevCoord,i=this._prevTime,s=[t.clientX,t.clientY],o=Date.now(),r=s[0]-e[0],a=s[1]-e[1];this.options.rails&&(Math.abs(r)>Math.abs(a)?a=0:r=0);var c,u,h=Math.max(o-i,8),l=r/h,p=a/h,d=this.targetGet(),f=this.options.scale;this.options.direction==n.DIRECTION_X?(c=d+f*r,u=f*l):this.options.direction==n.DIRECTION_Y?(c=d+f*a,u=f*p):(c=[d[0]+f*r,d[1]+f*a],u=[f*l,f*p]),this.output.emit("update",{p:c,v:u}),this._prevCoord=s,this._prevTime=o,this._prevVel=u}}function r(){if(this._prevCoord){var t=this._prevTime,e=Date.now();
e-t>this.options.stallTime&&(this._prevVel=void 0==this.options.direction?[0,0]:0);var i=this.targetGet();this.output.emit("end",{p:i,v:this._prevVel}),this._prevCoord=void 0,this._prevTime=void 0,this._prevVel=void 0}}function a(){if(this._prevCoord){var t=function(t){o.call(this,t)}.bind(this),e=function(i){r.call(this,i),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",e)}.bind(this);document.addEventListener("mousemove",t),document.addEventListener("mouseup",e)}}var c=e("famous/event-handler");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime),void 0!==t.propogate&&(this.options.propogate=t.propogate)},i.exports=n}.bind(this)),require.register("app/custom/up-down-transform/up-down-transform.js",function(t,e,i){function n(){this.options={inTransform:s.translate(0,1500,0),inOpacity:1,inOrigin:[.5,.5],outTransform:s.translate(0,600,0),outOpacity:1,outOrigin:[.5,.5],showTransform:s.identity,showOpacity:1,showOrigin:[.5,.5],inTransition:{duration:500,curve:o.inQuad()},outTransition:{duration:100,curve:o.outQuint()},overlap:!0}}var s=e("famous/transform"),o=e("famous/transitions/easing");i.exports=n}.bind(this)),require.register("app/custom/conversation-surface/conversation-surface.js",function(t,e,i){function n(){s.apply(this,arguments),this.setSize([void 0,!0])}var s=e("famous/surface");n.prototype=Object.create(s.prototype),n.prototype.deploy=function(t){s.prototype.deploy.apply(this,arguments),this.__size=[t.offsetWidth,t.offsetHeight]},n.prototype.getSize=function(){return this.__size||this._size||this.size},i.exports=n}.bind(this)),require.register("app/custom/sound-player/sound-player.js",function(t,e,i){function n(t,e){this.context,this.node,this.buffersActive=[];try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.context=new AudioContext,this.bufferLoader=new s(this.context,t,this.setSounds.bind(this)),this.sounds,this.callback=e||void 0,this.bufferLoader.load()}catch(i){}}var s=e("buffer-loader");n.prototype.setSounds=function(t){this.sounds=t,void 0!=this.callback&&this.callback()},n.prototype.isPlaying=function(){return this.buffersActive.length>0?!0:!1},n.prototype.stopPlaying=function(){var t=this.buffersActive.length;if(t>0)for(var e=0;t>e;e++){var i=this.buffersActive[e];i.stop(0)}},n.prototype.getContext=function(){return this.context},n.prototype.addNode=function(t){this.node=t},n.prototype.playSound=function(t,e,i){if(this.context&&this.sounds){var n=this.context.createBufferSource(),s=this.context.createGainNode?this.context.createGainNode():this.context.createGain();s.gain.value="undefined"==typeof e?.5:e,n.buffer=this.sounds[t],n.connect(s);var o=s;this.node&&(o.connect(this.node),o=this.node),o.connect(this.context.destination),n.start(0),n.onended=function(){var t=this.buffersActive.indexOf(n);-1!==t&&this.buffersActive.splice(t,1),i&&i()}.bind(this,n),this.buffersActive.push(n)}},i.exports=n}.bind(this)),require.register("app/custom/sound-player/buffer-loader.js",function(t,e,i){function n(t,e,i){this.context=t,this.urlList=e,this.onload=i,this.bufferList=[],this.loadCount=0}n.prototype.loadBuffer=function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer";var n=this;i.onload=function(){n.context.decodeAudioData(i.response,function(i){return i?(n.bufferList[e]=i,void(++n.loadCount==n.urlList.length&&n.onload(n.bufferList))):void console.log("error decoding file data: "+t)})},i.onerror=function(){console.log("BufferLoader: XHR error")},i.send()},n.prototype.load=function(){for(var t=0;t<this.urlList.length;++t)this.loadBuffer(this.urlList[t],t)},i.exports=n}.bind(this)),require.register("famous_modules/famous/input/touch-tracker/_git_master/index.js",function(t,e,i){function n(t){this.selective=t,this.touchHistory={},this.eventInput=new u,this.eventOutput=new u,u.setInputHandler(this,this.eventInput),u.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",o.bind(this)),this.eventInput.on("touchmove",r.bind(this)),this.eventInput.on("touchend",a.bind(this)),this.eventInput.on("touchcancel",a.bind(this)),this.eventInput.on("unpipe",c.bind(this))}function s(t,e,i,n){var s={};for(var o in t)s[o]=t[o];return{touch:s,origin:e,timestamp:Date.now(),count:n,history:i}}function o(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],n=s(i,t.origin,void 0,t.touches.length);this.eventOutput.emit("trackstart",n),this.selective||this.touchHistory[i.identifier]||this.track(n)}}function r(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],n=this.touchHistory[i.identifier];if(n){var o=s(i,t.origin,n,t.touches.length);this.touchHistory[i.identifier].push(o),this.eventOutput.emit("trackmove",o)}}}function a(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],n=this.touchHistory[i.identifier];if(n){var o=s(i,t.origin,n,t.touches.length);this.eventOutput.emit("trackend",o),delete this.touchHistory[i.identifier]}}}function c(){for(var t in this.touchHistory){var e=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:e[e.length-1].touch,timestamp:Date.now(),count:0,history:e}),delete this.touchHistory[t]}}var u=e("famous/event-handler");n.prototype.track=function(t){this.touchHistory[t.touch.identifier]=[t]},i.exports=n}.bind(this)),require.register("famous_modules/famous/input/touch-sync/_git_master/index.js",function(t,e,i){function n(t,e){this.targetGet=t,this.output=new c,this.touchTracker=new a,this.options={direction:void 0,rails:!1,scale:1},this.setOptions(e?e:this.options),c.setOutputHandler(this,this.output),c.setInputHandler(this,this.touchTracker),this.touchTracker.on("trackstart",s.bind(this)),this.touchTracker.on("trackmove",o.bind(this)),this.touchTracker.on("trackend",r.bind(this))}function s(t){this.output.emit("start",{count:t.count,touch:t.touch.identifier})}function o(t){var e=t.history,i=e[e.length-2].timestamp,s=e[e.length-1].timestamp,o=e[e.length-2].touch,r=e[e.length-1].touch,a=r.pageX-o.pageX,c=r.pageY-o.pageY;this.options.rails&&(Math.abs(a)>Math.abs(c)?c=0:a=0);var u=Math.max(s-i,8),h=a/u,l=c/u;if(e.length>2)var p=e[e.length-3].touch,d=(r.pageX-2*o.pageX+p.pageX)/(u*u),f=(r.pageY-2*o.pageY+p.pageY)/(u*u);else var d=0,f=0;var m,g,v,y=this.targetGet(),b=this.options.scale;this.options.direction==n.DIRECTION_X?(m=y+b*a,g=b*h,v=b*l):this.options.direction==n.DIRECTION_Y?(m=y+b*c,g=b*l,v=b*f):(m=[y[0]+b*a,y[1]+b*c],g=[b*h,b*l],v=[b*d,b*f]),this.output.emit("update",{p:m,v:g,a:v,touch:t.touch.identifier})}function r(t){var e=void 0!==this.options.direction?0:[0,0],i=t.history,s=t.count,o=this.targetGet();if(i.length>1){var r=i[i.length-2].timestamp,a=i[i.length-1].timestamp,c=i[i.length-2].touch,u=i[i.length-1].touch,h=u.pageX-c.pageX,l=u.pageY-c.pageY;this.options.rails&&(Math.abs(h)>Math.abs(l)?l=0:h=0);var e,p=Math.max(a-r,1),d=h/p,f=l/p,m=this.options.scale;e=this.options.direction==n.DIRECTION_X?m*d:this.options.direction==n.DIRECTION_Y?m*f:[m*d,m*f]}this.output.emit("end",{p:o,v:e,count:s,touch:t.touch.identifier})}var a=e("famous/input/touch-tracker"),c=e("famous/event-handler");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale)},n.prototype.getOptions=function(){return this.options},i.exports=n}.bind(this)),require.register("app/custom/custom-input-sync/index.js",function(t,e,i){i.exports={TouchSync:e("touch-sync"),MouseSync:e("mouse-sync")}}.bind(this)),require.register("app/custom/custom-input-sync/mouse-sync.js",function(t,e,i){function n(t,e){this.targetGet=t,this.options={direction:void 0,rails:!1,scale:1,stallTime:50,propogate:!0},this.setOptions(e?e:this.options),this.input=new c,this.output=new c,c.setInputHandler(this,this.input),c.setOutputHandler(this,this.output),this._prevCoord=void 0,this._prevTime=void 0,this._prevVel=void 0,this.input.on("mousedown",s.bind(this)),this.input.on("mousemove",o.bind(this)),this.input.on("mouseup",r.bind(this)),this.options.propogate?this.input.on("mouseleave",a.bind(this)):this.input.on("mouseleave",r.bind(this))}function s(t){t.preventDefault(),this._prevCoord=[t.clientX,t.clientY],this._prevTime=Date.now(),this._prevVel=void 0!==this.options.direction?0:[0,0],this.output.emit("start",{ap:this._prevCoord})}function o(t){if(this._prevCoord){var e=this._prevCoord,i=this._prevTime,s=[t.clientX,t.clientY],o=Date.now(),r=s[0]-e[0],a=s[1]-e[1];this.options.rails&&(Math.abs(r)>Math.abs(a)?a=0:r=0);var c,u,h=Math.max(o-i,8),l=r/h,p=a/h,d=this.targetGet(),f=this.options.scale;this.options.direction==n.DIRECTION_X?(c=d+f*r,u=f*l):this.options.direction==n.DIRECTION_Y?(c=d+f*a,u=f*p):(c=[d[0]+f*r,d[1]+f*a],u=[f*l,f*p]),this.output.emit("update",{ap:s,p:c,v:u}),this._prevCoord=s,this._prevTime=o,this._prevVel=u}}function r(){if(this._prevCoord){var t=this._prevTime,e=Date.now();e-t>this.options.stallTime&&(this._prevVel=void 0==this.options.direction?[0,0]:0);var i=this.targetGet();this.output.emit("end",{p:i,v:this._prevVel}),this._prevCoord=void 0,this._prevTime=void 0,this._prevVel=void 0}}function a(){if(this._prevCoord){var t=function(t){o.call(this,t)}.bind(this),e=function(i){r.call(this,i),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",e)}.bind(this);document.addEventListener("mousemove",t),document.addEventListener("mouseup",e)}}var c=e("famous/event-handler");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime),void 0!==t.propogate&&(this.options.propogate=t.propogate)},i.exports=n}.bind(this)),require.register("app/custom/custom-input-sync/touch-sync.js",function(t,e,i){function n(t,e){this.targetGet=t,this.output=new c,this.touchTracker=new a,this.options={direction:void 0,rails:!1,scale:1},this.setOptions(e?e:this.options),c.setOutputHandler(this,this.output),c.setInputHandler(this,this.touchTracker),this.touchTracker.on("trackstart",s.bind(this)),this.touchTracker.on("trackmove",o.bind(this)),this.touchTracker.on("trackend",r.bind(this))}function s(t){this.output.emit("start",{ap:[t.touch.clientX,t.touch.clientY],count:t.count,touch:t.touch.identifier})}function o(t){var e=t.history,i=e[e.length-2].timestamp,s=e[e.length-1].timestamp,o=e[e.length-2].touch,r=e[e.length-1].touch,a=r.pageX-o.pageX,c=r.pageY-o.pageY;this.options.rails&&(Math.abs(a)>Math.abs(c)?c=0:a=0);var u=Math.max(s-i,8),h=a/u,l=c/u;if(e.length>2)var p=e[e.length-3].touch,d=(r.pageX-2*o.pageX+p.pageX)/(u*u),f=(r.pageY-2*o.pageY+p.pageY)/(u*u);else var d=0,f=0;var m,g,v,y=this.targetGet(),b=this.options.scale;this.options.direction==n.DIRECTION_X?(m=y+b*a,g=b*h,v=b*l):this.options.direction==n.DIRECTION_Y?(m=y+b*c,g=b*l,v=b*f):(m=[y[0]+b*a,y[1]+b*c],g=[b*h,b*l],v=[b*d,b*f]),this.output.emit("update",{ap:[r.pageX,r.pageY],p:m,v:g,a:v,touch:t.touch.identifier})}function r(t){var e=void 0!==this.options.direction?0:[0,0],i=t.history,s=t.count,o=this.targetGet();if(i.length>1){var r=i[i.length-2].timestamp,a=i[i.length-1].timestamp,c=i[i.length-2].touch,u=i[i.length-1].touch,h=u.pageX-c.pageX,l=u.pageY-c.pageY;this.options.rails&&(Math.abs(h)>Math.abs(l)?l=0:h=0);var e,p=Math.max(a-r,1),d=h/p,f=l/p,m=this.options.scale;e=this.options.direction==n.DIRECTION_X?m*d:this.options.direction==n.DIRECTION_Y?m*f:[m*d,m*f]}this.output.emit("end",{p:o,v:e,count:s,touch:t.touch.identifier})}var a=e("famous/input/touch-tracker"),c=e("famous/event-handler");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale)},n.prototype.getOptions=function(){return this.options},i.exports=n}.bind(this)),require.register("famous_modules/famous/input/scroll-sync/_git_master/index.js",function(t,e,i){function n(t,e){this.targetGet=t,this.options={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40},this.setOptions(e?e:this.options),this.input=new r,this.output=new r,r.setInputHandler(this,this.input),r.setOutputHandler(this,this.output),this._prevTime=void 0,this._prevVel=void 0,this.input.on("mousewheel",o.bind(this)),this.input.on("wheel",o.bind(this)),this.inProgress=!1,this._loopBound=!1}function s(){var t=Date.now();if(this.inProgress&&t-this._prevTime>this.options.stallTime){var e=this.targetGet();this.inProgress=!1;var i=0;Math.abs(this._prevVel)>=this.options.minimumEndSpeed&&(i=this._prevVel),this.output.emit("end",{p:e,v:i,slip:!0})}}function o(t){t.preventDefault(),this.inProgress||(this.inProgress=!0,this.output.emit("start",{slip:!0}),this._loopBound||(a.on("prerender",s.bind(this)),this._loopBound=!0));var e=this._prevTime,i=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,o=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY;1===t.deltaMode&&(i*=this.options.lineHeight,o*=this.options.lineHeight);var r=Date.now();this.options.rails&&(Math.abs(i)>Math.abs(o)?o=0:i=0);var c,u,h=Math.max(r-e,8),l=i/h,p=o/h,d=this.targetGet(),f=this.options.scale;this.options.direction==n.DIRECTION_X?(c=d+f*i,u=f*l):this.options.direction==n.DIRECTION_Y?(c=d+f*o,u=f*p):(c=[d[0]+f*i,d[1]+f*o],u=[f*l,f*p]),this.output.emit("update",{p:c,v:u,slip:!0}),this._prevTime=r,this._prevVel=u}var r=e("famous/event-handler"),a=e("famous/engine");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.minimumEndSpeed&&(this.options.minimumEndSpeed=t.minimumEndSpeed),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime)},i.exports=n}.bind(this)),require.register("famous_modules/famous/input/generic-sync/_git_master/index.js",function(t,e,i){function n(t,e){this.targetGet=t,this.eventInput=new o,o.setInputHandler(this,this.eventInput),this.eventOutput=new o,o.setOutputHandler(this,this.eventOutput),this._handlers=void 0,this.options={syncClasses:c},this._handlerOptions=this.options,e&&this.setOptions(e),this._handlers||s.call(this)}function s(){if(this._handlers)for(var t=0;t<this._handlers.length;t++)this.eventInput.unpipe(this._handlers[t]),this._handlers[t].unpipe(this.eventOutput);this._handlers=[];for(var t=0;t<this.options.syncClasses.length;t++){var e=this.options.syncClasses[t];this._handlers[t]=new e(this.targetGet,this._handlerOptions),this.eventInput.pipe(this._handlers[t]),this._handlers[t].pipe(this.eventOutput)}}var o=e("famous/event-handler"),r=e("famous/input/touch-sync"),a=e("famous/input/scroll-sync"),c=[r,a];n.register=function(t){c.indexOf(t)<0&&c.push(t)},n.DIRECTION_X=0,n.DIRECTION_Y=1,n.DIRECTION_Z=2,n.prototype.setOptions=function(t){if(this._handlerOptions=t,t.syncClasses&&(this.options.syncClasses=t.syncClasses,s.call(this)),this._handlers)for(var e=0;e<this._handlers.length;e++)this._handlers[e].setOptions(this._handlerOptions)},i.exports=n}.bind(this)),require.register("famous_modules/famous/math/vector/_git_master/index.js",function(t,e,i){function n(t,e,i){return 1===arguments.length?this.set(t):(this.x=t||0,this.y=e||0,this.z=i||0),this}var s=new n(0,0,0);n.prototype.add=function(t){return s.setXYZ(this.x+(t.x||0),this.y+(t.y||0),this.z+(t.z||0))},n.prototype.sub=function(t){return s.setXYZ(this.x-t.x,this.y-t.y,this.z-t.z)},n.prototype.mult=function(t){return s.setXYZ(t*this.x,t*this.y,t*this.z)},n.prototype.div=function(t){return this.mult(1/t)},n.prototype.cross=function(t){var e=this.x,i=this.y,n=this.z,o=t.x,r=t.y,a=t.z;return s.setXYZ(n*r-i*a,e*a-n*o,i*o-e*r)},n.prototype.equals=function(t){return t.x==this.x&&t.y==this.y&&t.z==this.z},n.prototype.rotateX=function(t){var e=this.x,i=this.y,n=this.z,o=Math.cos(t),r=Math.sin(t);return s.setXYZ(e,i*o-n*r,i*r+n*o)},n.prototype.rotateY=function(t,e){e=e||s;var i=this.x,n=this.y,o=this.z,r=Math.cos(t),a=Math.sin(t);return e.setXYZ(o*a+i*r,n,o*r-i*a)},n.prototype.rotateZ=function(t){var e=this.x,i=this.y,n=this.z,o=Math.cos(t),r=Math.sin(t);return s.setXYZ(e*o-i*r,e*r+i*o,n)},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},n.prototype.normSquared=function(){return this.dot(this)},n.prototype.norm=function(){return Math.sqrt(this.normSquared())},n.prototype.normalize=function(t){t=void 0!==t?t:1;var e=1e-7,i=this.norm();return Math.abs(i)>e?s.set(this.mult(t/i)):s.setXYZ(t,0,0)},n.prototype.clone=function(){return new n(this)},n.prototype.isZero=function(){return!(this.x||this.y||this.z)},n.prototype.setFromArray=function(t){return this.x=t[0],this.y=t[1],this.z=t[2]||0,this},n.prototype.set=function(t){return t instanceof Array&&this.setFromArray(t),t instanceof n&&(this.x=t.x,this.y=t.y,this.z=t.z),"number"==typeof t&&(this.x=t,this.y=0,this.z=0),this!==s&&s.clear(),this},n.prototype.put=function(t){t.set(s)},n.prototype.setXYZ=function(t,e,i){return s.clear(),this.x=t,this.y=e,this.z=i,this},n.prototype.clear=function(){this.x=0,this.y=0,this.z=0},n.prototype.cap=function(t){if(1/0===t)return s.set(this);var e=this.norm();return s.set(e>t?this.mult(t/e):this)},n.prototype.project=function(t){return t.mult(this.dot(t))},n.prototype.reflectAcross=function(t){return t.set(t.normalize()),s.set(this.sub(this.project(t).mult(2)))},n.prototype.toArray=function(){return[this.x,this.y,this.z]},n.prototype.get=function(){return this.toArray()},i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/bodies/particle/_git_master/index.js",function(t,e,i){function n(t){t=t||{},this.p=t.p?new o(t.p):new o(0,0,0),this.v=t.v?new o(t.v):new o(0,0,0),this.f=t.f?new o(t.f):new o(0,0,0),this.m=void 0!==t.m?t.m:1,this.restitution=void 0!==t.restitution?t.restitution:.5,this.dissipation=void 0!==t.dissipation?t.dissipation:0,this.axis=void 0!==t.axis?t.axis:void 0,this.setImmunity(t.immunity||n.IMMUNITIES.NONE),this.mInv=1/this.m,this.size=[0,0,0],this.node=void 0,this.spec={size:[!1,!1],target:{origin:[.5,.5],transform:void 0,target:void 0}}}var s=e("famous/render-node"),o=e("famous/math/vector"),r=e("famous/transform");n.AXIS={X:1,Y:2,Z:4},n.IMMUNITIES={NONE:0,POSITION:1,VELOCITY:2,ROTATION:4,AGENTS:8,UPDATE:16};for(var a in n.IMMUNITIES)n.IMMUNITIES.ALL|=n.IMMUNITIES[a];n.prototype.setPos=function(t){this.p.set(t)},n.prototype.getPos=function(){return this.p.get()},n.prototype.setVel=function(t){this.hasImmunity(n.IMMUNITIES.VELOCITY)||this.v.set(t)},n.prototype.getVel=function(){return this.v.get()},n.prototype.setMass=function(t){this.m=t,this.mInv=1/t},n.prototype.getMass=function(){return this.m},n.prototype.addImmunity=function(t){"string"==typeof t&&(t=n.IMMUNITIES[t.toUpperCase()]),this.immunity|=t},n.prototype.removeImmunity=function(t){"string"==typeof t&&(t=n.IMMUNITIES[t.toUpperCase()]),this.immunity&=~t},n.prototype.setImmunity=function(t){"string"==typeof t&&(t=n.IMMUNITIES[t.toUpperCase()]),this.immunity=t},n.prototype.hasImmunity=function(t){return"string"==typeof t&&(t=n.IMMUNITIES[t.toUpperCase()]),this.getImmunity()&t},n.prototype.getImmunity=function(){return this.immunity},n.prototype.reset=function(t,e){t=t||[0,0,0],e=e||[0,0,0],this.setPos(t),this.setVel(e)},n.prototype.applyForce=function(t){this.hasImmunity(n.IMMUNITIES.AGENTS)||this.f.set(this.f.add(t))},n.prototype.applyImpulse=function(t){this.hasImmunity(n.IMMUNITIES.AGENTS)||this.setVel(this.v.add(t.mult(this.mInv)))},n.prototype.getEnergy=function(){return.5*this.m*this.v.normSquared()},n.prototype.getTransform=function(){var t=this.p,e=this.axis;return void 0!==e&&(e&~n.AXIS.X&&(t.x=0),e&~n.AXIS.Y&&(t.y=0),e&~n.AXIS.Z&&(t.z=0)),r.translate(t.x,t.y,t.z)},n.prototype.link=function(t){return this.node||(this.node=new s),this.node.link(t)},n.prototype.add=function(t){return this.node||(this.node=new s),this.node.add(t)},n.prototype.replace=function(t){this.node.object=t},n.prototype.render=function(t){return t=void 0!==t?t:this.node.render(),this.spec.target.transform=this.getTransform(),this.spec.target.target=t,this.spec},i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/forces/force/_git_master/index.js",function(t,e,i){function n(){this.force=new s}var s=e("famous/math/vector");n.prototype.setOpts=function(t){for(var e in t)this.opts[e]=t[e]},n.prototype.applyConstraint=function(){},n.prototype.setupSlider=function(t,e){e=e||t.opts.name,t.setOpts({value:this.opts[e]}),t.init&&t.init(),t.on("change",function(t){this.opts[e]=t.value}.bind(this))},n.prototype.getEnergy=function(){return 0},i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/forces/drag/_git_master/index.js",function(t,e,i){function n(t){this.opts={strength:.01,forceFunction:n.FORCE_FUNCTIONS.LINEAR},t&&this.setOpts(t),s.call(this)}var s=e("famous/physics/forces/force");n.prototype=Object.create(s.prototype),n.prototype.constructor=s,n.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},n.prototype.applyForce=function(t){for(var e=this.opts.strength,i=this.opts.forceFunction,n=this.force,s=0;s<t.length;s++){var o=t[s];i(o.v).mult(-e).put(n),o.applyForce(n)}},n.prototype.setOpts=function(t){for(var e in t)this.opts[e]=t[e]},i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/forces/spring/_git_master/index.js",function(t,e,i){function n(t){this.opts={period:300,dampingRatio:.1,length:0,lMin:0,lMax:1/0,anchor:void 0,forceFunction:n.FORCE_FUNCTIONS.HOOK,restTolerance:1e-5},t&&this.setOpts(t),this.eventOutput=void 0,this._atRest=!1,this.init(),h.call(this),this.disp=new l(0,0,0)}function s(t){this.forceFunction=t}function o(){var t=this.opts;t.stiffness=Math.pow(2*Math.PI/t.period,2)}function r(){var t=this.opts;t.damping=4*Math.PI*t.dampingRatio/t.period}function a(t,e){return.5*t*e*e}function c(t,e){t<this.opts.restTolerance?(this._atRest||this.eventOutput.emit("atRest",{particle:e}),this._atRest=!0):this._atRest=!1}function u(){this.eventOutput=new p,this.eventOutput.bindThis(this),p.setOutputHandler(this,this.eventOutput)}var h=e("famous/physics/forces/force"),l=e("famous/math/vector"),p=e("famous/event-handler");n.prototype=Object.create(h.prototype),n.prototype.constructor=h,n.FORCE_FUNCTIONS={FENE:function(t,e){var i=.99*e,n=Math.max(Math.min(t,i),-i);return n/(1-n*n/(e*e))},HOOK:function(t){return t}},n.prototype.init=function(){s.call(this,this.opts.forceFunction),o.call(this),r.call(this)},n.prototype.applyForce=function(t,e){for(var i=this.force,n=this.disp,s=this.opts,o=s.stiffness,r=s.damping,u=s.length,h=s.lMax,l=s.anchor||e.p,p=0;p<t.length;p++){var d=t[p];n.set(l.sub(d.p));var f=n.norm()-u;if(0==f)return;var m=d.m;if(o*=m,r*=m,i.set(n.normalize(o*this.forceFunction(f,h))),r&&i.set(e?i.add(d.v.sub(e.v).mult(-r)):i.add(d.v.mult(-r))),d.applyForce(i),e&&e.applyForce(i.mult(-1)),this.eventOutput){var g=d.getEnergy()+a(o,f);c.call(this,g,d)}}},n.prototype.getEnergy=function(t,e){var i=this.opts,n=i.length,s=i.anchor||e.p,o=i.stiffness,r=s.sub(t.p).norm()-n;return.5*o*r*r},n.prototype.setOpts=function(t){void 0!==t.anchor&&(t.anchor.p instanceof l&&(this.opts.anchor=t.anchor.p),t.anchor instanceof l&&(this.opts.anchor=t.anchor),t.anchor instanceof Array&&(this.opts.anchor=new l(t.anchor))),void 0!==t.period&&(this.opts.period=t.period),void 0!==t.dampingRatio&&(this.opts.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.opts.length=t.length),void 0!==t.lMin&&(this.opts.lMin=t.lMin),void 0!==t.lMax&&(this.opts.lMax=t.lMax),void 0!==t.forceFunction&&(this.opts.forceFunction=t.forceFunction),void 0!==t.restTolerance&&(this.opts.restTolerance=t.restTolerance),this.init()},n.prototype.setAnchor=function(t){void 0===this.opts.anchor&&(this.opts.anchor=new l),this.opts.anchor.set(t)},n.prototype.on=function(){return u.call(this),this.on.apply(this,arguments)},n.prototype.unbind=function(){return u.call(this),this.unbind.apply(this,arguments)},n.prototype.pipe=function(){return u.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return u.call(this),this.unpipe.apply(this,arguments)},i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/constraints/constraint/_git_master/index.js",function(t,e,i){function n(){}n.prototype.setOpts=function(t){for(var e in t)this.opts[e]=t[e]},n.prototype.applyConstraint=function(){},n.prototype.setupSlider=function(t,e){e=e||t.opts.name,t.setOpts({value:this.opts[e]}),t.init&&t.init(),t.on("change",function(t){this.opts[e]=t.value}.bind(this))},i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/integrator/symplectic-euler/_git_master/index.js",function(t,e,i){function n(t){this.opts={velocityCap:1/0,angularVelocityCap:1/0},t&&this.setOpts(t)}n.prototype.integrateVelocity=function(t,e){var i=t.v,n=t.m,s=t.f;s.isZero()||(t.setVel(i.add(s.mult(e/n))),s.clear())},n.prototype.integratePosition=function(t,e){var i=t.p,n=t.v;n.isZero()||(n.set(n.cap(this.opts.velocityCap)),t.setPos(i.add(n.mult(e))))},n.prototype.integrateAngularMomentum=function(t,e){var i=t.L,n=t.t;n.isZero()||(n.set(n.cap(this.opts.angularVelocityCap)),i.add(n.mult(e)).put(i),n.clear())},n.prototype.integrateOrientation=function(t,e){var i=t.q,n=t.w;n.isZero()||(i.set(i.add(i.multiply(n).scalarMultiply(.5*e))),i.set(i.normalize()))},n.prototype.setOpts=function(t){for(var e in t)this.opts[e]=t[e]},i.exports=n}.bind(this)),require.register("famous_modules/famous/math/quaternion/_git_master/index.js",function(t,e,i){function n(t,e,i,n){return 1===arguments.length?this.set(t):(this.w=void 0!==t?t:1,this.x=void 0!==e?e:0,this.y=void 0!==i?i:0,this.z=void 0!==n?n:0),this}var s=new n(1,0,0,0);n.prototype.add=function(t){return s.setWXYZ(this.w+t.w,this.x+t.x,this.y+t.y,this.z+t.z)},n.prototype.sub=function(t){return s.setWXYZ(this.w-t.w,this.x-t.x,this.y-t.y,this.z-t.z)},n.prototype.scalarDivide=function(t){return this.scalarMultiply(1/t)},n.prototype.scalarMultiply=function(t){return s.setWXYZ(this.w*t,this.x*t,this.y*t,this.z*t)},n.prototype.multiply=function(t){var e=this.x,i=this.y,n=this.z,o=this.w,r=t.x,a=t.y,c=t.z,u=t.w||0;return s.setWXYZ(o*u-e*r-i*a-n*c,e*u+r*o+a*n-i*c,i*u+a*o+e*c-r*n,n*u+c*o+r*i-e*a)};var o=new n(1,0,0,0);n.prototype.rotateVector=function(t){return o.set(this.conj()),s.set(this.multiply(t).multiply(o))},n.prototype.inverse=function(){return s.set(this.conj().scalarDivide(this.normSquared()))},n.prototype.negate=function(){return this.scalarMultiply(-1)},n.prototype.conj=function(){return s.setWXYZ(this.w,-this.x,-this.y,-this.z)},n.prototype.normalize=function(t){return t=void 0===t?1:t,this.scalarDivide(t*this.norm())},n.prototype.makeFromAngleAndAxis=function(t,e){var i=e.normalize(),n=.5*t,s=-Math.sin(n);return this.x=s*i.x,this.y=s*i.y,this.z=s*i.z,this.w=Math.cos(n),this},n.prototype.setWXYZ=function(t,e,i,n){return s.clear(),this.w=t,this.x=e,this.y=i,this.z=n,this},n.prototype.set=function(t){return t instanceof Array?(this.w=t[0],this.x=t[1],this.y=t[2],this.z=t[3]):(this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z),this!==s&&s.clear(),this},n.prototype.put=function(t){t.set(s)},n.prototype.clone=function(){return new n(this)},n.prototype.clear=function(){return this.w=1,this.x=0,this.y=0,this.z=0,this},n.prototype.isEqual=function(t){return t.w==this.w&&t.x==this.x&&t.y==this.y&&t.z==this.z},n.prototype.dot=function(t){return this.w*t.w+this.x*t.x+this.y*t.y+this.z*t.z},n.prototype.normSquared=function(){return this.dot(this)},n.prototype.norm=function(){return Math.sqrt(this.normSquared())},n.prototype.isZero=function(){return!(this.x||this.y||this.z)},n.prototype.getMatrix=function(){var t=this.normalize(1),e=t.x,i=t.y,n=t.z,s=t.w;return[1-2*i*i-2*n*n,2*e*i-2*n*s,2*e*n+2*i*s,0,2*e*i+2*n*s,1-2*e*e-2*n*n,2*i*n-2*e*s,0,2*e*n-2*i*s,2*i*n+2*e*s,1-2*e*e-2*i*i,0,0,0,0,1]},n.prototype.getMatrix3x3=function(){var t=this.normalize(1),e=t.x,i=t.y,n=t.z,s=t.w;return[[1-2*i*i-2*n*n,2*e*i+2*n*s,2*e*n-2*i*s],[2*e*i-2*n*s,1-2*e*e-2*n*n,2*i*n+2*e*s],[2*e*n+2*i*s,2*i*n-2*e*s,1-2*e*e-2*i*i]]};var r=1e-5;n.prototype.slerp=function(t,e){var i,n,o,a,c;return n=this.dot(t),1-n>r?(i=Math.acos(n),o=Math.sin(i),a=Math.sin((1-e)*i)/o,c=Math.sin(e*i)/o):(a=1-e,c=e),s.set(this.scalarMultiply(a/c).add(t).multiply(c))},i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/bodies/body/_git_master/index.js",function(t,e,i){function n(t){s.call(this,t),this.q=t.q?new r(t.q):new r,this.w=t.w?new o(t.w):new o,this.L=t.L?new o(t.L):new o,this.t=t.t?new o(t.t):new o,this.I=[1,0,0,1,0,0,1,0,0],this.Iinv=[1,0,0,1,0,0,1,0,0],this.w.w=0,this.pWorld=new o}var s=e("famous/physics/bodies/particle"),o=e("famous/math/vector"),r=e("famous/math/quaternion"),a=e("famous/transform");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.IMMUNITIES=s.IMMUNITIES,n.prototype.updateAngularVelocity=function(){var t=this.Iinv,e=this.L,i=e.x,n=e.y,s=e.z,o=t[0],r=t[1],a=t[2];this.w.setXYZ(o[0]*i+o[1]*n+o[2]*s,r[0]*i+r[1]*n+r[2]*s,a[0]*i+a[1]*n+a[2]*s)},n.prototype.toWorldCoordinates=function(t){var e=this.q;return t.w=0,this.pWorld.set(e.inverse().multiply(t).multiply(e))},n.prototype.getEnergy=function(){var t=this.w,e=this.I,i=t.x,n=t.y,s=t.z,o=this.I[0],r=e[1],a=e[2];return.5*(this.m*this.v.normSquared()+o[0]*i*i+o[1]*i*n+o[2]*i*s+r[0]*n*i+r[1]*n*n+r[2]*n*s+a[0]*s*i+a[1]*s*n+a[2]*s*s)},n.prototype.reset=function(t,e,i,n){this.setPos(t||[0,0,0]),this.setVel(e||[0,0,0]),this.w.clear(),this.setOrientation(i||[1,0,0,0]),this.setAngularMomentum(n||[0,0,0])},n.prototype.setOrientation=function(t){this.q.set(t)},n.prototype.setAngularMomentum=function(t){this.L.set(t)},n.prototype.applyForce=function(t,e){this.hasImmunity(n.IMMUNITIES.AGENTS)||(this.f.set(this.f.add(t)),void 0!==e&&this.applyTorque(e.cross(t)))},n.prototype.applyTorque=function(t){this.hasImmunity(n.IMMUNITIES.ROTATION)||this.t.set(this.t.add(t))},n.prototype.getTransform=function(){return a.move(this.q.getMatrix(),this.p.get())},i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/bodies/circle/_git_master/index.js",function(t,e,i){function n(t){s.call(this,t),t=t||{},this.r=t.r||0,this.size=[2*this.r,2*this.r];var e=this.r,i=this.m;this.I=[[.25*i*e*e,0,0],[0,.25*i*e*e,0],[0,0,.5*i*e*e]],this.Iinv=[[4/(i*e*e),0,0],[0,4/(i*e*e),0],[0,0,2/(i*e*e)]]}var s=e("famous/physics/bodies/body");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.IMMUNITIES=s.IMMUNITIES,i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/bodies/rectangle/_git_master/index.js",function(t,e,i){function n(t){s.call(this,t),t=t||{},this.size=t.size||[0,0];var e=this.size[0],i=this.size[1];this.I=[[i*i/12,0,0],[0,e*e/12,0],[0,0,(e*e+i*i)/12]],this.Iinv=[[12/(i*i),0,0],[0,12/(e*e),0],[0,0,12/(e*e+i*i)]]}var s=e("famous/physics/bodies/body");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.IMMUNITIES=s.IMMUNITIES,i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/engine/_git_master/index.js",function(t,e,i){function n(t){this.opts={speed:1,steps:1,velocityCap:1/0,angularVelocityCap:1/0,constraintSteps:1,constraintTolerance:1e-4},t&&this.setOpts(t),this._particles=[],this._agents={},this._forces=[],this._constraints=[],this._playing=!0,this._buffer=0,this._timestep=1e3/60/this.opts.steps,this._prevTime=void 0,this._currTime=void 0,this._integrator=new I({velocityCap:this.opts.velocityCap,angularVelocityCap:this.opts.angularVelocityCap}),this._currAgentId=0,this.BODIES=n.BODIES
}function s(){return Date.now()}function o(t,e,i){return void 0===e&&(e=this.getParticles()),e instanceof Array||(e=[e]),this._agents[this._currAgentId]={agent:t,targets:e,source:i},r.call(this,t).push(this._currAgentId),this._currAgentId++}function r(t){return t instanceof O?this._forces:t instanceof T?this._constraints:void 0}function a(t){return this._agents[t]}function c(t){var e=a.call(this,this._forces[t]);e.agent.applyForce(e.targets,e.source)}function u(t,e){var i=this._agents[this._constraints[t]];return i.agent.applyConstraint(i.targets,i.source,e)}function h(){for(var t=this._forces.length-1;t>-1;t--)c.call(this,t)}function l(t){var e=1/0,i=0;for(this.opts.constraintTolerance;i<this.opts.constraintSteps;){e=0;for(var n=this._constraints.length-1;n>-1;n--)e+=u.call(this,n,t);i++}}function p(t,e){t.hasImmunity(S.IMMUNITIES.UPDATE)||this._integrator.integrateVelocity(t,e)}function d(t){t.hasImmunity(S.IMMUNITIES.ROTATION)||t instanceof k&&t.updateAngularVelocity()}function f(t,e){t.hasImmunity(S.IMMUNITIES.ROTATION)||t instanceof k&&this._integrator.integrateAngularMomentum(t,e)}function m(t,e){t.hasImmunity(S.IMMUNITIES.UPDATE)||this._integrator.integratePosition(t,e)}function g(t,e){t.hasImmunity(S.IMMUNITIES.ROTATION)||t instanceof k&&this._integrator.integrateOrientation(t,e)}function v(t){this.forEachParticle(p,t)}function y(t){this.forEachParticle(m,t)}function b(){this.forEachParticle(d)}function _(t){this.forEachParticle(f,t)}function w(t){this.forEachParticle(g,t)}function x(t){h.call(this),v.call(this,t),_.call(this,t),b.call(this,t),l.call(this,t),y.call(this,t),w.call(this,t)}var S=e("famous/physics/bodies/particle"),k=e("famous/physics/bodies/body"),j=e("famous/physics/bodies/circle"),C=e("famous/physics/bodies/rectangle"),O=e("famous/physics/forces/force"),T=e("famous/physics/constraints/constraint"),I=e("famous/physics/integrator/symplectic-euler");n.BODIES={POINT:S,BODY:k,CIRCLE:j,RECTANGLE:C},n.IMMUNITIES=S.IMMUNITIES,n.prototype.setOpts=function(t){for(var e in t)this.opts[e]&&(this.opts[e]=t[e])},n.prototype.addBody=function(t){return this._particles.push(t),t},n.prototype.createParticle=function(t){return this.addBody(new S(t))},n.prototype.createBody=function(t){var e=t.shape||n.BODIES.POINT;return this.addBody(new e(t))},n.prototype.remove=function(t){var e=this._particles.indexOf(t);if(e>-1){for(var i=0;i<Object.keys(this._agents);i++)this.detachFrom(i,t);this._particles.splice(e,1)}},n.prototype.attach=function(t,e,i){if(t instanceof Array){for(var n=[],s=0;s<t.length;s++)n[s]=o.call(this,t[s],e,i);return n}return o.call(this,t,e,i)},n.prototype.attachTo=function(t,e){a.call(this,t).targets.push(e)},n.prototype.detach=function(t){var e=this.getAgent(t),i=r.call(this,e),n=i.indexOf(t);i.splice(n,1),delete this._agents[t]},n.prototype.detachFrom=function(t,e){var i=a.call(this,t);if(i.source===e)this.detach(t);else{var n=i.targets,s=n.indexOf(e);s>-1&&n.splice(s,1)}},n.prototype.detachAll=function(){this._agents={},this._forces=[],this._constraints=[],this._currAgentId=0},n.prototype.getAgent=function(t){return a.call(this,t).agent},n.prototype.getParticles=function(){return this._particles},n.prototype.getParticlesExcept=function(t){var e=[];return this.forEachParticle(function(i){-1===t.indexOf(i)&&e.push(i)}),e},n.prototype.getPos=function(t){return(t||this._particles[0]).getPos()},n.prototype.getVel=function(t){return(t||this._particles[0]).getVel()},n.prototype.getTransform=function(t){return(t||this._particles[0]).getTransform()},n.prototype.setPos=function(t,e){(e||this._particles[0]).setPos(t)},n.prototype.setVel=function(t,e){(e||this._particles[0]).setVel(t)},n.prototype.forEachParticle=function(t,e){for(var i=this.getParticles(),n=0,s=i.length;s>n;n++)t.call(this,i[n],e)},n.prototype.step=function(){if(this._playing){this._prevTime||(this._prevTime=s()),this._currTime=s();var t=this._currTime-this._prevTime;this._prevTime=this._currTime,0!=t&&x.call(this,this.opts.speed*this._timestep)}},n.prototype.render=function(t){this.step();var e=[];return this.forEachParticle(function(i){e.push(i.render(t))}),e},n.prototype.play=function(){this._prevTime=s(),this._playing=!0},n.prototype.pause=function(){this._playing=!1},n.prototype.toggle=function(){this._playing?this.pause():this.play()},n.prototype.reverseTime=function(){this.opts.speed*=-1},n.prototype.reverseVelocities=function(){this.forEachParticle(function(t){t.v.mult(-1,t.v)})},i.exports=n}.bind(this)),require.register("famous_modules/famous/views/scrollview/_git_master/index.js",function(t,e,i){function n(t){this.options={direction:_.Direction.Y,rails:!0,itemSpacing:0,clipSize:void 0,margin:void 0,friction:.001,drag:1e-4,edgeGrip:.5,edgePeriod:300,edgeDamp:1,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:1/0,pageSwitchSpeed:1,speedLimit:10},this.node=null,this.physicsEngine=new w,this.particle=new x,this.physicsEngine.addBody(this.particle),this.spring=new k({anchor:[0,0,0]}),this.drag=new S({forceFunction:S.FORCE_FUNCTIONS.QUADRATIC}),this.friction=new S({forceFunction:S.FORCE_FUNCTIONS.LINEAR}),this.sync=new O(function(){return-this.getPosition()}.bind(this),{direction:this.options.direction==_.Direction.X?O.DIRECTION_X:O.DIRECTION_Y}),this.eventInput=new C,this.eventOutput=new C,this.rawInput=new C,this.rawInput.pipe(this.sync),this.sync.pipe(this.eventInput),this.sync.pipe(this.eventOutput),this.rawInput.pipe(this.eventInput),C.setInputHandler(this,this.rawInput),C.setOutputHandler(this,this.eventOutput),this._outputFunction=null,this._masterOutputFunction=null,this.setOutputFunction(),this.touchCount=0,this._springAttached=!1,this._onEdge=0,this._springPosition=0,this._touchVelocity=void 0,this._earlyEnd=!1,this._masterOffset=0,this._offsetDifferential=0,this._lastFrameNode=null,this.setOptions(t?t:{}),a.call(this),this.group=new I,this.group.add({render:b.bind(this)}),this._entityId=E.register(this),this._contextSize=[window.innerWidth,window.innerHeight],this._size=[this._contextSize[0],this._contextSize[1]],this._offsets={}}function s(t){this.touchCount=t.count,void 0===t.count&&(this.touchCount=1),u.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function o(t){var e=-t.p,i=-t.v;this._onEdge&&t.slip&&(0>i&&this._onEdge<0||i>0&&this._onEdge>0?this._earlyEnd||(r.call(this,t),this._earlyEnd=!0):this._earlyEnd&&Math.abs(i)>Math.abs(this.particle.getVel()[0])&&s.call(this,t)),this._earlyEnd||(this._touchVelocity=i,t.slip?this.setVelocity(i):this.setPosition(e))}function r(t){if(this.touchCount=t.count||0,!this.touchCount){u.call(this),this._onEdge&&(this._springAttached=!0),c.call(this);var e=-t.v,i=this.options.speedLimit;t.slip&&(i*=this.options.edgeGrip),-i>e?e=-i:e>i&&(e=i),this.setVelocity(e),this._touchVelocity=void 0}}function a(){this.eventInput.on("start",s.bind(this)),this.eventInput.on("update",o.bind(this)),this.eventInput.on("end",r.bind(this))}function c(){this._springAttached?this.physicsEngine.attach([this.spring],this.particle):this.physicsEngine.attach([this.drag,this.friction],this.particle)}function u(){this._springAttached=!1,this.physicsEngine.detachAll()}function h(t){t||(t=this._contextSize);var e=this.options.direction===_.Direction.X?0:1;return void 0===t[e]?this._contextSize[e]:t[e]}function l(t){this._springPosition+=t,this._offsetDifferential-=t,this.setPosition(this.getPosition()+t),this.spring.setOpts({anchor:[this._springPosition,0,0]})}function p(){for(var t=!1;!t&&this.getPosition()<0;){var e=this.node.getPrevious?this.node.getPrevious():null;if(e){var i=e.getSize?e.getSize():this._contextSize,n=h.call(this,i)+this.options.itemSpacing;l.call(this,n),this._masterOffset-=n,this.node=e}else t=!0}for(var s=this.node&&this.node.getSize?this.node.getSize():this._contextSize;!t&&this.getPosition()>=h.call(this,s)+this.options.itemSpacing;){var o=this.node.getNext?this.node.getNext():null;if(o){var n=h.call(this,s)+this.options.itemSpacing;l.call(this,-n),this._masterOffset+=n,this.node=o,s=this.node.getSize?this.node.getSize():this._contextSize}else t=!0}Math.abs(this._masterOffset)>y.call(this)+this.options.margin&&(this._masterOffset=0)}function d(t){!this._onEdge&&t?(this.sync.setOptions({scale:this.options.edgeGrip}),this.touchCount||this._springAttached||(this._springAttached=!0,this.physicsEngine.attach([this.spring],this.particle))):this._onEdge&&!t&&(this.sync.setOptions({scale:1}),this._springAttached&&Math.abs(this.getVelocity())<.001&&(this.setVelocity(0),this.setPosition(this._springPosition),u.call(this),c.call(this))),this._onEdge=t}function f(){if(0==this.touchCount&&!this._springAttached&&!this._onEdge&&this.options.paginated&&Math.abs(this.getVelocity())<this.options.pageStopSpeed){var t=this.node.getSize?this.node.getSize():this._contextSize,e=Math.abs(this.getVelocity())>this.options.pageSwitchSpeed,i=this.getVelocity()>0,n=this.getPosition()>.5*h.call(this,t);e&&i||!e&&n?this.goToNextPage():m.call(this)}}function m(){g.call(this,0,{period:this.options.pagePeriod,damp:this.options.pageDamp}),this._springAttached||(this._springAttached=!0,this.physicsEngine.attach([this.spring],this.particle))}function g(t,e){this._springPosition=t,this.spring.setOpts({anchor:[this._springPosition,0,0],period:e?e.period:this.options.edgePeriod,dampingRatio:e?e.damp:this.options.edgeDamp})}function v(t,e,i){var n=t.getSize?t.getSize():this._contextSize,s=this._outputFunction(e);return i.push({transform:s,target:t.render()}),h.call(this,n)}function y(){return this.options.clipSize?this.options.clipSize:h.call(this,this._contextSize)}function b(){var t={},e=this.getPosition(),i=[],n=0,s=0,o=this.node;for(t[o]=0;o&&s-e<y.call(this)+this.options.margin;)s+=v.call(this,o,s+this._masterOffset,i)+this.options.itemSpacing,o=o.getNext?o.getNext():null,t[o]=s,!o&&s-e-this.options.itemSpacing<=y.call(this)&&(this._onEdge||g.call(this,s-y.call(this)-this.options.itemSpacing),n=1);if(o=this.node&&this.node.getPrevious?this.node.getPrevious():null,s=0,o){var r=o.getSize?o.getSize():this._contextSize;s-=h.call(this,r)+this.options.itemSpacing}else 0>=e&&(this._onEdge||g.call(this,0),n=-1);for(;o&&s-e>-(y.call(this)+this.options.margin);)if(t[o]=s,v.call(this,o,s+this._masterOffset,i),o=o.getPrevious?o.getPrevious():null){var r=o.getSize?o.getSize():this._contextSize;s-=h.call(this,r)+this.options.itemSpacing}return this._offsetDifferential=0,this._offsets=t,d.call(this,n),f.call(this),this.options.paginated&&this._lastFrameNode!==this.node&&(this.eventOutput.emit("pageChange"),this._lastFrameNode=this.node),i}var _=e("famous/utilities/utility"),w=e("famous/physics/engine"),x=e("famous/physics/bodies/particle"),S=e("famous/physics/forces/drag"),k=e("famous/physics/forces/spring"),j=e("famous/transform"),C=e("famous/event-handler"),O=e("famous/input/generic-sync"),T=e("famous/view-sequence"),I=e("famous/group"),E=e("famous/entity");n.prototype.getPosition=function(t){var e=this.particle.getPos()[0];if(void 0===t)return e;var i=this._offsets[t];return void 0!==i?e-i+this._offsetDifferential:void 0},n.prototype.setPosition=function(t){this.particle.setPos([t,0,0])},n.prototype.getVelocity=function(){return this.touchCount?this._touchVelocity:this.particle.getVel()[0]},n.prototype.setVelocity=function(t){this.particle.setVel([t,0,0])},n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction,"x"===this.options.direction?this.options.direction=_.Direction.X:"y"===this.options.direction&&(this.options.direction=_.Direction.Y)),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.itemSpacing&&(this.options.itemSpacing=t.itemSpacing),void 0!==t.clipSize&&(t.clipSize!==this.options.clipSize&&(this._onEdge=0),this.options.clipSize=t.clipSize),void 0!==t.margin&&(this.options.margin=t.margin),void 0!==t.drag&&(this.options.drag=t.drag),void 0!==t.friction&&(this.options.friction=t.friction),void 0!==t.edgeGrip&&(this.options.edgeGrip=t.edgeGrip),void 0!==t.edgePeriod&&(this.options.edgePeriod=t.edgePeriod),void 0!==t.edgeDamp&&(this.options.edgeDamp=t.edgeDamp),void 0!==t.paginated&&(this.options.paginated=t.paginated),void 0!==t.pageStopSpeed&&(this.options.pageStopSpeed=t.pageStopSpeed),void 0!==t.pageSwitchSpeed&&(this.options.pageSwitchSpeed=t.pageSwitchSpeed),void 0!==t.pagePeriod&&(this.options.pagePeriod=t.pagePeriod),void 0!==t.pageDamp&&(this.options.pageDamp=t.pageDamp),void 0!==t.speedLimit&&(this.options.speedLimit=t.speedLimit),void 0===this.options.margin&&(this.options.margin=.5*Math.max(window.innerWidth,window.innerHeight)),this.drag.setOpts({strength:this.options.drag}),this.friction.setOpts({strength:this.options.friction}),this.spring.setOpts({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.sync.setOptions({rails:this.options.rails,direction:this.options.direction==_.Direction.X?O.DIRECTION_X:O.DIRECTION_Y})},n.prototype.setOutputFunction=function(t,e){t||(t=function(t){return this.options.direction==_.Direction.X?j.translate(t,0):j.translate(0,t)}.bind(this),e||(e=t)),this._outputFunction=t,this._masterOutputFunction=e?e:function(e){return j.inverse(t(-e))}},n.prototype.goToPreviousPage=function(){if(this.node){var t=this.node.getPrevious?this.node.getPrevious():null;if(t){var e=h.call(this,this.node.getSize())+this.options.itemSpacing;this.node=t,this._springPosition-=e,l.call(this,e),m.call(this)}return t}},n.prototype.goToNextPage=function(){if(this.node){var t=this.node.getNext?this.node.getNext():null;if(t){var e=h.call(this,this.node.getSize())+this.options.itemSpacing;this.node=t,this._springPosition+=e,l.call(this,-e),m.call(this)}return t}},n.prototype.getCurrentNode=function(){return this.node},n.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new T(t)),this.node=t,this._lastFrameNode=t},n.prototype.getSize=function(){return this._size},n.prototype.render=function(){return this.node?(this.physicsEngine.step(),this._entityId):void 0},n.prototype.commit=function(t){var e=t.transform,i=t.opacity,n=t.origin,s=t.size;this.options.clipSize||s[0]===this._contextSize[0]&&s[1]===this._contextSize[1]||(this._onEdge=0,this._contextSize=s,this.options.direction===_.Direction.X?(this._size[0]=y.call(this),this._size[1]=void 0):(this._size[0]=void 0,this._size[1]=y.call(this))),p.call(this);var o=this.getPosition(),r=this._masterOutputFunction(-(o+this._masterOffset));return{transform:j.moveThen([-n[0]*s[0],-n[1]*s[1],0],e),opacity:i,origin:n,size:s,target:{transform:r,origin:n,target:this.group.render()}}},i.exports=n}.bind(this)),require.register("famous_modules/famous/transitions/spring-transition/_git_master/index.js",function(t,e,i){function n(t){t=t||0,this.endState=new y(t),this.initState=new y,this._dimensions=void 0,this._restTolerance=1e-8,this._absRestTolerance=this._restTolerance,this._active=!1,this._callback=void 0,this.PhysicsEngine=new g,this.spring=new v({anchor:this.endState}),this.particle=this.PhysicsEngine.createParticle(),this.PhysicsEngine.attach(this.spring,this.particle)}function s(){if(this._active)this.PhysicsEngine.step(),o.call(this)<this._absRestTolerance&&(l.call(this,this.endState),p.call(this,[0,0,0]),h.call(this));else if(this._callback){var t=this._callback;this._callback=void 0,t()}}function o(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function r(t){var e=n.DEFAULT_OPTIONS;void 0===t.period&&(t.period=e.period),void 0===t.dampingRatio&&(t.dampingRatio=e.dampingRatio),void 0===t.velocity&&(t.velocity=e.velocity),t.period<150&&console.warn("period may be unstable, increase the period or use a stiff transition"),this.spring.setOpts({period:t.period,dampingRatio:t.dampingRatio}),p.call(this,t.velocity)}function a(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function c(t){this.endState.set(t),a.call(this)}function u(){this.PhysicsEngine.play(),this._active=!0}function h(){this.PhysicsEngine.pause(),this._active=!1}function l(t){this.particle.p.set(t)}function p(t){this.particle.v.set(t)}function d(){return 0===this._dimensions?this.particle.p.x:this.particle.p.get()}function f(){return 0===this._dimensions?this.particle.v.x:this.particle.v.get()}function m(t){this._callback=t}var g=e("famous/physics/engine"),v=e("famous/physics/forces/spring"),y=e("famous/math/vector");n.SUPPORTS_MULTIPLE=3,n.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0},n.prototype.reset=function(t,e){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),l.call(this,t),c.call(this,t),e&&p.call(this,e),m.call(this,void 0)},n.prototype.getVelocity=function(){return f.call(this)},n.prototype.setVelocity=function(t){this.call(this,p(t))},n.prototype.halt=function(){this.set(this.get())},n.prototype.get=function(){return s.call(this),d.call(this)},n.prototype.set=function(t,e,i){return e?(this._dimensions=t instanceof Array?t.length:0,u.call(this),r.call(this,e),c.call(this,t),void m.call(this,i)):(this.reset(t),void(i&&i()))},i.exports=n}.bind(this)),require.register("app/custom/vertical-scroll-view/vertical-scroll-view.js",function(t,e,i){function n(){r.apply(this,arguments),this.prepareEmptySurface(),this.prepareResize(),this.itemArray=[],window.ss=this}var s=(e("famous/view"),e("famous/utilities/utility")),o=e("famous/surface"),r=e("famous/views/scrollview"),a=e("famous/engine");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.setOptions=function(t){this.options.startAt="top",this.options.direction=s.Direction.Y,this.options.margin=1e4,Object.getPrototypeOf(n.prototype).setOptions.apply(this,arguments),_.extend(this.options,t)},n.prototype.prepareEmptySurface=function(){this.emptySurface=new o({properties:{backgroundColor:"transparent"},size:[void 0,1]}),this.emptySurface.pipe(this)},n.prototype.prepareResize=function(){var t,e=function(){this.emptySurfaceResize()};a.on("resize",function(){t&&clearTimeout(t),t=setTimeout(e.bind(this),300)}.bind(this))},n.prototype.sortBy=function(t){this.sequenceFrom(_.sortBy(this.itemArray,t))},n.prototype.filter=function(t){this.sequenceFrom(_.filter(this.itemArray,t))},n.prototype.sequenceFrom=function(t){this.itemArray=_.clone(t),"top"==this.options.startAt?t.push(this.emptySurface):t.unshift(this.emptySurface),Object.getPrototypeOf(n.prototype).sequenceFrom.apply(this,arguments),this.emptySurfaceResize()},n.prototype.emptySurfaceResize=function(){function t(){var t=this.getSize()[1];if(this.node)for(var e=_.filter(this.node.array,function(t){return t instanceof o==0}),i=0;i<e.length;i++)if(t-=e[i].getSize()[1],1>=t){t=1;break}this.emptySurface.setSize([void 0,t])}this.emptySurface&&setTimeout(t.bind(this),300)},n.prototype.scrollTo=function(t,e){t||(t=0),e||(e=0),this.node.index=t,this.setPosition(e)},n.prototype.removeByIndex=function(t){if(!(0>t)&&this.node){var e=this.itemArray.splice(t,1)[0];e.collapse(function(){a.defer(function(){var t=this.node.array.indexOf(e);this.node.splice(t,1),0==t&&(this.node.index=0),this.emptySurfaceResize()}.bind(this))}.bind(this))}},n.prototype.addByIndex=function(t,e){this.itemArray.splice(t,0,e),this.node.splice(t,0,e),this.node.index=0,this.emptySurfaceResize()},n.prototype.push=function(t){this.itemArray.push(t),this.node.push(t),this.emptySurfaceResize("push")},n.prototype.scrollToEnd=function(){var t=this.node.array.length-1,e=this.node.index,i=this.getSize()[1],n=this.getPosition(),s=this.node.array.map(function(t){return t.getSize()[1]===!0?100:t.getSize()[1]}),o=_.reduce(_(s).last(t-e+1),function(t,e){return t+e},0),r=o-n-i+100,c=Math.max(2*r/200,0);-1==this._onEdge&&this.emptySurface.getSize()[1]<=1&&this._springAttached?(this.scrollTo(1,0),setTimeout(function(){this.setVelocity(c)}.bind(this),300)):a.defer(function(){this.setVelocity(c)}.bind(this))},n.prototype.jumpToEnd=function(){if(!(this.emptySurface.getSize()[1]>1)){if(0!=this._onEdge){var t=this.node.array.length,e=Math.max(t-15,1);this.node.index=e}setTimeout(function(){this.node.index=this.node.array.length-1}.bind(this),100)}},n.prototype.jumpToEnd0=function(){var t=this.getSize()[1],e=62,i=Math.max(this.node.array.length-Math.ceil(t/e),0);this.node.index=i,this.setVelocity(0)},n.prototype.jumpToEnd1=function(){this.node.index=this.node.array.length-1},i.exports=n}.bind(this)),require.register("famous_modules/famous/physics/constraints/wall/_git_master/index.js",function(t,e,i){function n(t){this.opts={restitution:.7,k:0,n:new r,d:0,onContact:n.ON_CONTACT.REFLECT},t&&this.setOpts(t),this.diff=new r,this.impulse=new r,this.slop=-1,this.eventOutput=void 0}function s(){this.eventOutput=new a,this.eventOutput.bindThis(this),a.setOutputHandler(this,this.eventOutput)}var o=e("famous/physics/constraints/constraint"),r=e("famous/math/vector"),a=e("famous/event-handler");n.prototype=Object.create(o.prototype),n.prototype.constructor=o,n.ON_CONTACT={REFLECT:0,WRAP:1,ABSORB:2},n.prototype.setOpts=function(t){void 0!==t.restitution&&(this.opts.restitution=t.restitution),void 0!==t.k&&(this.opts.k=t.k),void 0!==t.d&&(this.opts.d=t.d),void 0!==t.onContact&&(this.opts.onContact=t.onContact),void 0!==t.n&&this.opts.n.set(t.n)},n.prototype.getNormalVelocity=function(t){var e=this.opts.n;return t.dot(e)},n.prototype.getDistance=function(t){var e=this.opts.n,i=this.opts.d;return t.dot(e)+i},n.prototype.onEnter=function(t,e,i){var s=t.p,o=t.v,r=t.m,a=this.opts.n,c=this.opts.onContact,u=this.opts.restitution,h=this.impulse,l=this.opts.k,p=0;if(this.eventOutput){var d={particle:t,wall:this,overlap:e};this.eventOutput.emit("preCollision",d),this.eventOutput.emit("collision",d)}switch(c){case n.ON_CONTACT.REFLECT:var f=e<this.slop?-((1+u)*a.dot(o)+l/i*(e-this.slop))/(r*i+p):-((1+u)*a.dot(o))/(r*i+p);h.set(a.mult(i*f)),t.applyImpulse(h),t.setPos(s.add(a.mult(-e)));break;case n.ON_CONTACT.ABSORB:var f=a.dot(o)/(r*i+p);h.set(a.mult(i*f)),t.applyImpulse(h),t.setPos(s.add(a.mult(-e))),o.clear();break;case n.ON_CONTACT.WRAP:if(e<-t.r)break}this.eventOutput&&this.eventOutput.emit("postCollision",d)},n.prototype.onExit=function(t,e){var i=this.opts.onContact,s=t.p,o=this.opts.n;i==n.ON_CONTACT.REFLECT?t.setPos(s.add(o.mult(-e))):i==n.ON_CONTACT.WRAP||i==n.ON_CONTACT.ABSORB},n.prototype.applyConstraint=function(t,e,i){for(var n=this.opts.n,s=0;s<t.length;s++){var o=t[s],r=o.p,a=o.v,c=o.r||0,u=this.getDistance(r.add(n.mult(-c))),h=this.getNormalVelocity(a);0>=u&&(0>h?this.onEnter(o,u,i):this.onExit(o,u,i))}},n.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},n.prototype.unbind=function(){return s.call(this),this.unbind.apply(this,arguments)},n.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},i.exports=n}.bind(this)),require.register("famous_modules/famous/transitions/wall-transition/_git_master/index.js",function(t,e,i){function n(t){t=t||0,this.endState=new b(t),this.initState=new b,this._active=!1,this.spring=new v({anchor:this.endState}),this.wall=new y,this._restTolerance=1e-8,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PhysicsEngine=new g,this.particle=this.PhysicsEngine.createParticle({p:this.endState}),this.PhysicsEngine.attach([this.wall,this.spring],this.particle)}function s(){if(this._active){this.PhysicsEngine.step();var t=o.call(this);t<this._absRestTolerance&&(u.call(this),l.call(this,this.endState),p.call(this,[0,0,0]))}else if(this._callback){var e=this._callback;this._callback=void 0,e()}}function o(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function r(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function a(t){var e=n.DEFAULT_OPTIONS;void 0===t.period&&(t.period=e.period),void 0===t.dampingRatio&&(t.dampingRatio=e.dampingRatio),void 0===t.velocity&&(t.velocity=e.velocity),void 0===t.restitution&&(t.restitution=e.restitution),this.spring.setOpts({period:t.period,dampingRatio:t.dampingRatio}),this.wall.setOpts({restitution:t.restitution}),p.call(this,t.velocity)}function c(){this.PhysicsEngine.play(),this._active=!0}function u(){this.PhysicsEngine.pause(),this._active=!1}function h(t){this.endState.set(t);var e=this.endState.sub(this.initState).norm();this.wall.setOpts({d:this.endState.norm(),n:0==e?this.particle.v.normalize(-1):this.endState.sub(this.initState).normalize(-1)}),r.call(this)}function l(t){this.particle.p.set(t)}function p(t){this.particle.v.set(t)}function d(){return 0===this.dimensions?this.particle.p.x:this.particle.p.get()}function f(){return 0===this.dimensions?this.particle.v.x:this.particle.v.get()}function m(t){this._callback=t}var g=e("famous/physics/engine"),v=e("famous/physics/forces/spring"),y=e("famous/physics/constraints/wall"),b=e("famous/math/vector");n.SUPPORTS_MULTIPLE=3,n.DEFAULT_OPTIONS={period:300,dampingRatio:0,restitution:.5,velocity:0},n.prototype.reset=function(t,e){this.dimensions=t instanceof Array?t.length:0,this.initState.set(t),l.call(this,t),e&&p.call(this,e),h.call(this,t),m.call(this,void 0)},n.prototype.getVelocity=function(){return f.call(this)},n.prototype.setVelocity=function(t){this.call(this,p(t))},n.prototype.halt=function(){this.set(this.get())},n.prototype.get=function(){return s.call(this),d.call(this)},n.prototype.set=function(t,e,i){return e?(this.dimensions=t instanceof Array?t.length:0,c.call(this),a.call(this,e),h.call(this,t),void m.call(this,i)):(this.reset(t),void(i&&i()))},i.exports=n}.bind(this)),require.register("app/custom/row-view/header-bar.js",function(t,e,i){function n(){s.apply(this,arguments),this.surfacesMod=new o}var s=e("famous/widgets/title-bar"),o=e("famous/modifier");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.collapse=function(){this.hide(),this.headerResize=!0,this.setOptions({size:[void 0,-1]})},n.prototype.expand=function(){this.show(),this.headerResize=!0,this.setOptions({size:[void 0,50]})},n.prototype.show=function(t){t?this.curTitle=t:t=this.curTitle,s.prototype.show.apply(this,[t]),this.headerResize=!1},n.prototype.hide=function(){this.lightbox.hide(),this.headerResize=!1},i.exports=n}.bind(this)),require.register("app/custom/row-view/header-view.js",function(t,e,i){function n(t){a.call(this),this.options={header:void 0,buttonSizeY:20,classes:[],content:"",size:[!0,20]},this.setOptions(t),this.setupSurfaces(),this.events(),window.hh=this}var s=e("famous/surface"),o=e("famous/modifier"),r=(e("famous/transform"),e("famous/engine")),a=(e("templates"),e("row-view"));n.prototype=Object.create(a.prototype),n.prototype.constructor=n,n.prototype.setOptions=function(t){_.extend(this.options,t)},n.prototype.setupSurfaces=function(){this.headerMod=new o,this.headerSurface=new s({classes:this.options.classes,size:this.options.size,properties:{color:"white"},content:this.options.content}),this.headerSurface.pipe(this._eventOutput),this.surfaces.add(this.headerMod).add(this.headerSurface)},n.prototype.resizeItem=function(){this.headerSurface._currTarget&&(this.headerSurface._currTarget.children[0].style.width=window.innerWidth+"px")},n.prototype.events=function(){r.on("resize",this.resizeItem.bind(this))},i.exports=n}.bind(this)),require.register("app/custom/row-view/index.js",function(t,e,i){i.exports={RowView:e("row-view"),ItemView:e("item-view"),ItemView2S:e("item-view-2S"),HeaderView:e("header-view"),HeaderBar:e("header-bar")}}.bind(this)),require.register("app/custom/row-view/item-view-2S.js",function(t,e,i){function n(t){window.item=this,v.apply(this,arguments),this.model=t.model,this.options={paddingLeft:20,paddingRight:20,buttonSizeX:50,buttonSizeY:50,_leftEndOrigin:[0,0],_rightEndOrigin:[1,0],size:[!0,50]},this.setOptions(t),this.setupSurfaces(),this.setupEvent(),this.buttonsClickEvents(),this.isEditingMode=!1,this.areEditingMode=!1,this.returnZeroOpacityTransition={curve:h.linearNorm,duration:100},this.wallTransition={method:"wall",period:300,dampingRatio:1},f.on("resize",this.resizeItem.bind(this))}var s=(e("famous/render-node"),e("famous/surface")),o=e("famous/modifier"),r=e("famous/input/generic-sync"),a=e("famous/input/mouse-sync"),c=e("famous/input/touch-sync"),u=e("famous/transform"),h=e("famous/transitions/easing"),l=e("famous/transitions/transitionable"),p=e("famous/transitions/wall-transition"),d=e("famous/transitions/spring-transition"),f=e("famous/engine"),m=e("famous/utilities/utility"),g=e("templates"),v=e("row-view"),y=e("helpers");l.registerMethod("wall",p),l.registerMethod("spring",d),n.prototype=Object.create(v.prototype),n.prototype.constructor=n,n.prototype.setupEvent=function(){var t=new r(function(){return this.pos}.bind(this),{syncClasses:[a,c]});this.itemSurface.pipe(t),this.itemSurface.pipe(this._eventOutput),this.pos=[0,0],t.on("start",function(){this.pos=this.isEditingMode?[this.options.nButtons*this.options.buttonSizeX,0]:[0,0],this._directionChosen=!1,this.clickTimeout=setTimeout(function(){this.itemSurface.setProperties({backgroundColor:"rgba(255,255,255,0.1)"})}.bind(this),100)}.bind(this)),t.on("update",function(t){if(this.clickTimeout&&(clearTimeout(this.clickTimeout),delete this.clickTimeout),this.itemSurface.setProperties({backgroundColor:"transparent"}),this.pos=t.p,y.isMobile()&&!this._directionChosen){var e=Math.abs(this.isEditingMode?this.pos[0]-this.options.nButtons*this.options.buttonSizeX:this.pos[0]),i=Math.abs(this.pos[1]);this.direction=e>i?m.Direction.X:m.Direction.Y,this._directionChosen=!0,this.direction==m.Direction.X?this.itemSurface.unpipe(this._eventOutput):this.itemSurface.pipe(this._eventOutput)}else y.isMobile()&&this.direction!=m.Direction.X||(this.animateItem(),this.animateLeftButtons(),this.animateRightButtons())}.bind(this)),t.on("end",function(t){setTimeout(function(){this.itemSurface.setProperties({backgroundColor:"transparent"})}.bind(this),300),this.pos=t.p,y.isMobile()&&this.direction!=m.Direction.X||(this.pos[0]>this.options.nButtons*this.options.buttonSizeX?this.toggleEditing():this.setEditingOff(),this.pos[0]<-.3*window.innerWidth&&(this._eventOutput.emit(this.options.rightButton.event,this.model),this.setEditingOff()))}.bind(this))},n.prototype.setOptions=function(t){_.extend(this.options,t),this.options.nButtons=t.leftButtons?t.leftButtons.length:0},n.prototype.setupSurfaces=function(){this.backgroundSurface=new s({content:g.itemFrame2(this.options.leftButtons,this.options.rightButton,this.options.paddingLeft,this.options.paddingRight),size:this.options.size,properties:{zIndex:-1}}),this.surfaces.add(this.backgroundSurface),this.itemSurface=new s({classes:this.options.itemButton.classes,content:this.options.itemButton.content,size:this.options.size,properties:{backgroundColor:"transparent",zIndex:9}}),this.itemMod=new o({origin:this.options._leftEndOrigin}),this.surfaces.add(this.itemMod).add(this.itemSurface)},n.prototype.updateItem=function(){this.itemSurface.setContent(g.recentItemView(this.model))},n.prototype.animateItem=function(){this.itemMod.setTransform(u.translate(this.pos[0],0,0))},n.prototype.animateItemEnd=function(){var t=u.identity;t=this.isEditingMode?u.translate(this.options.nButtons*this.options.buttonSizeX,0,0):u.translate(0,0,0),this.itemMod.setTransform(t,this.wallTransition)},n.prototype.animateLeftButtons=function(){this.leftButtons=_.first(this.getButtons(),this.options.nButtons);for(var t=0;t<this.options.nButtons;t++)this.leftButtons[t].style.opacity=Math.min((this.pos[0]-this.options.buttonSizeX*t)/this.options.buttonSizeX,1)},n.prototype.animateLeftButtonsEnd=function(){if(this.leftButtons=_.first(this.getButtons(),this.options.nButtons),this.leftButtons)for(var t=0;t<this.options.nButtons;t++)this.leftButtons[t].style.opacity=this.isEditingMode?1:0},n.prototype.animateRightButtons=function(){this.rightButton=_.last(this.getButtons()),this.options.rightButton&&this.pos[0]<0&&(this.rightButton.style.opacity=Math.min(-1*this.pos[0]/(.3*window.innerWidth),1))
},n.prototype.animateRightButtonsEnd=function(){this.rightButton=_.last(this.getButtons()),this.rightButton&&this.options.rightButton&&(this.rightButton.style.opacity=0)},n.prototype.resizeItem=function(){this.itemSurface._currTarget&&(this.itemSurface._currTarget.children[0].style.width=window.innerWidth+"px"),this.backgroundSurface._currTarget&&(this.backgroundSurface._currTarget.children[0].style.width=window.innerWidth-this.options.paddingLeft-this.options.paddingRight+"px")},n.prototype.setEditingOn=function(){this.isEditingMode=!0,this.animateItemEnd(),this.animateLeftButtonsEnd(),this.animateRightButtonsEnd()},n.prototype.setEditingOff=function(){setTimeout(function(){this.isEditingMode=!1,this.animateItemEnd(),this.animateLeftButtonsEnd(),this.animateRightButtonsEnd()}.bind(this),100)},n.prototype.toggleEditing=function(){this.isEditingMode=!this.isEditingMode,this.animateItemEnd(),this.animateLeftButtonsEnd(),this.animateRightButtonsEnd()},n.prototype.onToggleAll=function(){0==this.areEditingMode?this.setEditingOn():this.setEditingOff(),this.areEditingMode=!this.areEditingMode},n.prototype.buttonsClickEvents=function(){this.itemSurface.on("click",function(){0==this.pos[0]&&0==this.pos[1]&&0==this.isEditingMode&&this._eventOutput.emit(this.options.itemButton.event,this.model)}.bind(this)),this._eventInput.on("backToNoneEditing",function(){this.areEditingMode=!1}.bind(this))},n.prototype.getButtons=function(){return!this.buttons&&this.backgroundSurface._currTarget&&(this.buttons=this.backgroundSurface._currTarget.children[0].children,_(_.first(this.buttons,this.options.nButtons)).each(function(t,e){$(t).on("click",function(){this._eventOutput.emit(this.options.leftButtons[e].event,this.model)}.bind(this))}.bind(this))),this.buttons},i.exports=n}.bind(this)),require.register("app/custom/row-view/item-view.js",function(t,e,i){function n(t){v.apply(this,arguments),this.model=t.model,this.options={paddingLeft:20,paddingRight:20,buttonSizeX:50,buttonSizeY:50,_leftEndOrigin:[0,0],_rightEndOrigin:[1,0],size:[!0,50]},this.setOptions(t),this.setupSurfaces(),this.setupEvent(),this.buttonsClickEvents(),this.isEditingMode=!1,this.areEditingMode=!1,this.returnZeroOpacityTransition={curve:h.linearNorm,duration:100},this.wallTransition={method:"wall",period:300,dampingRatio:1},f.on("resize",this.resizeItem.bind(this))}var s=(e("famous/render-node"),e("famous/surface")),o=e("famous/modifier"),r=e("famous/input/generic-sync"),a=e("famous/input/mouse-sync"),c=e("famous/input/touch-sync"),u=e("famous/transform"),h=e("famous/transitions/easing"),l=e("famous/transitions/transitionable"),p=e("famous/transitions/wall-transition"),d=e("famous/transitions/spring-transition"),f=e("famous/engine"),m=e("famous/utilities/utility"),g=e("templates"),v=e("row-view"),y=e("helpers");l.registerMethod("wall",p),l.registerMethod("spring",d),n.prototype=Object.create(v.prototype),n.prototype.constructor=n,n.prototype.setupEvent=function(){var t=new r(function(){return this.pos}.bind(this),{syncClasses:[a,c]});this.itemSurface.pipe(t),this.itemSurface.pipe(this._eventOutput),this.pos=[0,0],t.on("start",function(){this.pos=this.isEditingMode?[this.options.nButtons*this.options.buttonSizeX,0]:[0,0],this._directionChosen=!1,this.clickTimeout=setTimeout(function(){this.itemSurface.setProperties({backgroundColor:"rgba(255,255,255,0.1)"})}.bind(this),100)}.bind(this)),t.on("update",function(t){if(this.clickTimeout&&(clearTimeout(this.clickTimeout),delete this.clickTimeout),this.itemSurface.setProperties({backgroundColor:"transparent"}),this.pos=t.p,y.isMobile()&&!this._directionChosen){var e=Math.abs(this.isEditingMode?this.pos[0]-this.options.nButtons*this.options.buttonSizeX:this.pos[0]),i=Math.abs(this.pos[1]);this.direction=e>i?m.Direction.X:m.Direction.Y,this._directionChosen=!0,this.direction==m.Direction.X?this.itemSurface.unpipe(this._eventOutput):this.itemSurface.pipe(this._eventOutput)}else y.isMobile()&&this.direction!=m.Direction.X||(this.animateItem(),this.animateLeftButtons(),this.animateRightButtons())}.bind(this)),t.on("end",function(t){setTimeout(function(){this.itemSurface.setProperties({backgroundColor:"transparent"})}.bind(this),300),this.pos=t.p,y.isMobile()&&this.direction!=m.Direction.X||(this.pos[0]>this.options.nButtons*this.options.buttonSizeX?this.toggleEditing():this.setEditingOff(),this.pos[0]<-.3*window.innerWidth&&(this._eventOutput.emit(this.options.rightButton.event,this.model),this.setEditingOff()))}.bind(this))},n.prototype.setOptions=function(t){_.extend(this.options,t),this.options.nButtons=t.leftButtons?t.leftButtons.length:0},n.prototype.setupSurfaces=function(){this.backgroundSurface=new s({content:g.itemFrame(this.options.paddingLeft,this.options.paddingRight),size:this.options.size,properties:{zIndex:-1}}),this.surfaces.add(this.backgroundSurface),_(this.options.leftButtons).each(function(t,e){this["leftButton"+e]=new s({content:t.content,size:[this.options.buttonSizeX,this.options.buttonSizeY]}),this["leftButton"+e+"Mod"]=new o({origin:this.options._leftEndOrigin,opacity:0,transform:u.translate(this.options.paddingLeft+this.options.buttonSizeX*e,0,0)}),this["leftButton"+e].pipe(this._eventOutput),this.surfaces.add(this["leftButton"+e+"Mod"]).add(this["leftButton"+e])}.bind(this)),this.options.rightButton&&(this.rightButton=new s({content:this.options.rightButton.content,size:[this.options.buttonSizeX,this.options.buttonSizeY]}),this.rightButtonMod=new o({origin:this.options._rightEndOrigin,opacity:0,transform:u.translate(-this.options.paddingRight,0,0)}),this.surfaces.add(this.rightButtonMod).add(this.rightButton)),this.itemSurface=new s({classes:this.options.itemButton.classes,content:this.options.itemButton.content,size:this.options.size,properties:{backgroundColor:"transparent",zIndex:9}}),this.itemMod=new o({origin:this.options._leftEndOrigin}),this.surfaces.add(this.itemMod).add(this.itemSurface)},n.prototype.updateItem=function(){this.itemSurface.setContent(g.recentItemView(this.model))},n.prototype.animateItem=function(){this.itemMod.setTransform(u.translate(this.pos[0],0,0))},n.prototype.animateItemEnd=function(){var t=u.identity;t=this.isEditingMode?u.translate(this.options.nButtons*this.options.buttonSizeX,0,0):u.translate(0,0,0),this.itemMod.setTransform(t,this.wallTransition)},n.prototype.animateLeftButtons=function(){for(var t=0;t<this.options.nButtons;t++){var e=Math.min((this.pos[0]-this.options.buttonSizeX*t)/this.options.buttonSizeX,1);this["leftButton"+t+"Mod"].setOpacity(e)}},n.prototype.animateLeftButtonsEnd=function(){for(var t=0;t<this.options.nButtons;t++)this.isEditingMode?this["leftButton"+t+"Mod"].setOpacity(1,this.returnZeroOpacityTransition):this["leftButton"+t+"Mod"].setOpacity(0,this.returnZeroOpacityTransition)},n.prototype.animateRightButtons=function(){this.rightButton&&this.pos[0]<0&&this.rightButtonMod.setOpacity(Math.min(-1*this.pos[0]/(.3*window.innerWidth),1))},n.prototype.animateRightButtonsEnd=function(){this.rightButton&&this.rightButtonMod.setOpacity(0,this.returnZeroOpacityTransition)},n.prototype.resizeItem=function(){this.itemSurface._currTarget&&(this.itemSurface._currTarget.children[0].style.width=window.innerWidth+"px"),this.backgroundSurface._currTarget&&(this.backgroundSurface._currTarget.children[0].style.width=window.innerWidth-this.options.paddingLeft-this.options.paddingRight+"px")},n.prototype.setEditingOn=function(){this.isEditingMode=!0,this.animateItemEnd(),this.animateLeftButtonsEnd(),this.animateRightButtonsEnd()},n.prototype.setEditingOff=function(){setTimeout(function(){this.isEditingMode=!1,this.animateItemEnd(),this.animateLeftButtonsEnd(),this.animateRightButtonsEnd()}.bind(this),100)},n.prototype.toggleEditing=function(){this.isEditingMode=!this.isEditingMode,this.animateItemEnd(),this.animateLeftButtonsEnd(),this.animateRightButtonsEnd()},n.prototype.onToggleAll=function(){0==this.areEditingMode?this.setEditingOn():this.setEditingOff(),this.areEditingMode=!this.areEditingMode},n.prototype.buttonsClickEvents=function(){_(this.options.leftButtons).each(function(t,e){this["leftButton"+e].on("click",function(t){this._eventOutput.emit(t.event,this.model)}.bind(this,t))}.bind(this)),this.itemSurface.on("click",function(){0==this.pos[0]&&0==this.pos[1]&&0==this.isEditingMode&&this._eventOutput.emit(this.options.itemButton.event,this.model)}.bind(this)),this._eventInput.on("backToNoneEditing",function(){this.areEditingMode=!1}.bind(this))},i.exports=n}.bind(this)),require.register("app/custom/row-view/row-view.js",function(t,e,i){function n(){o.apply(this,arguments),this.surfaces=new s,this.surfacesMod=new r,this._node.add(this.surfacesMod).add(this.surfaces)}var s=e("famous/render-node"),o=e("famous/view"),r=e("famous/modifier");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.collapse=function(t){this.surfacesMod.setOpacity(0,{duration:300},t)},n.prototype.expand=function(t){this.surfacesMod.setOpacity(1,{duration:300},t)},n.prototype.getSize=function(){var t=this.surfacesMod.opacityState.get();return[this.options.size[0],Math.floor(this.options.size[1]*t)||0]},i.exports=n}.bind(this)),require.register("app/views/add-contact-view.js",function(t,e,i){function n(t){function e(t){t&&t.attributes&&(this.getFormObject(),t.attributes.provider?this.formObject[t.attributes.provider]=t.attributes:this.formObject=_.extend(this.formObject,t.attributes),this.formObject.firstname=this.formObject.firstname?this.formObject.firstname:t.attributes.firstname,this.formObject.lastname=this.formObject.lastname?this.formObject.lastname:t.attributes.lastname,this.formObject.email=this.formObject.email?this.formObject.email:t.attributes.email,this.renderContact())}function i(t){u.show(this.headerFooterLayout,!0,function(){e.bind(this)(t)}.bind(this))}r.call(this),this.formObject={},this.socialCollection={},this.socialView={},this.headerFooterLayout=new s({headerSize:50,footerSize:0});var n=new c;void 0===t.inTransform&&(this.options.inTransform=n.options.inTransform),void 0===t.outTransform&&(this.options.outTransform=n.options.outTransform),void 0===t.inTransition&&(this.options.inTransition=n.options.inTransition),void 0===t.outTransition&&(this.options.outTransition=n.options.outTransition),void 0===t.inOpacity&&(this.options.inOpacity=n.options.inOpacity),void 0===t.outOpacity&&(this.options.outOpacity=n.options.outOpacity),this.options.showOrigin=[0,0],this.options.inOrigin=[0,0],this.options.outOrigin=[0,0],this.model=t.model,this.header=new o({classes:["header"],size:[void 0,50],properties:{}}),this.content=new o({classes:["add-contact-view"],size:[void 0,void 0],properties:{padding:"20px",backgroundColor:"transparent"}}),this.headerFooterLayout.id.header.add(this.header),this.headerFooterLayout.id.content.add(this.content);var u=new a;this._add(u),u.show(this.headerFooterLayout),this.content.pipe(this._eventOutput),this.header.pipe(this._eventOutput),this.renderContact(),this.header.on("click",function(t){var e=$(t.target);e.hasClass("done-contact")?(this.submitForm(),$("body").removeClass("editing"),this._eventOutput.emit("triggerBackToNoneEditing"),this._eventOutput.emit("showApp")):e.hasClass("close-button")&&this._eventOutput.emit("showApp")}.bind(this)),this.collection=t.collection,this.content.on("click",function(t){function e(){if(!this.socialView[s]){if(!_.isArray(this.socialCollection[s].models))return void alert("Your "+s+" contact list is empty.");this.socialView[s]=new f({title:h.capitalize(s),collection:this.socialCollection[s]}),this.socialView[s].pipe(this._eventOutput)}u.show(this.socialView[s],!0)}function i(){this._eventOutput.emit("onSocialLink",s),delete this.socialCollection[s]}var n=$(t.target);if(n.hasClass("import-contact")){var s=n[0].id;this.socialCollection[s]?e.bind(this)():(this.socialCollection[s]=new d,this.socialCollection[s].url="/contact/"+s,this.socialCollection[s].fetch({success:e.bind(this),error:i.bind(this)}))}else if(n.hasClass("remove-button")){var s=n[0].id;s&&delete this.formObject[s],this.renderContact()}}.bind(this)),this._eventOutput.on("goBack",i)}var s=e("famous/views/header-footer-layout"),o=e("famous/surface"),r=(e("famous/event-handler"),e("famous/view")),a=e("famous/views/edge-swapper"),c=e("up-down-transform"),u=e("templates"),h=e("helpers"),l=e("models"),p=l.Contact,d=l.SocialContactCollection,f=e("import-contact-view");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.renderContact=function(){var t='<div class="initial">'+this.initial+"</div>";if(t+='<form role="form">',t+='<div class="form-group small">',t+='<input type="text" class="form-control" id="input-first-name" placeholder="First" name="firstname"',this.formObject.firstname&&(t+=' value="'+this.formObject.firstname+'"'),t+="></div>",t+='<div class="form-group small">',t+='<input type="text" class="form-control" id="input-last-name" placeholder="Last" name="lastname"',this.formObject.lastname&&(t+=' value="'+this.formObject.lastname+'"'),t+="></div>",t+='<div class="form-group small">',t+='<input type="email" class="form-control" id="input-email" placeholder="Email" name="email"',this.formObject.email?(t+=' value="'+this.formObject.email+'">',t+=u.getEmailInvite(this.formObject),t+="</div>"):t+="></div>",t+='<div class="form-group small">',t+='<input type="phone" class="form-control" id="input-phone" placeholder="Phone" name="phone"',this.formObject.phone?(t+=' value="'+this.formObject.phone+'">',t+=u.getSMSInvite(this.formObject),t+="</div>"):t+="></div>",t+='<div class="box">',t+='<div class="info import-contact touchable" id="google"><i class="fa fa-google-plus-square fa-lg import-contact" id="google"></i>',this.formObject.google){var e=this.formObject.google;t+='<span class="import-contact touchable" id="google">  '+e.firstname+" "+e.lastname+"</span>",t+=u.removeButton("google")+"</div>"}else t+='<span class="import-contact touchable" id="google">  New Google Contact</span>',t+=u.nextButton("google")+"</div>";if(t+='<div class="info import-contact touchable" id="facebook"><i class="fa fa-facebook-square fa-lg import-contact" id="facebook"></i>',this.formObject.facebook){var e=this.formObject.facebook;t+='<span class="import-contact touchable" id="facebook">  '+e.firstname+" "+e.lastname+"</span>",t+=u.removeButton("facebook"),t+=u.getFacebookInvite(this.formObject)+"</div>"}else t+='<span class="import-contact touchable" id="facebook">  New Facebook Contact</span>',t+=u.nextButton("facebook")+"</div>";t+="</form>",this.content.setContent(t);var t=u.editContactHeader(this.title);this.header.setContent(t)},n.prototype.getFormObject=function(){var t=$(".add-contact-view form").serializeArray(),e={};for(var i in t)t[i].name&&(e[t[i].name]=t[i].value);this.formObject=_.extend(this.formObject,e);for(var i in this.formObject)void 0===this.formObject[i]&&delete this.formObject[i];return this.formObject},n.prototype.submitForm=function(){var t=this.getFormObject();"Edit Contact"==this.title?(this.model.set(t),this._eventOutput.emit("submitContact",this.model)):(this.collection.add(t),this._eventOutput.emit("submitContact",new p(t))),this.collection.trigger("sync")},n.prototype.setContact=function(t){t&&t instanceof p?(this.formObject=_.omit(t.attributes,"id"),this.title="Edit Contact",this.initial="",this.formObject.firstname&&(this.initial=this.formObject.firstname[0]),this.formObject.lastname&&(this.initial+=this.formObject.lastname[0]),this.model=t):(this.formObject={},t&&(this.formObject=_.omit(t.attributes,"id")),this.title="New Contact",this.initial='<i class="fa fa-user fa-lg"></i>')},i.exports=n}.bind(this)),require.register("app/views/alert-view.js",function(t,e,i){function n(t,e){s.call(this),this.options={inTransform:r.identity,outTransform:r.identity,showTransform:r.identity,inTransition:{duration:100},outTransition:{duration:100},overlap:!0},this.bigSurface=new o({size:[void 0,void 0],properties:{background:"rgba(0,0,0,0.5)",zIndex:1e3}}),this.alertSurface=new o({classes:["alert"],size:[340,220],properties:{borderRadius:"10px",background:"rgba(59, 59, 59, 0.90)",color:"rgba(245, 236, 236,1)",zIndex:1001}}),this.alertLightBox=new c({inTransform:r.identity,inOpacity:.1,inOrigin:[.5,.45],outTransform:r.scale(.001,.001,.001),outOpacity:1,outOrigin:[.5,.45],showTransform:r.identity,showOpacity:1,showOrigin:[.5,.45],inTransition:{duration:200,curve:a.inQuad()},outTransition:{duration:100,curve:a.outQuint()}}),this.setAlertMessage(t,e),this._add(this.bigSurface),this._add(this.alertLightBox),this.alertLightBox.show(this.alertSurface)}var s=e("famous/view"),o=e("famous/surface"),r=(e("famous/event-handler"),e("famous/transform")),a=e("famous/transitions/easing"),c=e("light-box");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.setAlertMessage=function(t,e){var i=['<div class="alert-title"><b>Beepe</b></div><div id="message">',t,"</div>"];e||i.push('<div id="close-alert"> OK </div>'),this.alertSurface.setContent(i.join(""))},i.exports=n}.bind(this)),require.register("app/views/camera-view.js",function(t,e,i){function n(t){s.call(this),this.model=t.model,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;var e='<div class="camera local-video blur off">';navigator.getUserMedia&&(e+='<video muted="true" autoplay poster="content/images/transparent.png"></video>'),e+="</div>",this.localVideoSurface=new o({content:e});var e='<div class="camera remote-video">';navigator.getUserMedia&&(e+='<video autoplay poster="content/images/transparent.png"></video>'),e+="</div>",this.remoteVideoSurface=new o({properties:{zIndex:-3},content:e}),this.localVideoSurface.pipe(this._eventOutput),this.remoteVideoSurface.pipe(this._eventOutput),this.transform=new r({origin:[.9,.1]}),this._add(new r({transform:a.translate(0,0,-5)})).add(this.remoteVideoSurface),this._add(this.transform).add(this.localVideoSurface),this.turnOff()}var s=e("famous/view"),o=e("famous/surface"),r=(e("famous/event-handler"),e("famous/modifier")),a=e("famous/transform");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.turnOn=function(){$(".remote-video").show(),this.transform.setTransform(a.move(a.scale(.25,.25),[0,0,-5]),{duration:500})},n.prototype.turnOff=function(){$(".remote-video").hide(),this.transform.setTransform(a.move(a.scale(1,1),[0,0,-5]),{duration:500})},i.exports=n}.bind(this)),require.register("app/views/chat-item-view.js",function(t,e,i){function n(t){t.leftButtons=[{content:s.crossButton(),event:"deleteItem"},{content:s.editButton(),event:"editContact"}],t.rightButton={content:s.phoneButton(),event:"outgoingCall"},t.itemButton={classes:["contact-item","chat-item"],content:s.chatItemView(t.model),event:"chatContact"},t.buttonSizeY=60,t.size=[!0,60],r.apply(this,arguments),this._eventInput.on("toggleAllChat",this.onToggleAll.bind(this)),this._eventInput.on("backToNoneEditing",this.setEditingOff.bind(this))}var s=e("templates"),o=e("row-view"),r=o.ItemView2S;n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.updateItem=function(){this.itemSurface.setContent(s.chatItemView(this.model))},i.exports=n}.bind(this)),require.register("app/views/chats-section-view.js",function(t,e,i){function n(t){s.call(this),this.title=r.chatsHeader(),this.navigation={caption:"Messages",icon:'<i class="fa fa-comments-o"></i>'},this.collection=t.collection,this.scrollview=new o({startAt:"top"}),this.pipe(this.scrollview),this._add(this.scrollview),this.scrollview.sequenceFrom([]),this.collection.on("all",function(t,e,i,n){switch(t){case"remove":var s=n.index;console.log(s),this.scrollview.removeByIndex(s);break;case"add":this.addItem(e),this.collection.sort(),this.scrollview.sortBy(function(t){return-1*t.model.get("time")});break;case"change":this.collection.sort(),this.scrollview.sortBy(function(t){return-1*t.model.get("time")})}this.updateItems()}.bind(this))}var s=e("famous/view"),o=(e("famous/utilities/utility"),e("famous/surface"),e("vertical-scroll-view")),r=(e("famous/engine"),e("templates")),a=e("chat-item-view");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.updateItems=function(){_.each(this.scrollview.node.array,function(t){t.updateItem&&t.updateItem()})},n.prototype.loadItems=function(){this.scrollview.setPosition(0),this.sequence=this.collection.map(function(t){var e=new a({model:t});return e.pipe(this._eventOutput),this._eventInput.pipe(e),e}.bind(this)),this.scrollview.sequenceFrom(this.sequence)},n.prototype.addItem=function(t){var e=new a({model:t});e.pipe(this._eventOutput),this._eventInput.pipe(e),this.scrollview.addByIndex(0,e)},n.prototype.removeItemByIndex=function(t){this.scrollview.removeByIndex(t)},i.exports=n}.bind(this)),require.register("app/views/connected-call-view.js",function(t,e,i){function n(t){s.call(this),this.collection=t.collection,this._eventOutput.on("menu-toggle-button",this.onMenuToggleButton),this.conversationView=new r,this.conversationView.pipe(this._eventOutput),this._eventInput.pipe(this.conversationView),this._add(this.conversationView)}var s=e("famous/view"),o=(e("famous/transform"),e("famous/surface"),e("famous/event-handler"),e("templates"),e("models").Call),r=e("conversation-view");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.start=function(t,e){this.conversationView.start(t,e),this.model=this.collection.models[0]||new o,this.appSettings=t,$(".camera").removeClass("blur")},n.prototype.stop=function(t){this._eventOutput.emit("outgoingCallEnd",this.model),this._eventOutput.emit("incomingCallEnd",this.model),t.exit&&this._eventOutput.emit("showApp"),this.conversationView.stop(t)},i.exports=n}.bind(this)),require.register("app/views/contact-item-view.js",function(t,e,i){function n(t){this.model=t.model,t.paddingRight=40,t.leftButtons=[{content:s.crossButton(),event:"deleteItem"},{content:s.editButton(),event:"editContact"}],t.rightButton={content:s.phoneButton(),event:"outgoingCall"},t.itemButton={classes:["contact-item","editable"],content:s.contactItemView(t.model),event:"chatContact"},r.apply(this,arguments),this.model.on("all",function(t){switch(t){case"change:favorite":$(this.leftButton1._currTarget).find(".favorite-button").toggleClass("active")}}.bind(this)),this._eventInput.on("toggleAllContact",this.onToggleAll.bind(this)),this._eventInput.on("backToNoneEditing",this.setEditingOff.bind(this)),this.model.on("change",function(){this.changeItem()}.bind(this))}var s=e("templates"),o=e("row-view"),r=o.ItemView2S;n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.changeItem=function(){this.itemSurface.setContent(s.contactItemView(this.model))},i.exports=n}.bind(this)),require.register("app/views/contacts-scroll-view.js",function(t,e,i){function n(t){a.call(this),this.sortKey="lastname",this.searchKey=!1,this.abcArray="ABCDEFGHIJKLMNOPQRSTUVWXYZ#",this.setupLayout(t),this.renderHeaders(),this.prepareSequences(),this.collectionEvents(),this.abcSurfaceEvents(),this.searchSurfaceEvents()}function s(t){return t=t||"lastname",function(e){var i,n,s;i=n=s="",e.model&&(i=e.model.get("lastname")||"#"),e.model&&(n=e.model.get("firstname")||"#"),e.options&&e.options.header&&(s=e.options.header);var o;return o="firstname"==t.toLowerCase()?s+n+" "+i:s+i+" "+n,/^[a-zA-Z]+$/.test(o[0])||(o="{"+o),o.toUpperCase()}}function o(t){return function(e){return t?(t=t.toLowerCase(),e.model?-1!=e.model.get("firstname").toLowerCase().indexOf(t)||-1!=e.model.get("lastname").toLowerCase().indexOf(t)?!0:!1:!1):t===!1}}function r(t,e,i){return _.chain(t).filter(i).sortBy(e).value()}var a=e("famous/view"),c=e("famous/views/header-footer-layout"),u=(e("famous/utilities/utility"),e("famous/modifier")),h=e("famous/input/generic-sync"),l=e("famous/surface"),p=(e("famous/transitions/easing"),e("custom-input-sync")),d=p.TouchSync,f=p.MouseSync,m=e("templates"),g=e("famous/transform"),v=e("vertical-scroll-view"),y=e("contact-item-view"),b=e("row-view"),w=b.HeaderView,x=e("helpers");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,n.prototype.collectionEvents=function(){this.collection.on("all",function(t,e){switch(t){case"change":this.changeItem(e);break;case"remove":this.removeItem(e),this.renderHeaders(),0==this.collection.length&&this.renderAddSurface();break;case"add":this.addItem(e);break;case"sync":this.renderHeaders(),setTimeout(this.renderScrollView.bind(this),this.scrollview.node.array.length>1?0:1e3)}}.bind(this))},n.prototype.prepareSequences=function(){this.contactSequence=[],this.headerSequence=_.map("ABCDEFGHIJKLMNOPQRSTUVWXYZ#",function(t){var e=new w({content:m.headerItemView(t,0,0),header:t});return e.pipe(this.scrollview),e}.bind(this))},n.prototype.setupLayout=function(t){this.searchBarSize=50,this.abcSurfaceWidth=30,this.abcSurfaceHeight=void 0,this.headerFooterLayout=new c({headerSize:this.searchBarSize,footerSize:0}),this.LayoutMod=new u,this.searchSurface=new l({size:[void 0,this.searchBarSize],classes:["contact-section-search-bar"],content:'<div><i class="fa fa-search"></i>   <input type="text" class="search-contact" placeholder = "Search" ><span class="cancel">cancel</span></input></div></div>',properties:{backgroundColor:"rgba(15,15,15,0.9)",color:"white",zIndex:10}}),this.searchSurfaceMod=new u({transform:g.translate(0,0,3)}),this.searhBarTransition={duration:0},this.searchMode=!1,this.abcSurface=new l({size:[this.abcSurfaceWidth,this.abcSurfaceHeight],classes:["abcButton"],content:m.abcButtons(),properties:{backgroundColor:"rgba(160,160,160,0.0)",zIndex:2}}),this._eventInput.pipe(this.searchSurface),this.abcMod=new u({origin:[1,0],transform:g.translate(0,0,10)}),this.title='<button class="left edit-button" id="contact-edit-contact"></button><div>All Contacts</div><button class="right add-contact" id="add-contact"><i class="fa fa-plus" id="add-contact"></i></button>',this.navigation={caption:"Contacts",icon:'<i class="fa fa-users"></i>'},this.collection=t.collection;var e=x.isMobile()?500:1e4;this.scrollview=new v({margin:e}),this.scrollview.sequenceFrom([]),this.headerFooterLayout.id.header.add(this.searchSurfaceMod).add(this.searchSurface),this.headerFooterLayout.id.content.add(this.scrollview),this.headerFooterLayout.id.content.add(this.abcMod).add(this.abcSurface),this.pipe(this.scrollview),this._add(this.LayoutMod).add(this.headerFooterLayout)},n.prototype.renderAddSurface=function(){var t='<div class="firstAdd"><div> <i class="fa fa-plus fa-5x" ></i> </div> <div> Your contact list is empty,</div><div> Please add your first contact.</div></div>',e=new l({size:[void 0,void 0]});e.setContent(t),e.on("click",function(t){$(t.target).hasClass("fa-plus")&&this._eventOutput.emit("editContact")}.bind(this)),this.scrollview.sequenceFrom([e])},n.prototype.renderScrollView=function(){if(0==this.collection.length)return void this.renderAddSurface();var t=this.headerSequence.concat(this.contactSequence),e=r(t,s(this.sortKey),o(this.searchKey));this.scrollview.sequenceFrom(e)},n.prototype.createItem=function(t){var e=new y({model:t});return e.pipe(this._eventOutput),this._eventInput.pipe(e),e},n.prototype.addItem=function(t){var e=this.createItem(t);this.contactSequence.push(e)},n.prototype.removeItem=function(t){var e=this.contactSequence.map(function(t){return t.model}).indexOf(t);this.contactSequence.splice(e,1);var e=this.scrollview.node.array.map(function(t){return t.model}).indexOf(t);this.scrollview.removeByIndex(e)},n.prototype.changeItem=function(){},n.prototype.abcSurfaceEvents=function(){var t=[0,0],e=new h(function(){return t},{syncClasses:[f,d]});this.abcSurface.pipe(e),e.on("start",function(t){this.scrollToContact(t)}.bind(this)),e.on("update",function(t){this.scrollToContact(t)}.bind(this))},n.prototype.scrollToContact=function(t){var e=document.elementFromPoint(t.ap[0],t.ap[1]);if(e&&e.id){var i=this.abcArray.indexOf(e.id),n=this.scrollview.node.array.indexOf(this.headerSequence[i]);this.scrollview.scrollTo(n,0)}},n.prototype.searchSurfaceEvents=function(){this.searchSurface.on("click",function(t){"search-contact"==t.target.className?this._eventInput.emit("searchOnFocus",t):"cancel"==t.target.className&&this._eventInput.emit("searchOnCancel")}.bind(this)),this._eventInput.on("searchOnFocus",this.searchOnFocus.bind(this)),this._eventInput.on("searchOnCancel",this.searchOnCancel.bind(this)),this.searchSurface.on("keyup",function(){this.searchKey=this.getSearchKey(),this.renderScrollView()}.bind(this))},n.prototype.searchOnFocus=function(){this.searchKey=this.getSearchKey(),this.searchKey||(this._eventInput.emit("backToNoneEditing"),this.abcSurface.setContent(""),this.scrollview.scrollTo(0,0),this.LayoutMod.setTransform(g.translate(0,-50,0),this.searhBarTransition),this.searchSurface._currTarget.children[0].children[2].style.opacity=1,this.searchSurface._currTarget.style.paddingRight="100px",this.renderScrollView())},n.prototype.searchOnCancel=function(){this.abcSurface.setContent(m.abcButtons()),this.LayoutMod.setTransform(g.translate(0,0,0),this.searhBarTransition),this.searchSurface._currTarget.children[0].children[2].style.opacity=0,this.searchSurface._currTarget.style.paddingRight="10px",document.getElementsByClassName("search-contact")[0].value="",this.searchKey=this.getSearchKey(),this.renderScrollView()},n.prototype.renderHeaders=function(){var t=_.chain(this.collection.models).map(function(t){return t.get(this.sortKey)[0]||"#"}.bind(this)).map(function(t){return/^[a-zA-Z]+$/.test(t)?t.toUpperCase():"#"}).uniq().value();_.each(this.headerSequence,function(e){-1==t.indexOf(e.options.header)?e.collapse():e.expand()}.bind(this))},n.prototype.getSearchKey=function(){return $(document.activeElement).hasClass("search-contact")?document.activeElement.value:!1},i.exports=n}.bind(this)),require.register("app/views/contacts-section-view.js",function(t,e,i){function n(){s.apply(this,arguments),this.title=o.contactHeader(),this.navigation={caption:"Contacts",icon:'<i class="fa fa-users"></i>'}}var s=e("contacts-scroll-view"),o=e("templates");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,i.exports=n}.bind(this)),require.register("app/views/contacts-section-view2.js",function(t,e,i){function n(t){r.call(this),this.searchBarSize=50,this.abcSurfaceWidth=30,this.abcSurfaceHeight=void 0,this.a2zString="ABCDEFGHIJKLMNOPQRSTUVWXYZ#",this.setupLayout(t),this.collectionEvents(),this.abcSurfaceEvents(),this.searchSurfaceEvents()}function s(t){var e,i,n;e=i=n="",t.model&&(e=t.model.get("lastname")),t.model&&(i=t.model.get("firstname")),t.options&&t.options.header&&(n=t.options.header);var s=n+e+" "+i;return/^[a-zA-Z]+$/.test(s[0])||(s="zzzz"+s),s.toUpperCase()}function o(t){var e,i,n;e=i=n="",t.model&&(e=t.model.get("lastname")),t.model&&(i=t.model.get("firstname")),t.options&&t.options.header&&(n=t.options.header);var s=n+i+" "+e;return/^[a-zA-Z]+$/.test(s[0])||(s="zzzz"+s),s.toUpperCase()}var r=e("famous/view"),a=e("famous/views/header-footer-layout"),c=e("famous/utilities/utility"),u=e("famous/modifier"),h=e("famous/input/generic-sync"),l=e("famous/surface"),p=(e("famous/transitions/easing"),e("custom-input-sync")),d=p.TouchSync,f=p.MouseSync,m=e("templates"),g=e("famous/transform"),v=e("vertical-scroll-view"),y=e("contact-item-view"),b=e("row-view"),w=b.HeaderView;n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.setupLayout=function(t){this.headerFooterLayout=new a({headerSize:this.searchBarSize,footerSize:0}),this.LayoutMod=new u,this.searchSurface=new l({size:[void 0,this.searchBarSize],classes:["contact-section-search-bar"],content:'<div><i class="fa fa-search"></i>   <input type="text" class="search-contact" placeholder = "Search" ><span class="cancel">cancel</span></input></div></div>',properties:{backgroundColor:"rgba(15,15,15,0.9)",color:"white",zIndex:10}}),this.searchSurfaceMod=new u({transform:g.translate(0,0,3)}),this.searhBarTransition={duration:0},this.searchMode=!1,this.abcSurface=new l({size:[this.abcSurfaceWidth,this.abcSurfaceHeight],classes:["abcButton"],content:'<button id="A">A</button><button id="B">B</button><button id="C">C</button><button id="D">D</button><button id="E">E</button><button id="F">F</button><button id="G">G</button><button id="H">H</button><button id="I">I</button><button id="J">J</button><button id="K">K</button><button id="L">L</button><button id="M">M</button><button id="N">N</button><button id="O">O</button><button id="P">P</button><button id="Q">Q</button><button id="R">R</button><button id="S">S</button><button id="T">T</button><button id="U">U</button><button id="V">V</button><button id="W">W</button><button id="X">X</button><button id="Y">Y</button><button id="Z">Z</button><button id="#">#</button>',properties:{backgroundColor:"rgba(160,160,160,0.0)",zIndex:2}}),this._eventInput.pipe(this.searchSurface),this.abcMod=new u({origin:[1,0],transform:g.translate(0,0,10)}),this.title='<button class="left edit-button" id="contact-edit-contact"></button><div>All Contacts</div><button class="right add-contact" id="add-contact"><i class="fa fa-plus" id="add-contact"></i></button>',this.navigation={caption:"Contacts",icon:'<i class="fa fa-users"></i>'},this.collection=t.collection,this.scrollview=new v({direction:c.Direction.Y,margin:1e4}),this.headerFooterLayout.id.header.add(this.searchSurfaceMod).add(this.searchSurface),this.headerFooterLayout.id.content.add(this.scrollview),this.headerFooterLayout.id.content.add(this.abcMod).add(this.abcSurface),this.pipe(this.scrollview),this._add(this.LayoutMod).add(this.headerFooterLayout)
},n.prototype.scrollTo=function(t,e){0>t||(this.scrollview.setVelocity(0),this.scrollview.node.index=t,e||(e=0),this.scrollview.setPosition(e))},n.prototype.setupHeaderSurfaces=function(){return _.map(this.a2zString,function(t){var e=new w({content:m.headerItemView(t,0,0),header:t,collection:this.collection});return e.pipe(this.scrollview),e}.bind(this))},n.prototype.refreshContacts=function(t){if($("body").removeClass("editing"),1==this.searchMode){if(this.abcSurface.setContent(""),this.currentSequence=[],void 0==t||""==t)return void this.scrollview.sequenceFrom(this.currentSequence);this.currentCollection=this.collection.searchContact(t.toUpperCase())}else this.currentCollection=this.collection.models,this.currentSequence=_.clone(this.headerSequence),this.abcSurface.setContent(m.abcButtons());this.contactSequence=_.sortBy(this.contactSequence,s),this.currentContactsSequence=_.map(this.currentCollection,function(t){return this.contactSequence[t.collection.indexOf(t)]}.bind(this)),this.currentSequence=this.currentSequence.concat(this.currentContactsSequence),this.sortByLastname(),this.scrollview.sequenceFrom(this.currentSequence)},n.prototype.initContacts=function(){this.headerSequence=this.setupHeaderSurfaces(),this.contactSequence=this.collection.map(function(t){return this.createItem(t)}.bind(this)),this.refreshContacts()},n.prototype.createItem=function(t){var e=new y({model:t});return e.pipe(this._eventOutput),this._eventInput.pipe(e),e},n.prototype.collectionEvents=function(){this.collection.on("all",function(t,e,i,n){switch(console.log(t,e,i,n),t){case"change":this.changeItem(e),this.collection.sort();break;case"remove":this.removeItem(e);break;case"add":1==this.noInit&&this.addItem(e);break;case"sync":this.noInit||(this.noInit=!0,this.initContacts())}}.bind(this))},n.prototype.abcSurfaceEvents=function(){var t=[0,0],e=new h(function(){return t},{syncClasses:[f,d]});this.abcSurface.pipe(e),e.on("start",function(t){this.scrollToContact(t)}.bind(this)),e.on("update",function(t){this.scrollToContact(t)}.bind(this))},n.prototype.scrollToContact=function(t){var e=document.elementFromPoint(t.ap[0],t.ap[1]);if(e&&e.id){for(var i in this.headerSequence)if(this.headerSequence[i].options.header==e.id){var n=this.currentSequence.indexOf(this.headerSequence[i]);break}this.scrollTo(n)}},n.prototype.removeItem=function(t){for(var e in this.contactSequence)if(this.contactSequence[e].model==t){var i=e;break}this.contactSequence.splice(i,1);for(var e in this.currentSequence)if(this.currentSequence[e].model==t){var n=e;break}this.scrollview.removeByIndex(n)},n.prototype.addItem=function(t){var e=this.createItem(t);this.contactSequence.push(e),this.refreshContacts()},n.prototype.changeItem=function(){this.refreshContacts()},n.prototype.searchSurfaceEvents=function(){this.searchSurface.on("click",function(t){"search-contact"==t.target.className?this._eventInput.emit("searchOnFocus"):"cancel"==t.target.className&&(t.currentTarget.children[0].children[1].value="",this._eventInput.emit("searchOnBlur"),this.refreshContacts(""))}.bind(this)),this._eventInput.on("searchOnFocus",this.searchOnFocus.bind(this)),this._eventInput.on("searchOnBlur",this.searchOnBlur.bind(this)),this.searchSurface.on("keyup",function(t){this.refreshContacts(t.target.value)}.bind(this))},n.prototype.getInitialChar=function(t){function e(t){return/^[a-zA-Z]+$/.test(t[0])}return void 0!=t.get("lastname")&&""!=t.get("lastname")?e(t.get("lastname"))?t.get("lastname")[0].toUpperCase():"#":"#"},n.prototype.searchOnFocus=function(){this.searchMode=!0,this._eventInput.emit("backToNoneEditing"),this.scrollview.scrollTo(0,0),this.refreshContacts(),this.LayoutMod.setTransform(g.translate(0,-50,0),this.searhBarTransition),this.searchSurface._currTarget.children[0].children[2].style.opacity=1,this.searchSurface._currTarget.style.paddingRight="100px"},n.prototype.searchOnBlur=function(){this.searchMode=!1,this.LayoutMod.setTransform(g.translate(0,0,0),this.searhBarTransition),this.searchSurface._currTarget.children[0].children[2].style.opacity=0,this.searchSurface._currTarget.style.paddingRight="10px"},n.prototype.sortByLastname=function(){this.currentSequence=_.sortBy(this.currentSequence,s)},n.prototype.sortByFirstname=function(){this.currentSequence=_.sortBy(this.currentSequence,o)},i.exports=n}.bind(this)),require.register("app/views/conversation-item-view.js",function(t,e,i){function n(t){s.call(this),this.model=t.model,this.surface=new o({properties:{maxWidth:300,zIndex:2}}),this.template(),this.event(),this.surface.pipe(this._eventOutput),this._add(this.surface)}var s=e("famous/view"),o=(e("famous/event-handler"),e("famous/modifier"),e("conversation-surface")),r=e("helpers");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.event=function(){this.surface.on("click",function(t){$(t.target).hasClass("conversation-item")||this._eventOutput.emit("toggleMsg")}.bind(this))},n.prototype.template=function(){var t=this.getLink(this.model.get("content"));t=this.model.isLocal()?'<div class="conversation-item triangle-border right">'+t+"</div>":'<div class="conversation-item triangle-border left">'+t+"</div>",this.surface.setContent(t)},n.prototype.getLink=function(t){return r.linkify(t)},i.exports=n}.bind(this)),require.register("app/views/conversation-view.js",function(t,e,i){function n(){s.call(this),this.setupBeepeTone(),this.initHeader(),this.initFooter(),this.initConversation(),this.setupLayout(),this.setupTransition(),this.onResize(),this.buttonsEvents(),this.textingEvents(),this.inputSourceLocal=!0}var s=e("famous/view"),o=e("famous/surface"),r=e("famous/modifier"),a=e("famous/transform"),c=(e("famous/views/scrollview"),e("famous/utilities/utility")),u=e("famous/views/header-footer-layout"),h=e("famous/engine"),l=e("famous/audio/sound-player"),p=e("famous/transitions/transitionable"),d=e("famous/transitions/wall-transition");p.registerMethod("wall",d);var f=e("templates"),m=e("vertical-scroll-view"),g=e("conversation-item-view"),v=e("models").ConversationCollection,y=e("models").ChatCollection,b=e("helpers"),w=1;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.setupBeepeTone=function(){this.messageTone=new l(["content/audio/beep.mp3"]),this.playBeepe=_.debounce(function(){this.messageTone.playSound(0,.3)}.bind(this),300)},n.prototype.setupcall=function(t,e){if(this.appSettings=t,this.settingsEvents={"change:video":this._eventOutput.emit("setVideo"),"change:audio":this._eventOutput.emit("setAudio")},this.appSettings.on(this.settingsEvents),this.call=e,b.isDev())this.collection=new v,this.call=void 0;else{this.collection&&this.collection.off();var i=t.get("firebaseUrl")+"chats/"+t.get("cid")+"/"+e.get("cid");this.collection=new y([],{firebase:i})}this.synced=!1},n.prototype.initHeader=function(){this.exitSurface=new o({size:[window.innerWidth-225,50],classes:["conversation-exit"],properties:{cursor:"pointer"}}),this.exitSurface.pipe(this._eventOutput),this.exitSurfaceMod=new r({transform:a.translate(0,0,3)}),this.callSurface=new o({size:[225,50],classes:["conversation-call"],content:'<div class="touchable"><i class="fa fa-phone fa-lg"></i> Call</div>',properties:{cursor:"pointer"}}),this.callSurfaceMod=new r({origin:[1,0],transform:a.translate(0,0,4)}),this.endCallSurface=new o({size:[75,50],classes:["conversation-endCall"],content:'<div class="touchable"><i class="fa fa-phone fa-lg"></i></div>',properties:{cursor:"pointer"}}),this.endCallSurface.pipe(this._eventOutput),this.endCallSurfaceMod=new r({origin:[1,0],transform:a.translate(-150,0,3)}),this.audioSurface=new o({size:[75,50],classes:["conversation-audio"],properties:{cursor:"pointer"}}),this.audioSurface.pipe(this._eventOutput),this.audioSurfaceMod=new r({origin:[1,0],transform:a.translate(0,0,3)}),this.cameraSurface=new o({size:[75,50],classes:["conversation-camera"],properties:{cursor:"pointer"}}),this.cameraSurfaceMod=new r({origin:[1,0],transform:a.translate(-75,0,3)})},n.prototype.cameraSurfaceSetContent=function(){this.cameraSurface.setContent(1==this.appSettings.attributes.video?'<button class="fa fa-video-camera fa-lg on touchable"></button>':'<button class="fa fa-video-camera fa-lg off touchable"></button>')},n.prototype.audioSurfaceSetContent=function(){this.audioSurface.setContent(1==this.appSettings.attributes.audio?'<button class="fa fa-microphone fa-lg on touchable"></button>':'<button class="fa fa-microphone fa-lg off touchable"></button>')},n.prototype.initFooter=function(){this.inputSurface=new o({size:[window.innerWidth-100,50],classes:["conversation-input-bar"],content:'<textarea class="input-msg" name="message"></textarea>',properties:{backgroundColor:"black"}}),this.inputSurfaceMod=new r({transform:a.translate(0,0,9)}),this.sendSurface=new o({size:[100,50],classes:["conversation-input-bar"],content:'<div class="touchable"><button class="send-text-button">Send</button></div>',properties:{backgroundColor:"black",cursor:"pointer"}}),this.sendSurfaceMod=new r({origin:[1,0],transform:a.translate(0,0,9)})},n.prototype.initConversation=function(){this.scrollview=new m({startAt:"bottom",direction:c.Direction.Y}),this.pipe(this.scrollview),this.mod=new r({opacity:w})},n.prototype.setupLayout=function(){this.headerFooterLayout=new u({headerSize:50,footerSize:50}),this.headerFooterLayout.id.header.add(this.exitSurfaceMod).add(this.exitSurface),this.headerFooterLayout.id.header.add(this.callSurfaceMod).add(this.callSurface),this.headerFooterLayout.id.header.add(this.endCallSurfaceMod).add(this.endCallSurface),this.headerFooterLayout.id.header.add(this.audioSurfaceMod).add(this.audioSurface),this.headerFooterLayout.id.header.add(this.cameraSurfaceMod).add(this.cameraSurface),this.headerFooterLayout.id.content.add(this.mod).add(this.scrollview),this.headerFooterLayout.id.footer.add(this.inputSurfaceMod).add(this.inputSurface),this.headerFooterLayout.id.footer.add(this.sendSurfaceMod).add(this.sendSurface),this._add(this.headerFooterLayout)},n.prototype.onResize=function(){var t,e=function(){this.scrollview&&this.scrollview.setVelocity(-99)};h.on("resize",function(){this.exitSurface.setSize([window.innerWidth-225,50]),this.inputSurface.setSize([window.innerWidth-100,50]),t&&clearTimeout(t),t=setTimeout(e.bind(this),300)}.bind(this))},n.prototype.setupTransition=function(){this.buttonTransition={method:"wall",period:200,dampingRatio:1},this.chatOpacityTransition={method:"wall",period:300,dampingRatio:1}},n.prototype.start=function(t,e){this.setupcall(t,e),this.cameraSurfaceSetContent(),this.audioSurfaceSetContent(),this.exitSurface.setContent(f.conversationViewHeader(e)),!b.isDev()&&this.call.get("success")?this.hideCallButton():this.showCallButton(),this.scrollview.sequenceFrom([]),this.collectionEvents(),this.collection.size()&&setTimeout(this.loadMsg.bind(this),400),b.isMobile()&&(window._disableResize=!1)},n.prototype.stop=function(t){this.showCallButton(),this.appSettings.save({video:!0}),this.appSettings.save({audio:!0}),t.exit&&(this.collection.off(),this.appSettings.off(this.settingsEvents),b.isMobile()&&setTimeout(function(){window._disableResize=!0},500)),t.exit&&this.mod.setOpacity(w)},n.prototype.collectionEvents=function(){this.collection.on("all",function(t,e){switch(t){case"add":if(!this.synced)break;for(this.addMsg(e),this.playBeepe();this.collection.size()>=100;)this.collection.shift();setTimeout(function(){this.scrollview.scrollToEnd()}.bind(this),400),this.showConversation(),this._eventOutput.emit("chatRead",this.call);break;case"sync":setTimeout(this.loadMsg.bind(this),400),this._eventOutput.emit("chatRead",this.call)}}.bind(this))},n.prototype.showCallButton=function(){this.callSurfaceMod.setTransform(a.translate(0,0,4),this.buttonTransition)},n.prototype.hideCallButton=function(){this.callSurfaceMod.setTransform(a.translate(225,0,4),this.buttonTransition)},n.prototype.buttonsEvents=function(){this.exitSurface.on("click",function(){this.showCallButton(),setTimeout(function(){this._eventOutput.emit("callEnd",{exit:!0,chat:this.call})}.bind(this),600)}.bind(this)),this.callSurface.on("click",function(){this.hideCallButton(),setTimeout(function(){this._eventOutput.emit("outgoingCall",this.call)}.bind(this),600)}.bind(this)),this.endCallSurface.on("click",function(){this.showCallButton(),setTimeout(function(){this._eventOutput.emit("callEnd",{exit:!1})}.bind(this),600)}.bind(this)),this.audioSurface.on("click",function(){this.appSettings.save({audio:!this.appSettings.attributes.audio}),this.audioSurfaceSetContent()}.bind(this)),this.cameraSurface.on("click",function(){this.appSettings.save({video:!this.appSettings.attributes.video}),this.cameraSurfaceSetContent()}.bind(this)),this.sendSurface.on("click",function(){this.addChat()}.bind(this))},n.prototype.textingEvents=function(){this.inputSurface.on("keydown",function(t){13==t.keyCode&&this.addChat()}.bind(this)),this._eventInput.on("incomingChat",function(t){this.addRemote(t.content)}.bind(this)),this._eventOutput.on("toggleMsg",function(){1==this.mod.getOpacity()?this.mod.setOpacity(w,this.chatOpacityTransition):this.mod.setOpacity(1,this.chatOpacityTransition)}.bind(this))},n.prototype.createMsgItem=function(t){var e=new g({model:t});return e.pipe(this._eventOutput),e},n.prototype.addChat=function(){var t=document.getElementsByClassName("input-msg")[0].value;if(t&&""!=t.replace(/[\s\t\r\n]/g,""))if(document.getElementsByClassName("input-msg")[0].value="",this.call){if(b.isDev())return;this._eventOutput.emit("sendChat",{contact:this.call,message:t})}else this.inputSourceLocal=!this.inputSourceLocal,this.inputSourceLocal?this.addLocal(t):this.addRemote(t)},n.prototype.addLocal=function(t){var e={content:t,source:"local",type:"text",from:window._cola_g.cid,time:Date.now()};return b.isDev()?void this.collection.create(e):(this.collection.add(e),void this._eventOutput.emit("outgoingChat",e))},n.prototype.addRemote=function(t){var e={content:t,source:"remote",type:"text",time:Date.now()};return b.isDev()?void this.collection.create(e):void this.collection.add(e)},n.prototype.showConversation=function(){this.mod.setOpacity(1,this.chatOpacityTransition)},n.prototype.addMsg=function(t){this.scrollview.push(this.createMsgItem(t))},n.prototype.loadMsg=function(){this.synced=!0;var t=this.collection.map(function(t){return this.createMsgItem(t)}.bind(this));this.scrollview.sequenceFrom(t),setTimeout(function(){this.scrollview.jumpToEnd(),setTimeout(function(){this.mod.setOpacity(1)}.bind(this),400)}.bind(this),400)},i.exports=n}.bind(this)),require.register("app/views/favorite-item-view.js",function(t,e,i){function n(t){t.leftButtons=[{content:s.crossButton(),event:"deleteFavorite"}],t.rightButton={content:s.phoneButton(),event:"outgoingCall"},t.itemButton={classes:["contact-item","favorite-item","recent-item","editable"],content:s.favoriteItemView(t.model),event:"editContact"},r.apply(this,arguments),this._eventInput.on("toggleAllFavorite",this.onToggleAll.bind(this)),this._eventInput.on("backToNoneEditing",this.setEditingOff.bind(this))}var s=e("templates"),o=e("row-view"),r=o.ItemView;n.prototype=Object.create(r.prototype),n.prototype.constructor=n,i.exports=n}.bind(this)),require.register("app/views/favorites-section-view.js",function(t,e,i){function n(t){s.call(this),this.title=r.favoriteHeader(),this.navigation={caption:"Favorites",icon:'<i class="fa fa-star"></i>'},this.collection=t.collection,this.scrollview=new o({startAt:"top"}),this.pipe(this.scrollview),this._add(this.scrollview),this.scrollview.sequenceFrom([]),this.collection.on("all",function(t,e){switch(t){case"change:favorite":if(e.changed.favorite)this.addItem(e);else{var i=this.pastCollection.indexOf(e);this.removeItemByIndex(i)}break;case"remove":var i=this.pastCollection.indexOf(e);this.removeItemByIndex(i);break;case"add":this.addItem(e)}}.bind(this))}var s=e("famous/view"),o=(e("famous/utilities/utility"),e("famous/surface"),e("vertical-scroll-view")),r=(e("famous/engine"),e("templates")),a=e("favorite-item-view");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.loadItems=function(){this.pastCollection=this.collection.favorites(),this.sequence=this.collection.favorites().map(function(t){var e=new a({model:t});return e.pipe(this._eventOutput),this._eventInput.pipe(e),e}.bind(this)),this.scrollview.sequenceFrom(this.sequence)},n.prototype.addItem=function(t){this.pastCollection=this.collection.favorites();var e=this.collection.favorites().indexOf(t);if(e>=0){var i=new a({model:t});i.pipe(this._eventOutput),this._eventInput.pipe(i),this.scrollview.addByIndex(e,i)}},n.prototype.removeItemByIndex=function(t){this.pastCollection=this.collection.favorites(),this.scrollview.removeByIndex(t)},i.exports=n}.bind(this)),require.register("app/views/import-contact-view.js",function(t,e,i){function n(t){r.call(this),this.collection=t.collection,this.header=new o({content:'<button class="left back-button touchable">Back</button><div>'+t.title+" Contacts</div>",classes:["header"],size:[void 0,50],properties:{}}),this.content=new a({collection:this.collection}),this.layout=new s({headerSize:50,footerSize:0}),this.layout.id.header.add(this.header),this.layout.id.content.add(this.content),this.header.pipe(this._eventOutput),this.content.pipe(this._eventOutput),this.header.on("click",function(t){var e=$(t.target);e.hasClass(".edit-button")&&this.submitForm()}.bind(this)),this.header.on("click",function(t){$(t.target).hasClass("back-button")&&this._eventOutput.emit("goBack")}.bind(this)),this._add(this.layout)}var s=e("famous/views/header-footer-layout"),o=e("famous/surface"),r=e("famous/view"),a=e("social-scroll-view");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,i.exports=n}.bind(this)),require.register("app/views/incoming-call-view.js",function(t,e,i){function n(t){s.call(this),this.collection=t.collection,this.headerLightBox=new u({inTransition:!1,outTransition:!1,showOrigin:[.5,.1]}),this.footerLightBox=new u({inTransform:o.translate(0,900,0),inTransition:{duration:f,curve:a.inQuad()},inOpacity:0,inOrigin:[.5,.5],outTransform:o.translate(0,900,0),outOpacity:0,outOrigin:[.5,.5],outTransition:{duration:f,curve:a.outQuad()},showTransform:o.identity,showOpacity:1,showOrigin:[.5,.9]}),this.header=new r({classes:["outgoing-call-view"],size:[void 0,300],_origin:[.5,-.5],properties:{backgroundColor:"transparent"}});var e=h.button({classes:["decline-button","big-button"],checked:!0,content:"Decline",size:[160,70]}),i=h.button({classes:["answer-button","big-button"],checked:!0,content:"Answer",size:[160,70]});this.footer=new r({classes:["incoming-call-view-buttons"],size:[void 0,80],properties:{backgroundColor:"transparent"},content:'<div class="box">'+e+i+"</div>"}),this._add(this.headerLightBox),this._add(this.footerLightBox),_.bindAll(this,"template"),this.collection.bind("add",this.template),this.ringtone=new c(["content/audio/ringtone.mp3"]),this.footer.on("click",function(t){var e=$(t.target);e.hasClass("decline-button")?this.stop():e.hasClass("answer-button")&&this.accept()}.bind(this)),this._eventInput.on("incomingCall",function(){}),this._eventInput.on("incomingCallAnswerClick",function(){this.accept()}.bind(this))}var s=e("famous/view"),o=e("famous/transform"),r=e("famous/surface"),a=(e("famous/event-handler"),e("famous/transitions/easing")),c=e("famous/audio/sound-player"),u=e("light-box"),h=e("templates"),l=e("models"),p=l.Contact,d=l.Call,f=500;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.template=function(){this.model=this.collection.models[0]||new d;var t='<div class="box">';if(t+='<div class="caller-name">'+this.model.get("firstname")+" "+this.model.get("lastname")+"</div>",this.model.get("pictureUrl"))t+='<img class="caller-picture" src="'+this.model.get("pictureUrl")+'"></img>';else{var e=this.model.get("firstname")[0]+this.model.get("lastname")[0];t+='<div class="initial">'+e+"</div>"}t+='<div class="caller-info"></div>',this.header.setContent(t)},n.prototype.startRingtone=function(){this.ringtone.playSound(0,1),this.ringtoneRepeat=setInterval(function(){this.ringtone.playSound(0,1)}.bind(this),8e3),this.footerLightBox.show(this.footer),this.headerLightBox.show(this.header)},n.prototype.stopRingtone=function(){clearInterval(this.ringtoneRepeat),this.ringtone.stopPlaying()},n.prototype.start=function(t){this.on=!0;var e;t instanceof p||t instanceof d?e=t.attributes:(this.model=this.collection.models[0]||new d,e=this.model.attributes),this.model.set({roomId:e.roomId}),this.startRingtone(),$(".camera").removeClass("blur")},n.prototype.stop=function(){var t=$(".decline-button");this.on&&(this.on=!1,t&&(this.model.set({success:!1}),t.addClass("exiting")),this.stopRingtone(),setTimeout(function(){this.footerLightBox.hide(),this.headerLightBox.hide(),this._eventOutput.emit("showApp",function(){t&&t.removeClass("exiting")})}.bind(this),f))},n.prototype.accept=function(){var t=$(".answer-button");this.on=!1,this.model.set({success:!0}),t&&t.addClass("exiting"),this.stopRingtone(),setTimeout(function(){this.footerLightBox.hide(),this.headerLightBox.hide(),setTimeout(function(){t&&t.removeClass("exiting")},1e3),this._eventOutput.emit("connectedCall",this.model)}.bind(this),f),t&&this._eventOutput.emit("incomingCallAnswer",this.model)},i.exports=n}.bind(this)),require.register("app/views/index.js",function(t,e,i){i.exports={AddContactView:e("add-contact-view"),AlertView:e("alert-view"),CameraView:e("camera-view"),ConnectedCallView:e("connected-call-view"),ContactsScrollView:e("contacts-scroll-view"),ContactsSectionView:e("contacts-section-view"),ConversationView:e("conversation-view"),FavoritesSectionView:e("favorites-section-view"),IncomingCallView:e("incoming-call-view"),OutgoingCallView:e("outgoing-call-view"),RecentsSectionView:e("recents-section-view"),ChatsSectionView:e("chats-section-view"),SettingsSectionView:e("settings-section-view"),SocialView:e("social-view"),SocialScrollView:e("social-scroll-view")}}.bind(this)),require.register("app/views/outgoing-call-view.js",function(t,e,i){function n(t){s.call(this),this.collection=t.collection,this.headerLightBox=new u({inTransition:!1,outTransition:!1,showOrigin:[.5,.1],overlap:!0}),this.footerLightBox=new u({inTransform:o.translate(0,900,0),inTransition:{duration:f,curve:a.inQuad()},inOpacity:0,inOrigin:[.5,.5],outTransform:o.translate(0,900,0),outOpacity:0,outOrigin:[.5,.5],outTransition:{duration:f,curve:a.outQuad()},showTransform:o.identity,showOpacity:1,showOrigin:[.5,.9],overlap:!0}),this.header=new r({classes:["outgoing-call-view"],size:[void 0,300],_origin:[.5,-.5],properties:{backgroundColor:"transparent"}}),this.footer=new r({classes:["outgoing-call-view-buttons"],size:[void 0,80],properties:{backgroundColor:"transparent"}}),this._add(this.headerLightBox),this._add(this.footerLightBox),_.bindAll(this,"template"),this.collection.bind("add",this.template),this.calltone=new c(["content/audio/calltone.mp3","content/audio/ringtone.mp3"]),this.footer.on("click",function(t){var e=$(t.target);e.hasClass("end-button")&&this.stop(e)}.bind(this))}var s=e("famous/view"),o=e("famous/transform"),r=e("famous/surface"),a=(e("famous/event-handler"),e("famous/transitions/easing")),c=e("famous/audio/sound-player"),u=e("light-box"),h=e("templates"),l=e("models"),p=l.Contact,d=l.Call,f=500;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.template=function(){this.model=this.collection.models[0];var t='<div class="box">';if(t+='<div class="caller-name">'+this.model.get("firstname")+" "+this.model.get("lastname")+"</div>",this.model.get("pictureUrl"))t+='<img class="caller-picture" src="'+this.model.get("pictureUrl")+'"></img>';else{var e=this.model.get("firstname")[0]+this.model.get("lastname")[0];t+='<div class="initial">'+e+"</div>"}t+='<div class="caller-info"></div>',this.header.setContent(t);var i=h.toggleButton({id:"video",classes:["video-button","big-button"],checked:this.appSettings?this.appSettings.get("video"):!0,onContent:'<i class="fa fa-eye fa-lg on"></i>',offContent:'<i class="fa fa-eye-slash fa-lg off"></i>',onBackgroundColor:"#dadbd9",offBackgroundColor:"#dadbd9",size:[70,70]}),n=h.button({classes:["end-button","big-button"],checked:!0,content:"End",size:[160,70]}),s=h.toggleButton({id:"audio",classes:["audio-button","big-button"],checked:this.appSettings?this.appSettings.get("audio"):!0,onContent:'<i class="fa fa-microphone fa-lg on"></i>',offContent:'<i class="fa fa-microphone-slash fa-lg off"></i>',onBackgroundColor:"#dadbd9",offBackgroundColor:"#dadbd9",size:[70,70]});t='<div class="box">'+i+n+s+"</div>",this.footer.setContent(t)},n.prototype.startCalltone=function(){this.calltone.playSound(0,1),this.calltoneRepeat=setInterval(function(){this.calltone.playSound(0,1)}.bind(this),2500),this.footerLightBox.show(this.footer),this.headerLightBox.show(this.header)},n.prototype.stopCalltone=function(){clearInterval(this.calltoneRepeat),this.calltone.stopPlaying()},n.prototype.start=function(t,e){this.appSettings=e,this.on=!0;var i;t instanceof p||t instanceof d?i=t:(this.model=this.collection.models[0]||new d,i=this.model);var n={firstname:i.get("firstname"),lastname:i.get("lastname"),email:i.get("email"),pictureUrl:!1,type:"outgoing",time:Date.now(),cid:i.get("cid")};this.collection.create(n),this.startCalltone(),$(".camera").removeClass("blur")},n.prototype.stop=function(t){this.on&&(this.on=!1,t&&(this.model.set({success:!1}),t.addClass("exiting")),this.stopCalltone(),setTimeout(function(){this.footerLightBox.hide(),this.headerLightBox.hide(),this._eventOutput.emit("showApp",function(){t&&t.removeClass("exiting")})}.bind(this),f),t&&this._eventOutput.emit("outgoingCallEnd",this.model))},n.prototype.accept=function(){this.on=!1,this.model.set({success:!0}),this.stopCalltone(),setTimeout(function(){this.footerLightBox.hide(),this.headerLightBox.hide(),this._eventOutput.emit("connectedCall",this.model)}.bind(this),f)},i.exports=n}.bind(this)),require.register("app/views/recent-item-view.js",function(t,e,i){function n(t){t.leftButtons=[{content:s.crossButton(),event:"deleteItem"},{content:s.editButton(),event:"editContact"}],t.rightButton={content:s.phoneButton(),event:"outgoingCall"},t.itemButton={classes:["contact-item","recent-item"],content:s.recentItemView(t.model),event:"chatContact"},r.apply(this,arguments),this._eventInput.on("toggleAllRecent",this.onToggleAll.bind(this)),this._eventInput.on("backToNoneEditing",this.setEditingOff.bind(this))}var s=e("templates"),o=e("row-view"),r=o.ItemView2S;n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.updateItem=function(){this.itemSurface.setContent(s.recentItemView(this.model))},i.exports=n}.bind(this)),require.register("app/views/recents-section-view.js",function(t,e,i){function n(t){s.call(this),window.rec=this,this.title=r.recentsHeader(),this.navigation={caption:"Calls",icon:'<i class="fa fa-phone"></i>'},this.collection=t.collection,this.scrollview=new o({startAt:"top"}),this.pipe(this.scrollview),this._add(this.scrollview),this.collection.once("sync",function(){this.loadItems(),this.collection.on("all",function(t,e,i,n){switch(t){case"remove":this.scrollview.removeByIndex(n.index);break;case"add":for(this.addItem(e);this.collection.size()>c;)this.collection.pop();break;case"change":var s=e.collection.indexOf(e);this.sequence[s].updateItem()}}.bind(this))}.bind(this))}var s=e("famous/view"),o=(e("famous/utilities/utility"),e("famous/surface"),e("vertical-scroll-view")),r=(e("famous/engine"),e("templates")),a=e("recent-item-view"),c=40;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.updateItems=function(){_.each(this.sequence,function(t){t.updateItem&&t.updateItem()})},n.prototype.loadItems=function(){this.scrollview.setPosition(0),this.sequence=this.collection.map(function(t){var e=new a({model:t});return e.pipe(this._eventOutput),this._eventInput.pipe(e),e}.bind(this)),this.scrollview.sequenceFrom(this.sequence)},n.prototype.addItem=function(t){var e=new a({model:t});e.pipe(this._eventOutput),this._eventInput.pipe(e),this.scrollview.addByIndex(0,e)},n.prototype.removeItemByIndex=function(t){this.scrollview.removeByIndex(t)},n.prototype.clearAll=function(){_(this.collection.all()).each(function(t){t.collection.remove(t)})},n.prototype.setMissedOnly=function(t){var e="missed"==t;e?_.each(this.sequence,function(t){t.collapse&&!t.model.isMissed()&&t.collapse()}.bind(this)):(this.scrollview.setVelocity(-1),_.each(this.sequence,function(t){t.expand&&t.expand()}.bind(this)))},i.exports=n}.bind(this)),require.register("app/views/settings-section-view.js",function(t,e,i){function n(t){function e(){p.show()}function i(){this.appSettings.get("notification")&&(alert("Unblock notification for beepe.me:443 in chrome://settings/contentExceptions#notifications"),this.appSettings.set("notification",!1),$("#notification").prop("checked",!1))}function n(){this.template()}function c(){console.log("camera change"),this._eventOutput.emit("setCamera")}function u(){console.log("audio change"),this._eventOutput.emit("setAudio")}function h(){console.log("video change"),this._eventOutput.emit("setVideo")}function l(){console.log("blur change"),this._eventOutput.emit("setBlur")}s.call(this),this.appSettings=t.model,this.title="<div>Settings</div>",this.navigation={caption:"Settings",icon:'<i class="fa fa-gear"></i>'},this.scrollview=new a({direction:o.Direction.Y,margin:1e4}),this.pipe(this.scrollview),this.surface=new r({properties:{padding:"20px"},size:[void 0,700]}),this.template(),this.surface.pipe(this._eventOutput),this.scrollview.sequenceFrom([this.surface]),this._add(this.scrollview);var p=new Notify("Settings",{body:"Notification is on.",tag:"notificationSettings",permissionGranted:e.bind(this),permissionDenied:i.bind(this)});$(document).on("click","#notification",function(){this.appSettings.save({notification:JSON.parse($("#notification").prop("checked"))}),this.appSettings.get("notification")&&(p.needsPermission()?p.requestPermission():p.show())}.bind(this)),this.surface.on("click",function(t){switch(t.target.id){case"camera":this.appSettings.save({camera:JSON.parse($("#camera").prop("checked"))});break;case"video":this.appSettings.save({video:JSON.parse($("#video").prop("checked"))});break;case"audio":this.appSettings.save({audio:JSON.parse($("#audio").prop("checked"))});break;case"blur":this.appSettings.save({blur:JSON.parse($("#blur").prop("checked"))});break;case"facebook":JSON.parse($("#facebook").prop("checked"))?this._eventOutput.emit("onSocialLink",t.target.id):window.location="/disconnect/facebook";break;case"google":JSON.parse($("#google").prop("checked"))?this._eventOutput.emit("onSocialLink",t.target.id):window.location="/disconnect/google";break;case"linkedin":case"github":case"yammer":alert("Coming Soon.")}}.bind(this)),this.surface.on("click",function(t){switch(t.target.className){case"connected-button":this._eventOutput.emit("connectedCall","o9ycaGmnq0");break;case"conversations-button":this._eventOutput.emit("conversations");break;case"logout-button":window.location="/logout"}}.bind(this));var d={"change:camera":c.bind(this),"change:audio":u.bind(this),"change:video":h.bind(this),"change:blur":l.bind(this),change:n.bind(this)};this.appSettings.on(d)}var s=e("famous/view"),o=e("famous/utilities/utility"),r=e("famous/surface"),a=e("famous/views/scrollview"),c=e("templates");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.template=function(){this.surface.setContent(c.settingsPage(this.appSettings))},i.exports=n}.bind(this)),require.register("app/views/social-item-view.js",function(t,e,i){function n(t){this.model=t.model,t.paddingRight=40,t.itemButton={classes:["contact-item","editable"],content:c.socialItemView(t.model),event:"goBack"},h.apply(this,arguments)}var s=e("famous/input/generic-sync"),o=e("famous/input/mouse-sync"),r=e("famous/input/touch-sync"),a=e("famous/utilities/utility"),c=e("templates"),u=e("row-view"),h=u.ItemView2S,l=e("helpers");
n.prototype=Object.create(h.prototype),n.prototype.constructor=n,n.prototype.setupEvent=function(){var t=new s(function(){return this.pos}.bind(this),{syncClasses:[o,r]});this.itemSurface.pipe(t),this.itemSurface.pipe(this._eventOutput),this.pos=[0,0],t.on("start",function(){this.pos=[0,0],this._directionChosen=!1,this.clickTimeout=setTimeout(function(){this.itemSurface.setProperties({backgroundColor:"rgba(255,255,255,0.1)"})}.bind(this),100)}.bind(this)),t.on("update",function(t){if(this.clickTimeout&&(clearTimeout(this.clickTimeout),delete this.clickTimeout),this.itemSurface.setProperties({backgroundColor:"transparent"}),this.pos=t.p,l.isMobile()&&!this._directionChosen){var e=Math.abs(this.pos[0]),i=Math.abs(this.pos[1]);this.direction=e>i?a.Direction.X:a.Direction.Y,this._directionChosen=!0,this.direction==a.Direction.X?this.itemSurface.unpipe(this._eventOutput):this.itemSurface.pipe(this._eventOutput)}}.bind(this)),t.on("end",function(){setTimeout(function(){this.itemSurface.setProperties({backgroundColor:"transparent"})}.bind(this),300)}.bind(this)),l.isMobile()&&this.direction!=a.Direction.X},n.prototype.buttonsClickEvents=function(){this.itemSurface.on("click",function(){this._eventOutput.emit(this.options.itemButton.event,this.model)}.bind(this))},i.exports=n}.bind(this)),require.register("app/views/social-scroll-view.js",function(t,e,i){function n(){o.apply(this,arguments),this._eventOutput.on("goBack",function(t){console.log("onGoBack",t)})}var s=e("social-item-view"),o=e("contacts-scroll-view");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.collectionEvents=function(){this.collection.on("all",function(t,e){switch(console.log(t,e),t){case"sync":this.renderHeaders(),this.createSocialContacts(),setTimeout(this.renderScrollView.bind(this),this.scrollview.node?0:1e3)}}.bind(this))},n.prototype.createItem=function(t){var e=new s({model:t});return e.pipe(this._eventOutput),this._eventInput.pipe(e),e},n.prototype.createSocialContacts=function(){this.contactSequence=this.collection.map(function(t){return this.createItem(t)}.bind(this))},i.exports=n}.bind(this)),require.register("app/views/social-view.js",function(t,e,i){function n(t){s.call(this),this.searchBarSize=50,this.abcSurfaceWidth=30,this.abcSurfaceHeight=void 0,this.a2zString="ABCDEFGHIJKLMNOPQRSTUVWXYZ#",this.headerFooterLayout=new a({headerSize:this.searchBarSize,footerSize:0}),this.searchSurface=new h({size:[void 0,this.searchBarSize],classes:["import-section-search-bar"],content:'<div><i class="fa fa-search"></i>   <input type="text" class="search-import" placeholder = "Search" ></div></div>',properties:{backgroundColor:"rgba(15,15,15,0.9)",color:"white",zIndex:2}}),this.abcSurface=new h({size:[this.abcSurfaceWidth,this.abcSurfaceHeight],classes:["abcButton"],content:'<button id="A">A</button><button id="B">B</button><button id="C">C</button><button id="D">D</button><button id="E">E</button><button id="F">F</button><button id="G">G</button><button id="H">H</button><button id="I">I</button><button id="J">J</button><button id="K">K</button><button id="L">L</button><button id="M">M</button><button id="N">N</button><button id="O">O</button><button id="P">P</button><button id="Q">Q</button><button id="R">R</button><button id="S">S</button><button id="T">T</button><button id="U">U</button><button id="V">V</button><button id="W">W</button><button id="X">X</button><button id="Y">Y</button><button id="Z">Z</button><button id="#">#</button>',properties:{backgroundColor:"rgba(160,160,160,0.0)",zIndex:2}}),this.abcMod=new c({origin:[1,0]}),this.collection=t.collection,this.scrollview=new r({direction:o.Direction.Y,margin:1e4}),this.headerFooterLayout.id.header.add(this.searchSurface),this.headerFooterLayout.id.content.add(this.scrollview),this.headerFooterLayout.id.content.add(this.abcMod).add(this.abcSurface),this.pipe(this.scrollview),this._add(this.headerFooterLayout),this.loadContacts(),this.searchSurface.on("keyup",function(t){this.loadContacts(t.target.value)}.bind(this));var e=[0,0],i=new u(function(){return e},{syncClasses:[d,p]});this.abcSurface.pipe(i),i.on("update",function(t){var e=document.elementFromPoint(t.ap[0],t.ap[1]);if(void 0!=e.id&&""!=e.id){var i=this.a2zString.indexOf(e.id);i=this.a2zIndexArray[i],void 0!=i&&i!=this.curAbcIndex&&(this.curAbcIndex=i,this.scrollTo(i))}}.bind(this))}var s=e("famous/view"),o=e("famous/utilities/utility"),r=e("famous/views/scrollview"),a=e("famous/views/header-footer-layout"),c=(e("famous/event-handler"),e("famous/modifier")),u=e("famous/input/generic-sync"),h=e("famous/surface"),l=e("custom-input-sync"),p=l.TouchSync,d=l.MouseSync,f=e("social-item-view");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.loadContacts=function(t){this.currentCollection=t?this.collection.searchContact(t.toUpperCase()):this.collection,this.firstChar=void 0,this.a2zIndexArray=[0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],this.currentCollection;for(var e=this.currentCollection.map(function(t){return this.getIndex(t)}.bind(this));-1!=this.a2zIndexArray.indexOf(-1);)this.a2zIndexArray[this.a2zIndexArray.indexOf(-1)]=this.a2zIndexArray[this.a2zIndexArray.indexOf(-1)-1];for(var i=_.last(this.a2zIndexArray),n=this.scrollview.getSize()[1]+40,s=i;s<e.length;s++)n-=e[s].getSize()[1];if(n>0){var o=new h({size:[void 0,n]});o.pipe(this._eventOutput),e.push(o)}this.scrollview.sequenceFrom(e)},n.prototype.onAbcTouch=function(t){this.abcButtons||(this.abcButtons=$(".abcButton button"));var e=this.abcButtons.indexOf(t.target);e=this.a2zIndexArray[e],void 0!=e&&e!=this.curAbcIndex&&(this.curAbcIndex=e,this.scrollTo(e))},n.prototype.getIndex=function(t){var e=!1;/^[a-zA-Z]+$/.test(t.get("lastname")[0])?t.get("lastname")&&this.firstChar!=t.get("lastname")[0].toUpperCase()&&(this.firstChar=t.get("lastname")[0].toUpperCase(),e=this.firstChar,this.getCurrentIndex(t)):"#"!=this.firstChar&&(this.firstChar="#",e="#",this.getCurrentIndex(t));var i=new f({model:t},e);return i.pipe(this._eventOutput),i},n.prototype.getCurrentIndex=function(t){var e=this.currentCollection.indexOf(t);this.a2zIndexArray[this.a2zString.indexOf(this.firstChar)]=e},n.prototype.scrollTo=function(t,e){0>t||(this.scrollview.setVelocity(0),this.scrollview.node.index=t,e||(e=0),this.scrollview.setPosition(e))},i.exports=n}.bind(this)),require.register("app/views/unused-add-favorite-view.js",function(t,e,i){function n(t){s.call(this);var e=new r;void 0===t.inTransform&&(this.options.inTransform=e.options.inTransform),void 0===t.outTransform&&(this.options.outTransform=e.options.outTransform),void 0===t.inTransition&&(this.options.inTransition=e.options.inTransition),void 0===t.outTransition&&(this.options.outTransition=e.options.outTransition),void 0===t.inOpacity&&(this.options.inOpacity=e.options.inOpacity),void 0===t.outOpacity&&(this.options.outOpacity=e.options.outOpacity),this.model=t.model,this.header=new o({classes:["header"],size:[void 0,50],properties:{},content:'<button class="left close-button cancel-favorite">Cancel</button><div>Add to Favor</div><button class="right close-button done-favorite">Done</button>'}),this.content=new o({classes:["surface","add-favorite-view"],size:[void 0,void 0],properties:{backgroundColor:"transparent"}}),this.id.header.add(this.header),this.id.content.add(this.content),this.content.on("click",function(){}.bind(this)),this.template(),this.content.pipe(this._eventOutput),this.header.pipe(this._eventOutput),this.header.on("click",function(){target.hasClass("close-button")&&this._eventOutput.emit("showApp")}.bind(this))}var s=e("famous/views/header-footer-layout"),o=e("famous/surface"),r=(e("famous/event-handler"),e("up-down-transform"));n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.template=function(){var t='<form role="form">';t+='<div class="form-group small">',t+='<input type="text" class="form-control" id="input-first-name" placeholder="First">',t+="</div>",t+='<div class="form-group small">',t+='<input type="text" class="form-control" id="input-last-name" placeholder="Last">',t+="</div>",t+='<div class="form-group">',t+='<input type="email" class="form-control" id="input-email" placeholder="Email">',t+="</div>",t+="</form>",this.content.setContent(t)},i.exports=n}.bind(this)),require.register("app/main/index.js",function(t,e){e("vendor"),e("famous/polyfills");{var i=e("main-controller");new i}}.bind(this)),require.register("app/main/main-controller.js",function(t,e,i){function n(){this._eventInput=new h,h.setInputHandler(this,this._eventInput),this._eventOutput=new h,h.setOutputHandler(this,this._eventOutput),this.loadUser(function(t){function e(t){t.toggleFavorite()}function i(t){t.toggleFavorite()}function n(t){t.collection.remove(t)}function s(){}function o(){}function r(){Z.updateItems()}function a(t){Z.setMissedOnly(t.target.outerText)}function c(){Z.clearAll()}function h(t){var e;t instanceof Function&&(e=t),$(".camera").addClass("blur"),this.myLightbox.show(Q,!0,e)}function l(t){this.outgoingCallView.accept(t)}function d(t){var e,i;t instanceof Function?e=t:i=t,this.connectedCallView.start(this.appSettings,i),this.myLightbox.show(this.connectedCallView,!0,e),i.get("success")&&(this.localStream?this._eventOutput.emit("chatOn"):alert("Please allow camera/microphone access for Beepe"))}function b(t){this.outgoingCallView.start(t,this.appSettings),this.myLightbox.show(this.outgoingCallView,!0)}function N(t){function e(){}function i(){parent.focus()}function n(){parent.focus()}this.appSettings.get("notification")&&!window.colabeoBody&&(this.callNotification=new Notify("Incoming Call From",{icon:"content/ios_icon_x144.png",body:t.get("firstname")+" "+t.get("lastname"),notifyShow:e.bind(this),notifyClose:i.bind(this),notifyClick:n.bind(this)}),this.callNotification.show());var s=this.myLightbox.curRenderable;s instanceof j||(s instanceof k?(this.outgoingCallView.accept(t),this._eventOutput.emit("incomingCallAnswer",t)):(this.incomingCallView.start(t),this.myLightbox.show(this.incomingCallView,!0)))}function P(t){this._eventOutput.emit("chatOff");var e=this.myLightbox.curRenderable;if((e instanceof j||e instanceof C)&&e.stop(t),this.chatroom){var i="/login?r="+this.chatroom.uuid;this.chatroom.callerName&&(i+="&fn="+this.chatroom.callerName),window.location=i}t.chat&&this._eventOutput.emit("chatRead",t.chat)}function B(t){te.setContact(t instanceof f||t instanceof m?t:void 0),te.renderContact(),this.myLightbox.show(te,!0)}function R(t){function e(t){t=new f(t.omit("success")),this._eventOutput.emit("connectedCall",t)}(t instanceof f||t instanceof m)&&(t.get("cid")?e.bind(this)(t):this.lookup(t,e.bind(this),this.onUserNotFound.bind(this)))}function F(){ee.turnOn()}function L(){ee.turnOff()}function D(t){var e=_(Y.collection.models).find(function(e){return e.get("cid")==t.get("cid")});e&&e.set({read:!0})}function H(t){t.get("cid")||t.get("dcr")||this.lookup(t,null,function(t,e){this.setupChatroom(t,e)}.bind(this))}function q(t){switch(t.target.id){case"clear-button":this._eventOutput.emit("clearRecent");break;case"add-contact":this._eventOutput.emit("editContact");break;case"chats-edit-contact":$("body").toggleClass("editing"),this._eventInput.emit("toggleAllChat");break;case"recent-edit-contact":$("body").toggleClass("editing"),this._eventInput.emit("toggleAllRecent");break;case"favorite-edit-contact":$("body").toggleClass("editing"),this._eventInput.emit("toggleAllFavorite");break;case"contact-edit-contact":$("body").toggleClass("editing"),this._eventInput.emit("toggleAllContact");break;case"recent-toggle":this._eventOutput.emit("loadRecent",t);break;case"close-alert":this._eventOutput.emit("closeAlert")}"INPUT"==t.target.tagName||"TEXTAREA"==t.target.tagName?($(t.target).focus(),this._input=t.target):"send-text-button"==t.target.className?$(this._input).focus():this._input&&($(this._input).blur(),this._input=null)}function U(){this._eventInput.emit("backToNoneEditing")}function V(t,e){var i=new w(t,e);K.show(i,!0)}function X(){K.hide()}t.chatroom&&(this.chatroom=t.chatroom,t.objectId="dcr"+t.chatroom.objectId,t.firstname=t.chatroom.calleeFirstName,t.lastname=t.chatroom.calleeLastName,t.username=t.chatroom.calleeName),this.appSettings=new v({id:t.objectId}),this.appSettings.fetch(),this.appSettings.save({cid:t.objectId,email:t.email||"",firstname:t.firstname||t.username||"",lastname:t.lastname||"",username:t.username||""}),this.appSettings.me=t,this.appSettings=this.appSettings,this.contactCollection=new y([],{firebase:this.appSettings.get("firebaseUrl")+"users/"+this.appSettings.get("cid")+"/contacts"}),this.recentCalls=new g([],{firebase:this.appSettings.get("firebaseUrl")+"history/"+this.appSettings.get("cid")+"/calls"}),this.recentChats=new g([],{firebase:this.appSettings.get("firebaseUrl")+"history/"+this.appSettings.get("cid")+"/chats"}),this.curCall=new m;var W=new O({collection:this.contactCollection}),Y=new T({collection:this.recentChats}),Z=new I({collection:this.recentCalls}),J=new E({collection:this.contactCollection}),G=new M({model:this.appSettings});W.pipe(this._eventOutput),this._eventInput.pipe(W),Y.pipe(this._eventOutput),this._eventInput.pipe(Y),Z.pipe(this._eventOutput),this._eventInput.pipe(Z),J.pipe(this._eventOutput),this._eventInput.pipe(J),G.pipe(this._eventOutput),A.sections=[Y,Z,J,G];var Q=new z(A);this.myLightbox=new p({overlap:!0});var K=new p({overlap:!0}),te=new S({collection:this.contactCollection});Q.pipe(this._eventOutput),te.pipe(this._eventOutput);var ee=new x({}),ie=u.createContext();ie.add(ee),ie.add(this.myLightbox),ie.add(K),this.myLightbox.show(Q),u.pipe(Q),Q.select(Q.options.sections[2].title),this.outgoingCallView=new k({collection:this.recentCalls}),this.incomingCallView=new j({collection:this.recentCalls}),this.connectedCallView=new C({collection:this.recentCalls}),this.outgoingCallView.pipe(this._eventOutput),this.incomingCallView.pipe(this._eventOutput),this.connectedCallView.pipe(this._eventOutput),this.pipe(this.connectedCallView._eventInput),this._eventOutput.on("callEnd",P),this._eventOutput.on("incomingCall",N),this._eventOutput.on("outgoingCall",b),this._eventOutput.on("connectedCall",d),this._eventOutput.on("outGoingCallAccept",l),this._eventOutput.on("editContact",B),this._eventOutput.on("chatContact",_.debounce(R,300)),this._eventOutput.on("showApp",h),this._eventOutput.on("submitContact",H),this._eventOutput.on("chatOn",F),this._eventOutput.on("chatOff",L),this._eventOutput.on("chatRead",D),this._eventOutput.on("loadRecent",a),this._eventOutput.on("updateRecent",r),this._eventOutput.on("clearRecent",c),this._eventOutput.on("deleteItem",n),this._eventOutput.on("deleteFavorite",e),this._eventOutput.on("toggleFavorite",i),this._eventOutput.on("onEngineClick",q),this._eventOutput.on("closeAlert",X),this._eventOutput.on("editContactDone",s),this._eventOutput.on("addContactDone",o),this._eventOutput.on("triggerBackToNoneEditing",U.bind(this)),this.buttonOnclickRespond(),u.on("click",q.bind(this)),window.alert=V,this.chatroom&&alert("Please allow Beepe to use your camera/microphone for phone calls.",!0),this.init(),window._cola_g={},_cola_g.cid=this.appSettings.get("cid")}.bind(this))}function s(t,e){t=JSON.stringify(t),$.ajax({url:"/findusers",type:"get",dataType:"json",data:{query:t},success:function(t){e(t)},error:function(){console.log("error"),e(new m)}})}function o(t,e){if(!l.isMobile()&&window.colabeoBody){var i=new CustomEvent("FromKoala",{detail:{type:t,data:e}});window.colabeoBody.dispatchEvent(i)}}function r(){this.remoteUrl==this.localUrl?$(".sync-button").removeClass("syncing").addClass("synced"):$(".sync-button").removeClass("synced syncing")}function a(t){if("updateUrl"==t.detail.action&&("remote"==t.detail.source?this.remoteUrl=t.detail.url:this.localUrl=t.detail.url,r.bind(this)()),!this.disableNow)if("incoming"==t.detail.action){var e=new m({firstname:t.detail.firstname,lastname:t.detail.lastname,email:t.detail.email,pictureUrl:null,roomId:t.detail.room});this._eventOutput.emit("incomingCall",e)}else this.conn&&this.conn.send(t.detail)}function c(t){this.disableNow=!0,setTimeout(function(){this.disableNow=!1}.bind(this),1e3);var e=t;"chat"==e.action?this._eventOutput.emit("incomingChat",e):(l.isMobile()&&e.data&&e.data.url&&"urlChange"==e.data.action&&window.open(e.data.url),o("event",e))}var u=e("famous/engine"),h=(e("famous/surface"),e("famous/transitions/easing"),e("famous/event-handler")),l=e("helpers"),p=e("light-box"),d=e("models"),f=d.Contact,m=d.Call,g=d.RecentsCollection,v=d.Settings,y=d.ContactCollection,b=e("views"),w=b.AlertView,x=b.CameraView,S=b.AddContactView,k=b.OutgoingCallView,j=b.IncomingCallView,C=b.ConnectedCallView,O=b.FavoritesSectionView,T=b.ChatsSectionView,I=b.RecentsSectionView,E=b.ContactsSectionView,M=b.SettingsSectionView,A=e("config"),z=e("app"),N={iceServers:[{url:"stun:stun.l.google.com:19302"}]};n.prototype.init=function(){this.iceServerConfig=N,this.getXirsys(),this.disableNow=!1;var t=this.appSettings.get("cid"),e=this.appSettings.get("firstname")+" "+this.appSettings.get("lastname");this.listenRef=new Firebase(this.appSettings.get("firebaseUrl")+"calls/"+t),this.listenRef.onDisconnect().remove(),l.isMobile()?(window._disableResize=!0,$("body").addClass("mobile"),void 0==this.appSettings.get("blur")&&this.appSettings.set("blur",!1)):void 0==this.appSettings.get("blur")&&this.appSettings.set("blur",!0),this.setupCallListener(),this.setupVideo(),this.setupSettingsListener(),this.loadConnected(function(t){if(t&&Array.isArray(t)){var e={};t.map(function(t){e[t.provider]=!0}),this.appSettings.save({linkAccounts:e})}}.bind(this)),util.supports.sctp=!1,o("event",{data:{action:"syncID",id:t,name:e}}),window.colabeoBody&&window.colabeoBody.addEventListener("FromExtension",a.bind(this))},n.prototype.setupSettingsListener=function(){this._eventOutput.on("outgoingChat",function(t){this.outgoingChat(t.content,t.type)}.bind(this)),this._eventOutput.on("sendChat",this.sendChat.bind(this)),this._eventOutput.on("setCamera",function(){this.setCamera()}.bind(this)),this._eventOutput.on("setVideo",function(){this.setVideo()}.bind(this)),this._eventOutput.on("setBlur",function(){this.setBlur()}.bind(this)),this._eventOutput.on("setAudio",function(){this.setAudio()}.bind(this)),this._eventOutput.on("onSocialLink",function(t){var e;"facebook"==t?e="/connect/facebook/email":"google"==t&&(e="/connect/google/profile%20email%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fplus.login%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fplus.me"),e&&$.oauthpopup({path:e,callback:function(){setTimeout(function(){$("div.import-contact#"+t+":not(.done)").click().addClass("done")}.bind(this),300)}})}),$("body").on("change","#audio, #video",function(t){this.appSettings.set($(t.target)[0].id,$(t.target).prop("checked"))}.bind(this))},n.prototype.setupCallListener=function(){function t(t){var e=t.val().firstname||t.val().person.split(" ")[0],i=t.val().lastname||t.val().person.split(" ")[1],n=t.val().email,s=t.val().pictureUrl||!1,o="unknown"==t.val().name?"":t.val().name,r=t.name(),a=new m({firstname:e,lastname:i,email:n,pictureUrl:s,roomId:r,caller:o});this._eventOutput.emit("incomingCall",a)}function e(t){var e=t.val().state;if("answered"==e){var i=this.myLightbox.curRenderable;i instanceof j&&i.stop()}}function i(){this._eventOutput.emit("callEnd",{exit:!1}),this.exitRoom()}function n(){this.callRef&&this.callRef.remove(),this.exitRoom()}function s(){this.listenRef&&this.listenRef.remove(),this.exitRoom(),this.callNotification&&this.callNotification.myNotify&&this.callNotification.myNotify.close()}function o(t){if(t instanceof m){var e=t.get("caller"),i=this.appSettings.get("cid"),n=t.get("roomId");n&&(this.listenRef.child(n).update({state:"answered"}),this.joinRoom(e,i,n))}this.callNotification&&this.callNotification.myNotify&&this.callNotification.myNotify.close()}function r(t){function e(t){function e(t){var e=t.val().state;if("answered"==e){var i=this.appSettings.get("cid"),s=n,o=t.name();this.startRoom(i,s,o),this._eventOutput.emit("outGoingCallAccept",s)}}function i(){this._eventOutput.emit("callEnd",{exit:!1}),this.exitRoom()}{var n=t.get("cid");t.get("provider")}if(n){var s=new Firebase(this.appSettings.get("firebaseUrl")+"history/"+n+"/calls"),o={firstname:this.appSettings.get("firstname"),lastname:this.appSettings.get("lastname"),email:this.appSettings.get("email"),pictureUrl:!1,type:"incoming",time:Firebase.ServerValue.TIMESTAMP,cid:this.appSettings.get("cid")};s.push(o),this.callRef=new Firebase(this.appSettings.get("firebaseUrl")+"calls/"+n),this.callRef.onDisconnect().remove();var r=this.appSettings.get("firstname")+" "+this.appSettings.get("lastname"),a={name:this.appSettings.get("cid"),person:r,firstname:this.appSettings.get("firstname"),lastname:this.appSettings.get("lastname"),state:"calling"};this.appSettings.get("email")&&(a.email=this.appSettings.get("email")),this.appSettings.get("username")&&(a.username=this.appSettings.get("username")),this.callRef.once("value",function(t){null==t.val()&&(this.callRef.push(a),this.callRef.once("child_changed",e.bind(this)),this.callRef.once("child_removed",i.bind(this)))}.bind(this))}}return this.localStream?void(t.get("cid")?e.bind(this)(t):this.lookup(t,e.bind(this),this.onUserNotFound.bind(this))):void alert("Please allow camera/microphone access for Beepe")}function a(){this.onSyncButton()}this.listenRef.on("child_added",t.bind(this)),this.listenRef.on("child_changed",e.bind(this)),this.listenRef.on("child_removed",i.bind(this)),this._eventOutput.on("outgoingCallEnd",n.bind(this)),this._eventOutput.on("incomingCallEnd",s.bind(this)),this._eventOutput.on("incomingCallAnswer",o.bind(this)),this._eventOutput.on("outgoingCall",r.bind(this)),this._eventOutput.on("sync",a.bind(this))},n.prototype.setupVideo=function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia&&this.setCamera()},n.prototype.initLocalMedia=function(t){var t=_.extend({audio:!0,video:!0},t);navigator.getUserMedia(t,function(e){if($(".local-video video").prop("src",URL.createObjectURL(e)),this.localStream=e,this.cleanRoom(),this.setBlur(),this.setAudio(),t.video?$(".camera").removeClass("off"):$(".camera").addClass("off"),this._eventOutput.emit("closeAlert"),this.chatroom){var i=new m({firstname:this.chatroom.callerFirstName||this.chatroom.callerName||"",lastname:this.chatroom.callerLastName||"",email:this.chatroom.callerAccountId||"",cid:this.chatroom.caller||"",provider:this.chatroom.calleeAccountProvider||""});this._eventOutput.emit("outgoingCall",i)}}.bind(this),function(){$(".camera").addClass("off")}.bind(this))},n.prototype.initRemoteMedia=function(t){this.existingCall&&this.existingCall.close(),t.on("stream",function(t){$(".remote-video video").prop("src",URL.createObjectURL(t))}.bind(this)),this.existingCall=t,t.on("close",this.cleanRoom.bind(this))},n.prototype.startRoom=function(t,e,i){i&&(i="A"+i+"Z"),this.peer=new Peer(i,{host:this.appSettings.get("pHost"),port:this.appSettings.get("pPort"),secure:this.appSettings.get("pSecure"),config:this.iceServerConfig}),this.peer.on("open",function(){}.bind(this)),this.peer.on("call",function(t){t.answer(this.localStream),this.initRemoteMedia(t),o("event",{data:{action:"setProperty",roomId:i}})}.bind(this)),this.peer.on("connection",function(t){this.setupPeerConn(t)}.bind(this)),this.peer.on("error",function(){}.bind(this))},n.prototype.joinRoom=function(t,e,i){i&&(i="A"+i+"Z"),this.peer=new Peer({host:this.appSettings.get("pHost"),port:this.appSettings.get("pPort"),secure:this.appSettings.get("pSecure"),config:this.iceServerConfig}),setTimeout(function(){var t=this.peer.call(i,this.localStream);this.initRemoteMedia(t),o("event",{data:{action:"setProperty",roomId:i}});var e=this.peer.connect(i,{label:"chat",reliable:!1});this.setupPeerConn(e)}.bind(this),1e3)},n.prototype.getXirsys=function(t){$.post("https://api.xirsys.com/getIceServers",{domain:"dashboard.colabeo.com",room:"default",application:"default",ident:"chapman",secret:"02f0e22c-764e-4939-8042-4ea028e9b8e0",secure:0},function(e){if(e){var i=JSON.parse(e),n=i.d;n&&(this.iceServerConfig={iceServers:N.iceServers.concat(n.iceServers)})}t&&t(iceServer)}.bind(this))},n.prototype.setupPeerConn=function(t){this.conn=t,this.conn.on("open",function(){this.conn.on("data",c.bind(this))}.bind(this))},n.prototype.exitRoom=function(){this.existingCall&&this.existingCall.close(),o("event",{data:{action:"setProperty",roomId:null}}),o("event",{data:{action:"endCall"}}),this.cleanRoom()},n.prototype.cleanRoom=function(){this.peer&&this.peer.destroy(),this.conn&&this.conn.close()},n.prototype.setCamera=function(){this.initLocalMedia({video:this.appSettings.get("camera"),audio:!0})},n.prototype.setBlur=function(){var t=this.appSettings.get("blur");t?$(".camera").removeClass("fakeblur"):$(".camera").addClass("fakeblur")},n.prototype.setAudio=function(){var t=this.appSettings.get("audio");if(this.localStream)for(var e=this.localStream.getAudioTracks(),i=0,n=e.length;n>i;i++)e[i].enabled=t},n.prototype.setVideo=function(){var t=this.appSettings.get("video"),e=this.appSettings.get("camera");if(this.localStream&&e){for(var i=this.localStream.getVideoTracks(),n=0,s=i.length;s>n;n++)i[n].enabled=t;t?$(".camera").removeClass("off"):$(".camera").addClass("off")}},n.prototype.lookup=function(t,e,i){var n=[];["email","phone","facebook","google","linkedin","github","yammer"].map(function(e){t.get(e)&&n.push({provider:e,eid:t.get(e).id||t.get(e)})}),n.length?s(n,function(s){if(s.length){var o,r=_.last(s);r.user&&r.user.objectId?o=r.user.objectId:r.objectId&&(o=r.objectId),console.log(t),t.set({cid:o}),e&&e(t)}else i&&i(t,n)}.bind(this)):alert("This contact is empty.")},n.prototype.sendChat=function(t){var e=t.message,i=t.contact.get("cid");if(i){var n=this.appSettings.get("cid"),s=new Firebase(this.appSettings.get("firebaseUrl")+"chats/"+i+"/"+n),o=new Firebase(this.appSettings.get("firebaseUrl")+"chats/"+n+"/"+i),r={content:e,type:"text",from:n,time:Firebase.ServerValue.TIMESTAMP};s.push(r),o.push(r);var a=new Firebase(this.appSettings.get("firebaseUrl")+"history/"+i+"/chats/"+n),c={firstname:this.appSettings.get("firstname"),lastname:this.appSettings.get("lastname"),email:this.appSettings.get("email"),pictureUrl:!1,time:Firebase.ServerValue.TIMESTAMP,cid:this.appSettings.get("cid"),content:e,type:"text",read:!1};a.set(c);var u=new Firebase(this.appSettings.get("firebaseUrl")+"history/"+n+"/chats/"+i),c={firstname:t.contact.get("firstname"),lastname:t.contact.get("lastname"),email:t.contact.get("email"),pictureUrl:!1,time:Firebase.ServerValue.TIMESTAMP,cid:i,content:e,type:"text",read:!0};u.set(c)}},n.prototype.loadUser=function(t){function e(){var t=(window.location.search||"?").substr(1),e={};return t.replace(/([^&=]+)=?([^&]*)(?:&+|$)/g,function(t,i,n){(e[i]=e[i]||[]).push(n)}),e}if("/call"==location.pathname||location.pathname.match("/dcr/")){var i=e(),n=i.r?i.r[0]:location.pathname.split("/")[2];n&&$.ajax({url:"/chatroom?id="+n,type:"get",dataType:"json",success:function(e){t&&t({chatroom:e})},error:function(){console.log("error"),t&&t({})}})}else $.ajax({url:"/me",type:"get",dataType:"json",success:function(e){t&&t(e)},error:function(){console.log("error"),t&&t({})}})},n.prototype.loadConnected=function(t){$.ajax({url:"/connected",type:"get",dataType:"json",success:function(e){t&&t(e)},error:function(){console.log("error"),t&&t({})}})},n.prototype.loadContact=function(t,e){$.ajax({url:"/contact/"+t,type:"get",dataType:"json",success:function(t){e&&e(t)},error:function(){console.log("error"),e&&e({})}})},n.prototype.setupChatroom=function(t,e,i){for(var n=0;n<e.length;n++){var s=e[n];if(s){var o={provider:s.provider,eid:s.eid,name:t.get("firstname")+" "+t.get("lastname"),firstname:t.get("firstname"),lastname:t.get("lastname"),email:t.get("email")};$.ajax({url:"/chatroom",type:"post",data:{callee:JSON.stringify(o),e:1,d:0},success:function(e){t.set({dcr:e.chatid}),i&&i(t)},error:function(){}})}}},n.prototype.onSyncButton=function(){o("event",{data:{action:"sync"}})},n.prototype.outgoingChat=function(t,e){e||(e="text"),this.conn&&this.conn.send({content:t,type:e,action:"chat"})},n.prototype.buttonOnclickRespond=function(){this.activedButton=void 0,this.activedClassList=".touchable",$(document).on("mousedown touchstart",this.activedClassList,function(t){this.activedButton=$(t.currentTarget),this.activedButton.addClass("touchable-active")}.bind(this)),$(document).on("mouseout",this.activedClassList,function(){this.activedButton&&(this.activedButton.removeClass("touchable-active"),this.activedButton.one("mouseover",function(){this.activedButton.addClass("touchable-active")}.bind(this)))}.bind(this)),$(document).on("mouseup touchend",function(){this.activedButton&&setTimeout(function(){this.activedButton.removeClass("touchable-active"),this.activedButton.off(),this.activedButton=void 0}.bind(this),200)}.bind(this))},n.prototype.onUserNotFound=function(t,e){alert("The user you are reaching is not a Beepe user. Please send an invite."),t.get("dcr")?this._eventOutput.emit("editContact",t):this.setupChatroom(t,e,function(){this._eventOutput.emit("editContact",t)}.bind(this)),this.outgoingCallView.stopCalltone()},i.exports=n}.bind(this)),require.register("app/main/app.js",function(t,e,i){function n(t){s.apply(this,arguments),this.layout=new u,this.header=new f(this.options.header),this.navigation=new l(this.options.navigation),this.contentArea=new h(this.options.content),this.layout.id.header.add(this.header),this.layout.id.footer.add(a.transformInFront).add(this.navigation),this.layout.id.content.add(a.transformBehind).add(this.contentArea),this._eventInput.pipe(this.contentArea),o.setOutputHandler(this,this.navigation),this._eventInput=new o,o.setInputHandler(this,this._eventInput),this._eventOutput=new o,o.setOutputHandler(this,this._eventOutput),this._currentSection=void 0,this._sections={},this._sectionTitles={},this.options.sections&&this.initSections(this.options.sections),this.navigation.on("select",function(t){this._eventOutput.emit("triggerBackToNoneEditing"),this._eventOutput.emit("updateRecent"),$("body").removeClass("editing"),this._currentSection=t.id,this.header.show(this._sectionTitles[t.id]),this.contentArea.show(this._sections[t.id].get())}.bind(this));var e=t.sections[0].collection;e.on("all",function(){var t=e.getUnreadCount()||"",i=$(this.navigation.buttons[0].options.content);i.find(".badge").text(t),this.navigation.buttons[0].setOptions({content:i[0].outerHTML})}.bind(this)),this._add(this.layout)}var s=e("famous/view"),o=e("famous/event-handler"),r=e("famous/render-node"),a=e("famous/utilities/utility"),c=e("famous/transform"),u=e("famous/views/header-footer-layout"),h=e("famous/views/edge-swapper"),l=e("famous/widgets/tab-bar"),p=e("templates"),d=e("row-view"),f=d.HeaderBar;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={header:{size:[void 0,50],inTransition:!0,outTransition:!0,look:{size:[void 0,50],classes:["header"]}},navigation:{size:[void 0,50],direction:a.Direction.X,buttons:{onClasses:["navigation","on"],offClasses:["navigation","off"],inTransition:!0,outTransition:!0}},content:{inTransition:!0,outTransition:!0,overlap:!0},inTransform:c.identity,outTransform:c.identity,inOpacity:0,outOpacity:0,inTransition:{duration:500},outTransition:{duration:200}},n.prototype.getState=function(){return this._currentSection},n.prototype.section=function(t){return t in this._sections||(this._sections[t]=new r,this._sections[t].setOptions=function(e){this._sectionTitles[t]=e.title,this.navigation.defineSection(t,{content:p.navigationButton(e.navigation)})}.bind(this)),this._sections[t]},n.prototype.select=function(t){return this._currentSection=t,t in this._sections?(this.navigation.select(t),!0):!1},n.prototype.initSections=function(t){_.each(t,function(t){var e=t.title;this.section(e).setOptions({title:t.title,navigation:t.navigation}),this.section(e).add(t),t.pipe&&t.pipe(this._eventInput)
}.bind(this))},n.prototype.onHeaderClick=function(t){this.header._surfaces[t.id].eventHandled=!0,this.header._surfaces[t.id].on("click",function(t){switch(t.target.id){case"clear-button":this._eventOutput.emit("clearRecent");break;case"add-contact":this._eventOutput.emit("editContact");break;case"edit-contact":$("body").toggleClass("editing");break;case"recent-toggle":this._eventOutput.emit("loadRecent",t)}}.bind(this)),this.header._surfaces[t.id].pipe(this._eventOutput)},i.exports=n}.bind(this)),require.register("app/main/config.js",function(t,e,i){var n=e("famous/utilities/utility").Direction.X;i.exports={debug:!1,header:{look:{classes:["header"],size:[void 0,50],side:"top"},feel:{inTransition:{method:"wall",period:300,dampingRatio:0,restitution:.2},outTransition:{method:"spring",period:300,dampingRatio:.5,velocity:0},overlap:!0}},navigation:{look:{side:"bottom",direction:n,size:[void 0,50],onClasses:["navigation","on"],offClasses:["navigation","off"]},feel:{inTransition:{curve:"easeInOut",duration:150},outTransition:{curve:"easeInOut",duration:150}}},content:{feel:{inTransition:{method:"spring",period:1e3,dampingRatio:.5,velocity:0},outTransition:{method:"spring",period:600,dampingRatio:.5,velocity:0},overlap:!0}}}}.bind(this)),require.config({map:{"famous_modules/famous/polyfills/_git_master/index.js":{"./classList.js":"famous_modules/famous/polyfills/_git_master/classList.js","./functionPrototypeBind.js":"famous_modules/famous/polyfills/_git_master/functionPrototypeBind.js","./requestAnimationFrame.js":"famous_modules/famous/polyfills/_git_master/requestAnimationFrame.js"},"famous_modules/famous/polyfills/_git_master/classList.js":{},"famous_modules/famous/polyfills/_git_master/functionPrototypeBind.js":{},"famous_modules/famous/polyfills/_git_master/requestAnimationFrame.js":{},"famous_modules/famous/transitions/easing/_git_master/index.js":{},"famous_modules/famous/event-handler/_git_master/index.js":{},"famous_modules/famous/utilities/utility/_git_master/index.js":{},"famous_modules/famous/options-manager/_git_master/index.js":{"famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js"},"famous_modules/famous/transform/_git_master/index.js":{},"app/models/call-collection.js":{call:"app/models/call.js"},"app/models/call.js":{},"app/models/chat-collection.js":{conversation:"app/models/conversation.js"},"app/models/contact-collection.js":{contact:"app/models/contact.js"},"app/models/contact.js":{},"app/models/conversation-collection.js":{conversation:"app/models/conversation.js"},"app/models/conversation.js":{},"app/models/index.js":{call:"app/models/call.js","recents-collection":"app/models/recents-collection.js",contact:"app/models/contact.js","contact-collection":"app/models/contact-collection.js",conversation:"app/models/conversation.js","conversation-collection":"app/models/conversation-collection.js","chat-collection":"app/models/chat-collection.js",settings:"app/models/settings.js","social-contact-collection":"app/models/social-contact-collection.js"},"app/models/recents-collection.js":{call:"app/models/call.js"},"app/models/settings.js":{},"app/models/social-contact-collection.js":{contact:"app/models/contact.js"},"app/vendor/index.js":{zepto:"app/vendor/zepto.js",underscore:"app/vendor/underscore.js",backbone:"app/vendor/backbone.js",handlebars:"app/vendor/handlebars.js","backbone.localStorage":"app/vendor/backbone.localStorage.js",firebase:"app/vendor/firebase.js","backbone-firebase":"app/vendor/backbone-firebase.js",peer:"app/vendor/peer.js",notify:"app/vendor/notify.js",oauthpopup:"app/vendor/oauthpopup.js"},"app/vendor/att.js":{},"app/vendor/backbone-firebase.js":{},"app/vendor/backbone.js":{underscore:"app/vendor/underscore.js"},"app/vendor/backbone.localStorage.js":{underscore:"app/vendor/underscore.js",backbone:"app/vendor/backbone.js"},"app/vendor/firebase.js":{},"app/vendor/handlebars.js":{},"app/vendor/notify.js":{},"app/vendor/oauthpopup.js":{},"app/vendor/peer.js":{},"app/vendor/underscore.js":{},"app/vendor/zepto.js":{},"app/custom/helpers/helpers.js":{},"app/custom/templates/templates.js":{helpers:"app/custom/helpers/helpers.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js"},"famous_modules/famous/entity/_git_master/index.js":{},"famous_modules/famous/surface/_git_master/index.js":{"famous/entity":"famous_modules/famous/entity/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js"},"famous_modules/famous/spec-parser/_git_master/index.js":{"famous/transform":"famous_modules/famous/transform/_git_master/index.js"},"famous_modules/famous/render-node/_git_master/index.js":{"famous/entity":"famous_modules/famous/entity/_git_master/index.js","famous/spec-parser":"famous_modules/famous/spec-parser/_git_master/index.js"},"famous_modules/famous/view/_git_master/index.js":{"famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/options-manager":"famous_modules/famous/options-manager/_git_master/index.js","famous/render-node":"famous_modules/famous/render-node/_git_master/index.js"},"famous_modules/famous/views/header-footer-layout/_git_master/index.js":{"famous/entity":"famous_modules/famous/entity/_git_master/index.js","famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js"},"famous_modules/famous/element-allocator/_git_master/index.js":{},"famous_modules/famous/transitions/multiple-transition/_git_master/index.js":{"famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js"},"famous_modules/famous/transitions/tween-transition/_git_master/index.js":{"famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js"},"famous_modules/famous/transitions/transitionable/_git_master/index.js":{"famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/transitions/multiple-transition":"famous_modules/famous/transitions/multiple-transition/_git_master/index.js","famous/transitions/tween-transition":"famous_modules/famous/transitions/tween-transition/_git_master/index.js"},"famous_modules/famous/context/_git_master/index.js":{"famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/spec-parser":"famous_modules/famous/spec-parser/_git_master/index.js","famous/element-allocator":"famous_modules/famous/element-allocator/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/transitions/transitionable":"famous_modules/famous/transitions/transitionable/_git_master/index.js"},"famous_modules/famous/engine/_git_master/index.js":{"famous/context":"famous_modules/famous/context/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/options-manager":"famous_modules/famous/options-manager/_git_master/index.js"},"famous_modules/famous/modifier/_git_master/index.js":{"famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/transitions/transitionable":"famous_modules/famous/transitions/transitionable/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js"},"app/custom/light-box/light-box.js":{"famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js"},"famous_modules/famous/views/light-box/_git_master/index.js":{"famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js"},"famous_modules/famous/views/edge-swapper/_git_master/index.js":{"famous/entity":"famous_modules/famous/entity/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/views/light-box":"famous_modules/famous/views/light-box/_git_master/index.js"},"famous_modules/famous/widgets/title-bar/_git_master/index.js":{"famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/views/light-box":"famous_modules/famous/views/light-box/_git_master/index.js"},"famous_modules/famous/view-sequence/_git_master/index.js":{},"famous_modules/famous/views/grid-layout/_git_master/index.js":{"famous/entity":"famous_modules/famous/entity/_git_master/index.js","famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/view-sequence":"famous_modules/famous/view-sequence/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/options-manager":"famous_modules/famous/options-manager/_git_master/index.js"},"famous_modules/famous/views/fader/_git_master/index.js":{"famous/transitions/transitionable":"famous_modules/famous/transitions/transitionable/_git_master/index.js"},"famous_modules/famous/views/image-fader/_git_master/index.js":{"famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/views/fader":"famous_modules/famous/views/fader/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js"},"famous_modules/famous/widgets/toggle-button/_git_master/index.js":{"famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/views/image-fader":"famous_modules/famous/views/image-fader/_git_master/index.js"},"famous_modules/famous/widgets/tab-bar/_git_master/index.js":{"famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/view":"famous_modules/famous/view/_git_master/index.js","famous/views/grid-layout":"famous_modules/famous/views/grid-layout/_git_master/index.js","famous/widgets/toggle-button":"famous_modules/famous/widgets/toggle-button/_git_master/index.js"},"famous_modules/famous/group/_git_master/index.js":{"famous/context":"famous_modules/famous/context/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js"},"famous_modules/famous/input/mouse-sync/_git_master/index.js":{"famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js"},"app/custom/up-down-transform/up-down-transform.js":{"famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/transitions/easing":"famous_modules/famous/transitions/easing/_git_master/index.js"},"app/custom/conversation-surface/conversation-surface.js":{"famous/surface":"famous_modules/famous/surface/_git_master/index.js"},"app/custom/sound-player/sound-player.js":{"buffer-loader":"app/custom/sound-player/buffer-loader.js"},"app/custom/sound-player/buffer-loader.js":{},"famous_modules/famous/input/touch-tracker/_git_master/index.js":{"famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js"},"famous_modules/famous/input/touch-sync/_git_master/index.js":{"famous/input/touch-tracker":"famous_modules/famous/input/touch-tracker/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js"},"app/custom/custom-input-sync/index.js":{"touch-sync":"app/custom/custom-input-sync/touch-sync.js","mouse-sync":"app/custom/custom-input-sync/mouse-sync.js"},"app/custom/custom-input-sync/mouse-sync.js":{"famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js"},"app/custom/custom-input-sync/touch-sync.js":{"famous/input/touch-tracker":"famous_modules/famous/input/touch-tracker/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js"},"famous_modules/famous/input/scroll-sync/_git_master/index.js":{"famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js"},"famous_modules/famous/input/generic-sync/_git_master/index.js":{"famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/input/touch-sync":"famous_modules/famous/input/touch-sync/_git_master/index.js","famous/input/scroll-sync":"famous_modules/famous/input/scroll-sync/_git_master/index.js"},"famous_modules/famous/math/vector/_git_master/index.js":{},"famous_modules/famous/physics/bodies/particle/_git_master/index.js":{"famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/math/vector":"famous_modules/famous/math/vector/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js"},"famous_modules/famous/physics/forces/force/_git_master/index.js":{"famous/math/vector":"famous_modules/famous/math/vector/_git_master/index.js"},"famous_modules/famous/physics/forces/drag/_git_master/index.js":{"famous/physics/forces/force":"famous_modules/famous/physics/forces/force/_git_master/index.js"},"famous_modules/famous/physics/forces/spring/_git_master/index.js":{"famous/physics/forces/force":"famous_modules/famous/physics/forces/force/_git_master/index.js","famous/math/vector":"famous_modules/famous/math/vector/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js"},"famous_modules/famous/physics/constraints/constraint/_git_master/index.js":{},"famous_modules/famous/physics/integrator/symplectic-euler/_git_master/index.js":{},"famous_modules/famous/math/quaternion/_git_master/index.js":{},"famous_modules/famous/physics/bodies/body/_git_master/index.js":{"famous/physics/bodies/particle":"famous_modules/famous/physics/bodies/particle/_git_master/index.js","famous/math/vector":"famous_modules/famous/math/vector/_git_master/index.js","famous/math/quaternion":"famous_modules/famous/math/quaternion/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js"},"famous_modules/famous/physics/bodies/circle/_git_master/index.js":{"famous/physics/bodies/body":"famous_modules/famous/physics/bodies/body/_git_master/index.js"},"famous_modules/famous/physics/bodies/rectangle/_git_master/index.js":{"famous/physics/bodies/body":"famous_modules/famous/physics/bodies/body/_git_master/index.js"},"famous_modules/famous/physics/engine/_git_master/index.js":{"famous/physics/bodies/particle":"famous_modules/famous/physics/bodies/particle/_git_master/index.js","famous/physics/bodies/body":"famous_modules/famous/physics/bodies/body/_git_master/index.js","famous/physics/bodies/circle":"famous_modules/famous/physics/bodies/circle/_git_master/index.js","famous/physics/bodies/rectangle":"famous_modules/famous/physics/bodies/rectangle/_git_master/index.js","famous/physics/forces/force":"famous_modules/famous/physics/forces/force/_git_master/index.js","famous/physics/constraints/constraint":"famous_modules/famous/physics/constraints/constraint/_git_master/index.js","famous/physics/integrator/symplectic-euler":"famous_modules/famous/physics/integrator/symplectic-euler/_git_master/index.js"},"famous_modules/famous/views/scrollview/_git_master/index.js":{"famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/physics/engine":"famous_modules/famous/physics/engine/_git_master/index.js","famous/physics/bodies/particle":"famous_modules/famous/physics/bodies/particle/_git_master/index.js","famous/physics/forces/drag":"famous_modules/famous/physics/forces/drag/_git_master/index.js","famous/physics/forces/spring":"famous_modules/famous/physics/forces/spring/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/input/generic-sync":"famous_modules/famous/input/generic-sync/_git_master/index.js","famous/view-sequence":"famous_modules/famous/view-sequence/_git_master/index.js","famous/group":"famous_modules/famous/group/_git_master/index.js","famous/entity":"famous_modules/famous/entity/_git_master/index.js"},"famous_modules/famous/transitions/spring-transition/_git_master/index.js":{"famous/physics/engine":"famous_modules/famous/physics/engine/_git_master/index.js","famous/physics/forces/spring":"famous_modules/famous/physics/forces/spring/_git_master/index.js","famous/math/vector":"famous_modules/famous/math/vector/_git_master/index.js"},"app/custom/vertical-scroll-view/vertical-scroll-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/views/scrollview":"famous_modules/famous/views/scrollview/_git_master/index.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js"},"famous_modules/famous/physics/constraints/wall/_git_master/index.js":{"famous/physics/constraints/constraint":"famous_modules/famous/physics/constraints/constraint/_git_master/index.js","famous/math/vector":"famous_modules/famous/math/vector/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js"},"famous_modules/famous/transitions/wall-transition/_git_master/index.js":{"famous/physics/engine":"famous_modules/famous/physics/engine/_git_master/index.js","famous/physics/forces/spring":"famous_modules/famous/physics/forces/spring/_git_master/index.js","famous/physics/constraints/wall":"famous_modules/famous/physics/constraints/wall/_git_master/index.js","famous/math/vector":"famous_modules/famous/math/vector/_git_master/index.js"},"app/custom/row-view/header-bar.js":{"famous/widgets/title-bar":"famous_modules/famous/widgets/title-bar/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js"},"app/custom/row-view/header-view.js":{"famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js",templates:"app/custom/templates/templates.js","row-view":"app/custom/row-view/row-view.js"},"app/custom/row-view/index.js":{"row-view":"app/custom/row-view/row-view.js","item-view":"app/custom/row-view/item-view.js","item-view-2S":"app/custom/row-view/item-view-2S.js","header-view":"app/custom/row-view/header-view.js","header-bar":"app/custom/row-view/header-bar.js"},"app/custom/row-view/item-view-2S.js":{"famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/input/generic-sync":"famous_modules/famous/input/generic-sync/_git_master/index.js","famous/input/mouse-sync":"famous_modules/famous/input/mouse-sync/_git_master/index.js","famous/input/touch-sync":"famous_modules/famous/input/touch-sync/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/transitions/easing":"famous_modules/famous/transitions/easing/_git_master/index.js","famous/transitions/transitionable":"famous_modules/famous/transitions/transitionable/_git_master/index.js","famous/transitions/wall-transition":"famous_modules/famous/transitions/wall-transition/_git_master/index.js","famous/transitions/spring-transition":"famous_modules/famous/transitions/spring-transition/_git_master/index.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js",templates:"app/custom/templates/templates.js","row-view":"app/custom/row-view/row-view.js",helpers:"app/custom/helpers/helpers.js"},"app/custom/row-view/item-view.js":{"famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/input/generic-sync":"famous_modules/famous/input/generic-sync/_git_master/index.js","famous/input/mouse-sync":"famous_modules/famous/input/mouse-sync/_git_master/index.js","famous/input/touch-sync":"famous_modules/famous/input/touch-sync/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/transitions/easing":"famous_modules/famous/transitions/easing/_git_master/index.js","famous/transitions/transitionable":"famous_modules/famous/transitions/transitionable/_git_master/index.js","famous/transitions/wall-transition":"famous_modules/famous/transitions/wall-transition/_git_master/index.js","famous/transitions/spring-transition":"famous_modules/famous/transitions/spring-transition/_git_master/index.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js",templates:"app/custom/templates/templates.js","row-view":"app/custom/row-view/row-view.js",helpers:"app/custom/helpers/helpers.js"},"app/custom/row-view/row-view.js":{"famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/view":"famous_modules/famous/view/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js"},"app/views/add-contact-view.js":{"famous/views/header-footer-layout":"famous_modules/famous/views/header-footer-layout/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/view":"famous_modules/famous/view/_git_master/index.js","famous/views/edge-swapper":"famous_modules/famous/views/edge-swapper/_git_master/index.js","up-down-transform":"app/custom/up-down-transform/up-down-transform.js",templates:"app/custom/templates/templates.js",helpers:"app/custom/helpers/helpers.js",models:"app/models/index.js","import-contact-view":"app/views/import-contact-view.js"},"app/views/alert-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/transitions/easing":"famous_modules/famous/transitions/easing/_git_master/index.js","light-box":"app/custom/light-box/light-box.js"},"app/views/camera-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js"},"app/views/chat-item-view.js":{templates:"app/custom/templates/templates.js","row-view":"app/custom/row-view/index.js"},"app/views/chats-section-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","vertical-scroll-view":"app/custom/vertical-scroll-view/vertical-scroll-view.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js",templates:"app/custom/templates/templates.js","chat-item-view":"app/views/chat-item-view.js"},"app/views/connected-call-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js",templates:"app/custom/templates/templates.js",models:"app/models/index.js","conversation-view":"app/views/conversation-view.js"},"app/views/contact-item-view.js":{templates:"app/custom/templates/templates.js","row-view":"app/custom/row-view/index.js"},"app/views/contacts-scroll-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/views/header-footer-layout":"famous_modules/famous/views/header-footer-layout/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/input/generic-sync":"famous_modules/famous/input/generic-sync/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/transitions/easing":"famous_modules/famous/transitions/easing/_git_master/index.js","custom-input-sync":"app/custom/custom-input-sync/index.js",templates:"app/custom/templates/templates.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","vertical-scroll-view":"app/custom/vertical-scroll-view/vertical-scroll-view.js","contact-item-view":"app/views/contact-item-view.js","row-view":"app/custom/row-view/index.js",helpers:"app/custom/helpers/helpers.js"},"app/views/contacts-section-view.js":{"contacts-scroll-view":"app/views/contacts-scroll-view.js",templates:"app/custom/templates/templates.js"},"app/views/contacts-section-view2.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/views/header-footer-layout":"famous_modules/famous/views/header-footer-layout/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/input/generic-sync":"famous_modules/famous/input/generic-sync/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/transitions/easing":"famous_modules/famous/transitions/easing/_git_master/index.js","custom-input-sync":"app/custom/custom-input-sync/index.js",templates:"app/custom/templates/templates.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","vertical-scroll-view":"app/custom/vertical-scroll-view/vertical-scroll-view.js","contact-item-view":"app/views/contact-item-view.js","row-view":"app/custom/row-view/index.js"},"app/views/conversation-item-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","conversation-surface":"app/custom/conversation-surface/conversation-surface.js",helpers:"app/custom/helpers/helpers.js"},"app/views/conversation-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/views/scrollview":"famous_modules/famous/views/scrollview/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/views/header-footer-layout":"famous_modules/famous/views/header-footer-layout/_git_master/index.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js","famous/audio/sound-player":"app/custom/sound-player/sound-player.js","famous/transitions/transitionable":"famous_modules/famous/transitions/transitionable/_git_master/index.js","famous/transitions/wall-transition":"famous_modules/famous/transitions/wall-transition/_git_master/index.js",templates:"app/custom/templates/templates.js","vertical-scroll-view":"app/custom/vertical-scroll-view/vertical-scroll-view.js","conversation-item-view":"app/views/conversation-item-view.js",models:"app/models/index.js",helpers:"app/custom/helpers/helpers.js"},"app/views/favorite-item-view.js":{templates:"app/custom/templates/templates.js","row-view":"app/custom/row-view/index.js"},"app/views/favorites-section-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","vertical-scroll-view":"app/custom/vertical-scroll-view/vertical-scroll-view.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js",templates:"app/custom/templates/templates.js","favorite-item-view":"app/views/favorite-item-view.js"},"app/views/import-contact-view.js":{"famous/views/header-footer-layout":"famous_modules/famous/views/header-footer-layout/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/view":"famous_modules/famous/view/_git_master/index.js","social-scroll-view":"app/views/social-scroll-view.js"},"app/views/incoming-call-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/transitions/easing":"famous_modules/famous/transitions/easing/_git_master/index.js","famous/audio/sound-player":"app/custom/sound-player/sound-player.js","light-box":"app/custom/light-box/light-box.js",templates:"app/custom/templates/templates.js",models:"app/models/index.js"},"app/views/index.js":{"add-contact-view":"app/views/add-contact-view.js","alert-view":"app/views/alert-view.js","camera-view":"app/views/camera-view.js","connected-call-view":"app/views/connected-call-view.js","contacts-scroll-view":"app/views/contacts-scroll-view.js","contacts-section-view":"app/views/contacts-section-view.js","conversation-view":"app/views/conversation-view.js","favorites-section-view":"app/views/favorites-section-view.js","incoming-call-view":"app/views/incoming-call-view.js","outgoing-call-view":"app/views/outgoing-call-view.js","recents-section-view":"app/views/recents-section-view.js","chats-section-view":"app/views/chats-section-view.js","settings-section-view":"app/views/settings-section-view.js","social-view":"app/views/social-view.js","social-scroll-view":"app/views/social-scroll-view.js"},"app/views/outgoing-call-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/transitions/easing":"famous_modules/famous/transitions/easing/_git_master/index.js","famous/audio/sound-player":"app/custom/sound-player/sound-player.js","light-box":"app/custom/light-box/light-box.js",templates:"app/custom/templates/templates.js",models:"app/models/index.js"},"app/views/recent-item-view.js":{templates:"app/custom/templates/templates.js","row-view":"app/custom/row-view/index.js"},"app/views/recents-section-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","vertical-scroll-view":"app/custom/vertical-scroll-view/vertical-scroll-view.js","famous/engine":"famous_modules/famous/engine/_git_master/index.js",templates:"app/custom/templates/templates.js","recent-item-view":"app/views/recent-item-view.js"},"app/views/settings-section-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/views/scrollview":"famous_modules/famous/views/scrollview/_git_master/index.js",templates:"app/custom/templates/templates.js"},"app/views/social-item-view.js":{"famous/input/generic-sync":"famous_modules/famous/input/generic-sync/_git_master/index.js","famous/input/mouse-sync":"famous_modules/famous/input/mouse-sync/_git_master/index.js","famous/input/touch-sync":"famous_modules/famous/input/touch-sync/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js",templates:"app/custom/templates/templates.js","row-view":"app/custom/row-view/index.js",helpers:"app/custom/helpers/helpers.js"},"app/views/social-scroll-view.js":{"social-item-view":"app/views/social-item-view.js","contacts-scroll-view":"app/views/contacts-scroll-view.js"},"app/views/social-view.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/views/scrollview":"famous_modules/famous/views/scrollview/_git_master/index.js","famous/views/header-footer-layout":"famous_modules/famous/views/header-footer-layout/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/modifier":"famous_modules/famous/modifier/_git_master/index.js","famous/input/generic-sync":"famous_modules/famous/input/generic-sync/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","custom-input-sync":"app/custom/custom-input-sync/index.js","social-item-view":"app/views/social-item-view.js"},"app/views/unused-add-favorite-view.js":{"famous/views/header-footer-layout":"famous_modules/famous/views/header-footer-layout/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","up-down-transform":"app/custom/up-down-transform/up-down-transform.js"},"app/main/index.js":{vendor:"app/vendor/index.js","famous/polyfills":"famous_modules/famous/polyfills/_git_master/index.js","main-controller":"app/main/main-controller.js"},"app/main/main-controller.js":{"famous/engine":"famous_modules/famous/engine/_git_master/index.js","famous/surface":"famous_modules/famous/surface/_git_master/index.js","famous/transitions/easing":"famous_modules/famous/transitions/easing/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js",helpers:"app/custom/helpers/helpers.js","light-box":"app/custom/light-box/light-box.js",models:"app/models/index.js",views:"app/views/index.js",config:"app/main/config.js",app:"app/main/app.js"},"app/main/app.js":{"famous/view":"famous_modules/famous/view/_git_master/index.js","famous/event-handler":"famous_modules/famous/event-handler/_git_master/index.js","famous/render-node":"famous_modules/famous/render-node/_git_master/index.js","famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js","famous/transform":"famous_modules/famous/transform/_git_master/index.js","famous/views/header-footer-layout":"famous_modules/famous/views/header-footer-layout/_git_master/index.js","famous/views/edge-swapper":"famous_modules/famous/views/edge-swapper/_git_master/index.js","famous/widgets/tab-bar":"famous_modules/famous/widgets/tab-bar/_git_master/index.js",templates:"app/custom/templates/templates.js","row-view":"app/custom/row-view/index.js"},"app/main/config.js":{"famous/utilities/utility":"famous_modules/famous/utilities/utility/_git_master/index.js"}}});

//# sourceMappingURL=build.map.js
